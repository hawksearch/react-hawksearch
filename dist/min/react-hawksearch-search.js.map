{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/ConfigProvider.tsx","webpack:///./src/helpers/utils.ts","webpack:///./src/store/HawkState.ts","webpack:///./src/util/MergableState.ts","webpack:///./src/components/StoreProvider.tsx","webpack:///./src/models/Autocomplete/Request.ts","webpack:///./src/models/Autocomplete/Category.ts","webpack:///./src/models/Autocomplete/Product.ts","webpack:///./src/models/Autocomplete/Content.ts","webpack:///./src/models/Autocomplete/Popular.ts","webpack:///./src/models/Autocomplete/Response.ts","webpack:///./src/components/TrackingEvent.tsx","webpack:///./src/components/AuthToken.tsx","webpack:///./src/store/Store.ts","webpack:///./src/net/HawkClient.ts","webpack:///./src/models/Search/Pagination.ts","webpack:///./src/models/Search/Result.ts","webpack:///./src/models/Search/Sorting.ts","webpack:///./src/models/Search/Selections.ts","webpack:///./src/models/Facets/Value.ts","webpack:///./src/models/Facets/Swatch.ts","webpack:///./src/models/Facets/Range.ts","webpack:///./src/models/Facets/Facet.ts","webpack:///./src/models/Search/Rule.ts","webpack:///./src/models/Search/Trigger.ts","webpack:///./src/models/Search/Merchandising.ts","webpack:///./src/models/Search/PageContent.ts","webpack:///./src/models/Search/Response.ts","webpack:///./src/models/Search/ClientData.ts","webpack:///./src/models/Search/ContentType.ts","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/components/svg/PlusSVG.tsx","webpack:///./src/components/svg/MinusSVG.tsx","webpack:///./src/components/svg/QuestionmarkSVG.tsx","webpack:///./src/components/ui/Facets/Facet.tsx","webpack:///./src/util/History.ts","webpack:///./src/util/QueryString.ts","webpack:///./src/components/QueryStringListener.tsx","webpack:///./src/components/ui/SearchBox/SearchBox.tsx","webpack:///./src/components/ui/Facets/PlaceholderFacetValue.tsx","webpack:///./src/components/ui/Facets/PlaceholderFacet.tsx","webpack:///./src/components/ui/Facets/FacetList.tsx","webpack:///./src/components/ui/Facets/FacetRail.tsx","webpack:///./src/components/svg/LeftChevronSVG.tsx","webpack:///./src/components/svg/RightChevronSVG.tsx","webpack:///./src/components/ui/Results/Tools/Pager.tsx","webpack:///./src/components/ui/Results/Tools/ItemsPerPage.tsx","webpack:///./src/components/ui/Results/Tools/Pagination.tsx","webpack:///./src/components/ui/Results/Tools/Sorting.tsx","webpack:///./src/components/ui/Results/ToolRow.tsx","webpack:///./src/components/svg/PlaceholderSVG.tsx","webpack:///./src/components/ui/Results/PlaceholderImage.tsx","webpack:///./src/components/ui/Results/PlaceholderItem.tsx","webpack:///./src/components/ui/Spinner.tsx","webpack:///./src/components/ui/Results/ResultImage.tsx","webpack:///./src/components/ui/Results/ResultItem.tsx","webpack:///./src/components/ui/Results/ResultListing.tsx","webpack:///./src/components/svg/XCircleSVG.tsx","webpack:///./src/components/ui/Facets/Selections.tsx","webpack:///./src/components/ui/Facets/SearchResultsLabel.tsx","webpack:///./src/components/ui/Results/Results.tsx","webpack:///./src/app/App.tsx","webpack:///./src/components/Hawksearch.tsx","webpack:///./src/app/Search.tsx","webpack:///./src/components/svg/DashCircleSVG.tsx","webpack:///./src/components/svg/CheckmarkSVG.tsx","webpack:///./src/components/svg/PlusCircleSVG.tsx","webpack:///./src/components/ui/Facets/FacetTypes/Checkbox.tsx","webpack:///./src/components/ui/Facets/FacetTypes/Search.tsx","webpack:///./src/components/ui/Facets/FacetTypes/Link.tsx","webpack:///./src/components/ui/Facets/SliderCalendarInputs.tsx","webpack:///./src/components/ui/Facets/FacetTypes/SliderDate.tsx","webpack:///./src/components/ui/Facets/SliderNumericInputs.tsx","webpack:///./src/components/ui/Facets/FacetTypes/SliderNumeric.tsx","webpack:///./src/components/ui/Facets/FacetTypes/Slider.tsx","webpack:///./src/components/ui/Facets/FacetTypes/SwatchItem.tsx","webpack:///./src/components/ui/Facets/FacetTypes/Swatch.tsx","webpack:///./src/components/ui/Facets/FacetTypes/NestedItem.tsx","webpack:///./src/components/ui/Facets/FacetTypes/Nested.tsx","webpack:///./src/components/ui/Facets/FacetTypes/OpenRangeDatetime.tsx","webpack:///./src/components/ui/Facets/FacetTypes/OpenRangeNumber.tsx","webpack:///./src/components/ui/Facets/FacetTypes/OpenRange.tsx","webpack:///./src/components/ui/Facets/FacetTypes/NestedLinkItem.tsx","webpack:///./src/components/ui/Facets/FacetTypes/NestedLink.tsx","webpack:///./src/models/Facets/FacetType.ts","webpack:///./src/components/ui/Facets/Overrides.ts","webpack:///./src/models/Autocomplete/Suggestion.ts","webpack:///./src/components/ui/SearchBox/SearchSuggestionsList.tsx","webpack:///./src/components/ui/SearchBox/SearchSuggestions.tsx","webpack:///./src/components/ui/SearchBox/SearchBoxBase.tsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","ConfigContext","React","createContext","useHawkConfig","context","useContext","config","ConfigProvider","children","assetPath","path","startsWith","endsWith","__webpack_public_path__","Provider","getVisitorExpiry","Date","setTime","getTime","toUTCString","getVisitExpiry","createGuid","substr","Math","floor","random","join","getCookie","nameEQ","ca","cookie","split","charAt","substring","indexOf","setCookie","expiry","expires","useHawkState","initialSearch","initialValue","typeConstructor","state","setState","client","HawkClient","SearchStore","pendingSearch","FacetSelections","isLoading","itemsToCompare","comparedResults","itemsToCompareIds","productDetails","useState","prevState","newState","store","setStore","search","cancellationToken","searchResults","searchParams","IsInPreview","isInPreview","ClientGuid","clientGuid","Keyword","decodeURIComponent","SearchWithin","indexName","assign","IndexName","indexNameRequired","visitId","visitorId","updatedRequest","ClientData","VisitorId","VisitId","UserAgent","navigator","userAgent","PreviewBuckets","VisitorTargets","map","v","Id","axios","isCancel","requestError","Success","selectedFacets","keys","SortBy","PageNo","MaxPerPage","TrackingEvent","track","trackingId","TrackingId","typeId","SearchType","Refinement","keyword","Initial","Response","pinItem","updatePinOrder","getComparedItems","getProductDetails","setSearch","doHistory","setSearchSelections","selections","searchWithin","useEffect","cts","CancelToken","source","token","cancel","actor","toggleFacetValue","facet","facetValue","negate","facetName","Name","facetField","selectionField","valueValue","Value","valueLabel","Label","facetSelections","isFacetSelected","selState","selectionIndex","FacetSelectionState","Selected","Negated","setFacetValues","facetValues","clearFacet","clearFacetValue","NotSelected","clearAllFacets","setItemsToCompare","resultItem","isCheck","itemsArray","filter","item","DocId","setComparedResults","clearItemsToCompare","setProductDetailsResults","HawkContext","useHawksearch","StoreProvider","Category","init","SuggestionType","Suggestion","CategoryStrategy","downshift","location","Url","this","Product","ProductStrategy","ProductName","Content","ContentStrategy","Popular","PopularStrategy","Categories","Products","E_T","P_T","SuggestType","url","instance","trackingURL","guid","clientGUID","getClientGUID","pageType","documentElement","pl","EventType","pageLoad","EventData","btoa","JSON","stringify","PageTypeId","RequestPath","pathname","Qs","ViewportHeight","clientHeight","ViewportWidth","clientWidth","mr","queryId","QueryId","TypeId","uniqueId","click","UniqueId","bannerId","campaignId","bannerClick","CampaignId","BannerId","bannerImpression","orderNo","itemList","total","subTotal","tax","currency","sale","OrderNo","ItemList","Total","Tax","SubTotal","Currency","price","quantity","addToCart","Quantity","Price","args","add2CartMultiple","ItemsList","rate","widgetGuid","itemIndex","requestId","recommendationClick","ItemIndex","RequestId","WidgetGuid","suggestType","autoCompleteClick","fetch","method","headers","body","then","resp","log","status","catch","eventName","toLowerCase","writePageLoad","writeSearchTracking","writeClick","writeBannerClick","writeBannerImpression","writeSale","writeAdd2Cart","writeAdd2CartMultiple","writeRate","writeRecommendationClick","writeAutoCompleteClick","getInstance","AuthToken","accessToken","refreshToken","initial","selectionIdx","negationIdx","selectedValue","clientSelections","facets","Facets","find","f","label","items","forEach","fieldName","selectionValues","FieldType","selectionValue","matchingVal","findMatchingValue","Values","matchingValue","Children","baseUrl","apiUrl","dashboardUrl","searchUrl","autocompleteUrl","refreshTokenURL","pinItemURL","updatePinOrderURL","productDetailsURL","axiosInstance","interceptors","use","conf","getTokens","Authorization","common","response","originalRequest","_retry","post","URL","href","Token","RefreshToken","res","setTokens","defaults","compareItemsURL","cancelToken","Result","Pagination","Items","PaginationItem","field","Document","values","Sorting","SortingItem","Selections","selFacet","SelectionFacet","SelectionFacetValue","Swatch","Range","Facet","SwatchData","Ranges","DisplayType","TruncateThreshold","IsSearch","SearchThreshold","ParamName","Field","RuleType","RuleOperatorType","Rule","Parent","Rules","BannerTrigger","FeaturedItems","FeaturedItem","Merchandising","MerchandisingItem","PageContentItem","Trigger","PageContent","Results","ContentType","webpackContext","req","id","webpackContextResolve","code","PlusSVG","props","viewBox","className","class","focusable","aria-hidden","MinusSVG","QuestionmarkSVG","FacetContext","useFacet","searchActor","wrapperRef","useRef","setFilter","shouldTruncate","isTruncated","setTruncated","useCookies","cookies","cookieValue","IsCollapsible","IsCollapsedDefault","getInitialCollapsibleState","isCollapsed","setCollapsed","useTranslation","i18n","shouldSearch","val","remainingFacets","valuesBeforeTrunc","selectFacet","negateFacet","setFacets","decimalPrecision","renderer","renderTruncation","onClick","current","contains","toggleCollapsible","Tooltip","ref","dangerouslySetInnerHTML","__html","onChange","currentTarget","placeholder","history","createBrowserHistory","parseSearchQueryString","queryObj","params","URLSearchParams","parsed","encodeURIComponent","multipleValues","x","replace","parseQueryStringToObject","sort","pg","mpp","lp","PageId","lpurl","is100Coverage","ignoreSpellcheck","pageId","Number","CustomUrl","Is100CoverageTurnedOn","Boolean","IgnoreSpellcheck","checkIfUrlRefsLandingPage","getSearchQueryString","searchRequest","queryStringValues","escapedValues","unescapedValue","convertObjectToQueryString","String","doSearch","QueryStringListener","unlisten","listen","SearchBox","SuggestionList","SearchBoxBase","onViewMatches","inputValue","closeMenu","onSubmit","PlaceholderFacetValue","width","round","style","PlaceholderFacet","numValues","Array","_","FacetList","numPlaceholders","components","getFacetComponents","facetOverrides","IsVisible","registeredComponent","component","facetType","FacetType","Component","FacetId","FacetRail","LeftChevronSVG","RightChevronSVG","Pager","page","totalPages","onPageChange","setInputValue","hasError","setHasError","goToPage","pageNo","isNaN","doInputError","onInput","wantedPageNo","parseInt","preventDefault","onKeyDown","onKeyPress","keyCode","which","fromCharCode","match","onBlur","min","max","ItemsPerPage","paginationItem","PageSize","NofPages","sortingItem","ToolRow","PlaceHolderSVG","y","PlaceholderImage","showSpinner","PlaceholderItem","Spinner","isVisible","ResultImage","websiteUrl","itemTitleFieldName","imageUrlFieldName","onLoadCallBack","imageLoaded","setImageLoaded","imageUrl","getDocumentValue","itemName","RegExp","test","overflow","height","onLoad","alt","ResultItem","ResultListing","DefaultResultItem","results","XCircleSVG","fill","clearSelection","selection","negation","DataType","startDate","endDate","moment","format","displayValue","selectedRange","range","splittedValues","IsCurrency","CurrencySymbol","renderRange","renderLabel","SearchResultsLabel","setKeyword","AdjustedKeyword","App","renderSearchBox","elem","renderElem","searchBoxElement","getElementById","ReactDOM","createPortal","Hawksearch","trackEventUrl","setTrackingURL","setClientGUID","initializeSearch","searchElement","parseLocation","render","DashCircleSVG","CheckmarkSVG","PlusCircleSVG","Checkbox","renderCheckMark","isSelected","renderFacetActions","isNegated","correspondingRange","rangeValueAssetUrl","AssetFullUrl","selectionState","aria-pressed","title","textDecoration","Count","Search","hawkActor","input","setInput","Link","setLinkFacet","formatDate","unixFormat","date","getFullYear","toString","getMonth","getDate","SliderCalendarInputs","sliderProps","minValue","setMinValue","maxValue","setMaxValue","newMinValue","onValueChange","newMaxValue","Rheostat","lazy","replaceHyphen","SliderDate","RangeMin","rangeMin","setMinRange","RangeMax","rangeMax","setMaxRange","RangeStart","rangeStart","setStartRange","RangeEnd","rangeEnd","setEndRange","paramName","newRange","minVal","maxVal","formattedMinVal","formattedMaxVal","Suspense","fallback","currentMinValue","currentMaxValue","ceil","onValuesUpdated","newMin","newMax","SliderNumericInputs","reloadFacets","thousandSeparator","isCurrency","prefix","currencySymbol","formattedValue","decimalScale","SliderNumeric","parseFloat","toFixed","isCurency","setIsCurrency","setCurrencySymbol","selectedValues","Slider","SwatchItem","swatchValue","swatchUrl","facetSwatch","AssetUrl","AssetName","colorSwatchStyle","backgroundColor","Color","listItemClassNames","onSwatchSelected","isColor","NestedItem","isExpanded","setIsExpanded","setIsTruncated","hierarchyValue","hierarchyChildren","remainingValues","shouldTruncateChildren","onValueSelected","aria-expanded","Path","Nested","OpenRangeDatetime","daterange","rangeStartDate","rangeEndDate","minDateValue","setdateStartValue","maxDateValue","setdateEndValue","setdateFacetValues","startVal","endVal","OpenRangeNumber","setStartValue","setEndValue","data-type","OpenRange","NestedLinkItem","NestedLink","defaultFacetComponents","DefaultCheckbox","NestedCheckbox","DefaultNestedCheckbox","DefaultSearch","DefaultLink","DefaultSlider","DefaultSwatch","DefaultOpenRange","Nestedlink","DefaultNestedLink","defaultAutocompleteStrategies","SuggestionStrategy","overridedComponents","facetComponents","fType","fComponent","getAutocompleteStrategies","overridedStrategies","suggestionStrategies","sType","autocompleteStrategy","strategyMatch","suggestionType","SearchSuggestionsList","popular","categories","products","content","hasPopular","hasCategories","hasProducts","hasContent","hasAllEmpty","SearchSuggestions","query","setResults","setIsLoading","autocomplete","DisplayFullResponse","debounceMs","autocompleteDebounce","doAutocomplete","strategies","autocompleteStrategies","setInitialInput","stateReducer","changes","itemToString","matchedStrategy","strategy","handleToString","handleItemChange","initialInputValue","options","isOpen","getInputProps","openMenu","showSuggestions","aria-labelledby","onFocus"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAKlC,IAFGe,GAAqBA,EAAoBhB,GAEtCO,EAASC,QACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrBiB,EAAG,GAGAZ,EAAkB,GAQtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU8B,QAGnC,IAAIC,EAASH,EAAiB5B,GAAY,CACzCK,EAAGL,EACHgC,GAAG,EACHF,QAAS,IAUV,OANAhB,EAAQd,GAAUW,KAAKoB,EAAOD,QAASC,EAAQA,EAAOD,QAASJ,GAG/DK,EAAOC,GAAI,EAGJD,EAAOD,QAKfJ,EAAoBO,EAAI,SAAuBhC,GAC9C,IAAIiC,EAAW,GAKXC,EAAqBvB,EAAgBX,GACzC,GAA0B,IAAvBkC,EAGF,GAAGA,EACFD,EAASrB,KAAKsB,EAAmB,QAC3B,CAEN,IAAIC,EAAU,IAAIC,SAAQ,SAASC,EAASC,GAC3CJ,EAAqBvB,EAAgBX,GAAW,CAACqC,EAASC,MAE3DL,EAASrB,KAAKsB,EAAmB,GAAKC,GAGtC,IACII,EADAC,EAASC,SAASC,cAAc,UAGpCF,EAAOG,QAAU,QACjBH,EAAOI,QAAU,IACbnB,EAAoBoB,IACvBL,EAAOM,aAAa,QAASrB,EAAoBoB,IAElDL,EAAOO,IA1DV,SAAwB/C,GACvB,OAAOyB,EAAoBuB,EAAI,qBAAuB,CAAC,EAAI,oBAAoBhD,IAAUA,GAAW,MAyDrFiD,CAAejD,GAG5B,IAAIkD,EAAQ,IAAIC,MAChBZ,EAAmB,SAAUa,GAE5BZ,EAAOa,QAAUb,EAAOc,OAAS,KACjCC,aAAaX,GACb,IAAIY,EAAQ7C,EAAgBX,GAC5B,GAAa,IAAVwD,EAAa,CACf,GAAGA,EAAO,CACT,IAAIC,EAAYL,IAAyB,SAAfA,EAAMM,KAAkB,UAAYN,EAAMM,MAChEC,EAAUP,GAASA,EAAMQ,QAAUR,EAAMQ,OAAOb,IACpDG,EAAMW,QAAU,iBAAmB7D,EAAU,cAAgByD,EAAY,KAAOE,EAAU,IAC1FT,EAAMY,KAAO,iBACbZ,EAAMQ,KAAOD,EACbP,EAAMa,QAAUJ,EAChBH,EAAM,GAAGN,GAEVvC,EAAgBX,QAAWgE,IAG7B,IAAIpB,EAAUqB,YAAW,WACxB1B,EAAiB,CAAEmB,KAAM,UAAWE,OAAQpB,MAC1C,MACHA,EAAOa,QAAUb,EAAOc,OAASf,EACjCE,SAASyB,KAAKC,YAAY3B,GAG5B,OAAOJ,QAAQgC,IAAInC,IAIpBR,EAAoB4C,EAAIxD,EAGxBY,EAAoB6C,EAAI3C,EAGxBF,EAAoB8C,EAAI,SAAS1C,EAASiC,EAAMU,GAC3C/C,EAAoBgD,EAAE5C,EAASiC,IAClCvD,OAAOmE,eAAe7C,EAASiC,EAAM,CAAEa,YAAY,EAAMC,IAAKJ,KAKhE/C,EAAoBoD,EAAI,SAAShD,GACX,oBAAXiD,QAA0BA,OAAOC,aAC1CxE,OAAOmE,eAAe7C,EAASiD,OAAOC,YAAa,CAAEC,MAAO,WAE7DzE,OAAOmE,eAAe7C,EAAS,aAAc,CAAEmD,OAAO,KAQvDvD,EAAoBwD,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQvD,EAAoBuD,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAK7E,OAAO8E,OAAO,MAGvB,GAFA5D,EAAoBoD,EAAEO,GACtB7E,OAAOmE,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOvD,EAAoB8C,EAAEa,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIR3D,EAAoB+D,EAAI,SAAS1D,GAChC,IAAI0C,EAAS1C,GAAUA,EAAOqD,WAC7B,WAAwB,OAAOrD,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAL,EAAoB8C,EAAEC,EAAQ,IAAKA,GAC5BA,GAIR/C,EAAoBgD,EAAI,SAASgB,EAAQC,GAAY,OAAOnF,OAAOC,UAAUC,eAAeC,KAAK+E,EAAQC,IAGzGjE,EAAoBuB,EAAI,WAGxBvB,EAAoBkE,GAAK,SAASC,GAA2B,MAApBC,QAAQ3C,MAAM0C,GAAYA,GAEnE,IAAIE,EAAaC,OAAqB,aAAIA,OAAqB,cAAK,GAChEC,EAAmBF,EAAWlF,KAAK2E,KAAKO,GAC5CA,EAAWlF,KAAOf,EAClBiG,EAAaA,EAAWG,QACxB,IAAI,IAAI7F,EAAI,EAAGA,EAAI0F,EAAWxF,OAAQF,IAAKP,EAAqBiG,EAAW1F,IAC3E,IAAIU,EAAsBkF,EAI1BhF,EAAgBJ,KAAK,CAAC,IAAI,IAEnBM,I,kCC5NT,sDAIMgF,EAAgBC,IAAMC,cAAc,IAmCnC,SAASC,IACf,IAAMC,EAAUC,qBAAWL,GAE3B,IAAKI,EAAQE,OACZ,MAAM,IAAIrD,MACT,2GAIF,OAAOmD,EAGOG,IAhCf,YAAmE,IAAzCD,EAAyC,EAAzCA,OAAQE,EAAiC,EAAjCA,SACjC,GAAIF,EAAOG,UAAW,CACrB,IAAIC,EAAOJ,EAAOG,UAGbC,EAAKC,WAAW,OACpBD,EAAO,IAAMA,GAETA,EAAKE,SAAS,OAClBF,GAAc,KAKfG,IAA0BH,EAG3B,OAAO,kBAACV,EAAcc,SAAf,CAAwBhC,MAAO,CAAEwB,WAAWE,K,kxDCpCvCO,EAAmB,WAC/B,IAAM1C,EAAI,IAAI2C,KAGd,OADA3C,EAAE4C,QAAQ5C,EAAE6C,UAAY,SACjB7C,EAAE8C,eAGGC,EAAiB,WAC7B,IAAM/C,EAAI,IAAI2C,KAGd,OADA3C,EAAE4C,QAAQ5C,EAAE6C,UAAY,OACjB7C,EAAE8C,eAGGE,EAAa,WAGzB,IAFA,IAAM7F,EAAW,GAERtB,EAAI,EAAGA,EAAI,GAAIA,IACvBsB,EAAEtB,GAFe,mBAEAoH,OAAOC,KAAKC,MAAsB,GAAhBD,KAAKE,UAAkB,GAQ3D,OANAjG,EAAE,IAAM,IAERA,EAAE,IANgB,mBAMA8F,OAAgB,EAAR9F,EAAE,IAAa,EAAK,GAC9CA,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IAAM,IAElBA,EAAEkG,KAAK,KAIRC,EAAY,SAAA/D,GAIxB,IAHA,IAAMgE,EAAShE,EAAO,IAChBiE,EAAKtF,SAASuF,OAAOC,MAAM,KAExB7H,EAAI,EAAGA,EAAI2H,EAAGzH,OAAQF,IAAK,CAEnC,IADA,IAAIkE,EAAIyD,EAAG3H,GACY,MAAhBkE,EAAE4D,OAAO,IACf5D,EAAIA,EAAE6D,UAAU,EAAG7D,EAAEhE,QAEtB,GAA0B,IAAtBgE,EAAE8D,QAAQN,GACb,OAAOxD,EAAE6D,UAAUL,EAAOxH,OAAQgE,EAAEhE,QAGtC,OAAO,MAGK+H,EAAY,SAACvE,EAAMkB,EAAOsD,GACtC,IAAIC,EAEHA,EADGD,EACO,aAAeA,EAEf,GAEX7F,SAASuF,OAASlE,EAAO,IAAMkB,EAAQuD,EAAU,Y,8yECwC3C,SAASC,EAAaC,GAA8D,ICvF1FC,EACAC,EACmC,EAC5BC,EAAOC,EDqFNrC,EAAWH,cAAXG,OAEFsC,EAAS,IAAIC,IAAWvC,GAH4D,KCvF1FkC,ED6FC,IAAIM,IAAY,CACfC,cAAeR,GAAiB,CAC/BS,gBAAiB,IAElBC,WAAW,EACXC,eAAgB,GAChBC,gBAAiB,GACjBC,kBAAmB,GACnBC,eAAgB,KCpGlBZ,EDsGCK,ICrGkC,IACTQ,mBAAS,IAAIb,EAAgBD,IADpB,GAC5BE,EAD4B,KACrBC,EADqB,KAyB5B,CAACD,EAtBR,SAA0B5D,GAgBzB6D,EAfqB,mBAAV7D,EAeF,SAAAyE,GAER,OAAO,IAAId,EAAJ,OAAyBc,GAAczE,KAdrC,SAAAyE,GAER,IAAMC,EAAW1E,EAAMyE,GAGvB,OAAO,IAAId,EAAJ,OAAyBc,GAAcC,SDyEyC,GAKnFC,EALmF,KAK5EC,EAL4E,cAqC3EC,EArC2E,mFAqC1F,WAAsBC,GAAtB,mGACCF,EAAS,CAAET,WAAW,IAElBY,EAAiC,KAC/BC,EAJP,OAMKL,EAAMV,eANX,IAQEgB,YAAazD,EAAO0D,YAEpBC,WAAY3D,EAAO4D,WACnBC,QAASV,EAAMV,cAAcoB,QAC1BC,mBAAmBX,EAAMV,cAAcoB,SAAW,IAClDV,EAAMV,cAAcoB,QACvBE,aAAcZ,EAAMV,cAAcsB,aAC/BD,mBAAmBX,EAAMV,cAAcsB,cAAgB,IACvDZ,EAAMV,cAAcsB,eAIpB/D,EAAOgE,WACVjK,OAAOkK,OAAOT,EAAc,CAAEU,UAAWlE,EAAOgE,aAI7ChE,EAAOmE,mBAAsBX,EAAaU,UAzB/C,uBA0BEd,EAAS,CAAET,WAAW,IA1BxB,iCA8BKyB,EAAU/C,EAAU,iBACpBgD,EAAYhD,EAAU,mBACrB+C,IACJvC,EAAU,gBAAiBd,IAAcD,KACzCsD,EAAU/C,EAAU,kBAEhBgD,IACJxC,EAAU,kBAAmBd,IAAcN,KAC3C4D,EAAYhD,EAAU,oBAEjBiD,EAxCP,GAyCEC,WAAY,CACXC,UAAWH,GAAa,GACxBI,QAASL,GAAW,GACpBM,UAAWC,UAAUC,UACrBC,eAAgB1B,EAAMI,cAAgBJ,EAAMI,cAAcuB,eAAeC,KAAI,SAAAC,GAAC,OAAIA,EAAEC,MAAM,KAExFzB,GA/CL,oBAmDwBlB,EAAOe,OAAOiB,EAAgBhB,GAnDtD,QAmDEC,EAnDF,8DAqDM2B,IAAMC,SAAN,MArDN,mDA0DE9F,QAAQ3C,MAAM,wBAAd,MACA0G,EAAS,CAAEgC,cAAc,IA3D3B,QA8DChC,EAAS,CAAET,WAAW,IAElBY,IACEA,EAAc8B,SAIZC,EAAiB9B,EAAad,gBAAkB3I,OAAOwL,KAAK/B,EAAad,iBAAmB,GAEjGc,EAAagC,QACbhC,EAAaiC,QACbjC,EAAakC,YACbJ,EAAexL,QACf0J,EAAaO,aAEb4B,IAAcC,MAAM,iBAAkB,CACrCC,WAAYtC,EAAcuC,WAC1BC,OAAQC,IAAWC,WACnBC,QAAS1C,EAAaK,UAGvB8B,IAAcC,MAAM,iBAAkB,CACrCC,WAAYtC,EAAcuC,WAC1BC,OAAQC,IAAWG,QACnBD,QAAS1C,EAAaK,UAGxBT,EAAS,CACRG,cAAe,IAAI6C,IAAS7C,GAC5B6B,cAAc,MAzBf/F,QAAQ3C,MAAM,uBAAwB6G,GACtCH,EAAS,CAAEgC,cAAc,MAnE5B,4DArC0F,uEAsI1F,WAAuB7H,EAAyB+F,GAAhD,gGACchB,EAAO+D,QAAQ9I,EAAS+F,GADtC,oFAtI0F,uEA0I1F,WAA8B/F,EAA8B+F,GAA5D,gGACchB,EAAOgE,eAAe/I,EAAS+F,GAD7C,oFA1I0F,uEAmJ1F,WACC/F,EACA+F,GAFD,gGAIchB,EAAOiE,iBAAiBhJ,EAAS+F,GAJ/C,oFAnJ0F,uEA8J1F,WACC/F,EACA+F,GAFD,gGAIchB,EAAOkE,kBAAkBjJ,EAAS+F,GAJhD,oFA9J0F,sBA4K1F,SAASmD,EAAUhE,EAAiCiE,QACjClJ,IAAdkJ,IACHA,GAAY,GAGbtD,GAAS,SAAAH,GACR,IAAMC,EAAW,CAChBT,cAAe,OAAKQ,EAAUR,eAAkBA,GAChDiE,aAMD,MAJuC,KAAnCxD,EAAST,cAAcoB,UAC1BX,EAAST,cAAcoB,aAAUrG,GAG3B0F,KAUT,SAASyD,EAAoBC,EAA8BC,GAC1DJ,EAAU,CACT/D,gBAAiBkE,EACjB7C,aAAc8C,EAIdpB,YAAQjI,IAxLVsJ,qBAAU,WAGT,IAAMC,EAAM7B,IAAM8B,YAAYC,SAG9B,OAFA5D,EAAO0D,EAAIG,OAEJ,WACNH,EAAII,YAEH,CAAChE,EAAMV,gBA0YV,IAAM2E,EAAqB,CAC1B/D,SACAoD,YACAY,iBAnND,SAA0BC,EAAuBC,EAA4BC,QAC7DhK,IAAXgK,IACHA,GAAS,GAGV,IAAMC,EAAqC,iBAAVH,EAAqBA,EAAQA,EAAMI,KAC9DC,EAA8B,iBAAVL,EAAqBA,EAAQA,EAAMM,eAEvDC,EAAmC,iBAAfN,EAA0BA,EAAaA,EAAWO,MACtEC,EAAmC,iBAAfR,EAA0BA,EAAaA,EAAWS,MAE5E,GAAKH,EAAL,CAKA,IAAII,EAAkB9E,EAAMV,cAAcC,gBAI1C,GAAmB,iBAAfiF,EAAJ,CAOKM,IACJA,EAAkB,IAGdA,EAAgBN,KACpBM,EAAgBN,GAAc,IAhCqE,MAmCxDxE,EAAM+E,gBAAgBZ,EAAOC,GAA1DY,EAnCqF,EAmC5F/F,MAAiBgG,EAnC2E,EAmC3EA,eAErBD,IAAaE,IAAoBC,UAAYH,IAAaE,IAAoBE,SAIjFN,EAAgBN,GAAa3M,OAAOoN,EAAiB,IAGnDD,IAAaE,IAAoBC,UAAYd,GAC7CW,IAAaE,IAAoBE,UAAYf,IAG9CS,EAAgBN,GAAavN,KAAKoN,EAAS,IAAH,OAAOK,GAAeA,IAM/DI,EAAgBN,GAAavN,KAAKoN,EAAS,IAAH,OAAOK,GAAeA,GAGnB,IAAxCI,EAAgBN,GAAa7N,eAEzBmO,EAAgBN,GAGxBhB,EAAoBsB,EAAiB9E,EAAMV,cAAcsB,mBAxCxD4C,EAAoBsB,EAAoCJ,QAVxDxI,QAAQ3C,MAAR,gBAAuB+K,EAAvB,aAAqCE,EAArC,oCAA2EI,KAwM5ES,eAnJD,SAAwBlB,EAAuBmB,GAC9C,IAAMhB,EAA6B,iBAAVH,EAAqBA,EAAQA,EAAMI,KACtDC,EAA8B,iBAAVL,EAAqBA,EAAQA,EAAMM,eAEzDK,EAAkB9E,EAAMV,cAAcC,gBAErCuF,IACJA,EAAkB,IAGnBA,EAAgBN,GAAc,GAVuD,Q,goBAAA,CAY5Dc,GAZ4D,IAYrF,2BAAsC,KAA3BlB,EAA2B,QAC/BM,EAAmC,iBAAfN,EAA0BA,EAAaA,EAAWO,MACtEC,EAAmC,iBAAfR,EAA0BA,EAAaA,EAAWS,MAE5E,IAAKH,EAEJ,YADAxI,QAAQ3C,MAAR,gBAAuB+K,EAAvB,aAAqCE,EAArC,oCAA2EI,IAI5EE,EAAgBN,GAAavN,KAAKyN,IArBkD,8BAwBrFlB,EAAoBsB,EAAiB9E,EAAMV,cAAcsB,eA4HzD2E,WArHD,SAAoBpB,GACnB,IAAMK,EAA8B,iBAAVL,EAAqBA,EAAQA,EAAMM,eAEvDK,EAAkB9E,EAAMV,cAAcC,gBAIzB,iBAAfiF,EAOCM,GAAoBA,EAAgBN,YAKlCM,EAAgBN,GAEvBhB,EAAoBsB,EAAiB9E,EAAMV,cAAcsB,eAZxD4C,EAAoBsB,OAAoCzK,IA6GzDmL,gBAzFD,SAAyBrB,EAAuBC,GAC/C,IAAME,EAA6B,iBAAVH,EAAqBA,EAAQA,EAAMI,KACtDC,EAA8B,iBAAVL,EAAqBA,EAAQA,EAAMM,eAEvDC,EAAmC,iBAAfN,EAA0BA,EAAaA,EAAWO,MACtEC,EAAmC,iBAAfR,EAA0BA,EAAaA,EAAWS,MAE5E,GAAKH,EAOL,GAAmB,iBAAfF,EAAJ,CAd2E,MAqB/BxE,EAAM+E,gBAAgBZ,EAAOC,GAA1DY,EArB4D,EAqBnE/F,MAAiBgG,EArBkD,EAqBlDA,eAEzB,GAAID,IAAaE,IAAoBO,YAArC,CAKA,IAAMX,EAAkB9E,EAAMV,cAAcC,gBAG5CuF,EAAgBN,GAAa3M,OAAOoN,EAAiB,GAET,IAAxCH,EAAgBN,GAAa7N,eAEzBmO,EAAgBN,GAGxBhB,EAAoBsB,EAAiB9E,EAAMV,cAAcsB,oBAtBxD4C,EAAoBxD,EAAMV,cAAcC,qBAAoClF,QAR5E6B,QAAQ3C,MAAR,gBAAuB+K,EAAvB,aAAqCE,EAArC,oCAA2EI,KAkF5Ec,eA9CD,WACClC,OAAoBnJ,OAAWA,IA8C/B6I,QA9ayF,8CA+azFC,eA/ayF,8CAgbzFwC,kBA7CD,SAA2BC,EAAoBC,GAC9C,IAAIC,EAAa,EAAI9F,EAAMP,gBAG1BqG,EAFGD,EAEU,GAAH,SAAOC,GAAe,CAACF,IAGpBE,EAAWC,QAAO,SAAAC,GAAI,OAAIA,EAAKC,QAAUL,EAAWK,SAGlEhG,EAAS,CACRR,eAAgBqG,EAChBnG,kBAAmBmG,EAAWlE,KAAI,SAAAoE,GAAI,OAAIA,EAAKC,YAkChDC,mBA9BD,SAA4B/P,GAC3B8J,EAAS,CACRP,gBAAiBvJ,KA6BlBgQ,oBAnBD,WACClG,EAAS,CACRR,eAAgB,GAChBE,kBAAmB,MAiBpByD,iBAnbyF,8CAobzFC,kBApbyF,8CAqbzF+C,yBA5BD,SAAkCjQ,GACjC8J,EAAS,CACRL,eAAgBzJ,MA6BlB,MAAO,CAAC6J,EAAOiE,G,k9BE9gBhB,IAAMoC,EAAc7J,IAAMC,cAAc,IA+BjC,SAAS6J,IACf,OAAO1J,qBAAWyJ,GAGJE,IAbf,YAA4E,IAAnDzH,EAAmD,EAAnDA,cAAe/B,EAAoC,EAApCA,SAAoC,IACpD8B,EAAaC,GADuC,GACpEkB,EADoE,KAC7DiE,EAD6D,KAG3E,OAAO,kBAACoC,EAAYhJ,SAAb,CAAsBhC,MAAO,CAAE2E,QAAOiE,UAAUlH,K,0MC7BjD,I,86CCCA,IAAMyJ,EAAb,a,kOAAA,iBASC,WAAmBC,GAAgB,2BAClC,cAAMC,IAAeF,WADa,qCAElC5P,OAAOkK,OAAP,KAAoB2F,GAFc,EATpC,UAA8BE,KAejBC,EAAb,kC,UAAA,O,EAAA,G,EAAA,+BACC,SAAwBZ,EAAgBa,GACvCC,SAAShG,OAAOkF,EAAKe,OAFvB,sBAKC,SAAgBf,GACf,OAAOgB,KAAOhB,EAAKrB,MAAQ,Q,2BAN7B,K,u6CCbO,IAAMsC,EAAb,a,kOAAA,iBAsBC,WAAmBR,GAAe,2BACjC,cAAMC,IAAeO,UADY,sIAEjCrQ,OAAOkK,OAAP,KAAoB2F,GAFa,EAtBnC,UAA6BE,KA4BhBO,EAAb,kC,UAAA,O,EAAA,G,EAAA,+BACC,SAAwBlB,EAAea,GACtCC,SAAShG,OAAOkF,EAAKe,OAFvB,sBAKC,SAAgBf,GACf,OAAOgB,KAAOhB,EAAKmB,YAAc,Q,2BANnC,K,u6CC7BO,IAAMC,EAAb,a,kOAAA,iBAYC,WAAmBX,GAAe,2BACjC,cAAMC,IAAeU,UADY,oFAEjCxQ,OAAOkK,OAAP,KAAoB2F,GAFa,EAZnC,UAA6BE,KAkBhBU,EAAb,kC,UAAA,O,EAAA,G,EAAA,+BACC,SAAwBrB,EAAea,GACtCC,SAAShG,OAAOkF,EAAKe,OAFvB,sBAKC,SAAgBf,GACf,OAAOgB,KAAOhB,EAAKrB,MAAQ,Q,2BAN7B,K,u6CCnBO,IAAM2C,EAAb,a,kOAAA,iBAOC,WAAmBb,GAAe,2BACjC,cAAMC,IAAeY,UADY,qCAEjC1Q,OAAOkK,OAAP,KAAoB2F,GAFa,EAPnC,UAA6BE,KAahBY,EAAb,kC,UAAA,O,EAAA,G,EAAA,+BACC,SAAwBvB,EAAea,GACtCC,SAAShG,OAAOkF,EAAKe,OAFvB,sBAKC,SAAgBf,GACf,OAAOgB,KAAOhB,EAAKrB,MAAQ,Q,2BAN7B,K,wHCXO,IAAM1B,EA8DZ,WAAmBwD,I,4FAAgB,2YAClC7P,OAAOkK,OAAOkG,KAAMP,GAEpBO,KAAKQ,WAAaf,EAAKe,WAAW5F,KAAI,SAAA1G,GAAC,OAAI,IAAIsL,EAAStL,MACxD8L,KAAKS,SAAWhB,EAAKgB,SAAS7F,KAAI,SAAA1G,GAAC,OAAI,IAAI+L,EAAQ/L,MACnD8L,KAAKM,QAAUb,EAAKa,QAAQ1F,KAAI,SAAA1G,GAAC,OAAI,IAAIoM,EAAQpM,MACjD8L,KAAKI,QAAUX,EAAKW,QAAQxF,KAAI,SAAA1G,GAAC,OAAI,IAAIkM,EAAQlM,Q,kUCzE9CwM,EAcAC,EAQOC,EAOA/E,E,2CA7BP6E,O,uBAAAA,I,mBAAAA,I,iBAAAA,I,yBAAAA,I,eAAAA,I,eAAAA,I,6BAAAA,I,uCAAAA,I,8CAAAA,I,0CAAAA,I,yCAAAA,M,cAcAC,O,eAAAA,I,qBAAAA,I,eAAAA,I,iBAAAA,I,oBAAAA,M,cAQOC,O,qCAAAA,I,iCAAAA,I,yCAAAA,I,0CAAAA,M,cAOA/E,O,qBAAAA,I,4BAAAA,M,SAKNL,E,WASL,c,4FAAsB,kE,iDAQtB,SAA0BqF,GAKzB,OAJKrF,EAAcsF,WAClBtF,EAAcsF,SAAW,IAAItF,GAGvBA,EAAcsF,a,+BAQtB,SAAsBD,GACrBb,KAAKe,YAAcF,I,4BAGpB,WACC,OAAOb,KAAKe,c,2BAGb,SAAqBC,GACpBhB,KAAKiB,WAAaD,I,2BAGnB,WACC,OAAOhB,KAAKkB,gB,8BAGb,WACC,IAAMtN,EAAI,IAAI2C,KAGd,OADA3C,EAAE4C,QAAQ5C,EAAE6C,UAAY,SACjB7C,EAAE8C,gB,4BAGV,WACC,IAAM9C,EAAI,IAAI2C,KAGd,OADA3C,EAAE4C,QAAQ5C,EAAE6C,UAAY,OACjB7C,EAAE8C,gB,wBAGV,WAGC,IAFA,IAAM3F,EAAW,GAERtB,EAAI,EAAGA,EAAI,GAAIA,IACvBsB,EAAEtB,GAFe,mBAEAoH,OAAOC,KAAKC,MAAsB,GAAhBD,KAAKE,UAAkB,GAQ3D,OANAjG,EAAE,IAAM,IAERA,EAAE,IANgB,mBAMA8F,OAAgB,EAAR9F,EAAE,IAAa,EAAK,GAC9CA,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IAAM,IAElBA,EAAEkG,KAAK,M,uBAIrB,SAAkB9D,GAIjB,IAHA,IAAMgE,EAAShE,EAAO,IAChBiE,EAAKtF,SAASuF,OAAOC,MAAM,KAExB7H,EAAI,EAAGA,EAAI2H,EAAGzH,OAAQF,IAAK,CAEnC,IADA,IAAIkE,EAAIyD,EAAG3H,GACY,MAAhBkE,EAAE4D,OAAO,IACf5D,EAAIA,EAAE6D,UAAU,EAAG7D,EAAEhE,QAEtB,GAA0B,IAAtBgE,EAAE8D,QAAQN,GACb,OAAOxD,EAAE6D,UAAUL,EAAOxH,OAAQgE,EAAEhE,QAGtC,OAAO,O,uBAGR,SAAkBwD,EAAMkB,EAAOsD,GAC9B,IAAIC,EAEHA,EADGD,EACO,aAAeA,EAEf,GAEX7F,SAASuF,OAASlE,EAAO,IAAMkB,EAAQuD,EAAU,a,2BAGlD,SAAsBuJ,GACrB,IAAMxN,EAAI7B,SAASsP,gBACbC,EAAK,CACVC,UAAWZ,EAAIa,SACfC,UAAWC,KACVC,KAAKC,UAAU,CACdC,WAAYjB,EAAIQ,GAChBU,YAAazM,OAAO0K,SAASgC,SAC7BC,GAAI3M,OAAO0K,SAAS5G,OACpB8I,eAAgBrO,EAAEsO,aAClBC,cAAevO,EAAEwO,gBAIpBnC,KAAKoC,GAAGf,K,iCAGT,SAA4B3F,EAAYE,GACnCA,IAAWC,EAAWG,SACzBgE,KAAKtI,UAAU,gBAAiBsI,KAAKpJ,cAEtC,IAAMyL,EAAUrC,KAAK9I,UAAU,iBACzBvD,EAAI7B,SAASsP,gBACbC,EAAK,CACVC,UAAWZ,EAAIxH,OACfsI,UAAWC,KACVC,KAAKC,UAAU,CACdW,QAASD,EACT1G,WAAYD,EACZ6G,OAAQ3G,EACRoG,eAAgBrO,EAAEsO,aAClBC,cAAevO,EAAEwO,gBAIpBnC,KAAKoC,GAAGf,K,wBAGT,SAAmB5O,EAAO+P,EAAU9G,EAAYmF,GAC/C,IAAMlN,EAAI7B,SAASsP,gBACbC,EAAK,CACVC,UAAWZ,EAAI+B,MACfjB,UAAWC,KACVC,KAAKC,UAAU,CACd5B,IAAKc,EACLkB,GAAI3M,OAAO0K,SAAS5G,OACpB2I,YAAazM,OAAO0K,SAASgC,SAC7BnG,WAAYD,EACZgH,SAAUF,EACVR,eAAgBrO,EAAEsO,aAClBC,cAAevO,EAAEwO,gBAIpBnC,KAAKoC,GAAGf,K,8BAGT,SAAyBsB,EAAUC,EAAYlH,GAC9C,IAAM2F,EAAK,CACVC,UAAWZ,EAAImC,YACfrB,UAAWC,KACVC,KAAKC,UAAU,CACdmB,WAAYF,EACZG,SAAUJ,EACVhH,WAAYD,MAIfsE,KAAKoC,GAAGf,K,mCAGT,SAA8BsB,EAAUC,EAAYlH,GACnD,IAAM2F,EAAK,CACVC,UAAWZ,EAAIsC,iBACfxB,UAAWC,KACVC,KAAKC,UAAU,CACdmB,WAAYF,EACZG,SAAUJ,EACVhH,WAAYD,MAIfsE,KAAKoC,GAAGf,K,uBAET,SAAkB4B,EAASC,EAAUC,EAAOC,EAAUC,EAAKC,GAC1D,IAAMjC,EAAK,CACVC,UAAWZ,EAAI6C,KACf/B,UAAWC,KACVC,KAAKC,UAAU,CACd6B,QAASP,EACTQ,SAAUP,EACVQ,MAAOP,EACPQ,IAAKN,EACLO,SAAUR,EACVS,SAAUP,MAIbtD,KAAKoC,GAAGf,K,2BAET,SAAsBmB,EAAUsB,EAAOC,EAAUT,GAChD,IAAMjC,EAAK,CACVC,UAAWZ,EAAIsD,UACfxC,UAAWC,KACVC,KAAKC,UAAU,CACde,SAAUF,EACVyB,SAAUF,EACVG,MAAOJ,EACPD,SAAUP,MAIbtD,KAAKoC,GAAGf,K,mCAGT,SAA8B8C,GAC7B,IAAM9C,EAAK,CACVC,UAAWZ,EAAI0D,iBACf5C,UAAWC,KACVC,KAAKC,UAAU,CACd0C,UAAWF,MAIdnE,KAAKoC,GAAGf,K,uBAGT,SAAkBmB,EAAUnO,GAC3B,IAAMgN,EAAK,CACVC,UAAWZ,EAAI4D,KACf9C,UAAWC,KACVC,KAAKC,UAAU,CACde,SAAUF,EACV7E,MAAOtJ,MAIV2L,KAAKoC,GAAGf,K,sCAGT,SAAiCkD,EAAY/B,EAAUgC,EAAWC,GACjE,IAAMpD,EAAK,CACVC,UAAWZ,EAAIgE,oBACflD,UAAWC,KACVC,KAAKC,UAAU,CACdgD,UAAWH,EACXI,UAAWH,EACX/B,SAAUF,EACVqC,WAAYN,MAIfvE,KAAKoC,GAAGf,K,oCAGT,SAA+BtF,EAAS+I,EAAa3R,EAAM0N,GAC1D,IAAMQ,EAAK,CACVC,UAAWZ,EAAIqE,kBACfvD,UAAWC,KACVC,KAAKC,UAAU,CACdjI,QAASqC,EACTwB,KAAMpK,EACNyN,YAAakE,EACb/E,IAAKc,MAIRb,KAAKoC,GAAGf,K,gBAGT,SAAWlS,GACV,IAAI8K,EAAU+F,KAAK9I,UAAU,iBACzBgD,EAAY8F,KAAK9I,UAAU,mBAC1B+C,IACJ+F,KAAKtI,UAAU,gBAAiBsI,KAAKpJ,aAAcoJ,KAAKrJ,kBACxDsD,EAAU+F,KAAK9I,UAAU,kBAErBgD,IACJ8F,KAAKtI,UAAU,kBAAmBsI,KAAKpJ,aAAcoJ,KAAK1J,oBAC1D4D,EAAY8F,KAAK9I,UAAU,oBAE5B,IAAMmK,EAAKzR,OAAOkK,OACjB,CACCN,WAAYwG,KAAKiB,WACjB3G,QAASL,EACTI,UAAWH,GAIZ/K,GAED6V,MAAMhF,KAAKe,YAAa,CACvBkE,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMzD,KAAKC,UAAUN,KAEpB+D,MAAK,SAAAC,GACLnQ,QAAQoQ,IAAI,WAAYD,EAAKE,WAE7BC,OAAM,SAAAjT,GACN2C,QAAQ3C,MAAM,SAAUA,Q,mBAI3B,SAAakT,EAAWtB,GACvB,GAAKnE,KAAKe,aAAgBf,KAAKiB,WAG/B,OAAQwE,EAAUC,eACjB,IAAK,WAEJ,OAAO1F,KAAK2F,cAAcxB,EAAKhD,UAChC,IAAK,iBAGJ,OAAOnB,KAAK4F,oBAAoBzB,EAAKzI,WAAYyI,EAAKvI,QACvD,IAAK,QAEJ,OAAOoE,KAAK6F,WAAW1B,EAAK1R,MAAO0R,EAAK3B,SAAU2B,EAAKzI,WAAY,IACpE,IAAK,cAEJ,OAAOsE,KAAK8F,iBAAiB3B,EAAKxB,SAAUwB,EAAKvB,WAAYuB,EAAKzI,YACnE,IAAK,mBAEJ,OAAOsE,KAAK+F,sBAAsB5B,EAAKxB,SAAUwB,EAAKvB,WAAYuB,EAAKzI,YACxE,IAAK,OAEJ,OAAOsE,KAAKgG,UAAU7B,EAAKlB,QAASkB,EAAKjB,SAAUiB,EAAKhB,MAAOgB,EAAKf,SAAUe,EAAKd,IAAKc,EAAKb,UAC9F,IAAK,WAEJ,OAAOtD,KAAKiG,cAAc9B,EAAK3B,SAAU2B,EAAKL,MAAOK,EAAKJ,SAAUI,EAAKb,UAC1E,IAAK,mBAEJ,OAAOtD,KAAKkG,sBAAsB/B,GACnC,IAAK,OAEJ,OAAOnE,KAAKmG,UAAUhC,EAAK3B,SAAU2B,EAAK9P,OAC3C,IAAK,sBAEJ,OAAO2L,KAAKoG,yBAAyBjC,EAAKI,WAAYJ,EAAK3B,SAAU2B,EAAKK,UAAWL,EAAKM,WAC3F,IAAK,oBAEJ,OAAOzE,KAAKqG,uBAAuBlC,EAAKpI,QAASoI,EAAKW,YAAaX,EAAKhR,KAAMgR,EAAKtD,W,kCAvVjFrF,E,mBA6VSA,MAAc8K,e,kUC/XvBC,E,WASL,c,4FAAsB,oE,iDAQtB,SAA0B1F,GAKzB,OAJK0F,EAAUzF,WACdyF,EAAUzF,SAAW,IAAIyF,GAGnBA,EAAUzF,a,0BAGlB,SAAiB0F,EAAqBC,GACrCzG,KAAKyG,aAAeA,EACpBzG,KAAKwG,YAAcA,I,uBAGpB,WACC,MAAO,CACNC,aAAczG,KAAKyG,aACnBD,YAAaxG,KAAKwG,kB,kCAjCfD,E,mBAsCSA,MAAUD,e,i1CClClB,IAAKpI,E,6EAAAA,O,6BAAAA,I,uBAAAA,I,sBAAAA,M,KAyBL,IAAM7F,EAAb,WAsBC,WAAmBqO,I,4FAAgC,+RAClD9W,OAAOkK,OAAOkG,KAAM0G,G,UAvBtB,O,EAAA,G,EAAA,0BA6BC,WACC,OAAO1G,KAAKxH,YAAcwH,KAAK5G,gBA9BjC,6BAsCC,SAAuB+D,EAAuBC,GAC7C,IAAME,EAA6B,iBAAVH,EAAqBA,EAAQA,EAAMI,KACtDC,EAA8B,iBAAVL,EAAqBA,EAAQA,EAAMM,eAEvDC,EAAmC,iBAAfN,EAA0BA,EAAaA,EAAWO,MACtEC,EAAmC,iBAAfR,EAA0BA,EAAaA,EAAWS,MAE5E,IAAKH,EAEJ,OADAxI,QAAQ3C,MAAR,gBAAuB+K,EAAvB,aAAqCE,EAArC,oCAA2EI,IACpE,CAAE3F,MAAOiG,EAAoBO,aAGrC,IAAMX,EAAkBkC,KAAK1H,cAAcC,gBAE3C,IAAKuF,IAAoBA,EAAgBN,GACxC,MAAO,CAAEvF,MAAOiG,EAAoBO,aAGrC,IAAMkI,EAAe7I,EAAgBN,GAAa/F,QAAQiG,GACpDkJ,EAAc9I,EAAgBN,GAAa/F,QAA7B,WAAyCiG,IAE7D,OAAsB,IAAlBiJ,EAEI,CACN1O,MAAOiG,EAAoBC,SAC3B0I,cAAenJ,EACfO,eAAgB0I,IAEU,IAAjBC,EAEH,CACN3O,MAAOiG,EAAoBE,QAC3ByI,cAAe,IAAF,OAAMnJ,GACnBO,eAAgB2I,GAIX,CAAE3O,MAAOiG,EAAoBO,eA3EtC,2BAoFC,WAA+C,aAI1CuB,KAFH1H,cAAkCwO,EAFW,EAE5BvO,gBAAmCqB,EAFP,EAEOA,aACpDR,EACG4G,KADH5G,cAEKqD,EAA+B,GAErC,IAAKqK,IAAqBlN,EACzB,OAAO6C,EAQR,IAAMsK,EAAS3N,EAAgBA,EAAc4N,OAAS,KAEtD,IAAKD,EAGJ,OAAOtK,EAKR,GAAI7C,EAAc,CACjB,IAAMuD,EAAQ4J,EAAOE,MAAK,SAAAC,GAAC,MAAyB,iBAArBA,EAAEzJ,kBAE7BN,IACHV,EAAWC,aAAe,CACzBS,QACAgK,MAAOhK,EAAMI,KACb6J,MAAO,CACN,CACCD,MAAOvN,EACPvF,MAAOuF,MAOZ,OAAKkN,GAILlX,OAAOwL,KAAK0L,GAAkBO,SAAQ,SAAAC,GACrC,IAAMC,EAAkBT,EAAiBQ,GAEzC,GAAKC,EAAL,CAKA,IAAMpK,EAAQ4J,EAAOE,MAAK,SAAAC,GAAC,OAAIA,EAAEzJ,iBAAmB6J,KAEpD,GAAKnK,EAAL,CAKA,IAAMiK,EAAgC,GAEtC,GAAwB,UAApBjK,EAAMqK,UAITD,EAAgBF,SAAQ,SAAAI,GACvBL,EAAMnX,KAAK,CACVkX,MAAOM,EACPpT,MAAOoT,WAGH,IAAwB,QAApBtK,EAAMqK,UAEhB,OAIAD,EAAgBF,SAAQ,SAAAI,GACvB,IAAMC,EAAc,EAAKC,kBAAkBF,EAAgBtK,EAAMyK,QAE5DF,GAAgBA,EAAY7J,OAMjCuJ,EAAMnX,KAAK,CACVkX,MAAOO,EAAY7J,MACnBxJ,MAAOoT,OAKVhL,EAAW6K,GAAa,CACvBnK,QACAgK,MAAOhK,EAAMI,KACb6J,cAIK3K,GA3DCA,IAhIV,+BA8LC,SAA0BgL,EAAwBnJ,GACjD,IAAIuJ,EAA8B,KAClC,IAAKvJ,GAAsC,IAAvBA,EAAY3O,OAC/B,OAAO,KAH6E,UAM5D2O,GAN4D,IAMrF,2BAAsC,KAA3BlB,EAA2B,QASrC,GAHCyK,EALqBzK,EAAWO,QAAU8J,GAAkB,WAAIrK,EAAWO,SAAY8J,EAKvErK,EAFA4C,KAAK2H,kBAAkBF,EAAgBrK,EAAW0K,UAMlE,OAAOD,GAhB4E,8BAoBrF,OAAOA,O,2BAlNT,M,mqBCnBMzP,E,WAaL,WAAYvC,GAA0B,Y,4FAAA,wVAFCkF,IAAMrG,UAG5CsL,KAAK+H,QAAUlS,EAAOmS,QAAU,uCAChChI,KAAKiI,aAAepS,EAAOoS,cAAgB,8BAC3CjI,KAAKkI,UAAYrS,EAAOqS,WAAa,iBACrClI,KAAKmI,gBAAkBtS,EAAOsS,iBAAmB,oBACjDnI,KAAKoI,gBAAkBvS,EAAOuS,iBAAmB,uCACjDpI,KAAKqI,WAAaxS,EAAOwS,YAAc,4BACvCrI,KAAKsI,kBAAoBzS,EAAOyS,mBAAqB,iCACrDtI,KAAKuI,kBAAoB1S,EAAO0S,mBAAqB,oCAErDvI,KAAKwI,cAAcC,aAAarV,QAAQsV,KACvC,SAAAC,GACC,IAAMnC,EAAcD,IAAUqC,YAAYpC,YAQ1C,OAPmD,KAA9CmC,EAAK9H,KAAO,IAAIpJ,QAAQ,kBAA4B+O,GAIxDmC,EAAKzD,QAAQ2D,cAAb,iBAAuCrC,GACvCmC,EAAKzD,QAAQ1L,WAAa3D,EAAO4D,oBAJ1BkP,EAAKzD,QAAQ4D,OAAOD,qBACpBF,EAAKzD,QAAQ4D,OAAOtP,YAKrBmP,KAER,SAAApW,GACCd,QAAQE,OAAOY,MAGjByN,KAAKwI,cAAcC,aAAaM,SAASL,KACxC,SAAAK,GAAQ,OAAIA,KACZ,SAAAxW,GACC,IAAMyW,EAAkBzW,EAAMsD,OAE9B,GAA8B,MAA1BtD,EAAMwW,SAASxD,SAAmByD,EAAgBC,OAAQ,CAC7DD,EAAgBC,QAAS,EACzB,IAAMlM,EAAQwJ,IAAUqC,YACxB,OAAO,EAAKJ,cACVU,KAAK,IAAIC,IAAI,EAAKf,gBAAiB,EAAKL,SAASqB,KAAM,CACvD5P,WAAY3D,EAAO4D,WACnB4P,MAAOtM,EAAMyJ,YACb8C,aAAcvM,EAAM0J,eAEpBrB,MAAK,SAAAmE,GACL,GAAmB,MAAfA,EAAIhE,OAGP,OAFAgB,IAAUiD,UAAUD,EAAIpa,KAAKka,MAAOE,EAAIpa,KAAKma,cAC7C,EAAKd,cAAciB,SAASvE,QAAQ4D,OAAOD,cAAgB,UAAYU,EAAIpa,KAAKka,MACzE,EAAKb,cAAcQ,MAK9B,OAAOvX,QAAQE,OAAOY,MAGxByN,KAAK0J,gBAAkB7T,EAAO6T,iBAAmB,e,wFAGlD,WAAqBtW,EAAyB+F,GAA9C,sGACsB6G,KAAKwI,cAAcU,KAAU,IAAIC,IAAInJ,KAAKqI,WAAYrI,KAAK+H,SAASqB,KAAMhW,EAAS,CACvGuW,YAAaxQ,IAFf,cACO3I,EADP,yBAIQA,EAAOrB,MAJf,gD,0GAOA,WAA4BiE,EAA8B+F,GAA1D,sGACsB6G,KAAKwI,cAAcU,KAAU,IAAIC,IAAInJ,KAAKsI,kBAAmBtI,KAAK+H,SAASqB,KAAMhW,EAAS,CAC9GuW,YAAaxQ,IAFf,cACO3I,EADP,yBAIQA,EAAOrB,MAJf,gD,kGAOA,WAAoBiE,EAAwB+F,GAA5C,sGACsB6G,KAAKwI,cAAcU,KACvC,IAAIC,IAAInJ,KAAKkI,UAAWlI,KAAK+H,SAASqB,KACtChW,EACA,CACCuW,YAAaxQ,IALhB,cACO3I,EADP,yBAQQA,EAAOrB,MARf,gD,wGAWA,WACCiE,EACA+F,GAFD,sGAIsB4B,IAAMmO,KAC1B,IAAIC,IAAInJ,KAAKmI,gBAAiBnI,KAAK+H,SAASqB,KAC5ChW,EACA,CACCuW,YAAaxQ,IARhB,cAIO3I,EAJP,yBAYQA,EAAOrB,MAZf,gD,4GAeA,WACCiE,EACA+F,GAFD,sGAIsB4B,IAAMmO,KAC1B,IAAIC,IAAInJ,KAAK0J,gBAAiB1J,KAAK+H,SAASqB,KAC5ChW,EACA,CACCuW,YAAaxQ,IARhB,cAIO3I,EAJP,yBAYQA,EAAOrB,MAZf,gD,6GAeA,WACCiE,EACA+F,GAFD,sGAIsB4B,IAAMmO,KAAa,IAAIC,IAAInJ,KAAKuI,kBAAmBvI,KAAK+H,SAASqB,KAAMhW,EAAS,CACpGuW,YAAaxQ,IALf,cAIO3I,EAJP,yBAOQ,IAAIoZ,IAAOpZ,EAAOrB,OAP1B,gD,mFAWciJ,O,0TChJR,IAAMyR,EAgBZ,WAAmBpK,GAAkB,gJACpC7P,OAAOkK,OAAOkG,KAAMP,GAEpBO,KAAK8J,MAAQrK,EAAKqK,MAAMlP,KAAI,SAAAnL,GAAC,OAAI,IAAIsa,EAAeta,OAIzCsa,EAYZ,WAAmBtK,GAAsB,8GACxC7P,OAAOkK,OAAOkG,KAAMP,I,8RClCf,IAAMmK,EAAb,WAoCC,WAAmBnK,I,4FAAc,+JAChC7P,OAAOkK,OAAOkG,KAAMP,G,UArCtB,O,EAAA,G,EAAA,+BAwBC,SAAwBuK,GACvB,GAAIhK,KAAKiK,SAAU,CAClB,IAAMC,EAASlK,KAAKiK,SAASD,GAE7B,GAAIE,GAAUA,EAAOva,OAAS,EAC7B,OAAOua,EAAO,S,2BA7BlB,K,sNCFO,IAAMC,EAIZ,WAAmB1K,GAAe,iCACjC7P,OAAOkK,OAAOkG,KAAMP,GAEpBO,KAAK8J,MAAQrK,EAAKqK,MAAMlP,KAAI,SAAAnL,GAAC,OAAI,IAAI2a,EAAY3a,OAItC2a,EAcZ,WAAmB3K,GAAmB,6GACrC7P,OAAOkK,OAAOkG,KAAMP,I,sNC1Bf,IAAM4K,EAGZ,WAAmB5K,GAAkB,qBACpC7P,OAAOkK,OAAOkG,KAAMP,GAEpB7P,OAAOwL,KAAKqE,GAAM4H,SAAQ,SAAA1S,GACzB,IAAM2V,EAAW7K,EAAK9K,GAEtB,EAAKA,GAAO,IAAI4V,EAAeD,OAKrBC,EAOZ,WAAmB9K,GAAsB,wDACxC7P,OAAOkK,OAAOkG,KAAMP,GAEpBO,KAAK8J,MAAQrK,EAAKqK,MAAMlP,KAAI,SAAAnL,GAAC,OAAI,IAAI+a,EAAoB/a,OAI9C+a,EAOZ,WAAmB/K,GAA2B,wDAC7C7P,OAAOkK,OAAOkG,KAAMP,I,wHCpCf,IAAM9B,EA2CZ,WAAmB8B,I,4FAAa,yRAC/B7P,OAAOkK,OAAOkG,KAAMP,I,wHC5Cf,IAAMgL,EAeZ,WAAmBhL,I,4FAAc,uIAChC7P,OAAOkK,OAAOkG,KAAMP,I,wHChBf,IAAMiL,EAgBZ,WAAmBjL,I,4FAAa,gKAC/B7P,OAAOkK,OAAOkG,KAAMP,I,8RCZf,IAAMkL,EAAb,WAwIC,WAAmBlL,I,4FAAa,87BAC/B7P,OAAOkK,OAAOkG,KAAMP,GAEpBO,KAAK4K,WAAanL,EAAKmL,WAAWhQ,KAAI,SAAA7J,GAAC,OAAI,IAAI0Z,EAAO1Z,MACtDiP,KAAK6K,OAASpL,EAAKoL,OAAOjQ,KAAI,SAAA1G,GAAC,OAAI,IAAIwW,EAAMxW,MAC7C8L,KAAK4H,OAASnI,EAAKmI,OAAOhN,KAAI,SAAAC,GAAC,OAAI,IAAI8C,EAAM9C,M,UA7I/C,O,EAAA,G,EAAA,2BAqHC,WAEC,MAA4B,eAArBmF,KAAK8K,aAAgC9K,KAAK4H,OAAOjY,OAASqQ,KAAK+K,oBAvHxE,wBA0HC,WAGC,OAAO/K,KAAKgL,UAAYhL,KAAK4H,OAAOjY,OAASqQ,KAAKiL,kBA7HpD,0BAoIC,WACC,OAAOjL,KAAKkL,UAAYlL,KAAKkL,UAAYlL,KAAKmL,W,2BArIhD,K,wHCLO,IAkBKC,EAKAC,EAvBCC,EASZ,WAAmB7L,I,4FAAY,qLAC9B7P,OAAOkK,OAAOkG,KAAMP,GAChBA,EAAK8L,SACRvL,KAAKuL,OAAS,IAAID,EAAK7L,EAAK8L,SAE7BvL,KAAKwL,MAAQ/L,EAAK+L,MAAQ/L,EAAK+L,MAAM5Q,KAAI,SAAAnL,GAAC,OAAI,IAAI6b,EAAK7b,MAAM,I,kIAInD2b,O,iBAAAA,I,gBAAAA,M,cAKAC,O,aAAAA,I,aAAAA,I,gBAAAA,M,KCrBL,IAAMI,EAMZ,WAAmBhM,I,4FAAqB,+GACvC7P,OAAOkK,OAAOkG,KAAMP,GAEpBO,KAAKsL,KAAO,IAAIA,EAAKtL,KAAKsL,O,q+CCPrB,IAAMI,EAGZ,WAAmBjM,GAAqB,iCACvC7P,OAAOkK,OAAOkG,KAAMP,GAChBA,GAAQA,EAAKqK,QAChB9J,KAAK8J,MAAQrK,EAAKqK,MAAMlP,KAAI,SAAAnL,GAAC,OAAI,IAAIkc,EAAalc,QAKxCmc,EAGZ,WAAmBnM,GAAqB,iCACvC7P,OAAOkK,OAAOkG,KAAMP,GAChBA,GAAQA,EAAKqK,QAChB9J,KAAK8J,MAAQrK,EAAKqK,MAAMlP,KAAI,SAAAnL,GAAC,OAAI,IAAIoc,EAAkBpc,QAK7Cqc,EA6BZ,WAAmBrM,GAAuB,uwBACzC7P,OAAOkK,OAAOkG,KAAMP,GAChBA,EAAKiM,gBACR1L,KAAK0L,cAAgBjM,EAAKiM,cAAc9Q,KAAI,SAAAnL,GAAC,OAAI,IAAIma,EAAOna,OAEzDgQ,EAAKsM,UACR/L,KAAK+L,QAAU,IAAIN,EAAchM,EAAKsM,WAK5BJ,EAAb,8BAGC,WAAmBlM,GAAoB,2BACtC,cAAMA,IADgC,gBAEtC7P,OAAOkK,OAAP,KAAoB2F,GACpB,EAAKqK,MAAQrK,EAAKqK,MAAMlP,KAAI,SAAAnL,GAAC,OAAI,IAAIma,EAAOna,MAHN,EAHxC,UAAkCqc,GAUrBD,EAAb,8BACC,WAAmBpM,GAAyB,uBAC3C,cAAMA,GACN7P,OAAOkK,OAAP,KAAoB2F,GAFuB,EAD7C,UAAuCqM,G,wHC1EhC,IAAME,EAGZ,WAAmBvM,I,4FAAmB,0DACrC7P,OAAOkK,OAAOkG,KAAMP,GACpBO,KAAK8J,MAAQrK,EAAKqK,MAAMlP,KAAI,SAAAnL,GAAC,OAAI,IAAIqc,EAAgBrc,O,wHCEhD,IAAMwM,EAmFZ,WAAmBwD,I,4FAAgB,kzBAClC7P,OAAOkK,OAAOkG,KAAMP,GAEpBO,KAAK6J,WAAa,IAAIA,EAAWpK,EAAKoK,YACtC7J,KAAK4L,cAAgB,IAAIA,EAAcnM,EAAKmM,eAC5C5L,KAAK0L,cAAgB,IAAIA,EAAcjM,EAAKiM,eAC5C1L,KAAKiM,QAAUxM,EAAKwM,QAAQrR,KAAI,SAAA1G,GAAC,OAAI,IAAI0V,EAAO1V,MAChD8L,KAAKgH,OAASvH,EAAKuH,OAAOpM,KAAI,SAAAsM,GAAC,OAAI,IAAIyD,EAAMzD,MAC7ClH,KAAKgM,YAAcvM,EAAKuM,YAAcvM,EAAKuM,YAAYpR,KAAI,SAAAvI,GAAC,OAAI,IAAI2Z,EAAY3Z,MAAM,GACtF2N,KAAKqK,WAAa,IAAIA,EAAW5K,EAAK4K,YACtCrK,KAAKmK,QAAU,IAAIA,EAAQ1K,EAAK0K,UCrG3B,ICDK+B,G,SAAAA,K,cAAAA,E,gBAAAA,E,oBAAAA,E,gBAAAA,E,2BAAAA,M,0BCAZ,IAAItR,EAAM,CACT,OAAQ,GACR,UAAW,GACX,OAAQ,GACR,UAAW,GACX,aAAc,GACd,UAAW,GACX,aAAc,GACd,UAAW,GACX,aAAc,GACd,UAAW,GACX,aAAc,GACd,UAAW,GACX,aAAc,GACd,UAAW,GACX,aAAc,GACd,UAAW,GACX,OAAQ,GACR,UAAW,GACX,OAAQ,GACR,UAAW,GACX,OAAQ,GACR,UAAW,GACX,OAAQ,GACR,UAAW,GACX,OAAQ,GACR,UAAW,GACX,aAAc,GACd,UAAW,GACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,gBAAiB,IACjB,aAAc,IACd,gBAAiB,IACjB,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,WAAY,IACZ,cAAe,IACf,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,YAAa,IACb,eAAgB,IAChB,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,aAAc,IACd,gBAAiB,IACjB,WAAY,IACZ,UAAW,IACX,aAAc,IACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,YAAa,IACb,eAAgB,IAChB,UAAW,IACX,OAAQ,IACR,UAAW,IACX,aAAc,IACd,gBAAiB,IACjB,OAAQ,IACR,UAAW,IACX,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,IACd,UAAW,IACX,aAAc,KAIf,SAASuR,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOtb,EAAoBub,GAE5B,SAASC,EAAsBF,GAC9B,IAAItb,EAAoBgD,EAAE8G,EAAKwR,GAAM,CACpC,IAAI/a,EAAI,IAAImB,MAAM,uBAAyB4Z,EAAM,KAEjD,MADA/a,EAAEkb,KAAO,mBACHlb,EAEP,OAAOuJ,EAAIwR,GAEZD,EAAe/Q,KAAO,WACrB,OAAOxL,OAAOwL,KAAKR,IAEpBuR,EAAeza,QAAU4a,EACzBnb,EAAOD,QAAUib,EACjBA,EAAeE,GAAK,K,qGChRLG,MARf,SAAiBC,GAChB,OACC,uBAAKC,QAAQ,YAAYC,UAAW,QAAUF,EAAMG,MAAOC,UAAU,QAAQC,cAAY,QACxF,wBAAMlZ,EAAE,sNCKImZ,MARf,SAAkBN,GACjB,OACC,uBAAKC,QAAQ,YAAYC,UAAW,QAAUF,EAAMG,MAAOC,UAAU,QAAQC,cAAY,QACxF,wBAAMlZ,EAAE,0GCOIoZ,MAVf,SAAyBP,GACxB,OACC,uBAAKC,QAAQ,YAAYC,UAAW,QAAUF,EAAMG,MAAOC,UAAU,QAAQC,cAAY,QACxF,wBAAMlZ,EAAE,wRACR,wBAAMA,EAAE,kWACR,wBAAMA,EAAE,8oB,29BCRX,IAAMqZ,EAAezX,IAAMC,cAAc,IAmOlC,SAASyX,IACf,OAAOtX,qBAAWqX,GAGJtC,IAvJf,YAAgD,IAA/BxN,EAA+B,EAA/BA,MAAOpH,EAAwB,EAAxBA,SACRoX,EAAgB7N,cAAvBrC,MACFmQ,EAAaC,iBAAyB,MAFG,IAGnBxU,mBAAS,IAHU,GAGxCkG,EAHwC,KAGhCuO,EAHgC,SAIXzU,mBAASsE,EAAMoQ,gBAJJ,GAIxCC,EAJwC,KAI3BC,EAJ2B,SAKlBC,YAAW,CAACvQ,EAAMgO,QALA,GAKxCwC,EALwC,KAK/BjW,EAL+B,SAMXmB,mBAdrC,SAAoCsE,EAAmBwQ,GACtD,IAAMC,EAAcD,EAAQxQ,EAAMgO,OAClC,YAAoB9X,IAAhBua,EACoB,SAAhBA,EAEDzQ,EAAM0Q,eAAiB1Q,EAAM2Q,mBASSC,CAA2B5Q,EAAOwQ,IANhC,GAMxCK,EANwC,KAM3BC,EAN2B,OAO3BC,cAAZ5Z,EAPuC,EAOvCA,EAPuC,EAOpC6Z,KAgCX,IAAI7P,EAAcnB,EAAMyK,OAGpBzK,EAAMiR,cAAgBrP,IACzBT,EAAcnB,EAAMyK,OAAO7I,QAAO,SAAAsP,GACjC,QAAKA,EAAIxQ,QAMyD,IAA3DwQ,EAAIxQ,MAAM6H,cAAcjO,QAAQsH,EAAO2G,mBAKhD,IAAI4I,EAAkB,EAEtB,GAAInR,EAAMoQ,gBAAkBC,EAAa,CACxC,IAAMe,EAAoBjQ,EAAY3O,OAEtC2O,EAAcA,EAAYhJ,MAAM,EAAG6H,EAAM4N,mBAEzCuD,EAAkBC,EAAoBpR,EAAM4N,kBAG7C,IAAM9N,EAAoB,CACzBuR,YAzDD,SAAqBpR,GACpBkQ,EAAU,IACVH,EAAYjQ,iBAAiBC,EAAOC,IAwDpCqR,YAhDD,SAAqBrR,GACpBkQ,EAAU,IACVH,EAAYjQ,iBAAiBC,EAAOC,GAAyB,IAgD7DsR,UAvDD,SAAmBxE,GAClBoD,EAAU,IACVH,EAAY9O,eAAelB,EAAO+M,IAuDlCoD,YAEAG,eACAQ,gBAGKhW,EAAoB,CACzBqG,cAEAS,SAEAyO,cACAQ,cACAM,kBACAK,iBAAkB,GAGbC,EAA0B,CAC/BC,iBAjED,WAGC,OACC,oCACE1R,EAAMoQ,iBAAmBxO,GACzB,4BAAQ+P,QAAS,kBAAM7R,EAAMwQ,cAAcD,IAAcb,UAAU,kCACjEa,EAAc,YAAH,OAAec,EAAf,SAAwC,oBAqEzD,OACC,kBAACrB,EAAa5W,SAAd,CAAuBhC,MAAO,CAAE8I,QAAOlF,QAAOgF,QAAO2R,aACpD,yBAAKjC,UAAU,0BACd,yBAAKA,UAAU,iCAAiCmC,QAAS,SAAArc,GAAK,OAXjE,SAA2BA,GACtB2a,EAAW2B,SAAW3B,EAAW2B,QAAQC,SAASvc,EAAMQ,UAG5DyE,EAAUyF,EAAMgO,OAAQ6C,GACxBC,GAAcD,IAMsDiB,CAAkBxc,KACnF,4BAAK0K,EAAMI,MACVJ,EAAM+R,SACN,yBAAKvC,UAAU,iBAAiBwC,IAAK/B,GACpC,kBAAC,EAAD,CAAiBR,MAAM,sBACvB,yBAAKD,UAAU,SACd,yBAAKyC,wBAAyB,CAAEC,OAAQlS,EAAM+R,WAC9C,8BAIFlB,EACA,oCACC,kBAAC,EAAD,MADD,IACa,0BAAMrB,UAAU,mBAAhB,yBAA+D,KAG5E,oCACC,kBAAC,EAAD,MADD,IACc,0BAAMA,UAAU,mBAAhB,8BAKdqB,GACD,yBAAKrB,UAAU,+BACbxP,EAAMiR,cACN,yBAAKzB,UAAU,wCACd,2BACCtY,MAAO0K,EACPuQ,SAAU,SAAAje,GAAC,OAAIic,EAAUjc,EAAEke,cAAclb,QACzCtB,KAAK,OACLyc,YAAalb,EAAE,mBAMjByB,O,ukCCjOM0Z,EAAUC,c,8tDC6FhB,SAASC,EAAuBzW,GACtC,IAAM0W,EA/DP,SAAkC1W,GACjC,IAAM2W,EAAS,IAAIC,gBAAgB5W,GAE7B6W,EAA4B,GAsClC,OApCAF,EAAOxI,SAAQ,SAAChT,EAAOM,GACtB,GACS,YAARA,GACQ,SAARA,GACQ,OAARA,GACQ,OAARA,GACQ,WAARA,GACQ,UAARA,GACQ,QAARA,GACQ,iBAARA,GACQ,kBAARA,GACQ,cAARA,GACQ,qBAARA,EAGAob,EAAOpb,GAAOqb,mBAAmB3b,OAC3B,CAGN,IAAKA,EAEJ,OAOD,IAHA,IAAM4b,EAAiB5b,EAAMiD,MAAM,KAG1B4Y,EAAI,EAAGA,EAAID,EAAetgB,SAAUugB,EAC5CD,EAAeC,GAAKD,EAAeC,GAAGC,QAAQ,KAAM,KAGrDJ,EAAOpb,GAAOsb,MAITF,EAsBUK,CAAyBlX,GAIzC6C,EAYG6T,EAZH7T,QACAsU,EAWGT,EAXHS,KACAC,EAUGV,EAVHU,GACAC,EASGX,EATHW,IACAC,EAQGZ,EARHY,GACAC,EAOGb,EAPHa,OACAC,EAMGd,EANHc,MACAhU,EAKGkT,EALHlT,aACAiU,EAIGf,EAJHe,cACA9W,EAGG+V,EAHH/V,UACA+W,EAEGhB,EAFHgB,iBACG9S,EAhBoE,EAiBpE8R,EAjBoE,mHAoBlEiB,EAASL,GAAMC,EACrB,MAAO,CACN/W,QAASgX,GAASG,EAAS,GAAK9U,EAEhCV,OAAQgV,EACR/U,OAAQgV,EAAKQ,OAAOR,QAAMjd,EAC1BkI,WAAYgV,EAAMO,OAAOP,QAAOld,EAChCod,OAAQI,EAASC,OAAOD,QAAUxd,EAClC0d,UAAWL,EACX9W,aAAc8C,EACdsU,sBAAuBL,EAAgBM,QAAQN,QAAiBtd,EAChEkF,gBAAiBuF,EACjB/D,UAAWF,EACXqX,iBAAkBN,EAAwC,SAArBA,OAA8Bvd,GAI9D,SAAS8d,EAA0Blb,EAAciS,GACvD,QAAKjS,IAKAA,EAAKE,SAAS,OAClBF,GAAc,KAGViS,EAAU/R,SAAS,OACvB+R,GAAwB,KAGlBjS,IAASiS,GA2DV,SAASkJ,EAAqBC,GAiBpC,OApED,SAAoCzB,GACnC,IAAM0B,EAA8B,GAEpC,IAAK,IAAM3c,KAAOib,EACjB,GAAIA,EAAS9f,eAAe6E,GAC3B,GACS,YAARA,GACQ,SAARA,GACQ,OAARA,GACQ,QAARA,GACQ,iBAARA,GACQ,kBAARA,GACQ,cAARA,GACQ,qBAARA,EACC,CACD,IAAMN,EAAQub,EAASjb,GAEvB,GAAIN,QAGH,SAGD,GAAqB,iBAAVA,EACV,MAAM,IAAI7B,MAAJ,UAAamC,EAAb,sBAIP2c,EAAkBrhB,KAAK0E,EAAM,IAAMN,OAC7B,CACN,IADM,EAIAkd,EAA0B,GAJ1B,IACS3B,EAASjb,IADlB,IAMN,2BAAqC,KAA1B6c,EAA0B,QACpCD,EAActhB,KAAKuhB,EAAerB,QAAQ,IAAK,QAP1C,8BAUNmB,EAAkBrhB,KAAK0E,EAAM,IAAM4c,EAActa,KAAK,MAKzD,MAAO,IAAMqa,EAAkBra,KAAK,KAwB7Bwa,C,+VAhBa,CAAH,CAChB1V,QAASsV,EAAc3X,QAEvB2W,KAAMgB,EAAchW,OACpBiV,GAAIe,EAAc/V,OAASoW,OAAOL,EAAc/V,aAAUjI,EAC1Dkd,IAAKc,EAAc9V,WAAamW,OAAOL,EAAc9V,iBAAclI,EACnEsd,cAAeU,EAAcL,sBAAwBU,OAAOL,EAAcL,4BAAyB3d,EACnGqJ,aAAc2U,EAAczX,aAC5BC,UAAWwX,EAActX,UACzB6W,iBACES,EAAcH,kBAAqBG,EAAcH,iBAE/CQ,OAAOL,EAAcH,uBADrB7d,GAEDge,EAAc9Y,kB,YCpNfoZ,GAAW,EAsDAC,MApDf,WAA+B,MACLtS,cAAjBtG,EADsB,EACtBA,MAAOiE,EADe,EACfA,MAgDf,OA9CAN,qBAAU,WAGT,IAAMkV,EAAWpC,EAAQqC,QAAO,SAAAhS,GAC/B,GAAK6R,EAAL,CAMA,IAAMN,EAAgB1B,EAAuB7P,EAAS5G,QAEtD+D,EAAMX,UACL+U,GAGc,QAVdM,GAAW,KAcb,OAAO,WACNE,QAIFlV,qBAAU,WAIL3D,EAAMuD,YAGToV,GAAW,EAEXlC,EAAQxf,KAAK,CACZiJ,OAAQkY,EAAqBpY,EAAMV,oBAGnC,CAACU,EAAMV,gBAGVqE,qBAAU,WACT,IAAMkT,EAAS,IAAIC,gBAAgBhQ,SAAS5G,QAC5CqN,IAAUiD,UAAUqG,EAAO5b,IAAI,UAAY,IAAK4b,EAAO5b,IAAI,iBAAmB,IAAIkc,QAAQ,KAAM,MAAQ,MACtG,IAEI,M,QCHO4B,MAtCf,YAAuD,IAAlCC,EAAkC,EAAlCA,eAAkC,EAC7B1S,cAAjBtG,EAD8C,EAC9CA,MAAOiE,EADuC,EACvCA,MAyBf,OACC,yBAAK0P,UAAU,mBACd,kBAACsF,EAAA,EAAD,CACCC,cAbH,SAA8BrS,GAA+C,IACpEsS,EAA0BtS,EAA1BsS,WAAYC,EAAcvS,EAAduS,UACpBnV,EAAMX,UAAU,CACfmU,YAAQpd,EACR0d,eAAW1d,EACXqG,QAASyY,GAAc,KAExBC,KAOEra,aAAciB,GAASA,EAAMV,cAAgBU,EAAMV,cAAcoB,QAAU,GAC3E2Y,SA5BH,SAAsB5f,EAA8CoN,GACjD,UAAdpN,EAAMkC,KACTsI,EAAMX,UAAU,CACfmU,YAAQpd,EACR0d,eAAW1d,EACXqG,QAASsW,mBAAmBvd,EAAM8c,cAAclb,OAChDkE,qBAAiBlF,EACjB6d,kBAAkB,KAsBlBc,eAAgBA,M,i+BC/BLM,MAhBf,WAAiC,IACzBC,EADyB,EAChB1Z,mBAAS/B,KAAK0b,MAAM,IAAA1b,KAAKE,SAAyB,MADlC,MAGhC,OACC,wBAAI2V,UAAU,oCACb,0BAAMA,UAAU,gFAEhB,4BAAQA,UAAU,8BACjB,0BAAMA,UAAU,+BACf,yBAAKA,UAAU,0CAA0C8F,MAAO,CAAEF,MAAO,GAAF,OAAKA,EAAL,a,mzCCiB7DG,MAxBf,WAA4B,IACpBH,EADoB,EACX1Z,mBAAS/B,KAAK0b,MAAM,IAAA1b,KAAKE,SAAyB,MADvC,MAEpB2b,EAFoB,EAEP9Z,mBAAS/B,KAAK0b,MAAM,EAAA1b,KAAKE,SAAqB,IAFvC,MAI3B,OACC,yBAAK2V,UAAU,0BACd,yBAAKA,UAAU,kCACd,yBAAKA,UAAU,6CAA6C8F,MAAO,CAAEF,MAAO,GAAF,OAAKA,EAAL,UAE3E,yBAAK5F,UAAU,+BACd,yBAAKA,UAAU,2EACd,yBAAKA,UAAU,0CACd,wBAAIA,UAAU,+BACZ,EAAIiG,MAAMD,IAAY/X,KAAI,SAACiY,EAAGpjB,GAAJ,OAC1B,kBAAC,EAAD,CAAuBkF,IAAKlF,a,2zCCoCrBqjB,MA9Cf,WAAqB,IAEV1Z,EACNkG,cADHtG,MAASI,cAGFvD,EAAWH,cAAXG,OAGDkd,EARa,EAQMla,mBAAS/B,KAAK0b,MAAM,EAAA1b,KAAKE,SAAqB,IARpD,MAUdgc,EAAaC,YAAmBpd,EAAOqd,gBAAkB,IAE/D,OACC,yBAAKvG,UAAU,+BACbvT,EAEEA,EAAc4N,OAAOpM,KAAI,SAAAuC,GACzB,IAAKA,EAAMgW,UACV,OAAO,KAER,GAAwB,QAApBhW,EAAMqK,UACT,OAAO,KAER,IAAM4L,EAAsBJ,EAAW/L,MACtC,SAAAoM,GAAS,OAAIA,EAAUC,YAAcnW,EAAMoW,aAEtCC,EAAaJ,EAA6BA,EAAoBC,UAA3B,KAEzC,OACC,kBAAC1I,EAAA,EAAD,CAAOhW,IAAKwI,EAAMsW,QAAStW,MAAOA,GAChCqW,EACA,kBAACA,EAAD,MAEA,6BACErW,EAAMqK,UADR,IACoBrK,EAAMoW,UAD1B,4BAQH,EAAIX,MAAMG,IAAkBnY,KAAI,SAACiY,EAAGpjB,GAAJ,OAAU,kBAAC,EAAD,CAAkBkF,IAAKlF,S,SChCxDikB,MAZf,WAAqB,MACAxF,cAAZ5Z,EADY,EACZA,EAER,OAHoB,EACT6Z,KAGV,yBAAKxB,UAAU,mBACd,yBAAKA,UAAU,4BAA4BrY,EAAE,mBAE7C,kBAAC,EAAD,QCOYqf,MARf,SAAwBlH,GACvB,OACC,uBAAKC,QAAQ,YAAYC,UAAW,QAAUF,EAAMG,MAAOC,UAAU,QAAQC,cAAY,QACxF,wBAAMlZ,EAAE,4aCKIggB,MARf,SAAyBnH,GACxB,OACC,uBAAKC,QAAQ,YAAYC,UAAW,QAAUF,EAAMG,MAAOC,UAAU,QAAQC,cAAY,QACxF,wBAAMlZ,EAAE,0a,k9BCiIIigB,MApIf,YAA+D,IAA9CC,EAA8C,EAA9CA,KAAMC,EAAwC,EAAxCA,WAAYC,EAA4B,EAA5BA,aAA4B,IAC1Bnb,wBAA6BxF,GADH,GACvD8e,EADuD,KAC3C8B,EAD2C,SAE9Bpb,oBAAS,GAFqB,GAEvDqb,EAFuD,KAE7CC,EAF6C,KAY9D,SAASC,EAASC,GACbC,MAAMD,IAMNA,EAAS,GAMTA,EAASN,EAVZQ,KAkBDN,OAAc5gB,GAGd2gB,EAAaK,IAwDd,SAASE,IACRJ,GAAY,GAGZ7gB,YAAW,WACV6gB,GAAY,KACV,KAOJ,OACC,yBAAKxH,UAAU,6BACd,4BAAQA,UAAU,wBAAwBmC,QAvG5C,WACCsF,EAASN,EAAO,KAuGd,kBAAC,EAAD,CAAgBlH,MAAM,0BACtB,0BAAMD,UAAU,mBAAhB,kBAED,2BACC5Z,KAAK,SACLsB,WArEiBhB,IAAf8e,EAEIA,GAAc,GAIf2B,EAgELxE,SAbH,SAAkB7c,GACjBwhB,EAAcxhB,EAAM8c,cAAclb,QAahCmgB,QAvCH,SAAiB/hB,GAChB,IAAIgiB,EAAeC,SAASjiB,EAAM8c,cAAclb,MAAO,IAEnDogB,EAAeV,IAClBU,EAAeV,EACfthB,EAAM8c,cAAclb,MAAQ,GAC5B5B,EAAMkiB,kBAGHF,EAAe,IAClBA,EAAe,EACfhiB,EAAM8c,cAAclb,MAAQ,GAC5B5B,EAAMkiB,mBA4BLC,UA/DH,SAAmBniB,GAClB,IAAMgiB,EAAeC,SAASjiB,EAAM8c,cAAclb,MAAO,IAEvC,UAAd5B,EAAMkC,KACTyf,EAASK,IA4DRI,WAjDH,SAAoBpiB,GACnB,IAAMqiB,EAAUriB,EAAMqiB,SAAWriB,EAAMsiB,MACtBrD,OAAOsD,aAAaF,GACxBG,MAAM,aAClBxiB,EAAMkiB,kBA8CLO,OAzDH,SAAgBziB,GACXqe,OAAOre,EAAM8c,cAAclb,SAAWyf,GAEzCM,EADqBM,SAASjiB,EAAM8c,cAAclb,MAAO,MAwDxD8gB,IAAI,IACJC,IAAKrB,EACLpH,UAAWuH,EAAW,+BAAiC,2BAExD,0BAAMvH,UAAU,+BAAhB,QAAyDoH,GACzD,4BAAQpH,UAAU,wBAAwBmC,QApH5C,WACCsF,EAASN,EAAO,KAoHd,kBAAC,EAAD,CAAiBlH,MAAM,2BACvB,0BAAMD,UAAU,mBAAhB,gBCvGW0I,MA9Bf,WAAwB,MAInB/V,cAJmB,IAEtBtG,MAASI,EAFa,EAEbA,cAAed,EAFF,EAEEA,cACxB2E,EAHsB,EAGtBA,MAUD,OACC,yBAAK0P,UAAU,uBACd,4BAAQtY,MAAOiE,EAAciD,WAAY+T,SAT3C,SAAkB7c,GACjBwK,EAAMX,UAAU,CACff,WAAYuV,OAAOre,EAAM8c,cAAclb,OACvCiH,OAAQ,MAONlC,EACAA,EAAcyQ,WAAWC,MAAMlP,KAAI,SAAA0a,GAAc,OAChD,4BAAQ3gB,IAAK2gB,EAAeC,SAAUlhB,MAAOihB,EAAeC,UAC1DD,EAAezX,UAIlB,wDCKUgM,MA1Bf,WAAsB,MAIjBvK,cAJiB,IAEpBtG,MAASI,EAFW,EAEXA,cAAed,EAFJ,EAEIA,cACxB2E,EAHoB,EAGpBA,MAUD,OACC,yBAAK0P,UAAU,mBACd,kBAAC,EAAD,CACCmH,KAAM1a,EAAgBd,EAAcgD,QAAU,EAAI,EAClDyY,WAAY3a,EAAgBA,EAAcyQ,WAAW2L,SAAW,EAChExB,aAZH,SAAsBK,GAErBpX,EAAMX,UAAU,CACfhB,OAAQ+Y,OAYR,kBAAC,EAAD,QCWYlK,MAjCf,WAAmB,MAId7K,cAJc,IAEjBtG,MAASI,EAFQ,EAERA,cAAed,EAFP,EAEOA,cACxB2E,EAHiB,EAGjBA,MAHiB,EAMEiR,cAAZ5Z,EANU,EAMVA,EAQR,OAdkB,EAMP6Z,KASV,yBAAKxB,UAAU,gBACd,0BAAMA,UAAU,uBAAuBrY,EAAE,YAEzC,4BAAQD,MAAOiE,EAAc+C,OAAQiU,SAVvC,SAAkB7c,GACjBwK,EAAMX,UAAU,CACfjB,OAAQ5I,EAAM8c,cAAclb,UAS1B+E,EACAA,EAAc+Q,QAAQL,MAAMlP,KAAI,SAAA6a,GAAW,OAC1C,4BAAQ9gB,IAAK8gB,EAAY9X,MAAOtJ,MAAOohB,EAAY9X,OACjD8X,EAAY5X,UAIf,4BAAQxJ,MAAM,SAAd,iBCbUqhB,MAdf,WACC,OACC,yBAAK/I,UAAU,iBACd,yBAAKA,UAAU,uBACd,kBAAC,EAAD,OAGD,yBAAKA,UAAU,uBACd,kBAAC,EAAD,SC6BWgJ,MA7Bf,SAAwBlJ,GACvB,OACC,uBACCyD,EAAE,MACF0F,EAAE,MACFlJ,QAAQ,kBACRC,UAAW,QAAUF,EAAMG,MAC3BC,UAAU,QACVC,cAAY,QAEZ,yBACC,yBACC,wBACClZ,EAAE,+fAMH,wBACCA,EAAE,4MChBOiiB,MARf,YACC,OADiE,EAAtCC,YAE1B,yBAAKnJ,UAAU,kCACd,kBAAC,EAAD,CAAgBC,MAAM,0BCOVmJ,MAdf,WACC,OACC,yBAAKpJ,UAAU,sBACd,yBAAKA,UAAU,4BACd,kBAAC,EAAD,CAAkBmJ,aAAa,KAGhC,yBAAKnJ,UAAU,2BACd,yBAAKA,UAAU,2CCUJqJ,MAdf,YAA8C,IAA3BC,EAA2B,EAA3BA,UAA2B,EACzB/H,cAAZ5Z,EADqC,EACrCA,EAER,OAH6C,EAClC6Z,KAEN8H,EAKJ,yBAAKtJ,UAAW,cACf,yBAAKA,UAAW,uBAAwBrY,EAAE,WAA1C,QALM,M,s9BCuCM4hB,OAtCf,YAAoH,IAA7FlX,EAA6F,EAA7FA,KAAMmX,EAAuF,EAAvFA,WAAYC,EAA2E,EAA3EA,mBAAoBC,EAAuD,EAAvDA,kBAAmBC,EAAoC,EAApCA,eAAoC,KAC7Ezd,oBAAS,GADoE,GAC5G0d,EAD4G,KAC/FC,EAD+F,KAG/GC,EAAWJ,EAAoBrX,EAAK0X,iBAAiBL,GAAqBrX,EAAK0X,iBAAiB,SACpG,IAAKD,EACJ,OAAO,KAGR,IAAME,EAAWP,EAAqBpX,EAAK0X,iBAAiBN,GAAsBpX,EAAK0X,iBAAiB,YAOxG,OAL0B,IAAIE,OAAO,iBAAkB,KAChCC,KAAKJ,IAAaN,IACxCM,EAAWN,EAAaM,GAIxB,yBAAK9J,UAAU,4BACd,yBAAK8F,MAAO8D,EAAc,GAAK,CAAEO,SAAU,SAAUvE,MAAO,MAAOwE,OAAQ,QAC1E,yBACCC,OAAQ,WACHV,GACHA,IAEDE,GAAe,IAEhBpkB,IAAKqkB,EACLQ,IAAG,oBAAeN,MAIlBJ,EAGE,KADH,kBAAC,EAAD,CAAkBT,aAAa,MCtBpBoB,OAdf,YAA+C,IAAzBlY,EAAyB,EAAzBA,KACf2X,EAAW3X,EAAK0X,iBAAiB,YAEvC,OACC,yBAAK/J,UAAU,sBACd,kBAAC,GAAD,CAAa3N,KAAMA,IAEnB,yBAAK2N,UAAU,2BACd,8BAAOgK,M,kwBCaIQ,OApBf,YAAgF,QAAvDD,kBAAuD,MAA1CE,GAA0C,IAG3E9X,cADHtG,MAASR,EAFqE,EAErEA,UAAWY,EAF0D,EAE1DA,cAGfie,EAAUje,EAAgBA,EAAc6S,QAAU,GAExD,OACC,yBAAKU,UAAU,yBACd,kBAAC,EAAD,CAASsJ,UAAWzd,IAEnB6e,EAAQ1nB,OAEN0nB,EAAQzc,KAAI,SAAApK,GAAM,OAAI,kBAAC0mB,EAAD,CAAYviB,IAAKnE,EAAOyO,MAAOD,KAAMxO,OAE3D,GAAIoiB,MAAM,KAAKhY,KAAI,SAACiY,EAAGpjB,GAAJ,OAAU,kBAAC,EAAD,CAAiBkF,IAAKlF,S,mBCU1C6nB,OAxBf,SAAoB7K,GACnB,OACC,uBACCC,QAAQ,YACRC,UAAW,yBAA2BF,EAAMG,MAC5CC,UAAU,QACVC,cAAY,QAEZ,wBACCyK,KAAK,UACL3jB,EAAE,yGAEH,wBACC2jB,KAAK,OACL3jB,EAAE,sMAEH,wBACC2jB,KAAK,OACL3jB,EAAE,4L,s9BCqGSyW,OAzHf,WAAsB,MAIjB/K,cAJiB,IAEpBtG,MAAS8E,EAFW,EAEXA,gBACTb,GAHoB,EAEM3E,cAFN,EAGpB2E,OAHoB,EAMDiR,cAAZ5Z,EANa,EAMbA,EAGF8G,GATe,EAMV+S,KAGEve,OAAOwL,KAAK0C,GAAiBiB,QAAO,SAAApK,GAAG,MAAY,OAARA,MACxD,GAAoB,IAAhByG,EAAKzL,OAER,OAAO,KAGR,SAAS6nB,EAAera,EAAe9I,GAClCA,EACH4I,EAAMuB,gBAAgBrB,EAAO9I,EAAMA,OAEnC4I,EAAMsB,WAAWpB,GAyCnB,OACC,yBAAKwP,UAAU,+BACd,4BAAKrY,EAAE,oBACP,wBAAIqY,UAAU,mBACZvR,EAAKR,KAAI,SAAAjG,GACT,IAAM8iB,EAAY3Z,EAAgBnJ,GAElC,OACC,wBAAIA,IAAKA,EAAKgY,UAAU,6BACvB,yBAAKA,UAAU,qCACd,0BAAMA,UAAU,kCAAkC8K,EAAUtQ,MAA5D,KAEA,wBAAIwF,UAAU,8BACZ8K,EAAUrQ,MAAMxM,KAAI,SAAAoE,GACpB,IAAM0Y,EAAW1Y,EAAK3K,MAAM6B,WAAW,KAEvC,OACC,wBAAIvB,IAAKqK,EAAK3K,MAAOsY,UAAU,yBAC9B,4BACCmC,QAAS,kBAAM0I,EAAe7iB,EAAKqK,IACnC2N,UAAU,gCAEV,kBAAC,GAAD,MACA,0BAAMA,UAAU,mBAAhB,kBACiB8K,EAAUtQ,MAD3B,IACmCnI,EAAKmI,QAIzC,0BACCwF,UACC+K,EACG,iEACA,8BA9ChB,SAAqBD,EAAWzY,GAC/B,GAAkC,cAA9ByY,EAAUta,MAAMoW,WAA0D,aAA7BkE,EAAUta,MAAMwa,SAAyB,WAC7D3Y,EAAKmI,OAAS,KAAK7P,MAAM,KADoC,GACpFsgB,EADoF,KACzEC,EADyE,KAIzF,OAFAD,EAAYE,KAAOF,EAAUzH,QAAQ,MAAO,MAAM4H,OAAO,QACzDF,EAAUC,KAAOD,EAAQ1H,QAAQ,MAAO,MAAM4H,OAAO,QACrD,UAAUH,EAAV,cAAyBC,GACnB,MAAkC,UAA9BJ,EAAUta,MAAMqK,UAzB5B,SAAqBnT,EAA6B8I,GACjD,IAAM6a,EAAe3jB,EAAMA,MAE3B,IAAK2jB,IAA+C,IAA/BA,EAAavgB,QAAQ,KAAa,CAGtD,IAAMwgB,EAAgB9a,EAAM0N,OAAO5D,MAAK,SAACiR,GAAD,OAAkBA,EAAMva,QAAUtJ,EAAMA,SAChF,OAAO4jB,EAAgBA,EAAcpa,MAAQma,EAG9C,IAAMG,EAAiBH,EAAa1gB,MAAM,KAC1C,OAAI6F,EAAMib,YAAcD,EAAexoB,OAAS,EAC/C,UAAUwN,EAAMkb,eAAhB,YAAkCF,EAAe,GAAjD,cAAyDhb,EAAMkb,eAA/D,YAAiFF,EAAe,IAI1FH,EAAa7H,QAAQ,IAAK,OAUzBmI,CAAYtZ,EAAMyY,EAAUta,OACK,WAA9Bsa,EAAUta,MAAMoW,UACnB5Z,mBAAmBqF,EAAKmI,OAEzBnI,EAAKmI,MAsCAoR,CAAYd,EAAWzY,UAQ9B,4BAAQ8P,QAAS,kBAAM0I,EAAe7iB,IAAMgY,UAAU,oCACrD,kBAAC,GAAD,MAAe,IACf,0BAAMA,UAAU,mBAAhB,2BAA2D8K,EAAUtQ,YAMzE,wBAAIwF,UAAU,6BACb,4BAAQmC,QAzFZ,WACC7R,EAAMyB,kBAwFwBiO,UAAU,qCACnCrY,EAAE,kB,s9BC1FMkkB,OA3Bf,WAA8B,MAGzBlZ,cADHtG,MAASV,EAFmB,EAEnBA,cAAec,EAFI,EAEJA,cAFI,KAICP,mBAAS,IAJV,GAItBkD,EAJsB,KAIb0c,EAJa,OAMTvK,cAAZ5Z,EANqB,EAMrBA,EASR,OAf6B,EAMlB6Z,KACXxR,qBAAU,WACLvD,GAAiBA,EAAcsf,gBAClCD,EAAW9e,mBAAmBP,EAAcsf,kBAE5CD,EAAW9e,mBAAmBrB,EAAcoB,SAAW,OAEtD,CAACN,IAECd,EAAcoB,QAMlB,yBAAKiT,UAAU,kCACd,4BAAKrU,EAAcoB,QAAUpF,EAAE,sBAAwB,IAAMyH,EAAUzH,EAAE,oBALnE,MCyBM2X,OAlCf,YAAmE,QAAhDiL,kBAAgD,MAAnCE,GAAmC,IAG9D9X,cADHtG,MAASR,EAFwD,EAExDA,UAAWY,EAF6C,EAE7CA,cAAe6B,EAF8B,EAE9BA,aAF8B,EAK9CiT,cAAZ5Z,EAL0D,EAK1DA,EAER,OAPkE,EAKvD6Z,KAEPlT,EACI,4HAIF7B,GAAkD,IAAjCA,EAAc6S,QAAQtc,QAAkB6I,EAK9D,yBAAKmU,UAAU,gBACd,kBAAC,GAAD,MACA,kBAAC,GAAD,MAEA,yBAAKA,UAAU,8BACd,kBAAC,EAAD,OAGD,kBAAC,GAAD,CAAeuK,WAAYA,IAE3B,yBAAKvK,UAAU,iCACd,kBAAC,EAAD,QAfK,8BAAOrY,EAAE,gBCoBHqkB,OAtCf,WAAe,IACN9iB,EAAWH,cAAXG,OAUR,SAAS+iB,IACR,OACC,yBAAKjM,UAAU,QACd,yBAAKA,UAAU,gBACd,kBAAC,EAAD,QAMJ,IAlBoBkM,EAkBdC,EAAajjB,EAAOkjB,iBAjBL,iBADDF,EAkBoChjB,EAAOkjB,kBAhBtDjnB,SAASknB,eAAeH,GAGzBA,EAa2E,KAEnF,OACC,oCACEC,EAAaG,IAASC,aAAaN,IAAmBE,GAAcF,IAErE,yBAAKjM,UAAU,QACd,yBAAKA,UAAU,cACd,kBAAC,EAAD,MAEA,kBAAC,GAAD,U,SCVUwM,OAbf,SAAoB1M,GAMnB,OALIA,EAAM5W,OAAOujB,gBAEhB5d,KAAc6d,eAAe5M,EAAM5W,OAAOujB,eAC1C5d,KAAc8d,cAAc7M,EAAM5W,OAAO4D,aAGzC,kBAAC3D,EAAA,EAAD,CAAgBD,OAAQ4W,EAAM5W,QAC7B,kBAAC0J,EAAA,EAAD,CAAezH,cAAe2U,EAAM3U,eAAgB2U,EAAM1W,YCItD,SAASwjB,GAAiB1jB,GAChC,IAAKA,EAAO2jB,cACX,MAAM,IAAIhnB,MAAM,2DAGjB,IAAMsmB,EAC2B,iBAAzBjjB,EAAO2jB,cAA6B1nB,SAASknB,eAAenjB,EAAO2jB,eAAiB3jB,EAAO2jB,cAG7FnI,E3B4CA,SAAuBvR,GAAqE,IAAjDoI,EAAiD,uDAA7B,UAC/DmJ,EAAgB1B,EAAuB7P,EAAS5G,QAOtD,OAJIiY,EAA0BrR,EAASgC,SAAUoG,KAChDmJ,EAAc3X,aAAUrG,EACxBge,EAAcN,UAAYjR,EAASgC,SAASqO,QAAQjI,EAAW,KAEzDmJ,E2BpDeoI,CAAc3Z,UAEpCmZ,IAASS,OACR,kBAAC,GAAD,CAAY7jB,OAAQA,EAAQiC,cAAeuZ,GAC1C,kBAAC,EAAD,MACA,kBAAC,GAAD,OAEDyH,GApBE1jB,OAAO+jB,YACVI,GAAiBnkB,OAAO+jB,a,+ICMVQ,MApBf,SAAuBlN,GACtB,OACC,uBACCC,QAAQ,YACRC,UAAW,yBAA2BF,EAAMG,MAC5CC,UAAU,QACVC,cAAY,QAEZ,wBACCyK,KAAK,UACL3jB,EAAE,qGAEH,wBACC2jB,KAAK,OACL3jB,EAAE,8HCNSgmB,MARf,SAAsBnN,GACrB,OACC,uBAAKC,QAAQ,YAAYC,UAAW,QAAUF,EAAMG,MAAOC,UAAU,QAAQC,cAAY,QACxF,wBAAMlZ,EAAE,wCCKIimB,MARf,SAAuBpN,GACtB,OACC,uBAAKC,QAAQ,YAAYC,UAAW,QAAUF,EAAMG,MAAOC,UAAU,QAAQC,cAAY,QACxF,wBAAMlZ,EAAE,oI,QCuIIkmB,MA3If,WAAoB,IACX9gB,EAAUsG,cAAVtG,MACAnD,EAAWH,cAAXG,OAFW,EASfqX,cAJH/P,EALkB,EAKlBA,MACSmB,EANS,EAMlBrG,MAASqG,YACTrB,EAPkB,EAOlBA,MACA2R,EARkB,EAQlBA,SAwFD,SAASmL,EAAgBC,GACxB,OACC,0BACCrN,UACCqN,EACG,2EACA,mCAGHA,EAAa,kBAAC,EAAD,CAAcpN,MAAM,yCAA4C,MAIjF,SAASqN,EAAmB5lB,EAAe6lB,GAC1C,OACC,4BAAQpL,QAAS,SAAAzd,GAAC,OAAI4L,EAAMwR,YAAYpa,IAAQsY,UAAU,sCACxDuN,EACA,oCACC,kBAAC,EAAD,CAAetN,MAAM,uCACrB,0BAAMD,UAAU,mBAAhB,kBAGD,oCACC,kBAAC,EAAD,MACA,0BAAMA,UAAU,mBAAhB,mBAOL,OACC,yBAAKA,UAAU,iCACd,yBAAKA,UAAU,0CACd,wBAAIA,UAAU,+BAtHQ,UAApBxP,EAAMqK,UACFlJ,EAAY1D,KAAI,SAAAvG,GACtB,IAAM8lB,EAAqBhd,EAAM0N,OAAO5D,MAAK,SAAAtT,GAAC,OAAIA,EAAEgK,QAAUtJ,EAAMsJ,SAC9Dyc,EAAqBD,EACxBtkB,EAAOoS,aAAekS,EAAmBE,aACzC,GAGGC,EAAiBthB,EAAM+E,gBAAgBZ,EAAO9I,GAAO4D,MAErD+hB,EAAaM,IAAmBpc,IAAoBO,YACpDyb,EAAYI,IAAmBpc,IAAoBE,QAEzD,OACC,wBAAIzJ,IAAKN,EAAMsJ,MAAOgP,UAAU,oCAC/B,4BACCmC,QAAS,SAAAzd,GAAC,OAAI4L,EAAMuR,YAAYna,IAChCsY,UAAU,6BACV4N,eAAcP,GAEbD,EAAgBC,GACO,KAAvBI,EACA,oCACC,0BAAMzN,UAAU,uBACf,0BAAMA,UAAU,mBAAmB6N,MAAOnmB,EAAMwJ,QAEhD,yBAAKzL,IAAKgoB,EAAoBnD,IAAK5iB,EAAMwJ,SAG1C,0BACC4U,MAAOyH,EAAY,CAAEO,eAAgB,qBAAmBpnB,EACxDsZ,UAAU,+BAETtY,EAAMwJ,MAJR,KAIiBxJ,EAAMqmB,MAJvB,MAQD,oCACC,0BACCjI,MAAOyH,EAAY,CAAEO,eAAgB,qBAAmBpnB,EACxDsZ,UAAU,+BAETtY,EAAMwJ,MAJR,KAIiBxJ,EAAMqmB,MAJvB,OAUFT,EAAmB5lB,EAAMsJ,OAAS,GAAIuc,OAKnC5b,EAAY1D,KAAI,SAAAvG,GAEtB,IAAMimB,EAAiBthB,EAAM+E,gBAAgBZ,EAAO9I,GAAO4D,MAErD+hB,EAAaM,IAAmBpc,IAAoBO,YACpDyb,EAAYI,IAAmBpc,IAAoBE,QAEzD,OACC,wBAAIzJ,IAAKN,EAAMsJ,MAAOgP,UAAU,oCAC/B,4BACCmC,QAAS,SAAAzd,GAAC,OAAI4L,EAAMuR,YAAYna,IAChCsY,UAAU,6BACV4N,eAAcP,GAEbD,EAAgBC,GAEjB,0BACCvH,MAAOyH,EAAY,CAAEO,eAAgB,qBAAmBpnB,EACxDsZ,UAAU,+BAETtY,EAAMwJ,MAJR,KAIiBxJ,EAAMqmB,MAJvB,MAQAT,EAAmB5lB,EAAMsJ,OAAS,GAAIuc,SA6CzCtL,EAASC,qB,29BCpFE8L,MAtDf,WAAkB,MACmBrb,cAA5BtG,EADS,EACTA,MAAc4hB,EADL,EACF3d,MADE,EAEQiQ,cAAjB/P,EAFS,EAETA,MAAOF,EAFE,EAEFA,MAFE,IAISpE,wBAA6BxF,GAJtC,GAIVwnB,EAJU,KAIHC,EAJG,OAMG5M,cAAZ5Z,EANS,EAMTA,EA0BR,OAhCiB,EAMN6Z,KA2BV,oCACC,yBAAKxB,UAAU,iCACd,yBAAKA,UAAU,yCACd,2BACCtY,WAdUhB,IAAVwnB,EAEIA,EAIDlhB,mBAAmBX,EAAMV,cAAcsB,cAAgB,IAS1D0V,SAAU,SAAAje,GAAC,OAAIypB,EAASzpB,EAAEke,cAAclb,QACxCugB,UA/BL,SAAmBniB,GACA,UAAdA,EAAMkC,MACTmmB,OAASznB,GAET4J,EAAMuR,YAAY/b,EAAM8c,cAAclb,aA+BrC2E,EAAMV,cAAcsB,cACpB,yBAAK+S,UAAU,+CACd,4BAAQA,UAAU,cAAcmC,QA7BpC,WACCgM,OAASznB,GAETunB,EAAUrc,WAAWpB,KA2BhB7I,EAAE,aCWMymB,MAxDf,WAAgB,IACP/hB,EAAUsG,cAAVtG,MADO,EAOXkU,cAJH/P,EAHc,EAGdA,MACSmB,EAJK,EAIdrG,MAASqG,YACTrB,EALc,EAKdA,MACA2R,EANc,EAMdA,SAaD,OACC,yBAAKjC,UAAU,iCACd,yBAAKA,UAAU,sCACd,wBAAIA,UAAU,+BACZrO,EAAY1D,KAAI,SAAAvG,GAEhB,IAAMimB,EAAiBthB,EAAM+E,gBAAgBZ,EAAO9I,GAAO4D,MAErD+hB,EAAaM,IAAmBpc,IAAoBO,YAE1D,OACC,wBAAI9J,IAAKN,EAAMsJ,MAAOgP,UAAU,oCAC/B,4BACCmC,QAAS,SAAAzd,GAAC,OAvBlB,SAAsBgD,EAAcimB,GAC/BA,EAEHrd,EAAMuR,YAAYna,GAGlB4I,EAAMyR,UAAU,CAACra,IAiBG2mB,CAAa3mB,EAAOimB,IAClC3N,UACCqN,EACG,sCACA,6BAEJO,eAAcP,GAEd,0BAAMrN,UAAU,+BACdtY,EAAMwJ,MADR,KACiBxJ,EAAMqmB,MADvB,YAWL9L,EAASC,qB,k9BCxDb,SAASoM,EAAWC,GACnB,IAAMC,EAAO,IAAI5kB,KAAK2kB,GAItB,OAHaC,EAAKC,cAAcC,WAGlB,KAFCF,EAAKG,WAAa,KAAKD,WAAW7jB,UAAU,GAE/B,KADf2jB,EAAKI,UAAY,KAAKF,WAAW7jB,UAAU,GA+D1CgkB,MAtDf,SAA8BC,GAAwC,QACrC5iB,mBAAS,GAD4B,GAC9D6iB,EAD8D,KACpDC,EADoD,SAErC9iB,mBAAS,GAF4B,GAE9D+iB,EAF8D,KAEpDC,EAFoD,KA+BrE,OAJAlf,qBAAU,WACTgf,EAAYF,EAAYvR,OAAO,IAC/B2R,EAAYJ,EAAYvR,OAAO,MAC7B,CAACuR,IAEH,yBAAK9O,UAAU,sBACd,2BACC5Z,KAAK,OACLsB,MAAO4mB,EAAWnK,OAAO4K,IACzB/O,UAAU,wCACVwI,IAAK8F,EAAWQ,EAAYtG,KAC5BC,IAAK6F,EAAWQ,EAAYrG,KAC5B9F,SAnCH,SAAqB7c,GACpB,IAAM4B,EAAQ,IAAIkC,KAAK9D,EAAMQ,OAAOoB,OAAOoC,UAErCqlB,EAAchL,OAAOzc,GACvBigB,MAAMwH,IAAgBJ,IAAarnB,IAIvCsnB,EAAYtnB,GACZonB,EAAYM,cAAcjL,OAAOgL,GAAchL,OAAO8K,QA6BrD,2BACC7oB,KAAK,OACLsB,MAAO4mB,EAAWnK,OAAO8K,IACzBjP,UAAU,sCACVwI,IAAK8F,EAAWQ,EAAYtG,KAC5BC,IAAK6F,EAAWQ,EAAYrG,KAC5B9F,SAhCH,SAAqB7c,GACpB,IAAM4B,EAAQ,IAAIkC,KAAK9D,EAAMQ,OAAOoB,OAAOoC,UAErCulB,EAAclL,OAAOzc,GACvBigB,MAAM0H,IAAgBJ,IAAavnB,IAGvCwnB,EAAYxnB,GACZonB,EAAYM,cAAcjL,OAAO4K,GAAW5K,OAAOkL,U,k9BCjCrD,IAAMC,EAAWzmB,IAAM0mB,MAAK,kBAAM,qCAElC,SAASjB,EAAWE,GAInB,OAHaA,EAAKC,cAAcC,WAGlB,KAFCF,EAAKG,WAAa,KAAKD,WAAW7jB,UAAU,GAE/B,KADf2jB,EAAKI,UAAY,KAAKF,WAAW7jB,UAAU,GAIzD,SAAS2kB,EAAchB,GACtB,OAAKA,EAGEA,EAAKhL,QAAQ,KAAM,KAFlBgL,EAKT,SAAS1kB,EAAQ0kB,GAChB,OAAOA,GAAQrK,OAAO,IAAIva,KAAK4kB,GAAQ,IAAI1kB,WAoJ7B2lB,MAjJf,WAAsB,IAEXte,EACNwB,cADHtG,MAAS8E,gBAFW,EASjBoP,cATiB,IAMpBjV,MAASqG,EANW,EAMXA,YACTnB,GAPoB,EAMEwR,iBANF,EAOpBxR,OACAF,EARoB,EAQpBA,MAGKib,EAAQ5Z,EAAY3O,OAAS,EAAI2O,EAAY,GAAK,KAXnC,IAaWzF,mBAASqf,GAASzhB,EAAQyhB,EAAMmE,WAb3C,GAadC,EAbc,KAaJC,EAbI,SAcW1jB,mBAASqf,GAASzhB,EAAQyhB,EAAMsE,WAd3C,GAcdC,EAdc,KAcJC,EAdI,SAee7jB,mBAASqf,GAASzhB,EAAQyhB,EAAMyE,aAf/C,GAedC,EAfc,KAeFC,EAfE,SAgBWhkB,mBAASqf,GAASzhB,EAAQyhB,EAAM4E,WAhB3C,GAgBdC,EAhBc,KAgBJC,EAhBI,SAmBWnkB,qBAnBX,GAmBd6iB,EAnBc,KAmBJC,EAnBI,SAoBW9iB,qBApBX,GAoBd+iB,EApBc,KAoBJC,EApBI,KAwCrB,GAlBAlf,qBAAU,WACT,IAAMsgB,EAAY9f,EAAM+N,WAAa/N,EAAMgO,MAGtC8R,GAAeA,KAAanf,IAChC6d,OAAYtoB,GACZwoB,OAAYxoB,MAEX,CAACyK,IAEJnB,qBAAU,WACT,IAAMugB,EAAW5e,EAAY3O,OAAS,EAAI2O,EAAY,GAAK,KAC3Die,EAAYW,GAAYzmB,EAAQymB,EAASb,WACzCK,EAAYQ,GAAYzmB,EAAQymB,EAASV,WACzCK,EAAcK,GAAYzmB,EAAQymB,EAASP,aAC3CK,EAAYE,GAAYzmB,EAAQymB,EAASJ,aACvC,CAACxe,IAGU,OAAbge,GACAhI,MAAMgI,IACO,OAAbG,GACAnI,MAAMmI,IACS,OAAfG,GACAtI,MAAMsI,IACO,OAAbG,GACAzI,MAAMyI,GAGN,OAAO,KAkDR,SAAS1e,EAAe8e,EAA4BC,GACnD,QAAe/pB,IAAX8pB,QAAmC9pB,IAAX+pB,IAAwB9I,MAAM6I,KAAW7I,MAAM8I,GAA3E,CAGAzB,EAAYwB,GACZtB,EAAYuB,GAEZ,IAAMC,EAAkBlB,EAAclB,EAAW,IAAI1kB,KAAK4mB,KACpDG,EAAkBnB,EAAclB,EAAW,IAAI1kB,KAAK6mB,KAGpD3F,EAAY,GAAH,OAAM4F,EAAN,YAAyBC,GACxCrgB,EAAMyR,UAAU,CAAC+I,KAGlB,OACC,yBAAK9K,UAAU,iCACd,yBAAKA,UAAU,sCACd,kBAAC,IAAM4Q,SAAP,CAAgBC,SAAU,4CACzB,kBAAC,EAAD,CACCrI,IAAKmH,EACLlH,IAAKqH,EACLvS,OAAQ,MACM7W,IAAbqoB,EAAyBkB,EAAa9lB,KAAKse,IAAIsG,EAAUY,QAC5CjpB,IAAbuoB,EAAyBmB,EAAWjmB,KAAKqe,IAAIyG,EAAUa,IAExDV,cA7DL,SAAuBD,EAAqBE,GAC3C,IAAIyB,EAAkB/B,EAClBgC,EAAkB9B,OAELvoB,IAAbqoB,GAAyC,OAAfkB,IAC7Ba,EAAkBb,QAIFvpB,IAAbuoB,GAAuC,OAAbmB,IAC7BW,EAAkBX,QAGK1pB,IAApBoqB,QAAqDpqB,IAApBqqB,IAIjCD,IAAoB3B,GAAeA,GAAe4B,IAEpDD,EADgB,OAAbnB,GAAqBR,GAAeQ,EACrBA,EAEAR,GAIhB4B,IAAoB1B,GAAeA,GAAeyB,IAEpDC,EADgB,OAAbjB,GAAqBT,GAAeS,EACrBA,EAEAT,GAGpB3d,EAAeof,EAAiBC,OA+B7B,kBAACzB,EAAD,CACC9G,IAAKmH,EACLlH,IAAKqH,EACLvS,OAAQ,CACPpT,KAAKC,WAAmB1D,IAAbqoB,EAAyBkB,EAAa9lB,KAAKse,IAAIsG,EAAUY,IACpExlB,KAAK6mB,UAAkBtqB,IAAbuoB,EAAyBmB,EAAWjmB,KAAKqe,IAAIyG,EAAUa,KAElEmB,gBAlFL,SAAsB3lB,GAAoB,QAChBA,EAAMiS,OADU,GAClC2T,EADkC,KAC1BC,EAD0B,KAEzCnC,EAAYkC,GACZhC,EAAYiC,IAgFRxO,SA7EL,SAA6BrX,GAAoB,QACvBA,EAAMiS,OADiB,GAGhD7L,EAHgD,kB,09BCZnC0f,MA9Df,SAA6BtC,GAAuC,QACnC5iB,mBAAS,IAD0B,GAC5D6iB,EAD4D,KAClDC,EADkD,SAEnC9iB,mBAAS,IAF0B,GAE5D+iB,EAF4D,KAElDC,EAFkD,KAwBnE,SAASmC,EAAavrB,GACrBgpB,EAAYM,cAAcjL,OAAO4K,GAAW5K,OAAO8K,IAQpD,OALAjf,qBAAU,WACTgf,EAAYF,EAAYvR,OAAO,GAAGmR,YAClCQ,EAAYJ,EAAYvR,OAAO,GAAGmR,cAChC,CAACI,IAGH,yBAAK9O,UAAU,sBACd,kBAAC,IAAD,CACCsR,kBAAmBxC,EAAYyC,WAC/BC,OAAQ1C,EAAYyC,WAAazC,EAAY2C,eAAiB,GAC9D/pB,MAAOqnB,EACP/O,UAAU,iCACVwI,IAAKsG,EAAYtG,IACjBC,IAAKqG,EAAYrG,IACjB2G,cAtCH,SAAqB7R,GACcA,EAA1BmU,eADyB,IACThqB,EAAU6V,EAAV7V,MAElBynB,EAAchL,OAAOzc,GACvBigB,MAAMwH,IAAgBJ,IAAarnB,GAIvCsnB,EAAYtnB,IA+BV6gB,OAAQ8I,EACRM,aAAc7C,EAAY9M,mBAG3B,kBAAC,IAAD,CACCsP,kBAAmBxC,EAAYyC,WAC/BC,OAAQ1C,EAAYyC,WAAazC,EAAY2C,eAAiB,GAC9D/pB,MAAOunB,EACPjP,UAAU,+BACVwI,IAAKsG,EAAYtG,IACjBC,IAAKqG,EAAYrG,IACjB2G,cAvCH,SAAqB7R,GACcA,EAA1BmU,eADyB,IACThqB,EAAU6V,EAAV7V,MAElB2nB,EAAclL,OAAOzc,GACvBigB,MAAM0H,IAAgBJ,IAAavnB,GAGvCwnB,EAAYxnB,IAiCV6gB,OAAQ8I,EACRM,aAAc7C,EAAY9M,qB,k9BC9D9B,IAAMsN,EAAWzmB,IAAM0mB,MAAK,kBAAM,qCA+JnBqC,MA7Jf,WAAyB,IAEdzgB,EACNwB,cADHtG,MAAS8E,gBAFc,EASpBoP,cAToB,IAMvBjV,MAASqG,EANc,EAMdA,YAAaqQ,EANC,EAMDA,iBACtBxR,EAPuB,EAOvBA,MACAF,EARuB,EAQvBA,MAGKib,EAAQ5Z,EAAY3O,OAAS,EAAI2O,EAAY,GAAK,KAXhC,IAaQzF,mBAASqf,GAASpH,OAAO0N,WAAWtG,EAAMmE,UAAY,IAAIoC,QAAQ,KAb1E,GAajBnC,EAbiB,KAaPC,EAbO,SAcQ1jB,mBAASqf,GAASpH,OAAO0N,WAAWtG,EAAMsE,UAAY,IAAIiC,QAAQ,KAd1E,GAcjBhC,EAdiB,KAcPC,EAdO,SAeY7jB,mBAASqf,GAASpH,OAAO0N,WAAWtG,EAAMyE,YAAc,IAAI8B,QAAQ,KAfhF,GAejB7B,EAfiB,KAeLC,EAfK,SAgBQhkB,mBAASqf,GAASpH,OAAO0N,WAAWtG,EAAM4E,UAAY,IAAI2B,QAAQ,KAhB1E,GAgBjB1B,EAhBiB,KAgBPC,EAhBO,SAmBQnkB,qBAnBR,GAmBjB6iB,EAnBiB,KAmBPC,EAnBO,SAoBQ9iB,qBApBR,GAoBjB+iB,EApBiB,KAoBPC,EApBO,SAsBWhjB,mBAASsE,EAAMib,YAtB1B,GAsBjBsG,EAtBiB,KAsBNC,EAtBM,SAuBoB9lB,mBAASsE,EAAMkb,gBAvBnC,GAuBjB+F,EAvBiB,KAuBDQ,EAvBC,KAwDxB,GA/BAjiB,qBAAU,WACTiiB,EAAkBzhB,EAAMkb,gBAAkB,KAC1CsG,EAAcxhB,EAAMib,cAClB,CAACjb,IAEJR,qBAAU,WACT,IAAMsgB,EAAY9f,EAAM+N,WAAa/N,EAAMgO,MAG3C,GAAK8R,GAAeA,KAAanf,GAG1B,GACNmf,KAAanf,GACbA,EAAgBmf,GAAW7V,OAC3BtJ,EAAgBmf,GAAW7V,MAAMzX,OAAS,EACzC,CACD,IAAMkvB,EAAiB/gB,EAAgBmf,GAAW7V,MAAM,GAAG/S,MAAMiD,MAAM,KACvEqkB,EAAY7K,OAAO+N,EAAe,KAClChD,EAAY/K,OAAO+N,EAAe,WATlClD,OAAYtoB,GACZwoB,OAAYxoB,KAUX,CAACyK,IAEJnB,qBAAU,WACT,IAAMugB,EAAW5e,EAAY3O,OAAS,EAAI2O,EAAY,GAAK,KAC3Die,EAAYW,GAAYpM,OAAO0N,WAAWtB,EAASb,UAAY,IAAIoC,QAAQ,KAC3E/B,EAAYQ,GAAYpM,OAAO0N,WAAWtB,EAASV,UAAY,IAAIiC,QAAQ,KAC3E5B,EAAcK,GAAYpM,OAAO0N,WAAWtB,EAASP,YAAc,IAAI8B,QAAQ,KAC/EzB,EAAYE,GAAYpM,OAAO0N,WAAWtB,EAASJ,UAAY,IAAI2B,QAAQ,OACzE,CAACngB,IAGU,OAAbge,GACAhI,MAAMgI,IACO,OAAbG,GACAnI,MAAMmI,IACS,OAAfG,GACAtI,MAAMsI,IACO,OAAbG,GACAzI,MAAMyI,GAGN,OAAO,KA8CR,SAAS1e,EAAe8e,EAA4BC,GACnD,QAAe/pB,IAAX8pB,QAAmC9pB,IAAX+pB,IAAwB9I,MAAM6I,KAAW7I,MAAM8I,GAA3E,CAGAzB,EAAYwB,GACZtB,EAAYuB,GAGZ,IAAM3F,EAAY,GAAH,OAAM0F,EAAN,YAAgBC,GAE/BngB,EAAMyR,UAAU,CAAC+I,KAGlB,OACC,yBAAK9K,UAAU,iCACd,yBAAKA,UAAU,sCACd,kBAAC,IAAM4Q,SAAP,CAAgBC,SAAU,4CACzB,kBAAC,EAAD,CACCrI,IAAKmH,EACLlH,IAAKqH,EACL2B,eAAgBA,EAChBF,WAAYQ,EACZxU,OAAQ,MACM7W,IAAbqoB,EAAyBkB,EAAa9lB,KAAKse,IAAIsG,EAAUY,QAC5CjpB,IAAbuoB,EAAyBmB,EAAWjmB,KAAKqe,IAAIyG,EAAUa,IAExDV,cA/DL,SAAuBD,EAAqBE,GAC3C,IAAIyB,EAAkB/B,EAClBgC,EAAkB9B,OAELvoB,IAAbqoB,GAAyC,OAAfkB,IAC7Ba,EAAkBb,QAIFvpB,IAAbuoB,GAAuC,OAAbmB,IAC7BW,EAAkBX,QAGK1pB,IAApBoqB,QAAqDpqB,IAApBqqB,IAIjCD,IAAoB3B,GAAeA,GAAe4B,IAEpDD,EADgB,OAAbnB,GAAqBR,GAAeQ,EACrBA,EAEAR,GAIhB4B,IAAoB1B,GAAeA,GAAeyB,IAEpDC,EADgB,OAAbjB,GAAqBT,GAAeS,EACrBA,EAEAT,GAGpBL,EAAY8B,GACZ5B,EAAY6B,GACZrf,EAAeof,EAAiBC,KA8B5B/O,iBAAkBA,IAEnB,kBAAC,EAAD,CACCwG,IAAKmH,EACLlH,IAAKqH,EACLvS,OAAQ,CACPpT,KAAKC,WAAmB1D,IAAbqoB,EAAyBkB,EAAa9lB,KAAKse,IAAIsG,EAAUY,IACpExlB,KAAK6mB,UAAkBtqB,IAAbuoB,EAAyBmB,EAAWjmB,KAAKqe,IAAIyG,EAAUa,KAElEnN,SA/EL,SAA6BrX,GAAoB,QACvBA,EAAMiS,OADiB,GAGhD7L,EAHgD,kBC/DnCygB,MARf,WAAkB,IACT3hB,EAAU+P,cAAV/P,MACR,OAAIA,EAAMwa,UAA+B,aAAnBxa,EAAMwa,SACpB,kBAAC,EAAD,MAED,kBAAC,EAAD,OC2COoH,MAxCf,SAAoB/f,GAAuB,IAClCnJ,EAAWH,cAAXG,OAEFuH,EAAa4B,EAAKggB,YAAYrhB,OAAS,GAGvCshB,EACLppB,EAAOoS,cAAiBjJ,EAAKkgB,YAAYC,SAAwCngB,EAAKkgB,YAAYC,SAA9CngB,EAAKkgB,YAAYE,WAEhEC,EAAmB,CACxBC,gBAAiBtgB,EAAKkgB,YAAYK,OAG7BC,EACL,oCACCxgB,EAAKgb,WAAa,oBAAsB,KACxChb,EAAKkb,UAAY,sBAAwB,IAE3C,OACC,wBAAIvlB,IAAKqK,EAAKkgB,YAAYvhB,MAAOgP,UAAW6S,GAC3C,4BACC1Q,QAAS,SAAAzd,GAAC,OAAI2N,EAAKygB,iBAAiBriB,GAAY,IAChDuP,UAAU,8CACV4N,eAAcvb,EAAKgb,YAEnB,0BAAMrN,UAAU,uBACd3N,EAAK0gB,QACL,0BAAM/S,UAAU,mBAAmB8F,MAAO4M,EAAkB7E,MAAOxb,EAAKkgB,YAAYvhB,QAEpF,yBAAKvL,IAAK6sB,EAAWhI,IAAKjY,EAAKkgB,YAAYvhB,UAI9C,4BAAQgP,UAAU,qBACjB,uBAAGA,UAAU,mBAAmBmC,QAAS,SAAAzd,GAAC,OAAI2N,EAAKygB,iBAAiBriB,GAAY,SCWrEqN,MArDf,WAAkB,IACTzR,EAAUsG,cAAVtG,MADS,EAObkU,cAJH/P,EAHgB,EAGhBA,MACAF,EAJgB,EAIhBA,MACSqB,EALO,EAKhBrG,MAASqG,YACTsQ,EANgB,EAMhBA,SAGD,SAAS6Q,EAAiBriB,EAAoB8c,GAC7CA,EAAYjd,EAAMwR,YAAYrR,GAAcH,EAAMuR,YAAYpR,GAG/D,OACC,yBAAKuP,UAAU,iCACd,yBAAKA,UAAU,wCACd,wBAAIA,UAAU,+BACZxP,EAAMyN,YACNtM,EAAY1D,KAAI,SAAAvG,GACf,IAAM+I,EAAa/I,EAAMsJ,OAAS,GAE5BuhB,EACL/hB,EAAMyN,YACNzN,EAAMyN,WAAW3D,MAAK,SAAAlW,GAAC,OAAIA,EAAE4M,MAAM+H,gBAAkBtI,EAAWsI,iBACjE,GAAKwZ,EAAL,CAGA,IAAM5E,EAAiBthB,EAAM+E,gBAAgBZ,EAAO9I,GAAO4D,MACrDiiB,EAAYI,IAAmBpc,IAAoBE,QACnD4b,EAAaM,IAAmBpc,IAAoBO,YAEpDihB,IAAYR,EAAYK,MAC9B,OACC,kBAAC,EAAD,CACC5qB,IAAKyI,EACL4hB,YAAa3qB,EACb6qB,YAAaA,EACblF,WAAYA,EACZ0F,QAASA,EACTxF,UAAWA,EACXuF,iBAAkBA,UAQvB7Q,EAASC,qB,k9BC8EE8Q,MApHf,SAASA,EAAW3gB,GAAuB,IAClChG,EAAUsG,cAAVtG,MACAmE,EAAU+P,cAAV/P,MAFkC,IAINtE,oBAAS,GAJH,GAInC+mB,EAJmC,KAIvBC,EAJuB,SAKJhnB,mBAASsE,EAAMoQ,gBALX,GAKnCC,EALmC,KAKtBsS,EALsB,KAOpCC,EAAiB/gB,EAAK+gB,gBAAkB,GAC1CC,EAAoBhhB,EAAK+gB,eAAejY,UAAY,GAEpDmY,EAAkB,EAEhBC,EACiB,eAAtB/iB,EAAM2N,aAAgCkV,EAAkBrwB,OAASwN,EAAM4N,kBAExE,GAAImV,GAA0B1S,EAAa,CAC1C,IAAMe,EAAoByR,EAAkBrwB,OAE5CqwB,EAAoBA,EAAkB1qB,MAAM,EAAG6H,EAAM4N,mBAErDkV,EAAkB1R,EAAoBpR,EAAM4N,kBAiB7C,OACC,wBAAI4B,UAAU,oDACb,yBAAKA,UAAU,2BACd,4BACCmC,QAAS,kBAAM9P,EAAKmhB,gBAAgBJ,GAAgB,IACpDpT,UAAU,6BACV4N,eAAcvb,EAAKgb,YAEnB,0BACCrN,UACC3N,EAAKgb,WACF,2EACA,mCAGHhb,EAAKgb,WAAa,kBAAC,EAAD,CAAcpN,MAAM,yCAA4C,MAGpF,0BACC6F,MAAOzT,EAAKkb,UAAY,CAAEO,eAAgB,qBAAmBpnB,EAC7DsZ,UAAU,+BAET3N,EAAK+gB,eAAeliB,MAJtB,KAI+BmB,EAAK+gB,eAAerF,MAJnD,MAQD,4BACC5L,QAAS,SAAAzd,GAAC,OAAI2N,EAAKmhB,gBAAgBJ,GAAgB,IACnDpT,UAAU,sCAET3N,EAAKkb,UACL,oCACC,kBAAC,EAAD,CAAetN,MAAM,uCACrB,0BAAMD,UAAU,mBAAhB,kBAGD,oCACC,kBAAC,EAAD,MACA,0BAAMA,UAAU,mBAAhB,mBAIFqT,EAAkBrwB,OAAS,EAC3B,4BACCgd,UAAWiT,EAAa,qBAAuB,+BAC/CQ,gBAAc,QACdtR,QAAS,kBAAM+Q,GAAeD,KAH/B,KAOG,MAEJA,GAAcI,EACd,yBAAKrT,UAAU,0BACd,wBAAIA,UAAU,0BACZqT,EAAkBplB,KAAI,SAAAvG,GACtB,IAAMimB,EAAiBthB,EAAM+E,gBAAgBZ,EAAO9I,GAAO4D,MACrDiiB,EAAYI,IAAmBpc,IAAoBE,QACnD4b,EAAaM,IAAmBpc,IAAoBO,YAC1D,OACC,kBAACkhB,EAAD,CACChrB,IAAKN,EAAMgsB,KACXN,eAAgB1rB,EAChB2lB,WAAYA,EACZE,UAAWA,EACXiG,gBAAiBnhB,EAAKmhB,qBA7E5B,oCACED,GACA,wBAAIvT,UAAU,mDACb,4BAAQmC,QAAS,kBAAMgR,GAAgBtS,IAAcb,UAAU,kCAC7Da,EAAc,YAAH,OAAeyS,EAAf,SAAwC,qBAiFvD,uCC5EWK,MA3Cf,WAAkB,IACTtnB,EAAUsG,cAAVtG,MADS,EAObkU,cAJH/P,EAHgB,EAGhBA,MACSmB,EAJO,EAIhBrG,MAASqG,YACTrB,EALgB,EAKhBA,MACA2R,EANgB,EAMhBA,SAGD,SAASuR,EAAgB/iB,EAAmB8c,GAC3CA,EAAYjd,EAAMwR,YAAYrR,GAAcH,EAAMuR,YAAYpR,GAG/D,OACC,yBAAKuP,UAAU,iCACd,yBAAKA,UAAU,0CACd,wBAAIA,UAAU,+BACZrO,EAAY1D,KAAI,SAAAvG,GAEhB,IAAMimB,EAAiBthB,EAAM+E,gBAAgBZ,EAAO9I,GAAO4D,MAErD+hB,EAAaM,IAAmBpc,IAAoBO,YACpDyb,EAAYI,IAAmBpc,IAAoBE,QAEzD,OACC,kBAAC,EAAD,CACCzJ,IAAKN,EAAMsJ,MACXoiB,eAAgB1rB,EAChB2lB,WAAYA,EACZE,UAAWA,EACXiG,gBAAiBA,SAQrBvR,EAASC,qB,k+BCzCb,SAASsN,EAAchB,GACtB,OAAKA,EAGEA,EAAKhL,QAAQ,KAAM,KAFlBgL,EAqGMoF,MAhGf,WAA6B,IACb3F,EAActb,cAArBrC,MAEEa,EACNwB,cADHtG,MAAS8E,gBAHkB,EASxBoP,cAHM5O,EANkB,EAM3BrG,MAASqG,YACTnB,EAP2B,EAO3BA,MACAF,EAR2B,EAQ3BA,MAEKujB,EAAYliB,EAAY3O,OAAS,EAAI2O,EAAY,GAAK,KACtDmiB,EACLD,GAAaA,EAAU7D,WAAa7E,IAAO0I,EAAU7D,YAAY5E,OAAO,oBAAsB,GACzF2I,EAAeF,GAAaA,EAAU1D,SAAWhF,IAAO0I,EAAU1D,UAAU/E,OAAO,oBAAsB,GAbnF,IAgBclf,mBAAS4nB,GAAkB,IAhBzC,GAgBrBE,EAhBqB,KAgBPC,EAhBO,SAiBY/nB,mBAAS6nB,GAAgB,IAjBrC,GAiBrBG,EAjBqB,KAiBPC,EAjBO,KAoBtB5I,EAAQ5Z,EAAY3O,OAAS,EAAI2O,EAAY,GAAK,KAElDse,EAAc1E,GAASA,EAAMyE,YAAe,GAC5CI,EAAY7E,GAASA,EAAM4E,UAAa,GAoB9C,GAlBAngB,qBAAU,WACT,IAAMsgB,EAAY9f,EAAM+N,WAAa/N,EAAMgO,MAG3C,GAAK8R,GAAeA,KAAanf,GAG1B,GACNmf,KAAanf,GACbA,EAAgBmf,GAAW7V,OAC3BtJ,EAAgBmf,GAAW7V,MAAMzX,OAAS,EACzC,CACD,IAAMkvB,EAAiB/gB,EAAgBmf,GAAW7V,MAAM,GAAG/S,MAAMiD,MAAM,KACvEspB,EAAkB/B,EAAe,GAAG1O,QAAQ,MAAO,MACnD2Q,EAAgBjC,EAAe,GAAG1O,QAAQ,MAAO,YATjDyQ,EAAkBH,GAClBK,EAAgBJ,KAUf,CAAC5iB,IAEe,OAAf8e,GAAoC,OAAbG,EAE1B,OAAO,KAWR,SAASgE,EAAmBC,EAAkBC,GAM7C,GALAL,EAAkBI,GAClBF,EAAgBG,GAIC,KAAbD,GAA8B,KAAXC,EACtBrG,EAAUrc,WAAWpB,OACf,CACN,IAAMsa,EAAY,GAAH,OAAM0E,EAAc6E,GAApB,YAAiC7E,EAAc8E,IAC9DhkB,EAAMyR,UAAU,CAAC+I,KAInB,OACC,yBAAK9K,UAAU,iCACd,yBAAKA,UAAU,sCACd,yBAAKA,UAAU,wCACd,2BACC5Z,KAAK,iBACL4Z,UAAU,wCACVtY,MAAOssB,EACPxL,IAAKsL,EACLrL,IAAKsL,EACLpR,SAhCL,SAAgC7c,GAC/BsuB,EAAmBtuB,EAAM8c,cAAclb,MAAOwsB,MAiC3C,2BACC9tB,KAAK,iBACL4Z,UAAU,sCACVtY,MAAOwsB,EACP1L,IAAKsL,EACLrL,IAAKsL,EACLpR,SApCL,SAA8B7c,GAC7BsuB,EAAmBJ,EAAcluB,EAAM8c,cAAclb,c,k9BCQxC6sB,MArEf,WAA2B,IACXtG,EAActb,cAArBrC,MADkB,EAOtBiQ,cAHM5O,EAJgB,EAIzBrG,MAASqG,YACTnB,EALyB,EAKzBA,MACAF,EANyB,EAMzBA,MAIKib,EAAQ5Z,EAAY3O,OAAS,EAAI2O,EAAY,GAAK,KAElDse,EAAc1E,GAASA,EAAMyE,YAAe,GAC5CI,EAAY7E,GAASA,EAAM4E,UAAa,GAbpB,IAgBQjkB,mBAAS+jB,GAAc,IAhB/B,GAgBnBlB,EAhBmB,KAgBTyF,EAhBS,SAiBMtoB,mBAASkkB,GAAY,IAjB3B,GAiBnBnB,EAjBmB,KAiBTwF,EAjBS,KA2B1B,SAAS/iB,EAAe2iB,EAAkBC,GAMzC,GALAE,EAAcH,GACdI,EAAYH,GAIK,KAAbD,GAA8B,KAAXC,EACtBrG,EAAUrc,WAAWpB,OACf,CACN,IAAMsa,EAAY,GAAH,OAAMuJ,EAAN,YAAkBC,GACjChkB,EAAMyR,UAAU,CAAC+I,KAInB,OAAmB,OAAfmF,GAAoC,OAAbG,EAEnB,KAIP,yBAAKpQ,UAAU,iCACd,yBAAKA,UAAU,sCACd,yBAAKA,UAAU,mBACd,2BACC5Z,KAAK,OACL4Z,UAAU,8BACV0U,YAAU,WACVhtB,MAAOqnB,EACPpM,SApCL,SAA4B7c,GAC3B4L,EAAe5L,EAAM8c,cAAclb,MAAOunB,MAqCvC,2BACC7oB,KAAK,OACL4Z,UAAU,4BACV2C,SArCL,SAA0B7c,GACzB4L,EAAeqd,EAAUjpB,EAAM8c,cAAclb,QAqCzCA,MAAOunB,QCjDE0F,MAVf,WAAqB,IACZnkB,EAAU+P,cAAV/P,MAER,OAAIA,EAAMwa,UAA+B,aAAnBxa,EAAMwa,SACpB,kBAAC,EAAD,MAGD,kBAAC,EAAD,O,s9BC+FO4J,OA/Ff,SAASA,EAAeviB,GAA2B,IAC1ChG,EAAUsG,cAAVtG,MACAmE,EAAU+P,cAAV/P,MAF0C,KAIdtE,oBAAS,GAJK,GAI3C+mB,EAJ2C,KAI/BC,EAJ+B,UAKZhnB,mBAASsE,EAAMoQ,gBALH,GAK3CC,EAL2C,KAK9BsS,EAL8B,KAO5CC,EAAiB/gB,EAAK+gB,gBAAkB,GAC1CC,EAAoBhhB,EAAK+gB,eAAejY,UAAY,GAEpDmY,EAAkB,EAEhBC,EACiB,eAAtB/iB,EAAM2N,aAAgCkV,EAAkBrwB,OAASwN,EAAM4N,kBAExE,GAAImV,GAA0B1S,EAAa,CAC1C,IAAMe,EAAoByR,EAAkBrwB,OAE5CqwB,EAAoBA,EAAkB1qB,MAAM,EAAG6H,EAAM4N,mBAErDkV,EAAkB1R,EAAoBpR,EAAM4N,kBAiB7C,OACC,wBAAI4B,UAAU,oDACb,yBAAKA,UAAU,2BACd,4BACCmC,QAAS,kBAAM9P,EAAKmhB,gBAAgBJ,GAAgB,IACpDpT,UAAU,6BACV4N,eAAcvb,EAAKgb,YAEnB,0BACCvH,MAAOzT,EAAKkb,UAAY,CAAEO,eAAgB,qBAAmBpnB,EAC7DsZ,UACC3N,EAAKgb,WAAa,sCAAwC,+BAG1Dhb,EAAK+gB,eAAeliB,MANtB,KAM+BmB,EAAK+gB,eAAerF,MANnD,MASAsF,EAAkBrwB,OAAS,EAC3B,4BACCgd,UACCiT,EACG,mCACA,6CAEJQ,gBAAc,QACdtR,QAAS,kBAAM+Q,GAAeD,KAP/B,KAWG,MAEJA,GAAcI,EACd,yBAAKrT,UAAU,0BACd,wBAAIA,UAAU,0BACZqT,EAAkBplB,KAAI,SAAAvG,GACtB,IAAMimB,EAAiBthB,EAAM+E,gBAAgBZ,EAAO9I,GAAO4D,MACrDiiB,EAAYI,IAAmBpc,IAAoBE,QACnD4b,EAAaM,IAAmBpc,IAAoBO,YAC1D,OACC,kBAAC8iB,EAAD,CACC5sB,IAAKN,EAAMgsB,KACXN,eAAgB1rB,EAChB2lB,WAAYA,EACZE,UAAWA,EACXiG,gBAAiBnhB,EAAKmhB,qBAxD5B,oCACED,GACA,wBAAIvT,UAAU,mDACb,4BAAQmC,QAAS,kBAAMgR,GAAgBtS,IAAcb,UAAU,kCAC7Da,EAAc,YAAH,OAAeyS,EAAf,SAAwC,qBA4DvD,uCCnDWuB,ICnDHjO,GDmDGiO,GA3Cf,WAAsB,IACbxoB,EAAUsG,cAAVtG,MADa,EAOjBkU,cAJH/P,EAHoB,EAGpBA,MACSmB,EAJW,EAIpBrG,MAASqG,YACTrB,EALoB,EAKpBA,MACA2R,EANoB,EAMpBA,SAGD,SAASuR,EAAgB/iB,EAAmB8c,GAC3CA,EAAYjd,EAAMwR,YAAYrR,GAAcH,EAAMuR,YAAYpR,GAG/D,OACC,yBAAKuP,UAAU,iCACd,yBAAKA,UAAU,0CACd,wBAAIA,UAAU,+BACZrO,EAAY1D,KAAI,SAAAvG,GAEhB,IAAMimB,EAAiBthB,EAAM+E,gBAAgBZ,EAAO9I,GAAO4D,MAErD+hB,EAAaM,IAAmBpc,IAAoBO,YACpDyb,EAAYI,IAAmBpc,IAAoBE,QAEzD,OACC,kBAAC,GAAD,CACCzJ,IAAKN,EAAMsJ,MACXoiB,eAAgB1rB,EAChB2lB,WAAYA,EACZE,UAAWA,EACXiG,gBAAiBA,SAQrBvR,EAASC,sB,SC9CD0E,K,oBAAAA,E,gCAAAA,E,YAAAA,E,4BAAAA,E,gBAAAA,E,gBAAAA,E,gBAAAA,E,YAAAA,E,sBAAAA,E,gCAAAA,E,kCAAAA,E,uBAAAA,Q,0BCgBNkO,GAA2C,CAChD,CAAEnO,UAAWC,GAAUuG,SAAUzG,UAAWqO,GAC5C,CAAEpO,UAAWC,GAAUoO,eAAgBtO,UAAWuO,GAClD,CAAEtO,UAAWC,GAAU3Z,aAAcyZ,UAAWwO,GAChD,CAAEvO,UAAWC,GAAUwH,KAAM1H,UAAWyO,GACxC,CAAExO,UAAWC,GAAUuL,OAAQzL,UAAW0O,GAC1C,CAAEzO,UAAWC,GAAU9I,OAAQ4I,UAAW2O,GAC1C,CAAE1O,UAAWC,GAAU+N,UAAWjO,UAAW4O,GAC7C,CAAE3O,UAAWC,GAAU2O,WAAY7O,UAAW8O,KAGzCC,GAA2D,CAChE,CAAE1iB,eAAgBA,KAAeO,QAASoiB,mBAAoB,IAAIniB,MAClE,CAAER,eAAgBA,KAAeF,SAAU6iB,mBAAoB,IAAIziB,MACnE,CAAEF,eAAgBA,KAAeY,QAAS+hB,mBAAoB,IAAI9hB,MAClE,CAAEb,eAAgBA,KAAeU,QAASiiB,mBAAoB,IAAIhiB,OAM5D,SAAS4S,GAAmBqP,GAClC,IAAMC,EAAoC,GAD+B,WAI9D5tB,GACV,IAAM6tB,EAAQjP,GAAU5e,GAElB8tB,EAELH,EAAoBrb,MAAK,SAAAoM,GAAS,OAAIA,EAAUC,YAAckP,MAE9Df,GAAuBxa,MAAK,SAAAoM,GAAS,OAAIA,EAAUC,YAAckP,KAE9DC,GACHF,EAAgBtyB,KAAKwyB,IAVvB,IAAK,IAAM9tB,KAAO4e,GAAW,EAAlB5e,GAcX,OAAO4tB,EAMD,SAASG,GAA0BC,GACzC,IAAMC,EAAkD,GAD4D,WAIzGjuB,GACV,IAAMkuB,EAAQnjB,KAAe/K,GAEvBmuB,EAELH,EAAoB1b,MAAK,SAAA8b,GAAa,OAAIA,EAAcrjB,iBAAmBmjB,MAE3ET,GAA8Bnb,MAAK,SAAA8b,GAAa,OAAIA,EAAcrjB,iBAAmBmjB,KAElFC,GACHF,EAAqB3yB,KAAK6yB,IAV5B,IAAK,IAAMnuB,KAAO+K,KAAgB,EAAvB/K,GAaX,OAAOiuB,I,+BC5ED,IAAKljB,E,6EAAAA,K,kBAAAA,E,oBAAAA,E,kBAAAA,E,mBAAAA,M,KAML,IAAeC,EAErB,WAAmBqjB,G,uGAAgC,S,OAAA,G,EAAA,oB,EAAA,M,sFAClDhjB,KAAKN,eAAiBsjB,I,6FCoCTC,MAxBf,YAM+B,IAL9BzqB,EAK8B,EAL9BA,UACAY,EAI8B,EAJ9BA,cACAyG,EAG8B,EAH9BA,UACAqS,EAE8B,EAF9BA,cACAF,EAC8B,EAD9BA,eAMA,OAnBD,SAAqBkR,EAAoBC,EAAwBC,EAAqBC,GACrF,IAAMC,EAAaJ,GAA8B,IAAnBA,EAAQvzB,OAChC4zB,EAAgBJ,GAAoC,IAAtBA,EAAWxzB,OACzC6zB,EAAcJ,GAAgC,IAApBA,EAASzzB,OACnC8zB,EAAaJ,GAA8B,IAAnBA,EAAQ1zB,OACtC,OAAO2zB,GAAcC,GAAiBC,GAAeC,EAY/BC,CAFqEtqB,EAAnFkH,QAAmFlH,EAAjEoH,WAAiEpH,EAAzCqH,SAAyCrH,EAArBgH,SAK9D,KAED4R,EACN,kBAACA,EAAD,CACCxZ,UAAWA,EACXqH,UAAWA,EACXzG,cAAeA,EACf8Y,cAAeA,IAEb,M,8wCCwDUyR,MA9Ef,YAAwG,IAA3EC,EAA2E,EAA3EA,MAAO/jB,EAAoE,EAApEA,UAAWqS,EAAyD,EAAzDA,cAAeF,EAA0C,EAA1CA,eACrDnc,EAAWH,cAAXG,OAEFsC,EAAS,IAAIC,IAAWvC,GAHyE,IAKzEgD,mBAAS,IALgE,GAKhGwe,EALgG,KAKvFwM,EALuF,SAMrEhrB,oBAAS,GAN4D,GAMhGL,EANgG,KAMrFsrB,EANqF,sDA0BvG,WAA8BjJ,EAAe1hB,GAA7C,6FACC2qB,GAAa,GAET/a,EAA4B,KAHjC,kBAMmB5Q,EACf4rB,aACA,CACCvqB,WAAY3D,EAAO4D,WACnBC,QAASC,mBAAmBkhB,GAC5B9gB,UAAWlE,EAAOgE,UAClBmqB,qBAAqB,EACrB1qB,YAAazD,EAAO0D,aAErBJ,GAEAiM,MAAK,SAAAtR,GAIL,OAAOlE,OAAOkK,OAAO,IAAImC,IAASnI,OArBtC,OAMEiV,EANF,2DAwBMhO,IAAMC,SAAN,MAxBN,mDA6BE9F,QAAQ3C,MAAM,8BAAd,MA7BF,QAgCCuxB,GAAa,GAET/a,GACH8a,EAAW9a,GAnCb,0DA1BuG,sBAiEvG,OAxDApM,qBAAU,WAET,IAAMsnB,EAAapuB,EAAOquB,sBAAwB,IAE5CtnB,EAAM7B,IAAM8B,YAAYC,SACxB7K,EAAUqB,YAAW,kBAd2E,6CAcrE6wB,CAAeP,EAAOhnB,EAAIG,SAAQknB,GAEnE,OAAO,WACNrnB,EAAII,SACJpK,aAAaX,MAEZ,CAAC2xB,EAAO/tB,EAAOquB,uBA8CjB,yBAAKvX,UAAU,oBACd,kBAAC,EAAD,CACCuF,cAAeA,EACfrS,UAAWA,EACXrH,UAAWA,EACXY,cAAeie,EACfrF,eAAgBA,M,y3DCsDLC,IA/Hf,YAAsG,IAA7Ela,EAA6E,EAA7EA,aAAcsa,EAA+D,EAA/DA,SAAUH,EAAqD,EAArDA,cAAeF,EAAsC,EAAtCA,eACvDnc,EAAWH,cAAXG,OACFuuB,EAAa1B,YAA0B7sB,EAAOwuB,wBAA0B,IAFuB,EAGjFnW,cAAZ5Z,EAH6F,EAG7FA,EAH6F,KAG1F6Z,KAGP7O,cADHtG,OAASV,EAL2F,EAK3FA,cAAec,EAL4E,EAK5EA,cAL4E,IAO7DP,mBAAS,IAPoD,GAOhFyrB,GAPgF,WAwErG,OA9DA3nB,qBAAU,WACT2nB,EAAgB3qB,mBAAmBrB,EAAcoB,SAAW,OAC1D,CAACpB,EAAcoB,QAAS3B,EAAcO,EAAc4Y,mBAGvDvU,qBAAU,WACLvD,GAAiBA,EAAcsf,iBAClC4L,EAAgB3qB,mBAAmBP,EAAcsf,oBAEhD,CAACtf,IAsDH,kBAAC,IAAMmkB,SAAP,CAAgBC,SAAU,6BAAMlpB,EAAE,WAAR,QACzB,kBAAC,IAAD,CACCiwB,aArDH,SACCtsB,EACAusB,GAEA,MAGkB,6BAAjBA,EAAQzxB,MACS,mCAAjByxB,EAAQzxB,MACS,gCAAjByxB,EAAQzxB,KAUR,OAAYyxB,GAAZ,IAAqBrS,WAAYla,EAAMka,aAGjCqS,GAgCLC,aAAc,SAACzlB,GAAD,OAfjB,SAAwBA,GACvB,IAAKA,EACJ,MAAO,GAER,IAAM0lB,EAAkBN,EAAWnd,MAAK,SAAA0d,GAAQ,OAAIA,EAASjlB,iBAAmBV,EAAKU,kBACrF,OAAKglB,EAGGA,EAA4CrC,mBAAmBhH,SAASrc,GAFxE,GAS8B4lB,CAAe5lB,IACnDsQ,SA7BH,SAA0BtQ,EAAkBa,GAC3C,GAAKb,EAAL,CAIA,IAAM0lB,EAAkBN,EAAWnd,MAAK,SAAA0d,GAAQ,OAAIA,EAASjlB,iBAAmBV,EAAKU,kBAChFglB,GAIJA,EAA4CrC,mBAAmBwC,iBAAiB7lB,EAAMa,KAoBrFilB,kBAAmBnrB,mBAAmB5B,GAAgB,MAErD,SAACgtB,GAAmD,IAC5CC,EAA2DD,EAA3DC,OAAQ7S,EAAmD4S,EAAnD5S,WAAY8S,EAAuCF,EAAvCE,cAAeC,EAAwBH,EAAxBG,SAAU9S,EAAc2S,EAAd3S,UAE/C+S,EAAkBH,GAAU7S,GAAcA,EAAWxiB,OAAS,EACpE,OACC,yBAAKgd,UAAU,+BAA+ByY,kBAAgB,2BAC7D,yBAAK/Y,GAAG,0BAA0BM,UAAU,gBAA5C,2BAGA,6BACC5Z,KAAK,OACL0f,MAAO,CAAEF,MAAO,SACZ0S,EAAc,CACjBrQ,UAAW,SAAAniB,GACN4f,IACHA,EAAS5f,EAAOsyB,GAChB3S,MAKFiT,QAAS,WACJlT,GAAcA,EAAWxiB,OAAS,GACrCu1B,KAIF1V,YAAalb,EAAE,uBACf,kBAAmB,8BAGpB6wB,EACA,kBAAC,EAAD,CACCvB,MAAOzR,GAAc,GACrBtS,UAAWklB,EACX7S,cAAeA,EACfF,eAAgBA,IAEd","file":"react-hawksearch-search.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"react-hawksearch-\" + ({\"4\":\"vendors~rheostat\"}[chunkId]||chunkId) + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([547,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import React, { useContext } from 'react';\r\n\r\nimport { HawksearchConfig } from 'types/HawksearchConfig';\r\n\r\nconst ConfigContext = React.createContext({} as ConfigContextValue);\r\n\r\nexport interface ConfigContextValue {\r\n\t/** Global configuration. */\r\n\tconfig: HawksearchConfig;\r\n}\r\n\r\nexport interface ConfigProviderProps {\r\n\tconfig: HawksearchConfig;\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\n// declare webpack's constant to appease typescript\r\ndeclare var __webpack_public_path__: string;\r\n\r\nfunction ConfigProvider({ config, children }: ConfigProviderProps) {\r\n\tif (config.assetPath) {\r\n\t\tlet path = config.assetPath;\r\n\r\n\t\t// ensure the provided path both starts and ends with a slash\r\n\t\tif (!path.startsWith('/')) {\r\n\t\t\tpath = '/' + path;\r\n\t\t}\r\n\t\tif (!path.endsWith('/')) {\r\n\t\t\tpath = path + '/';\r\n\t\t}\r\n\r\n\t\t// allow consumers to tell webpack where to load code split/lazy loaded files from, as they may not be\r\n\t\t// hosting our JS from /assets/ (the default path)\r\n\t\t__webpack_public_path__ = path;\r\n\t}\r\n\r\n\treturn <ConfigContext.Provider value={{ config }}>{children}</ConfigContext.Provider>;\r\n}\r\n\r\nexport function useHawkConfig() {\r\n\tconst context = useContext(ConfigContext);\r\n\r\n\tif (!context.config) {\r\n\t\tthrow new Error(\r\n\t\t\t'No HawksearchConfig is available, did you forget to wrap your components in a ConfigProvider component?'\r\n\t\t);\r\n\t}\r\n\r\n\treturn context;\r\n}\r\n\r\nexport default ConfigProvider;\r\n","export const getVisitorExpiry = () => {\r\n\tconst d = new Date();\r\n\t// 1 year\r\n\td.setTime(d.getTime() + 360 * 24 * 60 * 60 * 1000);\r\n\treturn d.toUTCString();\r\n};\r\n\r\nexport const getVisitExpiry = () => {\r\n\tconst d = new Date();\r\n\t// 4 hours\r\n\td.setTime(d.getTime() + 4 * 60 * 60 * 1000);\r\n\treturn d.toUTCString();\r\n};\r\n\r\nexport const createGuid = () => {\r\n\tconst s: any[] = [];\r\n\tconst hexDigits = '0123456789abcdef';\r\n\tfor (let i = 0; i < 36; i++) {\r\n\t\ts[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n\t}\r\n\ts[14] = '4'; // bits 12-15 of the time_hi_and_version field to 0010\r\n\t// tslint:disable-next-line: no-bitwise\r\n\ts[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\r\n\ts[8] = s[13] = s[18] = s[23] = '-';\r\n\r\n\tconst uuid = s.join('');\r\n\treturn uuid;\r\n};\r\n\r\nexport const getCookie = name => {\r\n\tconst nameEQ = name + '=';\r\n\tconst ca = document.cookie.split(';');\r\n\t// tslint:disable-next-line: prefer-for-of\r\n\tfor (let i = 0; i < ca.length; i++) {\r\n\t\tlet c = ca[i];\r\n\t\twhile (c.charAt(0) === ' ') {\r\n\t\t\tc = c.substring(1, c.length);\r\n\t\t}\r\n\t\tif (c.indexOf(nameEQ) === 0) {\r\n\t\t\treturn c.substring(nameEQ.length, c.length);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nexport const setCookie = (name, value, expiry) => {\r\n\tlet expires;\r\n\tif (expiry) {\r\n\t\texpires = '; expires=' + expiry;\r\n\t} else {\r\n\t\texpires = '';\r\n\t}\r\n\tdocument.cookie = name + '=' + value + expires + '; path=/';\r\n};\r\n","import { useEffect } from 'react';\r\nimport axios, { CancelToken } from 'axios';\r\n\r\nimport { SearchStore, FacetSelectionState } from './Store';\r\nimport HawkClient from 'net/HawkClient';\r\nimport { Response, Request, FacetSelections, Result } from 'models/Search';\r\nimport { useMergableState } from 'util/MergableState';\r\nimport { useHawkConfig } from 'components/ConfigProvider';\r\nimport { Facet, Value } from 'models/Facets';\r\nimport { FacetType } from 'models/Facets/FacetType';\r\nimport { Request as ProductDetailsRequest, Response as ProductDetailsResponse } from 'models/ProductDetails';\r\nimport { Request as PinItemRequest } from 'models/PinItems';\r\nimport { Request as SortingOrderRequest } from 'models/PinItemsOrder';\r\nimport { getCookie, setCookie, createGuid, getVisitExpiry, getVisitorExpiry } from 'helpers/utils';\r\nimport TrackingEvent, { SearchType } from 'components/TrackingEvent';\r\nimport { Response as CompareDataResponse, Request as CompareItemRequest } from 'models/CompareItems';\r\n\r\nexport interface SearchActor {\r\n\t/**\r\n\t * Performs a search with the currently configured pending search request. The search request can be\r\n\t * configured via the `setSearch` method. This method usually doesn't need to be called directly, as\r\n\t * the `StoreProvider` component will usually trigger searches directly in response to calls to\r\n\t * `setSearch`.\r\n\t * @returns A promise that resolves when the search request has been completed.\r\n\t */\r\n\tsearch(cancellationToken?: CancelToken): Promise<void>;\r\n\r\n\t/**\r\n\t * Configures the next search request that will be executed. This will also execute a search in response to\r\n\t * the next search request changing.\r\n\t * @param search The partial search request object. This will be merged with previous calls to `setSearch`.\r\n\t * @param doHistory Whether or not this search request will push a history entry into the browser. If\r\n\t * \t\t\t\t\tnot specified, the default is `true`.\r\n\t */\r\n\tsetSearch(search: Partial<Request>, doHistory?: boolean): void;\r\n\r\n\t/**\r\n\t * Toggles a facet value for the next search request that will be executed. If the given facet had previously\r\n\t * been selected, it will be unselected. If the negation state of a selected facet is changed, the selection\r\n\t * will have its negation state changed. Internally, this will call `setSearch` to configure the next search\r\n\t * with this selected facet.\r\n\t * @param facet The facet for which the value is being selected.\r\n\t * @param facetValue The facet value being selected.\r\n\t * @param negate  Whether or not this selection is considered a negation.\r\n\t */\r\n\ttoggleFacetValue(facet: Facet | string, facetValue: Value | string, negate?: boolean): void;\r\n\r\n\tsetFacetValues(facet: Facet | string, facetValues: Value[] | string[]): void;\r\n\r\n\t/**\r\n\t * Entirely clears all the values of the given facet from the current selection.\r\n\t * @param facet The facet to clear.\r\n\t */\r\n\tclearFacet(facet: Facet | string): void;\r\n\r\n\t/**\r\n\t * Clears a given facet value of the given facet from the current selection.\r\n\t * @param facet The facet to clear.\r\n\t * @param facetValue The facet value to clear.\r\n\t */\r\n\tclearFacetValue(facet: Facet | string, facetValue?: Value | string): void;\r\n\r\n\t/**\r\n\t * Clears all selected facets from the current selection.\r\n\t */\r\n\tclearAllFacets(): void;\r\n\r\n\t// Pin items\r\n\tpinItem(payload: PinItemRequest, cancellationToken?: CancelToken): Promise<any>;\r\n\r\n\t// update sorting order of pinned items\r\n\tupdatePinOrder(payload: SortingOrderRequest, cancellationToken?: CancelToken): Promise<any>;\r\n\r\n\t// Store items to make comparision via request\r\n\tsetItemsToCompare(resultItem: Result, isCheck: boolean): void;\r\n\r\n\t// To store items after getting the results from compare request\r\n\tsetComparedResults(comparedResults: Result[]): void;\r\n\r\n\t// To store items after getting the results from compare request\r\n\tsetProductDetailsResults(detailsResult: Result): void;\r\n\r\n\t// Clear stored compared items\r\n\tclearItemsToCompare(): void;\r\n\r\n\t// Get comparision of items from request\r\n\tgetComparedItems(request: CompareItemRequest, cancellationToken?: CancelToken): Promise<CompareDataResponse>;\r\n\r\n\t// Get product details\r\n\tgetProductDetails(request: ProductDetailsRequest, cancellationToken?: CancelToken): Promise<ProductDetailsResponse>;\r\n}\r\n\r\nexport function useHawkState(initialSearch?: Partial<Request>): [SearchStore, SearchActor] {\r\n\tconst { config } = useHawkConfig();\r\n\r\n\tconst client = new HawkClient(config);\r\n\r\n\tconst [store, setStore] = useMergableState(\r\n\t\tnew SearchStore({\r\n\t\t\tpendingSearch: initialSearch || {\r\n\t\t\t\tFacetSelections: {},\r\n\t\t\t},\r\n\t\t\tisLoading: true,\r\n\t\t\titemsToCompare: [],\r\n\t\t\tcomparedResults: [],\r\n\t\t\titemsToCompareIds: [],\r\n\t\t\tproductDetails: {},\r\n\t\t}),\r\n\t\tSearchStore\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\t// when the pending search changes, trigger a search\r\n\r\n\t\tconst cts = axios.CancelToken.source();\r\n\t\tsearch(cts.token);\r\n\r\n\t\treturn () => {\r\n\t\t\tcts.cancel();\r\n\t\t};\r\n\t}, [store.pendingSearch]);\r\n\r\n\t/**\r\n\t * Performs a search with the currently configured pending search request. The search request can be\r\n\t * configured via the `setSearch` method. This method usually doesn't need to be called directly, as\r\n\t * the `StoreProvider` component will usually trigger searches directly in response to calls to\r\n\t * `setSearch`.\r\n\t * @returns A promise that resolves when the search request has been completed.\r\n\t */\r\n\tasync function search(cancellationToken?: CancelToken): Promise<void> {\r\n\t\tsetStore({ isLoading: true });\r\n\r\n\t\tlet searchResults: Response | null = null;\r\n\t\tconst searchParams = {\r\n\t\t\t// the search request being executed is spread from the pendingSearch\r\n\t\t\t...store.pendingSearch,\r\n\t\t\t// pass parameter for extended response\r\n\t\t\tIsInPreview: config.isInPreview,\r\n\t\t\t// and override some of the request fields with config values\r\n\t\t\tClientGuid: config.clientGuid,\r\n\t\t\tKeyword: store.pendingSearch.Keyword\r\n\t\t\t\t? decodeURIComponent(store.pendingSearch.Keyword || '')\r\n\t\t\t\t: store.pendingSearch.Keyword,\r\n\t\t\tSearchWithin: store.pendingSearch.SearchWithin\r\n\t\t\t\t? decodeURIComponent(store.pendingSearch.SearchWithin || '')\r\n\t\t\t\t: store.pendingSearch.SearchWithin,\r\n\t\t};\r\n\r\n\t\t// The index name in the configuration takes priority over the one supplied from the URL\r\n\t\tif (config.indexName) {\r\n\t\t\tObject.assign(searchParams, { IndexName: config.indexName });\r\n\t\t}\r\n\r\n\t\t// If the index name is required and no value is provided from the config or the URL, the request is canceled\r\n\t\tif (config.indexNameRequired && !searchParams.IndexName) {\r\n\t\t\tsetStore({ isLoading: false });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// Fill clientdata\r\n\t\tlet visitId = getCookie('hawk_visit_id');\r\n\t\tlet visitorId = getCookie('hawk_visitor_id');\r\n\t\tif (!visitId) {\r\n\t\t\tsetCookie('hawk_visit_id', createGuid(), getVisitExpiry());\r\n\t\t\tvisitId = getCookie('hawk_visit_id');\r\n\t\t}\r\n\t\tif (!visitorId) {\r\n\t\t\tsetCookie('hawk_visitor_id', createGuid(), getVisitorExpiry());\r\n\t\t\tvisitorId = getCookie('hawk_visitor_id');\r\n\t\t}\r\n\t\tconst updatedRequest = {\r\n\t\t\tClientData: {\r\n\t\t\t\tVisitorId: visitorId || '',\r\n\t\t\t\tVisitId: visitId || '',\r\n\t\t\t\tUserAgent: navigator.userAgent,\r\n\t\t\t\tPreviewBuckets: store.searchResults ? store.searchResults.VisitorTargets.map(v => v.Id) : [],\r\n\t\t\t},\r\n\t\t\t...searchParams,\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tsearchResults = await client.search(updatedRequest, cancellationToken);\r\n\t\t} catch (error) {\r\n\t\t\tif (axios.isCancel(error)) {\r\n\t\t\t\t// if the request was cancelled, it's because this component was updated\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconsole.error('Search request error:', error);\r\n\t\t\tsetStore({ requestError: true });\r\n\t\t}\r\n\r\n\t\tsetStore({ isLoading: false });\r\n\r\n\t\tif (searchResults) {\r\n\t\t\tif (!searchResults.Success) {\r\n\t\t\t\tconsole.error('Search result error:', searchResults);\r\n\t\t\t\tsetStore({ requestError: true });\r\n\t\t\t} else {\r\n\t\t\t\tconst selectedFacets = searchParams.FacetSelections ? Object.keys(searchParams.FacetSelections) : [];\r\n\t\t\t\tif (\r\n\t\t\t\t\tsearchParams.SortBy ||\r\n\t\t\t\t\tsearchParams.PageNo ||\r\n\t\t\t\t\tsearchParams.MaxPerPage ||\r\n\t\t\t\t\tselectedFacets.length ||\r\n\t\t\t\t\tsearchParams.SearchWithin\r\n\t\t\t\t) {\r\n\t\t\t\t\tTrackingEvent.track('searchtracking', {\r\n\t\t\t\t\t\ttrackingId: searchResults.TrackingId,\r\n\t\t\t\t\t\ttypeId: SearchType.Refinement,\r\n\t\t\t\t\t\tkeyword: searchParams.Keyword,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tTrackingEvent.track('searchtracking', {\r\n\t\t\t\t\t\ttrackingId: searchResults.TrackingId,\r\n\t\t\t\t\t\ttypeId: SearchType.Initial,\r\n\t\t\t\t\t\tkeyword: searchParams.Keyword,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tsetStore({\r\n\t\t\t\t\tsearchResults: new Response(searchResults),\r\n\t\t\t\t\trequestError: false,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync function pinItem(request: PinItemRequest, cancellationToken?: CancelToken): Promise<any> {\r\n\t\treturn await client.pinItem(request, cancellationToken);\r\n\t}\r\n\r\n\tasync function updatePinOrder(request: SortingOrderRequest, cancellationToken?: CancelToken): Promise<any> {\r\n\t\treturn await client.updatePinOrder(request, cancellationToken);\r\n\t}\r\n\r\n\t/**\r\n\t * Performs a comparision between two or more than two products based on ID\r\n\t * user can use this method from view application.\r\n\t * @returns A promise that resolves when the compare request has been completed.\r\n\t */\r\n\tasync function getComparedItems(\r\n\t\trequest: CompareItemRequest,\r\n\t\tcancellationToken?: CancelToken\r\n\t): Promise<CompareDataResponse> {\r\n\t\treturn await client.getComparedItems(request, cancellationToken);\r\n\t}\r\n\r\n\t/**\r\n\t * Get product details by ID\r\n\t * @returns A promise that resolves when the product details request has been completed.\r\n\t */\r\n\tasync function getProductDetails(\r\n\t\trequest: ProductDetailsRequest,\r\n\t\tcancellationToken?: CancelToken\r\n\t): Promise<ProductDetailsResponse> {\r\n\t\treturn await client.getProductDetails(request, cancellationToken);\r\n\t}\r\n\r\n\t/**\r\n\t * Configures the next search request that will be executed. This will also execute a search in response to\r\n\t * the next search request changing.\r\n\t * @param search The partial search request object. This will be merged with previous calls to `setSearch`.\r\n\t * @param doHistory Whether or not this search request will push a history entry into the browser. If\r\n\t * \t\t\t\t\tnot specified, the default is `true`.\r\n\t */\r\n\tfunction setSearch(pendingSearch: Partial<Request>, doHistory?: boolean): void {\r\n\t\tif (doHistory === undefined) {\r\n\t\t\tdoHistory = true;\r\n\t\t}\r\n\r\n\t\tsetStore(prevState => {\r\n\t\t\tconst newState = {\r\n\t\t\t\tpendingSearch: { ...prevState.pendingSearch, ...pendingSearch },\r\n\t\t\t\tdoHistory,\r\n\t\t\t};\r\n\t\t\tif (newState.pendingSearch.Keyword === '') {\r\n\t\t\t\tnewState.pendingSearch.Keyword = undefined;\r\n\t\t\t}\r\n\r\n\t\t\treturn newState;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the facet selections and search within configuration for the next search request. This will also\r\n\t * clear the page number of the next request to display the first page of results.\r\n\t * @param selections The facet selections to set.\r\n\t * @param searchWithin The search within value to set.\r\n\t */\r\n\tfunction setSearchSelections(selections?: FacetSelections, searchWithin?: string) {\r\n\t\tsetSearch({\r\n\t\t\tFacetSelections: selections,\r\n\t\t\tSearchWithin: searchWithin,\r\n\r\n\t\t\t// when we change facet selections, also clear the current page so that we navigate\r\n\t\t\t// back to the first page of results\r\n\t\t\tPageNo: undefined,\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Toggles a facet value for the next search request that will be executed. Internally, this will call\r\n\t * `setSearch` to configure the next search with this selected facet.\r\n\t * @param facet The facet for which the value is being selected.\r\n\t * @param facetValue The facet value being selected.\r\n\t * @param negate  Whether or not this selection is considered a negation.\r\n\t */\r\n\tfunction toggleFacetValue(facet: Facet | string, facetValue: Value | string, negate?: boolean): void {\r\n\t\tif (negate === undefined) {\r\n\t\t\tnegate = false;\r\n\t\t}\r\n\r\n\t\tconst facetName: string = typeof facet === 'string' ? facet : facet.Name;\r\n\t\tconst facetField = typeof facet === 'string' ? facet : facet.selectionField;\r\n\r\n\t\tconst valueValue = typeof facetValue === 'string' ? facetValue : facetValue.Value;\r\n\t\tconst valueLabel = typeof facetValue === 'string' ? facetValue : facetValue.Label;\r\n\r\n\t\tif (!valueValue) {\r\n\t\t\tconsole.error(`Facet ${facetName} (${facetField}) has no facet value for ${valueLabel}`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet facetSelections = store.pendingSearch.FacetSelections;\r\n\r\n\t\t// handle `searchWithin` facet, which isn't a facet selection but is instead a field on the\r\n\t\t// search request.\r\n\t\tif (facetField === 'searchWithin') {\r\n\t\t\t// set the search within to the facet value provided\r\n\t\t\tsetSearchSelections(facetSelections, /* searchWithin */ valueValue);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!facetSelections) {\r\n\t\t\tfacetSelections = {};\r\n\t\t}\r\n\r\n\t\tif (!facetSelections[facetField]) {\r\n\t\t\tfacetSelections[facetField] = [];\r\n\t\t}\r\n\r\n\t\tconst { state: selState, selectionIndex } = store.isFacetSelected(facet, facetValue);\r\n\r\n\t\tif (selState === FacetSelectionState.Selected || selState === FacetSelectionState.Negated) {\r\n\t\t\t// we're selecting this facet, and it's already selected\r\n\r\n\t\t\t// first, remove it from our selections\r\n\t\t\tfacetSelections[facetField]!.splice(selectionIndex!, 1);\r\n\r\n\t\t\tif (\r\n\t\t\t\t(selState === FacetSelectionState.Selected && negate) ||\r\n\t\t\t\t(selState === FacetSelectionState.Negated && !negate)\r\n\t\t\t) {\r\n\t\t\t\t// if we're toggling from negation to non-negation or vice versa, then push the new selection\r\n\t\t\t\tfacetSelections[facetField]!.push(negate ? `-${valueValue}` : valueValue);\r\n\t\t\t} else {\r\n\t\t\t\t// if we're not toggling the negation, nothing to do because we already removed the selection above\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// not selected, so we want to select it\r\n\t\t\tfacetSelections[facetField]!.push(negate ? `-${valueValue}` : valueValue);\r\n\t\t}\r\n\r\n\t\tif (facetSelections[facetField]!.length === 0) {\r\n\t\t\t// clean up any facets that no longer have any selected facet values\r\n\t\t\tdelete facetSelections[facetField];\r\n\t\t}\r\n\r\n\t\tsetSearchSelections(facetSelections, store.pendingSearch.SearchWithin);\r\n\t}\r\n\r\n\tfunction setFacetValues(facet: Facet | string, facetValues: Value[] | string[]): void {\r\n\t\tconst facetName = typeof facet === 'string' ? facet : facet.Name;\r\n\t\tconst facetField = typeof facet === 'string' ? facet : facet.selectionField;\r\n\r\n\t\tlet facetSelections = store.pendingSearch.FacetSelections;\r\n\r\n\t\tif (!facetSelections) {\r\n\t\t\tfacetSelections = {};\r\n\t\t}\r\n\r\n\t\tfacetSelections[facetField] = [];\r\n\r\n\t\tfor (const facetValue of facetValues) {\r\n\t\t\tconst valueValue = typeof facetValue === 'string' ? facetValue : facetValue.Value;\r\n\t\t\tconst valueLabel = typeof facetValue === 'string' ? facetValue : facetValue.Label;\r\n\r\n\t\t\tif (!valueValue) {\r\n\t\t\t\tconsole.error(`Facet ${facetName} (${facetField}) has no facet value for ${valueLabel}`);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfacetSelections[facetField]!.push(valueValue);\r\n\t\t}\r\n\r\n\t\tsetSearchSelections(facetSelections, store.pendingSearch.SearchWithin);\r\n\t}\r\n\r\n\t/**\r\n\t * Entirely clears all the values of the given facet from the current selection.\r\n\t * @param facet The facet to clear.\r\n\t */\r\n\tfunction clearFacet(facet: Facet | string) {\r\n\t\tconst facetField = typeof facet === 'string' ? facet : facet.selectionField;\r\n\r\n\t\tconst facetSelections = store.pendingSearch.FacetSelections;\r\n\r\n\t\t// handle `searchWithin` facet, which isn't a facet selection but is instead a field on the\r\n\t\t// search request.\r\n\t\tif (facetField === 'searchWithin') {\r\n\t\t\t// set searchWithin to undefined to clear it\r\n\t\t\tsetSearchSelections(facetSelections, /* searchWithin */ undefined);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!facetSelections || !facetSelections[facetField]) {\r\n\t\t\t// if there are no facet selections or the facet isn't selected at all, there's nothing to clear\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdelete facetSelections[facetField];\r\n\r\n\t\tsetSearchSelections(facetSelections, store.pendingSearch.SearchWithin);\r\n\t}\r\n\r\n\t/**\r\n\t * Clears a given facet value of the given facet from the current selection.\r\n\t * @param facet The facet to clear.\r\n\t * @param facetValue The facet value to clear.\r\n\t */\r\n\tfunction clearFacetValue(facet: Facet | string, facetValue: Value | string) {\r\n\t\tconst facetName = typeof facet === 'string' ? facet : facet.Name;\r\n\t\tconst facetField = typeof facet === 'string' ? facet : facet.selectionField;\r\n\r\n\t\tconst valueValue = typeof facetValue === 'string' ? facetValue : facetValue.Value;\r\n\t\tconst valueLabel = typeof facetValue === 'string' ? facetValue : facetValue.Label;\r\n\r\n\t\tif (!valueValue) {\r\n\t\t\tconsole.error(`Facet ${facetName} (${facetField}) has no facet value for ${valueLabel}`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// handle `searchWithin` facet, which isn't a facet selection but is instead a field on the\r\n\t\t// search request.\r\n\t\tif (facetField === 'searchWithin') {\r\n\t\t\t// set searchWithin to undefined to clear it\r\n\t\t\tsetSearchSelections(store.pendingSearch.FacetSelections, /* searchWithin */ undefined);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst { state: selState, selectionIndex } = store.isFacetSelected(facet, facetValue);\r\n\r\n\t\tif (selState === FacetSelectionState.NotSelected) {\r\n\t\t\t// if there are no facet selections or the facet isn't selected at all, there's nothing to clear\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst facetSelections = store.pendingSearch.FacetSelections!;\r\n\r\n\t\t// remove it from the selections\r\n\t\tfacetSelections[facetField]!.splice(selectionIndex!, 1);\r\n\r\n\t\tif (facetSelections[facetField]!.length === 0) {\r\n\t\t\t// clean up any facets that no longer have any selected facet values\r\n\t\t\tdelete facetSelections[facetField];\r\n\t\t}\r\n\r\n\t\tsetSearchSelections(facetSelections, store.pendingSearch.SearchWithin);\r\n\t}\r\n\r\n\t/**\r\n\t * Clears all selected facets from the current selection.\r\n\t */\r\n\tfunction clearAllFacets(): void {\r\n\t\tsetSearchSelections(undefined, undefined);\r\n\t}\r\n\r\n\tfunction setItemsToCompare(resultItem: Result, isCheck: boolean): void {\r\n\t\tlet itemsArray = [...store.itemsToCompare];\r\n\t\tif (isCheck) {\r\n\t\t\t// append\r\n\t\t\titemsArray = [...itemsArray, ...[resultItem]];\r\n\t\t} else {\r\n\t\t\t// filter out\r\n\t\t\titemsArray = itemsArray.filter(item => item.DocId !== resultItem.DocId);\r\n\t\t}\r\n\t\t// setStore({ itemsToCompare: itemsArray });\r\n\t\tsetStore({\r\n\t\t\titemsToCompare: itemsArray,\r\n\t\t\titemsToCompareIds: itemsArray.map(item => item.DocId),\r\n\t\t});\r\n\t}\r\n\r\n\tfunction setComparedResults(data: Result[]): void {\r\n\t\tsetStore({\r\n\t\t\tcomparedResults: data,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction setProductDetailsResults(data: Result): void {\r\n\t\tsetStore({\r\n\t\t\tproductDetails: data,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction clearItemsToCompare() {\r\n\t\tsetStore({\r\n\t\t\titemsToCompare: [],\r\n\t\t\titemsToCompareIds: [],\r\n\t\t});\r\n\t}\r\n\r\n\tconst actor: SearchActor = {\r\n\t\tsearch,\r\n\t\tsetSearch,\r\n\t\ttoggleFacetValue,\r\n\t\tsetFacetValues,\r\n\t\tclearFacet,\r\n\t\tclearFacetValue,\r\n\t\tclearAllFacets,\r\n\t\tpinItem,\r\n\t\tupdatePinOrder,\r\n\t\tsetItemsToCompare,\r\n\t\tsetComparedResults,\r\n\t\tclearItemsToCompare,\r\n\t\tgetComparedItems,\r\n\t\tgetProductDetails,\r\n\t\tsetProductDetailsResults,\r\n\t};\r\n\r\n\treturn [store, actor];\r\n}\r\n","import { useState, Dispatch } from 'react';\r\n\r\ntype SetStateAction<T> = Partial<T> | ((prevState: T) => Partial<T>);\r\n\r\nexport function useMergableState<T>(\r\n\tinitialValue: T,\r\n\ttypeConstructor: new (init: Partial<T>) => T\r\n): [T, Dispatch<SetStateAction<T>>] {\r\n\tconst [state, setState] = useState(new typeConstructor(initialValue));\r\n\r\n\tfunction setStateAndMerge(value: SetStateAction<T>) {\r\n\t\tif (typeof value === 'function') {\r\n\t\t\t// if we're being passed a function, we're setting state in the form of setState(prevState => ...).\r\n\r\n\t\t\tsetState(prevState => {\r\n\t\t\t\t// so we derive the new state from the previous state\r\n\t\t\t\tconst newState = value(prevState);\r\n\r\n\t\t\t\t// and then set the new merged state\r\n\t\t\t\treturn new typeConstructor({ ...prevState, ...newState });\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// otherwise, the new state was simply passed in\r\n\t\tsetState(prevState => {\r\n\t\t\t// merge state together and set it\r\n\t\t\treturn new typeConstructor({ ...prevState, ...value });\r\n\t\t});\r\n\t}\r\n\r\n\treturn [state, setStateAndMerge];\r\n}\r\n","import React, { useContext } from 'react';\r\n\r\nimport { SearchStore } from 'store/Store';\r\nimport { useHawkState, SearchActor } from 'store/HawkState';\r\nimport { Request } from 'models/Search';\r\n\r\nconst HawkContext = React.createContext({} as HawkContextValue);\r\n\r\nexport interface HawkContextValue {\r\n\t/** The store of data used throughout the application. */\r\n\tstore: SearchStore;\r\n\t/**\r\n\t * An interface that allows actions to be performed on the store (such as executing searches,\r\n\t * changing pages, etc).\r\n\t */\r\n\tactor: SearchActor;\r\n}\r\n\r\nexport interface HawkStoreProviderProps {\r\n\t/** The initial search to perform when initializing the search components. */\r\n\tinitialSearch?: Partial<Request>;\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\n/**\r\n * This component acts as the global store for the hawksearch application state. Only one instance of this component\r\n * should exist, and it should be the root level component.\r\n */\r\nfunction StoreProvider({ initialSearch, children }: HawkStoreProviderProps) {\r\n\tconst [store, actor] = useHawkState(initialSearch);\r\n\r\n\treturn <HawkContext.Provider value={{ store, actor }}>{children}</HawkContext.Provider>;\r\n}\r\n\r\n/**\r\n * Retrieves the global hawk store for use within a component.\r\n */\r\nexport function useHawksearch() {\r\n\treturn useContext(HawkContext);\r\n}\r\n\r\nexport default StoreProvider;\r\n","import { ClientData } from 'models/Search';\r\n\r\nexport class Request {\r\n\t/**\r\n\t * API Client Guid. Usually comes from the \"Tracking Key\" in the \"Account Info\" section of the hawk dashboard.\r\n\t */\r\n\tpublic ClientGuid: string;\r\n\r\n\t/**\r\n\t * Search term entered by a user. If keyword is not included, all items configured to be returned will be\r\n\t * returned. When this parameter is populated, the results will be matched against this term by the search\r\n\t * engine.\r\n\t */\r\n\tpublic Keyword?: string;\r\n\r\n\t/**\r\n\t * This is used by the Hawksearch Preview to set to true will display elements in a preview mode.\r\n\t *\r\n\t * You can use this if you desire additional score information returned.\r\n\t */\r\n\tpublic IsInPreview?: boolean;\r\n\r\n\tpublic Type?: 'Category' | 'Product' | 'Content' | 'Popular';\r\n\r\n\t/** The maximum number of results to return for selected @see Type */\r\n\tpublic ProductCount?: number;\r\n\r\n\t/** Flag set to true will display also full Document object from Elastic for Products and Content suggestions. */\r\n\tpublic DisplayFullResponse?: boolean;\r\n\r\n\t/**\r\n\t * An array of field names that will be returned in the response. If provided, only the fields listed will\r\n\t * be returned. If no FieldOverride value is sent, the Workbench configuration will be used.\r\n\t *\r\n\t * If the Skip from Custom flag is turned on for a field, it will not be returned in the response, even if\r\n\t * set in the FieldOverride parameter.\r\n\t */\r\n\tpublic FieldOverride?: string[];\r\n\r\n\t/** Client data. */\r\n\tpublic ClientData?: ClientData;\r\n\r\n\tpublic IndexName?: string;\r\n}\r\n","import { Suggestion, SuggestionType, SuggestionStrategy } from './Suggestion';\r\nimport { ControllerStateAndHelpers } from 'downshift';\r\n\r\nexport class Category extends Suggestion {\r\n\t/** Display name of category (example: Men &raquo; Jackets). */\r\n\tpublic Value: string;\r\n\t/**\r\n\t * URL for displaying contents of the category, ex:\r\n\t * http://dev.hawksearch.net/sites/elasticdemo?department_nest=Jackets_4\r\n\t */\r\n\tpublic Url: string;\r\n\r\n\tpublic constructor(init: Category) {\r\n\t\tsuper(SuggestionType.Category);\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n\r\nexport class CategoryStrategy implements SuggestionStrategy {\r\n\tpublic handleItemChange(item: Category, downshift: ControllerStateAndHelpers<Category>): void {\r\n\t\tlocation.assign(item.Url);\r\n\t}\r\n\r\n\tpublic toString(item: Category): string {\r\n\t\treturn this ? item.Value : '';\r\n\t}\r\n}\r\n","import { Result } from 'models/Search';\r\nimport { Suggestion, SuggestionStrategy, SuggestionType } from './Suggestion';\r\nimport { ControllerStateAndHelpers } from 'downshift';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\n\r\nexport class Product extends Suggestion {\r\n\t/** Name of the item (if applicable). */\r\n\tpublic ProductName: string;\r\n\r\n\t/* Sku of the item (if applicable). */\r\n\tpublic Sku: string;\r\n\r\n\t/** URL of image of the item (if applicable). */\r\n\tpublic Thumb: string;\r\n\r\n\t/** URL of product page (if applicable). */\r\n\tpublic Url: string;\r\n\r\n\t/** HTML to display the item in autocomplete. */\r\n\tpublic Html: string;\r\n\r\n\t/**\r\n\t * This will only be populated if the request parameter @see Request.DisplayFullResponse is sent\r\n\t * as `true`.\r\n\t */\r\n\tpublic Results: Result;\r\n\r\n\tpublic constructor(init: Product) {\r\n\t\tsuper(SuggestionType.Product);\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n\r\nexport class ProductStrategy implements SuggestionStrategy {\r\n\tpublic handleItemChange(item: Product, downshift: ControllerStateAndHelpers<Product>): void {\r\n\t\tlocation.assign(item.Url);\r\n\t}\r\n\r\n\tpublic toString(item: Product): string {\r\n\t\treturn this ? item.ProductName : '';\r\n\t}\r\n}\r\n","import { Result } from 'models/Search';\r\nimport { SuggestionType, Suggestion, SuggestionStrategy } from './Suggestion';\r\nimport { ControllerStateAndHelpers } from 'downshift';\r\n\r\nexport class Content extends Suggestion {\r\n\t/** Display label for the content item in Autocomplete. */\r\n\tpublic Value: string;\r\n\r\n\t/** The URL for the link created. */\r\n\tpublic Url: string;\r\n\r\n\t/** The display label in HTML format, if applicable. */\r\n\tpublic Html: string;\r\n\r\n\tpublic Results: Result;\r\n\r\n\tpublic constructor(init: Content) {\r\n\t\tsuper(SuggestionType.Content);\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n\r\nexport class ContentStrategy implements SuggestionStrategy {\r\n\tpublic handleItemChange(item: Content, downshift: ControllerStateAndHelpers<Content>): void {\r\n\t\tlocation.assign(item.Url);\r\n\t}\r\n\r\n\tpublic toString(item: Content): string {\r\n\t\treturn this ? item.Value : '';\r\n\t}\r\n}\r\n","import { SuggestionType, Suggestion, SuggestionStrategy } from './Suggestion';\r\nimport { ControllerStateAndHelpers } from 'downshift';\r\n\r\nexport class Popular extends Suggestion {\r\n\t/** Display label for the popular search term. */\r\n\tpublic Value: string;\r\n\r\n\t/** The URL for the link created. */\r\n\tpublic Url: string;\r\n\r\n\tpublic constructor(init: Popular) {\r\n\t\tsuper(SuggestionType.Popular);\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n\r\nexport class PopularStrategy implements SuggestionStrategy {\r\n\tpublic handleItemChange(item: Popular, downshift: ControllerStateAndHelpers<Popular>): void {\r\n\t\tlocation.assign(item.Url);\r\n\t}\r\n\r\n\tpublic toString(item: Popular): string {\r\n\t\treturn this ? item.Value : '';\r\n\t}\r\n}\r\n","import { Category } from './Category';\r\nimport { Product } from './Product';\r\nimport { Content } from './Content';\r\nimport { Popular } from './Popular';\r\n\r\nexport class Response {\r\n\t/** Number of products that would be in search results if search was executed. */\r\n\tpublic Count: number;\r\n\t/** Number of content items that would be in search results if search was executed.  */\r\n\tpublic ContentCount: number;\r\n\r\n\t/**\r\n\t * Pairs of display values and URLs for matching category names.  The number of categories returned\r\n\t * is configured in the Hawksearch Workbench unless overridden by the request parameters.\r\n\t */\r\n\tpublic Categories: Category[];\r\n\r\n\tpublic Products: Product[];\r\n\r\n\t/**\r\n\t * A set of objects for each content item returned. The number returned is configured in the\r\n\t * Hawksearch Workbench > Keyword Search > Auto-complete > Update Top Content.\r\n\t */\r\n\tpublic Content: Content[];\r\n\r\n\t/**\r\n\t * A set of Value and Url for each popular search term. The definition of Popular can be defined in\r\n\t * the Hawksearch Workbench > Keyword Search > Auto-complete > Update Popular Searches.\r\n\t */\r\n\tpublic Popular: Popular[];\r\n\r\n\t/** Search website URL to be used to complete links. */\r\n\tpublic SearchWebsiteUrl: string;\r\n\r\n\t/** The name of the parameter used to pass the keyword entered by user. */\r\n\tpublic KeywordField: string;\r\n\r\n\t/**\r\n\t * Will be included in the response if there are results to display. The `CategoryHeading` contains\r\n\t * the text to display above the list of categories to display in Autocomplete.\r\n\t */\r\n\tpublic CategoryHeading?: string;\r\n\r\n\t/**\r\n\t * Will be included in the response if there are results to display. The `ContentHeading` contains\r\n\t * the text to display above the list of content items to display in Autocomplete.\r\n\t */\r\n\tpublic ContentHeading?: string;\r\n\r\n\t/**\r\n\t * Will be included in the response if there are results to display. The `ProductHeading` contains\r\n\t * the text to display above the list of products to display in Autocomplete.\r\n\t */\r\n\tpublic ProductHeading?: string;\r\n\r\n\t/**\r\n\t * Will be included in the response if there are results to display. The `PopularHeading` contains\r\n\t * the text to display above the list of popular search terms to display in Autocomplete.\r\n\t */\r\n\tpublic PopularHeading?: string;\r\n\r\n\t/**\r\n\t * Will be included in the response if there are results to display. The `ViewAllButtonLabel` contains\r\n\t * the text to display for the link to return all results from searching with the term entered.\r\n\t */\r\n\tpublic ViewAllButtonLabel?: string;\r\n\r\n\tpublic constructor(init: Response) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tthis.Categories = init.Categories.map(r => new Category(r));\r\n\t\tthis.Products = init.Products.map(r => new Product(r));\r\n\t\tthis.Popular = init.Popular.map(r => new Popular(r));\r\n\t\tthis.Content = init.Content.map(r => new Content(r));\r\n\t}\r\n}\r\n\r\nexport interface ResponseProps {\r\n\tCount: number;\r\n\tContentCount: number;\r\n\tCategories: Category[];\r\n\tProducts: Product[];\r\n\tContent: Content[];\r\n\tPopular: Popular[];\r\n\tSearchWebsiteUrl: string;\r\n\tKeywordField: string;\r\n\tCategoryHeading?: string;\r\n\tContentHeading?: string;\r\n\tProductHeading?: string;\r\n\tPopularHeading?: string;\r\n\tViewAllButtonLabel?: string;\r\n}\r\n","enum E_T {\r\n\tpageLoad = 1,\r\n\tsearch = 2,\r\n\tclick = 3,\r\n\taddToCart = 4,\r\n\trate = 5,\r\n\tsale = 6,\r\n\tbannerClick = 7,\r\n\tbannerImpression = 8,\r\n\trecommendationClick = 10,\r\n\tautoCompleteClick = 11,\r\n\tadd2CartMultiple = 14,\r\n}\r\n\r\nenum P_T {\r\n\titem = 1,\r\n\tlanding = 2,\r\n\tcart = 3,\r\n\torder = 4,\r\n\tcustom = 5,\r\n}\r\n\r\nexport enum SuggestType {\r\n\tPopularSearches = 1,\r\n\tTopCategories = 2,\r\n\tTopProductMatches = 3,\r\n\tTopContentMatches = 4,\r\n}\r\n\r\nexport enum SearchType {\r\n\tInitial = 1,\r\n\tRefinement = 2,\r\n}\r\n\r\nclass TrackingEvent {\r\n\tprivate static instance: TrackingEvent;\r\n\tprivate trackingURL: string;\r\n\tprivate clientGUID: string;\r\n\r\n\t/**\r\n\t * The Singleton's constructor should always be private to prevent direct\r\n\t * construction calls with the `new` operator.\r\n\t */\r\n\tprivate constructor() {}\r\n\r\n\t/**\r\n\t * The static method that controls the access to the singleton instance.\r\n\t *\r\n\t * This implementation let you subclass the Singleton class while keeping\r\n\t * just one instance of each subclass around.\r\n\t */\r\n\tpublic static getInstance(url?: string): TrackingEvent {\r\n\t\tif (!TrackingEvent.instance) {\r\n\t\t\tTrackingEvent.instance = new TrackingEvent();\r\n\t\t}\r\n\r\n\t\treturn TrackingEvent.instance;\r\n\t}\r\n\r\n\t/**\r\n\t * Finally, any singleton should define some business logic, which can be\r\n\t * executed on its instance.\r\n\t */\r\n\r\n\tpublic setTrackingURL(url: string) {\r\n\t\tthis.trackingURL = url;\r\n\t}\r\n\r\n\tpublic getTrackingURL() {\r\n\t\treturn this.trackingURL;\r\n\t}\r\n\r\n\tpublic setClientGUID(guid: string) {\r\n\t\tthis.clientGUID = guid;\r\n\t}\r\n\r\n\tpublic getClientGUID() {\r\n\t\treturn this.getClientGUID;\r\n\t}\r\n\r\n\tprivate getVisitorExpiry() {\r\n\t\tconst d = new Date();\r\n\t\t// 1 year\r\n\t\td.setTime(d.getTime() + 360 * 24 * 60 * 60 * 1000);\r\n\t\treturn d.toUTCString();\r\n\t}\r\n\r\n\tprivate getVisitExpiry() {\r\n\t\tconst d = new Date();\r\n\t\t// 4 hours\r\n\t\td.setTime(d.getTime() + 4 * 60 * 60 * 1000);\r\n\t\treturn d.toUTCString();\r\n\t}\r\n\r\n\tprivate createGuid() {\r\n\t\tconst s: any[] = [];\r\n\t\tconst hexDigits = '0123456789abcdef';\r\n\t\tfor (let i = 0; i < 36; i++) {\r\n\t\t\ts[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n\t\t}\r\n\t\ts[14] = '4'; // bits 12-15 of the time_hi_and_version field to 0010\r\n\t\t// tslint:disable-next-line: no-bitwise\r\n\t\ts[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\r\n\t\ts[8] = s[13] = s[18] = s[23] = '-';\r\n\r\n\t\tconst uuid = s.join('');\r\n\t\treturn uuid;\r\n\t}\r\n\r\n\tprivate getCookie(name) {\r\n\t\tconst nameEQ = name + '=';\r\n\t\tconst ca = document.cookie.split(';');\r\n\t\t// tslint:disable-next-line: prefer-for-of\r\n\t\tfor (let i = 0; i < ca.length; i++) {\r\n\t\t\tlet c = ca[i];\r\n\t\t\twhile (c.charAt(0) === ' ') {\r\n\t\t\t\tc = c.substring(1, c.length);\r\n\t\t\t}\r\n\t\t\tif (c.indexOf(nameEQ) === 0) {\r\n\t\t\t\treturn c.substring(nameEQ.length, c.length);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate setCookie(name, value, expiry?) {\r\n\t\tlet expires;\r\n\t\tif (expiry) {\r\n\t\t\texpires = '; expires=' + expiry;\r\n\t\t} else {\r\n\t\t\texpires = '';\r\n\t\t}\r\n\t\tdocument.cookie = name + '=' + value + expires + '; path=/';\r\n\t}\r\n\r\n\tprivate writePageLoad(pageType) {\r\n\t\tconst c = document.documentElement;\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.pageLoad,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tPageTypeId: P_T[pageType],\r\n\t\t\t\t\tRequestPath: window.location.pathname,\r\n\t\t\t\t\tQs: window.location.search,\r\n\t\t\t\t\tViewportHeight: c.clientHeight,\r\n\t\t\t\t\tViewportWidth: c.clientWidth,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeSearchTracking(trackingId, typeId) {\r\n\t\tif (typeId === SearchType.Initial) {\r\n\t\t\tthis.setCookie('hawk_query_id', this.createGuid());\r\n\t\t}\r\n\t\tconst queryId = this.getCookie('hawk_query_id');\r\n\t\tconst c = document.documentElement;\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.search,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tQueryId: queryId,\r\n\t\t\t\t\tTrackingId: trackingId,\r\n\t\t\t\t\tTypeId: typeId,\r\n\t\t\t\t\tViewportHeight: c.clientHeight,\r\n\t\t\t\t\tViewportWidth: c.clientWidth,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeClick(event, uniqueId, trackingId, url) {\r\n\t\tconst c = document.documentElement;\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.click,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tUrl: url,\r\n\t\t\t\t\tQs: window.location.search,\r\n\t\t\t\t\tRequestPath: window.location.pathname,\r\n\t\t\t\t\tTrackingId: trackingId,\r\n\t\t\t\t\tUniqueId: uniqueId,\r\n\t\t\t\t\tViewportHeight: c.clientHeight,\r\n\t\t\t\t\tViewportWidth: c.clientWidth,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeBannerClick(bannerId, campaignId, trackingId) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.bannerClick,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tCampaignId: campaignId,\r\n\t\t\t\t\tBannerId: bannerId,\r\n\t\t\t\t\tTrackingId: trackingId,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeBannerImpression(bannerId, campaignId, trackingId) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.bannerImpression,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tCampaignId: campaignId,\r\n\t\t\t\t\tBannerId: bannerId,\r\n\t\t\t\t\tTrackingId: trackingId,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\tprivate writeSale(orderNo, itemList, total, subTotal, tax, currency) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.sale,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tOrderNo: orderNo,\r\n\t\t\t\t\tItemList: itemList,\r\n\t\t\t\t\tTotal: total,\r\n\t\t\t\t\tTax: tax,\r\n\t\t\t\t\tSubTotal: subTotal,\r\n\t\t\t\t\tCurrency: currency,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\tprivate writeAdd2Cart(uniqueId, price, quantity, currency) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.addToCart,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tUniqueId: uniqueId,\r\n\t\t\t\t\tQuantity: quantity,\r\n\t\t\t\t\tPrice: price,\r\n\t\t\t\t\tCurrency: currency,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeAdd2CartMultiple(args) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.add2CartMultiple,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tItemsList: args,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeRate(uniqueId, value) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.rate,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tUniqueId: uniqueId,\r\n\t\t\t\t\tValue: value,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeRecommendationClick(widgetGuid, uniqueId, itemIndex, requestId) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.recommendationClick,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tItemIndex: itemIndex,\r\n\t\t\t\t\tRequestId: requestId,\r\n\t\t\t\t\tUniqueId: uniqueId,\r\n\t\t\t\t\tWidgetGuid: widgetGuid,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeAutoCompleteClick(keyword, suggestType, name, url) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.autoCompleteClick,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tKeyword: keyword,\r\n\t\t\t\t\tName: name,\r\n\t\t\t\t\tSuggestType: suggestType,\r\n\t\t\t\t\tUrl: url,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate mr(data) {\r\n\t\tlet visitId = this.getCookie('hawk_visit_id');\r\n\t\tlet visitorId = this.getCookie('hawk_visitor_id');\r\n\t\tif (!visitId) {\r\n\t\t\tthis.setCookie('hawk_visit_id', this.createGuid(), this.getVisitExpiry());\r\n\t\t\tvisitId = this.getCookie('hawk_visit_id');\r\n\t\t}\r\n\t\tif (!visitorId) {\r\n\t\t\tthis.setCookie('hawk_visitor_id', this.createGuid(), this.getVisitorExpiry());\r\n\t\t\tvisitorId = this.getCookie('hawk_visitor_id');\r\n\t\t}\r\n\t\tconst pl = Object.assign(\r\n\t\t\t{\r\n\t\t\t\tClientGuid: this.clientGUID,\r\n\t\t\t\tVisitId: visitId,\r\n\t\t\t\tVisitorId: visitorId,\r\n\t\t\t\t// TrackingProperties: hs.Context,\r\n\t\t\t\t// CustomDictionary: hs.Context.Custom,\r\n\t\t\t},\r\n\t\t\tdata\r\n\t\t);\r\n\t\tfetch(this.trackingURL, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\tbody: JSON.stringify(pl),\r\n\t\t})\r\n\t\t\t.then(resp => {\r\n\t\t\t\tconsole.log('Success:', resp.status);\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.error('Error:', error);\r\n\t\t\t});\r\n\t}\r\n\r\n\tpublic track(eventName, args) {\r\n\t\tif (!this.trackingURL || !this.clientGUID) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tswitch (eventName.toLowerCase()) {\r\n\t\t\tcase 'pageload':\r\n\t\t\t\t// HawkSearch.Context.add(\"uniqueid\", \"123456789\");\r\n\t\t\t\treturn this.writePageLoad(args.pageType);\r\n\t\t\tcase 'searchtracking':\r\n\t\t\t\t// HawkSearch.Tracking.track(\"searchtracking\", {trackingId:\"a9bd6e50-e434-45b9-9f66-489eca07ad0a\", typeId: HawkSearch.Tracking.SearchType.Initial});\r\n\t\t\t\t// HawkSearch.Tracking.track(\"searchtracking\", {trackingId:\"a9bd6e50-e434-45b9-9f66-489eca07ad0a\", typeId: HawkSearch.Tracking.SearchType.Refinement});\r\n\t\t\t\treturn this.writeSearchTracking(args.trackingId, args.typeId); // CHANGED\r\n\t\t\tcase 'click':\r\n\t\t\t\t// HawkSearch.Tracking.track('click',{event: e, uniqueId: \"33333\", trackingId: \"75a0801a-a93c-4bcb-81f1-f4b011f616e3\"});\r\n\t\t\t\treturn this.writeClick(args.event, args.uniqueId, args.trackingId, ''); // CHANGED\r\n\t\t\tcase 'bannerclick':\r\n\t\t\t\t// HawkSearch.Tracking.track('bannerclick',{bannerId: 1, campaignId: 2, trackingId:\"2d652a1e-2e05-4414-9d76-51979109f724\"});\r\n\t\t\t\treturn this.writeBannerClick(args.bannerId, args.campaignId, args.trackingId); // CHANGED\r\n\t\t\tcase 'bannerimpression':\r\n\t\t\t\t// HawkSearch.Tracking.track('bannerimpression',{bannerId: \"2\", campaignId: \"2\", trackingId:\"2d652a1e-2e05-4414-9d76-51979109f724\"});\r\n\t\t\t\treturn this.writeBannerImpression(args.bannerId, args.campaignId, args.trackingId); // CHANGED\r\n\t\t\tcase 'sale':\r\n\t\t\t\t// HawkSearch.Tracking.track('sale', {orderNo: 'order_123',itemList: [{uniqueid: '123456789', itemPrice: 12.99, quantity: 2}], total: 25.98, subTotal: 22, tax: 3.98, currency: 'USD'});\r\n\t\t\t\treturn this.writeSale(args.orderNo, args.itemList, args.total, args.subTotal, args.tax, args.currency);\r\n\t\t\tcase 'add2cart':\r\n\t\t\t\t// HawkSearch.Tracking.track('add2cart',{uniqueId: '123456789', price: 19.99, quantity: 3, currency: 'USD'});\r\n\t\t\t\treturn this.writeAdd2Cart(args.uniqueId, args.price, args.quantity, args.currency);\r\n\t\t\tcase 'add2cartmultiple':\r\n\t\t\t\t// HawkSearch.Tracking.track('add2cartmultiple', [{uniqueId: '123456789',price: 15.97,quantity: 1,currency: 'USD'},{uniqueId: '987465321', price: 18.00, quantity: 1, currency: 'USD'}]);\r\n\t\t\t\treturn this.writeAdd2CartMultiple(args);\r\n\t\t\tcase 'rate':\r\n\t\t\t\t// HawkSearch.Tracking.track('rate', {uniqueId: '123456789',value: 3.00});\r\n\t\t\t\treturn this.writeRate(args.uniqueId, args.value);\r\n\t\t\tcase 'recommendationclick':\r\n\t\t\t\t// HawkSearch.Tracking.track('recommendationclick',{uniqueId: \"223222\", itemIndex: \"222\", widgetGuid:\"2d652a1e-2e05-4414-9d76-51979109f724\", requestId:\"2d652a1e-2e05-4414-9d76-51979109f724\"});\r\n\t\t\t\treturn this.writeRecommendationClick(args.widgetGuid, args.uniqueId, args.itemIndex, args.requestId);\r\n\t\t\tcase 'autocompleteclick':\r\n\t\t\t\t// HawkSearch.Tracking.track('autocompleteclick',{keyword: \"test\", suggestType: HawkSearch.Tracking.SuggestType.PopularSearches, name:\"tester\", url:\"/test\"});\r\n\t\t\t\treturn this.writeAutoCompleteClick(args.keyword, args.suggestType, args.name, args.url); // CHANGED\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// export TrackingEvent.getInstance();\r\nexport default TrackingEvent.getInstance();\r\n","class AuthToken {\r\n\tprivate static instance: AuthToken;\r\n\tprivate refreshToken: string;\r\n\tprivate accessToken: string;\r\n\r\n\t/**\r\n\t * The Singleton's constructor should always be private to prevent direct\r\n\t * construction calls with the `new` operator.\r\n\t */\r\n\tprivate constructor() {}\r\n\r\n\t/**\r\n\t * The static method that controls the access to the singleton instance.\r\n\t *\r\n\t * This implementation let you subclass the Singleton class while keeping\r\n\t * just one instance of each subclass around.\r\n\t */\r\n\tpublic static getInstance(url?: string): AuthToken {\r\n\t\tif (!AuthToken.instance) {\r\n\t\t\tAuthToken.instance = new AuthToken();\r\n\t\t}\r\n\r\n\t\treturn AuthToken.instance;\r\n\t}\r\n\r\n\tpublic setTokens(accessToken: string, refreshToken: string) {\r\n\t\tthis.refreshToken = refreshToken;\r\n\t\tthis.accessToken = accessToken;\r\n\t}\r\n\r\n\tpublic getTokens() {\r\n\t\treturn {\r\n\t\t\trefreshToken: this.refreshToken,\r\n\t\t\taccessToken: this.accessToken,\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport default AuthToken.getInstance();\r\n","import { Response, Request, Result } from 'models/Search';\r\nimport { Value, Facet } from 'models/Facets';\r\nimport { ClientSelections, ClientSelectionValue } from 'store/ClientSelections';\r\n\r\nexport enum FacetSelectionState {\r\n\t/** The facet value is not selected. */\r\n\tNotSelected,\r\n\t/** The facet value is selected. */\r\n\tSelected,\r\n\t/** The facet value is selected, but negated. */\r\n\tNegated,\r\n}\r\n\r\nexport interface SelectionInfo {\r\n\t/** The facet value selection state. */\r\n\tstate: FacetSelectionState;\r\n\r\n\t/**\r\n\t * If the facet value is `FacetSelectionState.Selected` or `FacetSelectionState.Negated`, this is the value of\r\n\t * the facet value. For negated facet values this will be prefixed with the negation character `'-'`.\r\n\t */\r\n\tselectedValue?: string;\r\n\t/**\r\n\t * If the facet value is `FacetSelectionState.Selected` or `FacetSelectionState.Negated`, this is the index\r\n\t * into the `pendingSearch.FacetSelections[facetName]` array for this facet value.\r\n\t */\r\n\tselectionIndex?: number;\r\n}\r\n\r\nexport class SearchStore {\r\n\t/** This represents the next search request that will be executed. */\r\n\tpublic pendingSearch: Partial<Request>;\r\n\t/**\r\n\t * Whether or not the next search request will perform history actions (pushing the search into browser\r\n\t * history).\r\n\t */\r\n\tpublic doHistory: boolean;\r\n\r\n\t/** Whether or not a search request is waiting for completion. */\r\n\tpublic isLoading: boolean;\r\n\r\n\tpublic itemsToCompare: Result[];\r\n\tpublic itemsToCompareIds: string[];\r\n\tpublic comparedResults: Result[];\r\n\tpublic productDetails: Partial<Result>;\r\n\r\n\t/** The results of the last search request, if one has been performed. Otherwise, `undefined`. */\r\n\tpublic searchResults?: Response;\r\n\r\n\tpublic requestError: boolean;\r\n\r\n\tpublic constructor(initial?: Partial<SearchStore>) {\r\n\t\tObject.assign(this, initial);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns whether or not this is the initial load of the search results.\r\n\t */\r\n\tpublic get isInitialLoad() {\r\n\t\treturn this.isLoading && !this.searchResults;\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether or not the given facet and facet value is selected, and returns info regarding the selection.\r\n\t * @param facet The facet for which the facet value will be checked for selection.\r\n\t * @param facetValue The facet value that will be checked for selection.\r\n\t */\r\n\tpublic isFacetSelected(facet: Facet | string, facetValue: Value | string): SelectionInfo {\r\n\t\tconst facetName = typeof facet === 'string' ? facet : facet.Name;\r\n\t\tconst facetField = typeof facet === 'string' ? facet : facet.selectionField;\r\n\r\n\t\tconst valueValue = typeof facetValue === 'string' ? facetValue : facetValue.Value;\r\n\t\tconst valueLabel = typeof facetValue === 'string' ? facetValue : facetValue.Label;\r\n\r\n\t\tif (!valueValue) {\r\n\t\t\tconsole.error(`Facet ${facetName} (${facetField}) has no facet value for ${valueLabel}`);\r\n\t\t\treturn { state: FacetSelectionState.NotSelected };\r\n\t\t}\r\n\r\n\t\tconst facetSelections = this.pendingSearch.FacetSelections;\r\n\r\n\t\tif (!facetSelections || !facetSelections[facetField]) {\r\n\t\t\treturn { state: FacetSelectionState.NotSelected };\r\n\t\t}\r\n\r\n\t\tconst selectionIdx = facetSelections[facetField]!.indexOf(valueValue);\r\n\t\tconst negationIdx = facetSelections[facetField]!.indexOf(`-${valueValue}`);\r\n\r\n\t\tif (selectionIdx !== -1) {\r\n\t\t\t// if the exact facet value exists, then we're normally selected\r\n\t\t\treturn {\r\n\t\t\t\tstate: FacetSelectionState.Selected,\r\n\t\t\t\tselectedValue: valueValue,\r\n\t\t\t\tselectionIndex: selectionIdx,\r\n\t\t\t};\r\n\t\t} else if (negationIdx !== -1) {\r\n\t\t\t// if the facet value is selected but prefixed with a -, then we're negated\r\n\t\t\treturn {\r\n\t\t\t\tstate: FacetSelectionState.Negated,\r\n\t\t\t\tselectedValue: `-${valueValue}`,\r\n\t\t\t\tselectionIndex: negationIdx,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn { state: FacetSelectionState.NotSelected };\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an object containing the selections that have been made in both the next search request and also\r\n\t * in the previous search request. This should be used when iterating selections instead of pulling the values\r\n\t * out from the search result or pending search - as this will merge the values together and provide an accurate\r\n\t * view of all facet selections.\r\n\t */\r\n\tpublic get facetSelections(): ClientSelections {\r\n\t\tconst {\r\n\t\t\tpendingSearch: { FacetSelections: clientSelections, SearchWithin },\r\n\t\t\tsearchResults,\r\n\t\t} = this;\r\n\t\tconst selections: ClientSelections = {};\r\n\r\n\t\tif (!clientSelections && !SearchWithin) {\r\n\t\t\treturn selections;\r\n\t\t}\r\n\r\n\t\t// if we've made selections on the client, transform these into more detailed selections.\r\n\t\t// the client-side selections are just facet fields and values without any labels - so we\r\n\t\t// need to combine this information with the list of facets received from the server in the\r\n\t\t// previous search in order to return a rich list of selections\r\n\r\n\t\tconst facets = searchResults ? searchResults.Facets : null;\r\n\r\n\t\tif (!facets) {\r\n\t\t\t// but we can only do this if we've received facet information from the server. without this\r\n\t\t\t// info we can't determine what labels should be used\r\n\t\t\treturn selections;\r\n\t\t}\r\n\r\n\t\t// manually handle the `searchWithin` selection, as this doesn't usually behave like a normal facet selection\r\n\t\t// but instead a field on the search request\r\n\t\tif (SearchWithin) {\r\n\t\t\tconst facet = facets.find(f => f.selectionField === 'searchWithin');\r\n\r\n\t\t\tif (facet) {\r\n\t\t\t\tselections.searchWithin = {\r\n\t\t\t\t\tfacet,\r\n\t\t\t\t\tlabel: facet.Name,\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: SearchWithin,\r\n\t\t\t\t\t\t\tvalue: SearchWithin,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!clientSelections) {\r\n\t\t\treturn selections;\r\n\t\t}\r\n\r\n\t\tObject.keys(clientSelections).forEach(fieldName => {\r\n\t\t\tconst selectionValues = clientSelections[fieldName];\r\n\r\n\t\t\tif (!selectionValues) {\r\n\t\t\t\t// if this selection has no values, it's not really selected\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst facet = facets.find(f => f.selectionField === fieldName);\r\n\r\n\t\t\tif (!facet) {\r\n\t\t\t\t// if there's no matching facet from the server, we can't show this since we'll have no labels\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst items: ClientSelectionValue[] = [];\r\n\r\n\t\t\tif (facet.FieldType === 'range') {\r\n\t\t\t\t// if the facet this selection is for is a range, there won't be a matching value and thus there won't be a label.\r\n\t\t\t\t// so because of this we'll just use the selection value as the label\r\n\r\n\t\t\t\tselectionValues.forEach(selectionValue => {\r\n\t\t\t\t\titems.push({\r\n\t\t\t\t\t\tlabel: selectionValue,\r\n\t\t\t\t\t\tvalue: selectionValue,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else if (facet.FieldType === 'tab') {\r\n\t\t\t\t// do not return the selection value for tab facet\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\t// for other types of facets, try to find a matching value\r\n\r\n\t\t\t\tselectionValues.forEach(selectionValue => {\r\n\t\t\t\t\tconst matchingVal = this.findMatchingValue(selectionValue, facet.Values);\r\n\r\n\t\t\t\t\tif (!matchingVal || !matchingVal.Label) {\r\n\t\t\t\t\t\t// if there's no matching value from the server, we cannot display because there would\r\n\t\t\t\t\t\t// be no label - same if there's no label at all\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\titems.push({\r\n\t\t\t\t\t\tlabel: matchingVal.Label,\r\n\t\t\t\t\t\tvalue: selectionValue,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tselections[fieldName] = {\r\n\t\t\t\tfacet,\r\n\t\t\t\tlabel: facet.Name,\r\n\t\t\t\titems,\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\treturn selections;\r\n\t}\r\n\r\n\tprivate findMatchingValue(selectionValue: string, facetValues: Value[]): Value | null {\r\n\t\tlet matchingValue: Value | null = null;\r\n\t\tif (!facetValues || facetValues.length === 0) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tfor (const facetValue of facetValues) {\r\n\t\t\tconst isMatchingVal = facetValue.Value === selectionValue || `-${facetValue.Value}` === selectionValue;\r\n\t\t\t// loop through children\r\n\t\t\tif (!isMatchingVal) {\r\n\t\t\t\tmatchingValue = this.findMatchingValue(selectionValue, facetValue.Children);\r\n\t\t\t} else {\r\n\t\t\t\tmatchingValue = facetValue;\r\n\t\t\t}\r\n\r\n\t\t\tif (matchingValue) {\r\n\t\t\t\treturn matchingValue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn matchingValue;\r\n\t}\r\n}\r\n","import axios, { CancelToken, AxiosInstance } from 'axios';\r\nimport { Request as SearchRequest, Response as SearchResponse, Result } from 'models/Search';\r\nimport { Request as CompareItemRequest, Response as CompareDataResponse } from 'models/CompareItems';\r\nimport { Request as AutocompleteRequest, Response as AutocompleteResponse } from 'models/Autocomplete';\r\nimport { Request as PinItemRequest } from 'models/PinItems';\r\nimport { Request as ProductDetailsRequest, Response as ProductDetailsResponse } from 'models/ProductDetails';\r\nimport { Request as SortingOrderRequest } from 'models/PinItemsOrder';\r\nimport { HawksearchConfig } from 'types/HawksearchConfig';\r\nimport AuthToken from 'components/AuthToken';\r\n\r\nclass HawkClient {\r\n\tprivate baseUrl: string;\r\n\tprivate searchUrl: string;\r\n\tprivate dashboardUrl: string;\r\n\tprivate autocompleteUrl: string;\r\n\tprivate compareItemsURL: string;\r\n\tprivate refreshTokenURL: string;\r\n\tprivate pinItemURL: string;\r\n\tprivate updatePinOrderURL: string;\r\n\tprivate rebuildIndexURL: string;\r\n\tprivate productDetailsURL: string;\r\n\tprivate axiosInstance: AxiosInstance = axios.create();\r\n\r\n\tconstructor(config: HawksearchConfig) {\r\n\t\tthis.baseUrl = config.apiUrl || 'https://searchapi-dev.hawksearch.net';\r\n\t\tthis.dashboardUrl = config.dashboardUrl || 'http://test.hawksearch.net/';\r\n\t\tthis.searchUrl = config.searchUrl || '/api/v2/search';\r\n\t\tthis.autocompleteUrl = config.autocompleteUrl || '/api/autocomplete';\r\n\t\tthis.refreshTokenURL = config.refreshTokenURL || '/api/internal-preview/refresh-token/';\r\n\t\tthis.pinItemURL = config.pinItemURL || '/api/pinning/set-pinning/';\r\n\t\tthis.updatePinOrderURL = config.updatePinOrderURL || '/api/pinning/update-pin-order/';\r\n\t\tthis.productDetailsURL = config.productDetailsURL || '/api/internal-preview/item-detail';\r\n\r\n\t\tthis.axiosInstance.interceptors.request.use(\r\n\t\t\tconf => {\r\n\t\t\t\tconst accessToken = AuthToken.getTokens().accessToken;\r\n\t\t\t\tif ((conf.url || '').indexOf('refresh-token') !== -1 || !accessToken) {\r\n\t\t\t\t\tdelete conf.headers.common.Authorization;\r\n\t\t\t\t\tdelete conf.headers.common.ClientGuid;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconf.headers.Authorization = `Bearer ${accessToken}`;\r\n\t\t\t\t\tconf.headers.ClientGuid = config.clientGuid;\r\n\t\t\t\t}\r\n\t\t\t\treturn conf;\r\n\t\t\t},\r\n\t\t\terror => {\r\n\t\t\t\tPromise.reject(error);\r\n\t\t\t}\r\n\t\t);\r\n\t\tthis.axiosInstance.interceptors.response.use(\r\n\t\t\tresponse => response,\r\n\t\t\terror => {\r\n\t\t\t\tconst originalRequest = error.config;\r\n\r\n\t\t\t\tif (error.response.status === 401 && !originalRequest._retry) {\r\n\t\t\t\t\toriginalRequest._retry = true;\r\n\t\t\t\t\tconst token = AuthToken.getTokens();\r\n\t\t\t\t\treturn this.axiosInstance\r\n\t\t\t\t\t\t.post(new URL(this.refreshTokenURL, this.baseUrl).href, {\r\n\t\t\t\t\t\t\tClientGuid: config.clientGuid,\r\n\t\t\t\t\t\t\tToken: token.accessToken,\r\n\t\t\t\t\t\t\tRefreshToken: token.refreshToken,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\t\t\tAuthToken.setTokens(res.data.Token, res.data.RefreshToken);\r\n\t\t\t\t\t\t\t\tthis.axiosInstance.defaults.headers.common.Authorization = 'Bearer ' + res.data.Token;\r\n\t\t\t\t\t\t\t\treturn this.axiosInstance(originalRequest);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn Promise.reject(error);\r\n\t\t\t}\r\n\t\t);\r\n\t\tthis.compareItemsURL = config.compareItemsURL || '/api/compare';\r\n\t}\r\n\r\n\tpublic async pinItem(request: PinItemRequest, cancellationToken?: CancelToken): Promise<any> {\r\n\t\tconst result = await this.axiosInstance.post<any>(new URL(this.pinItemURL, this.baseUrl).href, request, {\r\n\t\t\tcancelToken: cancellationToken,\r\n\t\t});\r\n\t\treturn result.data;\r\n\t}\r\n\r\n\tpublic async updatePinOrder(request: SortingOrderRequest, cancellationToken?: CancelToken): Promise<any> {\r\n\t\tconst result = await this.axiosInstance.post<any>(new URL(this.updatePinOrderURL, this.baseUrl).href, request, {\r\n\t\t\tcancelToken: cancellationToken,\r\n\t\t});\r\n\t\treturn result.data;\r\n\t}\r\n\r\n\tpublic async search(request: SearchRequest, cancellationToken?: CancelToken): Promise<SearchResponse> {\r\n\t\tconst result = await this.axiosInstance.post<SearchResponse>(\r\n\t\t\tnew URL(this.searchUrl, this.baseUrl).href,\r\n\t\t\trequest,\r\n\t\t\t{\r\n\t\t\t\tcancelToken: cancellationToken,\r\n\t\t\t}\r\n\t\t);\r\n\t\treturn result.data;\r\n\t}\r\n\r\n\tpublic async autocomplete(\r\n\t\trequest: AutocompleteRequest,\r\n\t\tcancellationToken?: CancelToken\r\n\t): Promise<AutocompleteResponse> {\r\n\t\tconst result = await axios.post<AutocompleteResponse>(\r\n\t\t\tnew URL(this.autocompleteUrl, this.baseUrl).href,\r\n\t\t\trequest,\r\n\t\t\t{\r\n\t\t\t\tcancelToken: cancellationToken,\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\treturn result.data;\r\n\t}\r\n\r\n\tpublic async getComparedItems(\r\n\t\trequest: CompareItemRequest,\r\n\t\tcancellationToken?: CancelToken\r\n\t): Promise<CompareDataResponse> {\r\n\t\tconst result = await axios.post<CompareDataResponse>(\r\n\t\t\tnew URL(this.compareItemsURL, this.baseUrl).href,\r\n\t\t\trequest,\r\n\t\t\t{\r\n\t\t\t\tcancelToken: cancellationToken,\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\treturn result.data;\r\n\t}\r\n\r\n\tpublic async getProductDetails(\r\n\t\trequest: ProductDetailsRequest,\r\n\t\tcancellationToken?: CancelToken\r\n\t): Promise<ProductDetailsResponse> {\r\n\t\tconst result = await axios.post<Result>(new URL(this.productDetailsURL, this.baseUrl).href, request, {\r\n\t\t\tcancelToken: cancellationToken,\r\n\t\t});\r\n\t\treturn new Result(result.data);\r\n\t}\r\n}\r\n\r\nexport default HawkClient;\r\n","export class Pagination {\r\n\t/** Number of total items in the result set. */\r\n\tpublic NofResults: number;\r\n\r\n\t/** The page number returned. */\r\n\tpublic CurrentPage: number;\r\n\r\n\t/** The number of items returned for the page. */\r\n\tpublic MaxPerPage: number;\r\n\r\n\t/** The total number of pages for the result set - with the current @see MaxPerPage. */\r\n\tpublic NofPages: number;\r\n\r\n\t/** Set of pagination options */\r\n\tpublic Items: PaginationItem[];\r\n\r\n\tpublic constructor(init: Pagination) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tthis.Items = init.Items.map(i => new PaginationItem(i));\r\n\t}\r\n}\r\n\r\nexport class PaginationItem {\r\n\t/** Display label for user's pagination option (i.e. 24 per page). */\r\n\tpublic Label: string;\r\n\t/** The maximum number of items that will be returned per page when this option is selected. */\r\n\tpublic PageSize: number;\r\n\r\n\t/** Indicates if this is the option selected. Only one pagination item will have this set to `true`. */\r\n\tpublic Selected: boolean;\r\n\r\n\t/** Indicates if this is the default option. Only one pagination item will have this set to `true`. */\r\n\tpublic Default: boolean;\r\n\r\n\tpublic constructor(init: PaginationItem) {\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n","import { Explain } from './Explain';\r\n\r\nexport class Result {\r\n\t/** Unique identifier for this search result item. */\r\n\tpublic DocId: string;\r\n\r\n\t/** Calculated relevancy score. */\r\n\tpublic Score: number;\r\n\r\n\t/**\r\n\t * Contains the fields for the search result item, as an object of string keys to an array\r\n\t * of string values. The keys correspond to the name of the field within the hawk dashboard,\r\n\t * and the value of the map is an array of strings for each of the values for that field.\r\n\t */\r\n\tpublic Document?: { [field: string]: string[] };\r\n\r\n\tpublic Explain?: Explain;\r\n\r\n\tpublic IsPin: boolean;\r\n\r\n\tpublic BestFragment: string;\r\n\t/**\r\n\t * Returns a single document value, by the given field name. If the field does not exist in\r\n\t * the document, or has no values, then `undefined` is returned instead.\r\n\t * @param field The field within the result document to retrieve the value of.\r\n\t */\r\n\tpublic getDocumentValue(field: string): string | undefined {\r\n\t\tif (this.Document) {\r\n\t\t\tconst values = this.Document[field];\r\n\r\n\t\t\tif (values && values.length > 0) {\r\n\t\t\t\treturn values[0];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tpublic constructor(init: Result) {\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n","export class Sorting {\r\n\t/** The sorting items. */\r\n\tpublic Items: SortingItem[];\r\n\r\n\tpublic constructor(init: Sorting) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tthis.Items = init.Items.map(i => new SortingItem(i));\r\n\t}\r\n}\r\n\r\nexport class SortingItem {\r\n\t/** Name of the sorting option. This is the label to display to users. */\r\n\tpublic Label: string;\r\n\t/**\r\n\t * The value to be used to specify the sort order once user selects it. This value is passed in the @see Request.SortBy\r\n\t * field in the @see Request object.\r\n\t */\r\n\tpublic Value: string;\r\n\r\n\t/** Indicates if this sorting option was configured to be the default. */\r\n\tpublic IsDefault: boolean;\r\n\t/** Indicates if this sorting option is currently being used for the current result set. */\r\n\tpublic Selected: boolean;\r\n\r\n\tpublic constructor(init: SortingItem) {\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n","export class Selections {\r\n\t[field: string]: SelectionFacet;\r\n\r\n\tpublic constructor(init: Selections) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tObject.keys(init).forEach(key => {\r\n\t\t\tconst selFacet = init[key];\r\n\r\n\t\t\tthis[key] = new SelectionFacet(selFacet);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport class SelectionFacet {\r\n\t/** Display name for facet. */\r\n\tpublic Label: string;\r\n\r\n\t/** Will contain an entry for each selection made within the facet. */\r\n\tpublic Items: SelectionFacetValue[];\r\n\r\n\tpublic constructor(init: SelectionFacet) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tthis.Items = init.Items.map(i => new SelectionFacetValue(i));\r\n\t}\r\n}\r\n\r\nexport class SelectionFacetValue {\r\n\t/** Display label for facet value. */\r\n\tpublic Label: string;\r\n\r\n\t/** Value for facet value. */\r\n\tpublic Value: string;\r\n\r\n\tpublic constructor(init: SelectionFacetValue) {\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n","export class Value {\r\n\t/** Label of the value to display. */\r\n\tpublic Label?: string;\r\n\t/** Value to use when setting the facet value selection. */\r\n\tpublic Value?: string;\r\n\r\n\t/** Number of results in current set that have this facet value. */\r\n\tpublic Count: number;\r\n\t/** Indicates if this facet value has been selected. */\r\n\tpublic Selected: boolean;\r\n\r\n\t/**\r\n\t * Used for displaying the slider facet. @see RangeStart indicates what the starting point of the range\r\n\t * to display, either on basis of what the user selected by sliding the slider, or if they have no\r\n\t * selection it reflects the lowest price product.\r\n\t */\r\n\tpublic RangeStart?: string;\r\n\t/**\r\n\t * Used for displaying the slider facet. @see RangeEnd indicates what the end point of the range to\r\n\t * display is, either on basis of what the user selected by sliding the slider, or if they have no\r\n\t * selection, it reflects the highest price product.\r\n\t */\r\n\tpublic RangeEnd?: string;\r\n\r\n\t/**\r\n\t * Used for displaying the slider facet. @see RangeMin indicates lowest value for the range in the list\r\n\t * of products displayed.\r\n\t */\r\n\tpublic RangeMin?: string;\r\n\t/**\r\n\t * Used for displaying the slider facet. @see RangeMax indicates highest value for the range in the list\r\n\t * of products displayed.\r\n\t */\r\n\tpublic RangeMax?: string;\r\n\r\n\t/** Used for nested facets. */\r\n\tpublic Path?: string;\r\n\r\n\t/** Set of pagination options */\r\n\tpublic Children: Value[];\r\n\r\n\tpublic Level: number;\r\n\r\n\tpublic constructor(init: Value) {\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n","export class Swatch {\r\n\t/** Match this value to the @see Value object in the @see Values array of @see Facet. */\r\n\tpublic Value: string;\r\n\r\n\t/** Name of the asset. */\r\n\tpublic AssetName: string;\r\n\t/** URL of the asset. */\r\n\tpublic AssetUrl: string;\r\n\r\n\t/** Indicates if value is the default. */\r\n\tpublic IsDefault: boolean;\r\n\r\n\t/** Color of the asset. */\r\n\tpublic Color: string;\r\n\r\n\tpublic constructor(init: Swatch) {\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n","export class Range {\r\n\t/** Label of the value to display. */\r\n\tpublic Label: string;\r\n\t/** Value to use when setting the facet value selection. */\r\n\tpublic Value: string;\r\n\r\n\t/** Indicates if the values are numeric. */\r\n\tpublic IsNumeric: boolean;\r\n\r\n\t/** Lower value of the range. */\r\n\tpublic LBound: string;\r\n\t/** Upper value of the range. */\r\n\tpublic UBound: string;\r\n\t/** Asset Url */\r\n\tpublic AssetFullUrl: string;\r\n\r\n\tpublic constructor(init: Range) {\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n","import { Value } from './Value';\r\nimport { Swatch } from './Swatch';\r\nimport { Range } from './Range';\r\nimport { FacetType } from 'models/Facets/FacetType';\r\n\r\nexport class Facet {\r\n\t/** Unique identifier of the facet. */\r\n\tpublic FacetId: number;\r\n\r\n\t/** Display name of the facet. */\r\n\tpublic Name: string;\r\n\r\n\t/** The name of the field that is linked to this facet. */\r\n\tpublic Field: string;\r\n\r\n\tpublic FieldType: 'string' | 'range' | 'numeric' | 'search' | 'tab';\r\n\tpublic FacetType: FacetType;\r\n\r\n\tpublic DisplayType: 'default' | 'scrolling' | 'truncating';\r\n\r\n\t/** Indicates the maximum number of facet values that are returned. */\r\n\tpublic MaxCount: number;\r\n\r\n\t/** Indicates the minimum number of results each facet value needs to have in order to be returned. */\r\n\tpublic MinHitCount: number;\r\n\r\n\t/**\r\n\t * If this is set, it is to be used as the facet name if passed in the `FacetSelections`. If not set,\r\n\t * the value of the Field object would be used. (This is only applicable when a slider and range\r\n\t * facets are both configured for the same field.)\r\n\t */\r\n\tpublic ParamName?: string;\r\n\r\n\t/**\r\n\t * Indicates the sorting logic that is used for this facets values. The possible values for this\r\n\t * are the parameters for sorting set options that are configured in \"Workbench > Data Configuration\r\n\t * > Sorting/Pagination\".\r\n\t */\r\n\tpublic SortBy: string;\r\n\r\n\t/** Indicates if the user should be able to apply more than one filter value from this facet. */\r\n\tpublic ExpandSelection: boolean;\r\n\r\n\t/** Indicates if facet values are numeric. */\r\n\tpublic IsNumeric: boolean;\r\n\t/** Indicates if facet values are currency (and should be displayed appropriately). */\r\n\tpublic IsCurrency: boolean;\r\n\t/** Indicates currency symbol in case of currency type facets */\r\n\tpublic CurrencySymbol: string;\r\n\t/** Indicates if the facet can be collapsed and expanded by the user. */\r\n\tpublic IsCollapsible: boolean;\r\n\t/** If @see IsCollapsible is `true`, this indicates if the facet should initially be collapsed or expanded. */\r\n\tpublic IsCollapsedDefault: boolean;\r\n\t/** Indicates if the facet is set to be visible. */\r\n\tpublic IsVisible: boolean;\r\n\t/**\r\n\t * Indicates if search is enabled for this facet. If it is enabled, a search box should be available for\r\n\t * users to filter the facet values by typing in the search box.\r\n\t */\r\n\tpublic IsSearch: boolean;\r\n\r\n\t/**\r\n\t * If facet display type is Scrolling, this value is the height in pixels for the window inside scroll box.\r\n\t * Only to be used if @see DisplayType is `\"scrolling\"`.\r\n\t */\r\n\tpublic ScrollHeight: number;\r\n\t/**\r\n\t * If the number of facet values exceeds this number and @see DisplayType is `\"scrolling\"`, then the facet\r\n\t * should be displayed as scrolling list; if not, display as `\"default\"`.\r\n\t */\r\n\tpublic ScrollThreshold: number;\r\n\t/**\r\n\t * If the number of facet values exceeds this number and @see DisplayType is `\"truncate\"`, then the facet\r\n\t * should be displayed as truncated list; if not, display as `\"default\"`.\r\n\t */\r\n\tpublic TruncateThreshold: number;\r\n\t/**\r\n\t * To be used if @see IsSearch is `true`. The number of facet values must be this number or higher for the\r\n\t * facet search box to display.\r\n\t */\r\n\tpublic SearchThreshold: number;\r\n\r\n\t/** Text to display when user hovers over a help icon. */\r\n\tpublic Tooltip?: string;\r\n\r\n\t/**\r\n\t * If `false`, indicates that sometimes this facet will not be returned. The conditions that trigger its\r\n\t * display are maintained in the Workbench.\r\n\t */\r\n\tpublic AlwaysVisible: boolean;\r\n\r\n\t/**\r\n\t * The display order of the facet in the facet list.\r\n\t */\r\n\tpublic SortOrder: number;\r\n\r\n\t/** This is maximum number of values that could be returned for the facet. */\r\n\tpublic NofVisible: number;\r\n\r\n\t/** Will be included if @see FacetType is `\"swatch\"`. */\r\n\tpublic SwatchData: Swatch[];\r\n\r\n\t/** Indicates type of facet range display. */\r\n\tpublic FacetRangeDisplayType: number;\r\n\r\n\t/** Indicates if setting in Workbench is set to On or Off. */\r\n\tpublic PreloadChildren: boolean;\r\n\r\n\t/**\r\n\t * To be used if @see FacetType is `\"slider\"`. If @see ShowSliderInputs is `true`, input boxes should be\r\n\t * available for user to enter values.\r\n\t */\r\n\tpublic ShowSliderInputs: boolean;\r\n\r\n\t/** Always present, but will only be populated if the facet is numeric and not a slider. */\r\n\tpublic Ranges: Range[];\r\n\t/** The values for this facet. */\r\n\tpublic Values: Value[];\r\n\t// Data type for datetime facet type\r\n\tpublic DataType?: string;\r\n\r\n\t/** Whether or not the facet should be rendered as truncated. */\r\n\tpublic get shouldTruncate() {\r\n\t\t// the facet does truncated listing of values if configured for truncating and we have too many facets\r\n\t\treturn this.DisplayType === 'truncating' && this.Values.length > this.TruncateThreshold;\r\n\t}\r\n\t/** Whether or not the facet should have a quick lookup search input. */\r\n\tpublic get shouldSearch() {\r\n\t\t// the facet should have a search box if configured to do so, and the number of facet values is greater\r\n\t\t// than the threshold\r\n\t\treturn this.IsSearch && this.Values.length > this.SearchThreshold;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the name of the key when using this facet for a selection. This will take into consideration\r\n\t * @see ParamName and @see Field in determining which value should be returned.\r\n\t */\r\n\tpublic get selectionField() {\r\n\t\treturn this.ParamName ? this.ParamName : this.Field;\r\n\t}\r\n\r\n\tpublic constructor(init: Facet) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tthis.SwatchData = init.SwatchData.map(s => new Swatch(s));\r\n\t\tthis.Ranges = init.Ranges.map(r => new Range(r));\r\n\t\tthis.Values = init.Values.map(v => new Value(v));\r\n\t}\r\n}\r\n","export class Rule {\r\n\tpublic RuleType: RuleType;\r\n\tpublic Field: string;\r\n\tpublic Condition: string;\r\n\tpublic Value: string;\r\n\tpublic Operator: RuleOperatorType;\r\n\r\n\tpublic Rules: Rule[];\r\n\tpublic Parent: Rule;\r\n\tpublic constructor(init: Rule) {\r\n\t\tObject.assign(this, init);\r\n\t\tif (init.Parent) {\r\n\t\t\tthis.Parent = new Rule(init.Parent);\r\n\t\t}\r\n\t\tthis.Rules = init.Rules ? init.Rules.map(i => new Rule(i)) : [];\r\n\t}\r\n}\r\n\r\nexport enum RuleType {\r\n\tGroup = 0,\r\n\tEval = 1,\r\n}\r\n\r\nexport enum RuleOperatorType {\r\n\tAll = 0,\r\n\tAny = 1,\r\n\tNone = 2,\r\n}\r\n","import { Rule } from './Rule';\r\n\r\nexport class BannerTrigger {\r\n\tpublic BannerGroupId: number;\r\n\tpublic Name: string;\r\n\tpublic SortOrder: number;\r\n\tpublic Rule: Rule;\r\n\r\n\tpublic constructor(init: BannerTrigger) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tthis.Rule = new Rule(this.Rule);\r\n\t}\r\n}\r\n","import { ContentType } from './ContentType';\r\nimport { Result } from './Result';\r\nimport { BannerTrigger } from './Trigger';\r\n\r\nexport class FeaturedItems {\r\n\tpublic Items: FeaturedItem[];\r\n\r\n\tpublic constructor(init: FeaturedItems) {\r\n\t\tObject.assign(this, init);\r\n\t\tif (init && init.Items) {\r\n\t\t\tthis.Items = init.Items.map(i => new FeaturedItem(i));\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class Merchandising {\r\n\tpublic Items: MerchandisingItem[];\r\n\r\n\tpublic constructor(init: Merchandising) {\r\n\t\tObject.assign(this, init);\r\n\t\tif (init && init.Items) {\r\n\t\t\tthis.Items = init.Items.map(i => new MerchandisingItem(i));\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class PageContentItem {\r\n\tpublic Zone: string;\r\n\tpublic ContentType: ContentType;\r\n\tpublic ImageUrl: string;\r\n\tpublic AltTag: string;\r\n\tpublic ForwardUrl: string;\r\n\tpublic Output: any;\r\n\tpublic WidgetArgs: string;\r\n\tpublic Title: string;\r\n\tpublic Name: string;\r\n\tpublic DateFrom: string;\r\n\tpublic DateTo: string;\r\n\tpublic IsMobile: boolean;\r\n\tpublic MobileContentType: string;\r\n\tpublic MobileImageUrl: string;\r\n\tpublic MobileOutput: string;\r\n\tpublic MobileWidgetArgs: string;\r\n\tpublic IsTrackingEnabled: boolean;\r\n\tpublic MobileIsTrackingEnabled?: boolean;\r\n\tpublic FeaturedItems: Result[];\r\n\tpublic Items: Result[];\r\n\tpublic Target: string;\r\n\tpublic MobileTarget: string;\r\n\tpublic MobileAltTag: string;\r\n\tpublic MobileForwardUrl: string;\r\n\tpublic MobileWidth: string;\r\n\tpublic MobileHeight: string;\r\n\tpublic Trigger: BannerTrigger;\r\n\r\n\tpublic constructor(init: PageContentItem) {\r\n\t\tObject.assign(this, init);\r\n\t\tif (init.FeaturedItems) {\r\n\t\t\tthis.FeaturedItems = init.FeaturedItems.map(i => new Result(i));\r\n\t\t}\r\n\t\tif (init.Trigger) {\r\n\t\t\tthis.Trigger = new BannerTrigger(init.Trigger);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class FeaturedItem extends PageContentItem {\r\n\tpublic Items: Result[];\r\n\r\n\tpublic constructor(init: FeaturedItem) {\r\n\t\tsuper(init);\r\n\t\tObject.assign(this, init);\r\n\t\tthis.Items = init.Items.map(i => new Result(i));\r\n\t}\r\n}\r\n\r\nexport class MerchandisingItem extends PageContentItem {\r\n\tpublic constructor(init: MerchandisingItem) {\r\n\t\tsuper(init);\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n","import { PageContentItem } from './Merchandising';\r\n\r\nexport class PageContent {\r\n\tpublic ZoneName: string;\r\n\tpublic Items: PageContentItem[];\r\n\tpublic constructor(init: PageContent) {\r\n\t\tObject.assign(this, init);\r\n\t\tthis.Items = init.Items.map(i => new PageContentItem(i));\r\n\t}\r\n}\r\n","import { Pagination } from './Pagination';\r\nimport { Result } from './Result';\r\nimport { Sorting } from './Sorting';\r\nimport { Selections } from './Selections';\r\nimport { Facet } from 'models/Facets';\r\nimport { Merchandising, FeaturedItems } from './Merchandising';\r\nimport { StringLiteral } from '@babel/types';\r\nimport { PageContent } from './PageContent';\r\n\r\nexport class Response {\r\n\t/** Indicates if request was successful. */\r\n\tpublic Success: boolean;\r\n\r\n\t/** Summary of pagination details and a set of pagination options. */\r\n\tpublic Pagination: Pagination;\r\n\r\n\t/**\r\n\t * The Keyword value that was sent to Hawksearch in the request. If no Keyword was set in the\r\n\t * request, the value will be empty.\r\n\t */\r\n\tpublic Keyword: string;\r\n\r\n\t/**\r\n\t * If this is populated, it indicates that the Keyword value returned 0 results, but the results\r\n\t * in this response are from this AdjustedKeyword.  A message should be displayed to the user\r\n\t * informing them that their search was corrected to this string.\r\n\t *\r\n\t * This is the result of Auto Correct, which is configured in the Workbench > Keyword Search >\r\n\t * Did You Mean.\r\n\t */\r\n\tpublic AdjustedKeyword?: string;\r\n\r\n\t/** An entry in the array for each item returned in search results. */\r\n\tpublic Results: Result[];\r\n\r\n\tpublic Facets: Facet[];\r\n\r\n\t/**\r\n\t * Will contain an entry for each facet that has one or more selections. Will be empty if no facet\r\n\t * selections have been made.\r\n\t */\r\n\tpublic Selections: Selections;\r\n\r\n\tpublic Sorting: Sorting;\r\n\r\n\t/**\r\n\t * If any strings are returned in the array, they should be displayed to the user as suggested\r\n\t * search terms.\r\n\t *\r\n\t * This is the result of Did You Mean, which is configured in the Workbench > Keyword Search >\r\n\t * Did You Mean.\r\n\t */\r\n\tpublic DidYouMean: string[];\r\n\r\n\t/**\r\n\t * Merchandising can be placed by using Campaigns in the Hawksearch Workbench. The Campaign will\r\n\t * determine if the content should appear and in what zone.\r\n\t */\r\n\tpublic Merchandising: Merchandising; // TODO: merchandising object\r\n\tpublic FeaturedItems: FeaturedItems; // TODO: featured items object\r\n\r\n\tpublic SearchDuration: number;\r\n\r\n\tpublic DocExplain?: string;\r\n\r\n\t/**\r\n\t * Properties that gets populated when user requests landing page related results\r\n\t *\r\n\t */\r\n\r\n\tpublic Breadcrumb: string;\r\n\r\n\tpublic CustomHtml: string;\r\n\r\n\tpublic HeaderTitle: string;\r\n\r\n\tpublic MetaDescription: string;\r\n\r\n\tpublic MetaKeywords: string;\r\n\tpublic MetaRobots: string;\r\n\tpublic Name: string;\r\n\tpublic Next: string;\r\n\tpublic Prev: string;\r\n\tpublic PageHeading: string;\r\n\tpublic PageContent: PageContent[];\r\n\tpublic RelCanonical: string;\r\n\tpublic PageLayoutId: number;\r\n\tpublic TrackingId: string;\r\n\tpublic VisitorTargets: Array<{ Id: number; Name: string }>;\r\n\tpublic Redirect: { Location?: string; Target?: string };\r\n\r\n\t// end of landing page related fields\r\n\tpublic constructor(init: Response) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tthis.Pagination = new Pagination(init.Pagination);\r\n\t\tthis.Merchandising = new Merchandising(init.Merchandising);\r\n\t\tthis.FeaturedItems = new FeaturedItems(init.FeaturedItems);\r\n\t\tthis.Results = init.Results.map(r => new Result(r));\r\n\t\tthis.Facets = init.Facets.map(f => new Facet(f));\r\n\t\tthis.PageContent = init.PageContent ? init.PageContent.map(p => new PageContent(p)) : [];\r\n\t\tthis.Selections = new Selections(init.Selections);\r\n\t\tthis.Sorting = new Sorting(init.Sorting);\r\n\t}\r\n}\r\n","/** An object that contains the data related to the client making search or autosuggest requests. */\r\nexport class ClientData {\r\n\t/** Unique identifier used for tracking visitors. */\r\n\tpublic VisitorId: string;\r\n\r\n\tpublic VisitId: string;\r\n\r\n\t/** Custom information used for evaluating Visitor Targets. */\r\n\tpublic Custom?: string;\r\n\t/** Client IP used for evaluating Visitor Targets. */\r\n\tpublic HttpTrueClientIp?: string;\r\n\t/** Browser user agent used for evaluating Visitor Targets. */\r\n\tpublic UserAgent?: string;\r\n\r\n\tpublic PreviewBuckets?: number[];\r\n\t/**\r\n\t * The source used for evaluating Visitor Targets. This was previously called 'hawksource' and can\r\n\t * be used to track the source the user came from (i.e. email, instagram, etc).\r\n\t */\r\n\tpublic Source?: string;\r\n}\r\n","export enum ContentType {\r\n\tImage = 'image',\r\n\tWidget = 'widget',\r\n\tFeatured = 'featured',\r\n\tCustom = 'custom',\r\n\tLandingPage = 'landingPage',\r\n}\r\n","var map = {\n\t\"./af\": 86,\n\t\"./af.js\": 86,\n\t\"./ar\": 87,\n\t\"./ar-dz\": 88,\n\t\"./ar-dz.js\": 88,\n\t\"./ar-kw\": 89,\n\t\"./ar-kw.js\": 89,\n\t\"./ar-ly\": 90,\n\t\"./ar-ly.js\": 90,\n\t\"./ar-ma\": 91,\n\t\"./ar-ma.js\": 91,\n\t\"./ar-sa\": 92,\n\t\"./ar-sa.js\": 92,\n\t\"./ar-tn\": 93,\n\t\"./ar-tn.js\": 93,\n\t\"./ar.js\": 87,\n\t\"./az\": 94,\n\t\"./az.js\": 94,\n\t\"./be\": 95,\n\t\"./be.js\": 95,\n\t\"./bg\": 96,\n\t\"./bg.js\": 96,\n\t\"./bm\": 97,\n\t\"./bm.js\": 97,\n\t\"./bn\": 98,\n\t\"./bn-bd\": 99,\n\t\"./bn-bd.js\": 99,\n\t\"./bn.js\": 98,\n\t\"./bo\": 100,\n\t\"./bo.js\": 100,\n\t\"./br\": 101,\n\t\"./br.js\": 101,\n\t\"./bs\": 102,\n\t\"./bs.js\": 102,\n\t\"./ca\": 103,\n\t\"./ca.js\": 103,\n\t\"./cs\": 104,\n\t\"./cs.js\": 104,\n\t\"./cv\": 105,\n\t\"./cv.js\": 105,\n\t\"./cy\": 106,\n\t\"./cy.js\": 106,\n\t\"./da\": 107,\n\t\"./da.js\": 107,\n\t\"./de\": 108,\n\t\"./de-at\": 109,\n\t\"./de-at.js\": 109,\n\t\"./de-ch\": 110,\n\t\"./de-ch.js\": 110,\n\t\"./de.js\": 108,\n\t\"./dv\": 111,\n\t\"./dv.js\": 111,\n\t\"./el\": 112,\n\t\"./el.js\": 112,\n\t\"./en-au\": 113,\n\t\"./en-au.js\": 113,\n\t\"./en-ca\": 114,\n\t\"./en-ca.js\": 114,\n\t\"./en-gb\": 115,\n\t\"./en-gb.js\": 115,\n\t\"./en-ie\": 116,\n\t\"./en-ie.js\": 116,\n\t\"./en-il\": 117,\n\t\"./en-il.js\": 117,\n\t\"./en-in\": 118,\n\t\"./en-in.js\": 118,\n\t\"./en-nz\": 119,\n\t\"./en-nz.js\": 119,\n\t\"./en-sg\": 120,\n\t\"./en-sg.js\": 120,\n\t\"./eo\": 121,\n\t\"./eo.js\": 121,\n\t\"./es\": 122,\n\t\"./es-do\": 123,\n\t\"./es-do.js\": 123,\n\t\"./es-mx\": 124,\n\t\"./es-mx.js\": 124,\n\t\"./es-us\": 125,\n\t\"./es-us.js\": 125,\n\t\"./es.js\": 122,\n\t\"./et\": 126,\n\t\"./et.js\": 126,\n\t\"./eu\": 127,\n\t\"./eu.js\": 127,\n\t\"./fa\": 128,\n\t\"./fa.js\": 128,\n\t\"./fi\": 129,\n\t\"./fi.js\": 129,\n\t\"./fil\": 130,\n\t\"./fil.js\": 130,\n\t\"./fo\": 131,\n\t\"./fo.js\": 131,\n\t\"./fr\": 132,\n\t\"./fr-ca\": 133,\n\t\"./fr-ca.js\": 133,\n\t\"./fr-ch\": 134,\n\t\"./fr-ch.js\": 134,\n\t\"./fr.js\": 132,\n\t\"./fy\": 135,\n\t\"./fy.js\": 135,\n\t\"./ga\": 136,\n\t\"./ga.js\": 136,\n\t\"./gd\": 137,\n\t\"./gd.js\": 137,\n\t\"./gl\": 138,\n\t\"./gl.js\": 138,\n\t\"./gom-deva\": 139,\n\t\"./gom-deva.js\": 139,\n\t\"./gom-latn\": 140,\n\t\"./gom-latn.js\": 140,\n\t\"./gu\": 141,\n\t\"./gu.js\": 141,\n\t\"./he\": 142,\n\t\"./he.js\": 142,\n\t\"./hi\": 143,\n\t\"./hi.js\": 143,\n\t\"./hr\": 144,\n\t\"./hr.js\": 144,\n\t\"./hu\": 145,\n\t\"./hu.js\": 145,\n\t\"./hy-am\": 146,\n\t\"./hy-am.js\": 146,\n\t\"./id\": 147,\n\t\"./id.js\": 147,\n\t\"./is\": 148,\n\t\"./is.js\": 148,\n\t\"./it\": 149,\n\t\"./it-ch\": 150,\n\t\"./it-ch.js\": 150,\n\t\"./it.js\": 149,\n\t\"./ja\": 151,\n\t\"./ja.js\": 151,\n\t\"./jv\": 152,\n\t\"./jv.js\": 152,\n\t\"./ka\": 153,\n\t\"./ka.js\": 153,\n\t\"./kk\": 154,\n\t\"./kk.js\": 154,\n\t\"./km\": 155,\n\t\"./km.js\": 155,\n\t\"./kn\": 156,\n\t\"./kn.js\": 156,\n\t\"./ko\": 157,\n\t\"./ko.js\": 157,\n\t\"./ku\": 158,\n\t\"./ku.js\": 158,\n\t\"./ky\": 159,\n\t\"./ky.js\": 159,\n\t\"./lb\": 160,\n\t\"./lb.js\": 160,\n\t\"./lo\": 161,\n\t\"./lo.js\": 161,\n\t\"./lt\": 162,\n\t\"./lt.js\": 162,\n\t\"./lv\": 163,\n\t\"./lv.js\": 163,\n\t\"./me\": 164,\n\t\"./me.js\": 164,\n\t\"./mi\": 165,\n\t\"./mi.js\": 165,\n\t\"./mk\": 166,\n\t\"./mk.js\": 166,\n\t\"./ml\": 167,\n\t\"./ml.js\": 167,\n\t\"./mn\": 168,\n\t\"./mn.js\": 168,\n\t\"./mr\": 169,\n\t\"./mr.js\": 169,\n\t\"./ms\": 170,\n\t\"./ms-my\": 171,\n\t\"./ms-my.js\": 171,\n\t\"./ms.js\": 170,\n\t\"./mt\": 172,\n\t\"./mt.js\": 172,\n\t\"./my\": 173,\n\t\"./my.js\": 173,\n\t\"./nb\": 174,\n\t\"./nb.js\": 174,\n\t\"./ne\": 175,\n\t\"./ne.js\": 175,\n\t\"./nl\": 176,\n\t\"./nl-be\": 177,\n\t\"./nl-be.js\": 177,\n\t\"./nl.js\": 176,\n\t\"./nn\": 178,\n\t\"./nn.js\": 178,\n\t\"./oc-lnc\": 179,\n\t\"./oc-lnc.js\": 179,\n\t\"./pa-in\": 180,\n\t\"./pa-in.js\": 180,\n\t\"./pl\": 181,\n\t\"./pl.js\": 181,\n\t\"./pt\": 182,\n\t\"./pt-br\": 183,\n\t\"./pt-br.js\": 183,\n\t\"./pt.js\": 182,\n\t\"./ro\": 184,\n\t\"./ro.js\": 184,\n\t\"./ru\": 185,\n\t\"./ru.js\": 185,\n\t\"./sd\": 186,\n\t\"./sd.js\": 186,\n\t\"./se\": 187,\n\t\"./se.js\": 187,\n\t\"./si\": 188,\n\t\"./si.js\": 188,\n\t\"./sk\": 189,\n\t\"./sk.js\": 189,\n\t\"./sl\": 190,\n\t\"./sl.js\": 190,\n\t\"./sq\": 191,\n\t\"./sq.js\": 191,\n\t\"./sr\": 192,\n\t\"./sr-cyrl\": 193,\n\t\"./sr-cyrl.js\": 193,\n\t\"./sr.js\": 192,\n\t\"./ss\": 194,\n\t\"./ss.js\": 194,\n\t\"./sv\": 195,\n\t\"./sv.js\": 195,\n\t\"./sw\": 196,\n\t\"./sw.js\": 196,\n\t\"./ta\": 197,\n\t\"./ta.js\": 197,\n\t\"./te\": 198,\n\t\"./te.js\": 198,\n\t\"./tet\": 199,\n\t\"./tet.js\": 199,\n\t\"./tg\": 200,\n\t\"./tg.js\": 200,\n\t\"./th\": 201,\n\t\"./th.js\": 201,\n\t\"./tk\": 202,\n\t\"./tk.js\": 202,\n\t\"./tl-ph\": 203,\n\t\"./tl-ph.js\": 203,\n\t\"./tlh\": 204,\n\t\"./tlh.js\": 204,\n\t\"./tr\": 205,\n\t\"./tr.js\": 205,\n\t\"./tzl\": 206,\n\t\"./tzl.js\": 206,\n\t\"./tzm\": 207,\n\t\"./tzm-latn\": 208,\n\t\"./tzm-latn.js\": 208,\n\t\"./tzm.js\": 207,\n\t\"./ug-cn\": 209,\n\t\"./ug-cn.js\": 209,\n\t\"./uk\": 210,\n\t\"./uk.js\": 210,\n\t\"./ur\": 211,\n\t\"./ur.js\": 211,\n\t\"./uz\": 212,\n\t\"./uz-latn\": 213,\n\t\"./uz-latn.js\": 213,\n\t\"./uz.js\": 212,\n\t\"./vi\": 214,\n\t\"./vi.js\": 214,\n\t\"./x-pseudo\": 215,\n\t\"./x-pseudo.js\": 215,\n\t\"./yo\": 216,\n\t\"./yo.js\": 216,\n\t\"./zh-cn\": 217,\n\t\"./zh-cn.js\": 217,\n\t\"./zh-hk\": 218,\n\t\"./zh-hk.js\": 218,\n\t\"./zh-mo\": 219,\n\t\"./zh-mo.js\": 219,\n\t\"./zh-tw\": 220,\n\t\"./zh-tw.js\": 220\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 423;","import * as React from 'react';\r\n\r\ninterface PlusSVGProps {\r\n\tclass?: string;\r\n}\r\n\r\n/**\r\n * Plus SVG\r\n *\r\n * @returns\r\n */\r\nfunction PlusSVG(props: PlusSVGProps) {\r\n\treturn (\r\n\t\t<svg viewBox=\"0 0 32 32\" className={'icon ' + props.class} focusable=\"false\" aria-hidden=\"true\">\r\n\t\t\t<path d=\"M31 12h-11v-11c0-0.552-0.448-1-1-1h-6c-0.552 0-1 0.448-1 1v11h-11c-0.552 0-1 0.448-1 1v6c0 0.552 0.448 1 1 1h11v11c0 0.552 0.448 1 1 1h6c0.552 0 1-0.448 1-1v-11h11c0.552 0 1-0.448 1-1v-6c0-0.552-0.448-1-1-1z\" />\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default PlusSVG;\r\n","import * as React from 'react';\r\n\r\ninterface MinusSVGProps {\r\n\tclass?: string;\r\n}\r\n\r\n/**\r\n * Minus SVG\r\n *\r\n * @returns\r\n */\r\nfunction MinusSVG(props: MinusSVGProps) {\r\n\treturn (\r\n\t\t<svg viewBox=\"0 0 32 32\" className={'icon ' + props.class} focusable=\"false\" aria-hidden=\"true\">\r\n\t\t\t<path d=\"M0 13v6c0 0.552 0.448 1 1 1h30c0.552 0 1-0.448 1-1v-6c0-0.552-0.448-1-1-1h-30c-0.552 0-1 0.448-1 1z\" />\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default MinusSVG;\r\n","import * as React from 'react';\r\n\r\ninterface QuestionmarkSVGProps {\r\n\tclass: string;\r\n}\r\n\r\n/**\r\n * Questionmark SVG\r\n *\r\n * @returns\r\n */\r\nfunction QuestionmarkSVG(props: QuestionmarkSVGProps) {\r\n\treturn (\r\n\t\t<svg viewBox=\"0 0 32 32\" className={'icon ' + props.class} focusable=\"false\" aria-hidden=\"true\">\r\n\t\t\t<path d=\"M 10.976562 14.785156 C 10.976562 15.324219 10.539062 15.761719 10 15.761719 C 9.460938 15.761719 9.023438 15.324219 9.023438 14.785156 C 9.023438 14.246094 9.460938 13.808594 10 13.808594 C 10.539062 13.808594 10.976562 14.246094 10.976562 14.785156 Z M 10.976562 14.785156 \" />\r\n\t\t\t<path d=\"M 10 0 C 4.472656 0 0 4.472656 0 10 C 0 15.527344 4.472656 20 10 20 C 15.527344 20 20 15.527344 20 10 C 20 4.472656 15.527344 0 10 0 Z M 10 18.4375 C 5.335938 18.4375 1.5625 14.664062 1.5625 10 C 1.5625 5.335938 5.335938 1.5625 10 1.5625 C 14.664062 1.5625 18.4375 5.335938 18.4375 10 C 18.4375 14.664062 14.664062 18.4375 10 18.4375 Z M 10 18.4375 \" />\r\n\t\t\t<path d=\"M 10 5.019531 C 8.277344 5.019531 6.875 6.421875 6.875 8.144531 C 6.875 8.574219 7.226562 8.925781 7.65625 8.925781 C 8.085938 8.925781 8.4375 8.574219 8.4375 8.144531 C 8.4375 7.28125 9.136719 6.582031 10 6.582031 C 10.863281 6.582031 11.5625 7.28125 11.5625 8.144531 C 11.5625 9.007812 10.863281 9.707031 10 9.707031 C 9.570312 9.707031 9.21875 10.058594 9.21875 10.488281 L 9.21875 12.441406 C 9.21875 12.871094 9.570312 13.222656 10 13.222656 C 10.429688 13.222656 10.78125 12.871094 10.78125 12.441406 L 10.78125 11.171875 C 12.128906 10.824219 13.125 9.597656 13.125 8.144531 C 13.125 6.421875 11.722656 5.019531 10 5.019531 Z M 10 5.019531 \" />\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default QuestionmarkSVG;\r\n","import React, { useContext, useState, useRef, MouseEvent } from 'react';\r\nimport { useCookies } from 'react-cookie';\r\nimport { Facet as FacetModel, Value } from 'models/Facets';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport PlusSVG from 'components/svg/PlusSVG';\r\nimport MinusSVG from 'components/svg/MinusSVG';\r\nimport QuestionmarkSVG from 'components/svg/QuestionmarkSVG';\r\n\r\nconst FacetContext = React.createContext({} as FacetContextValue);\r\n\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nexport interface FacetProps {\r\n\tfacet: FacetModel;\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\ninterface FacetContextValue {\r\n\t/** The facet model returned from the server for this facet. */\r\n\tfacet: FacetModel;\r\n\r\n\t/** Returns the state of the parent facet container. */\r\n\tstate: FacetState;\r\n\r\n\t/** An actor interface to perform actions for this facet. */\r\n\tactor: FacetActor;\r\n\r\n\trenderer: FacetRenderer;\r\n}\r\n\r\nexport interface FacetState {\r\n\t/**\r\n\t * An array of facet values for this facet. If this facet has a quick lookup search bar, this list\r\n\t * will be filtered by this quick lookup.\r\n\t */\r\n\tfacetValues: Value[];\r\n\r\n\t/**\r\n\t * If the facet is configured for filtering, this is the user's entered filter value. Updated on\r\n\t * immediately when the user types.\r\n\t */\r\n\tfilter: string;\r\n\r\n\t/** Whether or not this facet has its values truncated. */\r\n\tisTruncated: boolean;\r\n\t/** Whether or not this facet is collapsed. */\r\n\tisCollapsed: boolean;\r\n\t/** If filter is enabled, contains the number of facets that are truncated. */\r\n\tremainingFacets: number;\r\n\r\n\t// It shows the decimal count in slider\r\n\tdecimalPrecision: number;\r\n}\r\n\r\nexport interface FacetActor {\r\n\t/** Select the given facet value. */\r\n\tselectFacet(facetValue: Value | string): void;\r\n\t/** Selects and negates the given facet value. */\r\n\tnegateFacet(facetValue: Value | string): void;\r\n\r\n\t/** Sets the selected facet values by replacing existing selections for this facet.  */\r\n\tsetFacets(facetValues: Value[] | string[]): void;\r\n\r\n\t/** Sets the filter for this facet container. */\r\n\tsetFilter(filter: string): void;\r\n\r\n\t/** Sets whether or not this facet is currently being truncated. */\r\n\tsetTruncated(truncated: boolean): void;\r\n\t/** Sets whether or not this facet is currently collapsed. */\r\n\tsetCollapsed(collapsed: boolean): void;\r\n}\r\n\r\nexport interface FacetRenderer {\r\n\t/**\r\n\t * Conditionally renders the default truncation UI (the \"Show More\"/\"Show Less\" buttons). Nothing will render\r\n\t * if the facet is configured to not be truncated.\r\n\t */\r\n\trenderTruncation();\r\n}\r\n\r\nfunction getInitialCollapsibleState(facet: FacetModel, cookies: { [key: string]: string }) {\r\n\tconst cookieValue = cookies[facet.Field];\r\n\tif (cookieValue !== undefined) {\r\n\t\treturn cookieValue === 'true'; // Convert string to boolean\r\n\t}\r\n\treturn facet.IsCollapsible && facet.IsCollapsedDefault;\r\n}\r\n\r\nfunction Facet({ facet, children }: FacetProps) {\r\n\tconst { actor: searchActor } = useHawksearch();\r\n\tconst wrapperRef = useRef<HTMLInputElement>(null);\r\n\tconst [filter, setFilter] = useState('');\r\n\tconst [isTruncated, setTruncated] = useState(facet.shouldTruncate);\r\n\tconst [cookies, setCookie] = useCookies([facet.Field]);\r\n\tconst [isCollapsed, setCollapsed] = useState(getInitialCollapsibleState(facet, cookies));\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\tfunction selectFacet(facetValue: Value | string): void {\r\n\t\tsetFilter('');\r\n\t\tsearchActor.toggleFacetValue(facet, facetValue);\r\n\t}\r\n\r\n\tfunction setFacets(values: Value[] | string[]): void {\r\n\t\tsetFilter('');\r\n\t\tsearchActor.setFacetValues(facet, values);\r\n\t}\r\n\r\n\tfunction negateFacet(facetValue: Value | string): void {\r\n\t\tsetFilter('');\r\n\t\tsearchActor.toggleFacetValue(facet, facetValue, /* negate */ true);\r\n\t}\r\n\r\n\tfunction renderTruncation() {\r\n\t\t// only show the toggle button if the facet is configured for truncation and we're not filtering\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{facet.shouldTruncate && !filter && (\r\n\t\t\t\t\t<button onClick={() => actor.setTruncated(!isTruncated)} className=\"hawk-facet-rail__show-more-btn\">\r\n\t\t\t\t\t\t{isTruncated ? `(+) Show ${remainingFacets} More` : '(-) Show Less'}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\t// TODO: sort facet values\r\n\tlet facetValues = facet.Values;\r\n\r\n\t// first, perform any filtering if enabled and a filter has been typed in\r\n\tif (facet.shouldSearch && filter) {\r\n\t\tfacetValues = facet.Values.filter(val => {\r\n\t\t\tif (!val.Label) {\r\n\t\t\t\t// if a facet value doesn't have a label, we can't really filter down to it\r\n\t\t\t\t// so exclude it\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\treturn val.Label.toLowerCase().indexOf(filter.toLowerCase()) !== -1;\r\n\t\t});\r\n\t}\r\n\r\n\t// next, handle truncation\r\n\tlet remainingFacets = 0;\r\n\r\n\tif (facet.shouldTruncate && isTruncated) {\r\n\t\tconst valuesBeforeTrunc = facetValues.length;\r\n\r\n\t\tfacetValues = facetValues.slice(0, facet.TruncateThreshold);\r\n\r\n\t\tremainingFacets = valuesBeforeTrunc - facet.TruncateThreshold;\r\n\t}\r\n\r\n\tconst actor: FacetActor = {\r\n\t\tselectFacet,\r\n\t\tnegateFacet,\r\n\r\n\t\tsetFacets,\r\n\r\n\t\tsetFilter,\r\n\r\n\t\tsetTruncated,\r\n\t\tsetCollapsed,\r\n\t};\r\n\r\n\tconst state: FacetState = {\r\n\t\tfacetValues,\r\n\r\n\t\tfilter,\r\n\r\n\t\tisTruncated,\r\n\t\tisCollapsed,\r\n\t\tremainingFacets,\r\n\t\tdecimalPrecision: 2,\r\n\t};\r\n\r\n\tconst renderer: FacetRenderer = {\r\n\t\trenderTruncation,\r\n\t};\r\n\r\n\tfunction toggleCollapsible(event: MouseEvent) {\r\n\t\tif (wrapperRef.current && wrapperRef.current.contains(event.target as Node)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetCookie(facet.Field, !isCollapsed);\r\n\t\tsetCollapsed(!isCollapsed);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<FacetContext.Provider value={{ facet, state, actor, renderer }}>\r\n\t\t\t<div className=\"hawk-facet-rail__facet\">\r\n\t\t\t\t<div className=\"hawk-facet-rail__facet-heading\" onClick={event => toggleCollapsible(event)}>\r\n\t\t\t\t\t<h4>{facet.Name}</h4>\r\n\t\t\t\t\t{facet.Tooltip && (\r\n\t\t\t\t\t\t<div className=\"custom-tooltip\" ref={wrapperRef}>\r\n\t\t\t\t\t\t\t<QuestionmarkSVG class=\"hawk-questionmark\" />\r\n\t\t\t\t\t\t\t<div className=\"right\">\r\n\t\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: facet.Tooltip }} />\r\n\t\t\t\t\t\t\t\t<i />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{isCollapsed ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<PlusSVG /> <span className=\"visually-hidden\">Expand facet category</span>{' '}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<MinusSVG /> <span className=\"visually-hidden\">Collapse facet category</span>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{!isCollapsed && (\r\n\t\t\t\t\t<div className=\"hawk-facet-rail__facet-body\">\r\n\t\t\t\t\t\t{facet.shouldSearch && (\r\n\t\t\t\t\t\t\t<div className=\"hawk-facet-rail__facet__quick-lookup\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tvalue={filter}\r\n\t\t\t\t\t\t\t\t\tonChange={e => setFilter(e.currentTarget.value)}\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tplaceholder={t('Quick Lookup')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{/* render listing component */}\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</FacetContext.Provider>\r\n\t);\r\n}\r\n\r\nexport function useFacet() {\r\n\treturn useContext(FacetContext);\r\n}\r\n\r\nexport default Facet;\r\n","import { createBrowserHistory } from 'history';\r\n\r\nexport const history = createBrowserHistory();\r\n","import { Request } from 'models/Search/Request';\r\n\r\n/** Represents parts of the browser query string that are fixed and are always single strings. */\r\ninterface ParsedQueryStringFixed {\r\n\tkeyword?: string;\r\n\tsort?: string;\r\n\tpg?: string;\r\n\tlp?: string;\r\n\tPageId?: string;\r\n\tlpurl?: string;\r\n\tmpp?: string;\r\n\tsearchWithin?: string;\r\n\tis100Coverage?: string;\r\n\tindexName?: string;\r\n\tignoreSpellcheck?: string;\r\n}\r\n\r\n/**\r\n * Represents the parts of the browser query string that are dynamic (the selected facets). Facets\r\n * can have multiple values, so the value of these is always an array of strings.\r\n */\r\ninterface ParsedQueryStringDynamic {\r\n\t[key: string]: string[];\r\n}\r\n\r\ntype ParsedQueryString = ParsedQueryStringFixed & ParsedQueryStringDynamic;\r\n\r\n/**\r\n * Parses the input query string and returns an object that can be used to build a search request.\r\n * The object returned will usually have the keys: `keyword`, `sort`, `pg`,`lp`,`lpurl`, `mpp`, and then more keys\r\n * for every selected facet.\r\n * @param search The input query string.\r\n */\r\nfunction parseQueryStringToObject(search: string) {\r\n\tconst params = new URLSearchParams(search);\r\n\r\n\tconst parsed: ParsedQueryString = {};\r\n\r\n\tparams.forEach((value, key) => {\r\n\t\tif (\r\n\t\t\tkey === 'keyword' ||\r\n\t\t\tkey === 'sort' ||\r\n\t\t\tkey === 'pg' ||\r\n\t\t\tkey === 'lp' ||\r\n\t\t\tkey === 'PageId' ||\r\n\t\t\tkey === 'lpurl' ||\r\n\t\t\tkey === 'mpp' ||\r\n\t\t\tkey === 'searchWithin' ||\r\n\t\t\tkey === 'is100Coverage' ||\r\n\t\t\tkey === 'indexName' ||\r\n\t\t\tkey === 'ignoreSpellcheck'\r\n\t\t) {\r\n\t\t\t// `keyword` is special and should never be turned into an array\r\n\t\t\tparsed[key] = encodeURIComponent(value);\r\n\t\t} else {\r\n\t\t\t// everything else should be turned into an array\r\n\r\n\t\t\tif (!value) {\r\n\t\t\t\t// no useful value for this query param, so skip it\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// multiple selections are split by commas, so split into an array\r\n\t\t\tconst multipleValues = value.split(',');\r\n\r\n\t\t\t// and now handle any comma escaping - any single value that contained a comma is escaped to '::'\r\n\t\t\tfor (let x = 0; x < multipleValues.length; ++x) {\r\n\t\t\t\tmultipleValues[x] = multipleValues[x].replace('::', ',');\r\n\t\t\t}\r\n\r\n\t\t\tparsed[key] = multipleValues;\r\n\t\t}\r\n\t});\r\n\r\n\treturn parsed;\r\n}\r\n\r\n/**\r\n * Parses the abosulte url into a `HawkClient` client search request object.\r\n * @param location The input location\r\n */\r\nexport function parseLocation(location: Location, searchUrl: string = '/search'): Partial<Request> {\r\n\tconst searchRequest = parseSearchQueryString(location.search);\r\n\r\n\t// customUrl have priority over keywords\r\n\tif (checkIfUrlRefsLandingPage(location.pathname, searchUrl)) {\r\n\t\tsearchRequest.Keyword = undefined;\r\n\t\tsearchRequest.CustomUrl = location.pathname.replace(searchUrl, '');\r\n\t}\r\n\treturn searchRequest;\r\n}\r\n/**\r\n * Parses the input query string into a `HawkClient` client search request object.\r\n * @param search The input query string.\r\n */\r\nexport function parseSearchQueryString(search: string): Partial<Request> {\r\n\tconst queryObj = parseQueryStringToObject(search);\r\n\r\n\t// extract out components, including facet selections\r\n\tconst {\r\n\t\tkeyword,\r\n\t\tsort,\r\n\t\tpg,\r\n\t\tmpp,\r\n\t\tlp,\r\n\t\tPageId,\r\n\t\tlpurl,\r\n\t\tsearchWithin,\r\n\t\tis100Coverage,\r\n\t\tindexName,\r\n\t\tignoreSpellcheck,\r\n\t\t...facetSelections\r\n\t} = queryObj;\r\n\r\n\t// ignore landing pages if keyword is passed\r\n\tconst pageId = lp || PageId;\r\n\treturn {\r\n\t\tKeyword: lpurl || pageId ? '' : keyword,\r\n\r\n\t\tSortBy: sort,\r\n\t\tPageNo: pg ? Number(pg) : undefined,\r\n\t\tMaxPerPage: mpp ? Number(mpp) : undefined,\r\n\t\tPageId: pageId ? Number(pageId) : undefined,\r\n\t\tCustomUrl: lpurl,\r\n\t\tSearchWithin: searchWithin,\r\n\t\tIs100CoverageTurnedOn: is100Coverage ? Boolean(is100Coverage) : undefined,\r\n\t\tFacetSelections: facetSelections,\r\n\t\tIndexName: indexName,\r\n\t\tIgnoreSpellcheck: ignoreSpellcheck ? ignoreSpellcheck === 'true' : undefined,\r\n\t};\r\n}\r\n\r\nexport function checkIfUrlRefsLandingPage(path: string, searchUrl: string): boolean {\r\n\tif (!path) {\r\n\t\t// if there's no path, this request can't be for a landing page\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (!path.endsWith('/')) {\r\n\t\tpath = path + '/';\r\n\t}\r\n\r\n\tif (!searchUrl.endsWith('/')) {\r\n\t\tsearchUrl = searchUrl + '/';\r\n\t}\r\n\r\n\treturn path !== searchUrl;\r\n}\r\n\r\n/**\r\n * Converts a search query object (such as one returned from `parseSearchQueryString`) and converts\r\n * it into a browser query string\r\n * @param queryObj The query object to convert to a query string.\r\n */\r\nfunction convertObjectToQueryString(queryObj: ParsedQueryString) {\r\n\tconst queryStringValues: string[] = [];\r\n\r\n\tfor (const key in queryObj) {\r\n\t\tif (queryObj.hasOwnProperty(key)) {\r\n\t\t\tif (\r\n\t\t\t\tkey === 'keyword' ||\r\n\t\t\t\tkey === 'sort' ||\r\n\t\t\t\tkey === 'pg' ||\r\n\t\t\t\tkey === 'mpp' ||\r\n\t\t\t\tkey === 'searchWithin' ||\r\n\t\t\t\tkey === 'is100Coverage' ||\r\n\t\t\t\tkey === 'indexName' ||\r\n\t\t\t\tkey === 'ignoreSpellcheck'\r\n\t\t\t) {\r\n\t\t\t\tconst value = queryObj[key];\r\n\r\n\t\t\t\tif (value === undefined || value === null) {\r\n\t\t\t\t\t// if any of the special keys just aren't defined or are null, don't include them in\r\n\t\t\t\t\t// the query string\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeof value !== 'string') {\r\n\t\t\t\t\tthrow new Error(`${key} must be a string`);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// certain strings are special and are never arrays\r\n\t\t\t\tqueryStringValues.push(key + '=' + value);\r\n\t\t\t} else {\r\n\t\t\t\tconst values = queryObj[key];\r\n\r\n\t\t\t\t// handle comma escaping - if any of the values contains a comma, they need to be escaped first\r\n\t\t\t\tconst escapedValues: string[] = [];\r\n\r\n\t\t\t\tfor (const unescapedValue of values) {\r\n\t\t\t\t\tescapedValues.push(unescapedValue.replace(',', '::'));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tqueryStringValues.push(key + '=' + escapedValues.join(','));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn '?' + queryStringValues.join('&');\r\n}\r\n\r\n/**\r\n * Converts a partial search request object into a browser query string.\r\n * @param searchRequest The search request object to convert.\r\n */\r\nexport function getSearchQueryString(searchRequest: Partial<Request>) {\r\n\tconst searchQuery = {\r\n\t\tkeyword: searchRequest.Keyword,\r\n\r\n\t\tsort: searchRequest.SortBy,\r\n\t\tpg: searchRequest.PageNo ? String(searchRequest.PageNo) : undefined,\r\n\t\tmpp: searchRequest.MaxPerPage ? String(searchRequest.MaxPerPage) : undefined,\r\n\t\tis100Coverage: searchRequest.Is100CoverageTurnedOn ? String(searchRequest.Is100CoverageTurnedOn) : undefined,\r\n\t\tsearchWithin: searchRequest.SearchWithin,\r\n\t\tindexName: searchRequest.IndexName,\r\n\t\tignoreSpellcheck:\r\n\t\t\t!searchRequest.IgnoreSpellcheck || !searchRequest.IgnoreSpellcheck\r\n\t\t\t\t? undefined\r\n\t\t\t\t: String(searchRequest.IgnoreSpellcheck),\r\n\t\t...searchRequest.FacetSelections,\r\n\t} as ParsedQueryString;\r\n\r\n\treturn convertObjectToQueryString(searchQuery);\r\n}\r\n","import { useEffect } from 'react';\r\n\r\nimport { useHawksearch } from './StoreProvider';\r\nimport { history } from 'util/History';\r\nimport { parseSearchQueryString, getSearchQueryString } from 'util/QueryString';\r\nimport AuthToken from './AuthToken';\r\n\r\nlet doSearch = true;\r\n\r\nfunction QueryStringListener() {\r\n\tconst { store, actor } = useHawksearch();\r\n\r\n\tuseEffect(() => {\r\n\t\t// listen to history so that when we navigate backward/forward, trigger a new search based off\r\n\t\t// the new query string\r\n\t\tconst unlisten = history.listen(location => {\r\n\t\t\tif (!doSearch) {\r\n\t\t\t\t// if the previous history change specified that we shouldn't do a search, clear the flag and bail\r\n\t\t\t\tdoSearch = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst searchRequest = parseSearchQueryString(location.search);\r\n\r\n\t\t\tactor.setSearch(\r\n\t\t\t\tsearchRequest,\r\n\t\t\t\t// explicitly flag this next search as not needing to push additional history, since this search\r\n\t\t\t\t// _is_ the result of history.\r\n\t\t\t\t/*doHistory*/ false\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tunlisten();\r\n\t\t};\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\t// listen to changes in the pending search so that history records can be pushed to the browser's\r\n\t\t// query string\r\n\r\n\t\tif (store.doHistory) {\r\n\t\t\t// if we're pushing history, we don't want to to trigger a search as a result of this history\r\n\t\t\t// change\r\n\t\t\tdoSearch = false;\r\n\r\n\t\t\thistory.push({\r\n\t\t\t\tsearch: getSearchQueryString(store.pendingSearch),\r\n\t\t\t});\r\n\t\t}\r\n\t}, [store.pendingSearch]);\r\n\r\n\t// Extract access token and refresh token from query string on load\r\n\tuseEffect(() => {\r\n\t\tconst params = new URLSearchParams(location.search);\r\n\t\tAuthToken.setTokens(params.get('token') || '', (params.get('refreshToken') || '').replace(/ /g, '+') || '');\r\n\t}, []);\r\n\r\n\treturn null;\r\n}\r\n\r\nexport default QueryStringListener;\r\n","import React from 'react';\r\nimport { ControllerStateAndHelpers } from 'downshift';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport SearchBoxBase from 'components/ui/SearchBox/SearchBoxBase';\r\nimport { Product } from 'models/Autocomplete';\r\nimport { CustomSuggestionListProps } from 'models/Autocomplete/CustomSuggestionList';\r\n\r\n/**\r\n * This component is the search input box (with autosuggest) that should be utilized on search pages. For a simple\r\n * search input box that is meant to be used on non-search pages (or globally), see `GlobalSearchBox`.\r\n */\r\n\r\ninterface SearchBoxProps {\r\n\tSuggestionList?: React.ComponentType<CustomSuggestionListProps>;\r\n}\r\n\r\nfunction SearchBox({ SuggestionList }: SearchBoxProps) {\r\n\tconst { store, actor } = useHawksearch();\r\n\r\n\tfunction handleSubmit(event: React.KeyboardEvent<HTMLInputElement>, downshift: ControllerStateAndHelpers<Product>) {\r\n\t\tif (event.key === 'Enter') {\r\n\t\t\tactor.setSearch({\r\n\t\t\t\tPageId: undefined,\r\n\t\t\t\tCustomUrl: undefined,\r\n\t\t\t\tKeyword: encodeURIComponent(event.currentTarget.value),\r\n\t\t\t\tFacetSelections: undefined,\r\n\t\t\t\tIgnoreSpellcheck: false,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// On Select view all matches from suggestion list\r\n\tfunction handleViewAllMatches(downshift: ControllerStateAndHelpers<Product>) {\r\n\t\tconst { inputValue, closeMenu } = downshift;\r\n\t\tactor.setSearch({\r\n\t\t\tPageId: undefined,\r\n\t\t\tCustomUrl: undefined,\r\n\t\t\tKeyword: inputValue || '',\r\n\t\t});\r\n\t\tcloseMenu();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk__searchBox\">\r\n\t\t\t<SearchBoxBase\r\n\t\t\t\tonViewMatches={handleViewAllMatches}\r\n\t\t\t\tinitialValue={store && store.pendingSearch ? store.pendingSearch.Keyword : ''}\r\n\t\t\t\tonSubmit={handleSubmit}\r\n\t\t\t\tSuggestionList={SuggestionList}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SearchBox;\r\n","import React, { useState } from 'react';\r\n\r\nfunction PlaceholderFacetValue() {\r\n\tconst [width] = useState(Math.round(Math.random() * (200 - 100) + 100));\r\n\r\n\treturn (\r\n\t\t<li className=\"hawk-facet-rail__facet-list-item\">\r\n\t\t\t<span className=\"hawk-facet-rail__facet-checkbox hawk-facet-rail__facet-checkbox-placeholder\" />\r\n\r\n\t\t\t<button className=\"hawk-facet-rail__facet-btn\">\r\n\t\t\t\t<span className=\"hawk-facet-rail__facet-name\">\r\n\t\t\t\t\t<div className=\"hawk-facet-rail__facet-name-placeholder\" style={{ width: `${width}px` }} />\r\n\t\t\t\t</span>\r\n\t\t\t</button>\r\n\t\t</li>\r\n\t);\r\n}\r\n\r\nexport default PlaceholderFacetValue;\r\n","import React, { useState } from 'react';\r\n\r\nimport PlaceholderFacetValue from './PlaceholderFacetValue';\r\n\r\nfunction PlaceholderFacet() {\r\n\tconst [width] = useState(Math.round(Math.random() * (250 - 125) + 125));\r\n\tconst [numValues] = useState(Math.round(Math.random() * (8 - 1) + 1));\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-heading\">\r\n\t\t\t\t<div className=\"hawk-facet-rail__facet-heading-placeholder\" style={{ width: `${width}px` }} />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"hawk-facet-rail__facet-body\">\r\n\t\t\t\t<div className=\"hawk-facet-rail__facet-values hawk-facet-rail__facet-values-placeholder\">\r\n\t\t\t\t\t<div className=\"hawk-facet-rail__facet-values-checkbox\">\r\n\t\t\t\t\t\t<ul className=\"hawk-facet-rail__facet-list\">\r\n\t\t\t\t\t\t\t{[...Array(numValues)].map((_, i) => (\r\n\t\t\t\t\t\t\t\t<PlaceholderFacetValue key={i} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default PlaceholderFacet;\r\n","import React, { useState } from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useHawkConfig } from 'components/ConfigProvider';\r\nimport Facet from './Facet';\r\nimport PlaceholderFacet from './PlaceholderFacet';\r\nimport { getFacetComponents } from 'components/ui/Facets/Overrides';\r\n\r\nfunction FacetList() {\r\n\tconst {\r\n\t\tstore: { searchResults },\r\n\t} = useHawksearch();\r\n\r\n\tconst { config } = useHawkConfig();\r\n\r\n\t// the number of random placeholders to render while we wait for results\r\n\tconst [numPlaceholders] = useState(Math.round(Math.random() * (5 - 3) + 3));\r\n\r\n\tconst components = getFacetComponents(config.facetOverrides || []);\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-list\">\r\n\t\t\t{searchResults\r\n\t\t\t\t? // if there are search results, render the facets\r\n\t\t\t\t  searchResults.Facets.map(facet => {\r\n\t\t\t\t\t\tif (!facet.IsVisible) {\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (facet.FieldType === 'tab') {\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst registeredComponent = components.find(\r\n\t\t\t\t\t\t\tcomponent => component.facetType === facet.FacetType\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst Component = !registeredComponent ? null : registeredComponent.component;\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Facet key={facet.FacetId} facet={facet}>\r\n\t\t\t\t\t\t\t\t{Component ? (\r\n\t\t\t\t\t\t\t\t\t<Component />\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t{facet.FieldType} {facet.FacetType} is not implemented!\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Facet>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t  })\r\n\t\t\t\t: // otherwise render a couple placeholders\r\n\t\t\t\t  [...Array(numPlaceholders)].map((_, i) => <PlaceholderFacet key={i} />)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FacetList;\r\n","import React from 'react';\r\nimport FacetList from './FacetList';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nfunction FacetRail() {\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail\">\r\n\t\t\t<div className=\"hawk-facet-rail__heading\">{t('Narrow Results')}</div>\r\n\r\n\t\t\t<FacetList />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FacetRail;\r\n","import * as React from 'react';\r\n\r\ninterface LeftChevronSVGProps {\r\n\tclass: string;\r\n}\r\n\r\n/**\r\n * Left chevron SVG\r\n *\r\n * @returns\r\n */\r\nfunction LeftChevronSVG(props: LeftChevronSVGProps) {\r\n\treturn (\r\n\t\t<svg viewBox=\"0 0 19 32\" className={'icon ' + props.class} focusable=\"false\" aria-hidden=\"true\">\r\n\t\t\t<path d=\"M18.462 27.891c0.457 0.427 0.742 1.034 0.742 1.707s-0.285 1.279-0.741 1.705l-0.001 0.001c-0.467 0.437-1.097 0.705-1.789 0.705s-1.322-0.268-1.79-0.706l0.002 0.001-14.146-13.598c-0.457-0.427-0.742-1.034-0.742-1.707s0.285-1.28 0.741-1.705l0.001-0.001 14.142-13.589c0.468-0.436 1.097-0.704 1.79-0.704s1.322 0.268 1.791 0.706l-0.002-0.001c0.457 0.427 0.742 1.034 0.742 1.707s-0.285 1.28-0.741 1.705l-0.001 0.001-11.597 11.883z\" />\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default LeftChevronSVG;\r\n","import * as React from 'react';\r\n\r\ninterface RightChevronSVGProps {\r\n\tclass: string;\r\n}\r\n\r\n/**\r\n * Right chevron SVG\r\n *\r\n * @returns\r\n */\r\nfunction RightChevronSVG(props: RightChevronSVGProps) {\r\n\treturn (\r\n\t\t<svg viewBox=\"0 0 19 32\" className={'icon ' + props.class} focusable=\"false\" aria-hidden=\"true\">\r\n\t\t\t<path d=\"M0.738 4.109c-0.457-0.427-0.742-1.034-0.742-1.707s0.285-1.28 0.741-1.705l0.001-0.001c0.467-0.437 1.097-0.705 1.789-0.705s1.322 0.268 1.79 0.706l-0.002-0.001 14.146 13.598c0.457 0.427 0.742 1.034 0.742 1.707s-0.285 1.279-0.741 1.705l-0.001 0.001-14.142 13.589c-0.468 0.436-1.097 0.704-1.79 0.704s-1.322-0.268-1.791-0.706l0.002 0.001c-0.457-0.427-0.742-1.034-0.742-1.707s0.285-1.279 0.741-1.705l0.001-0.001 11.597-11.883z\" />\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default RightChevronSVG;\r\n","import React, { useState } from 'react';\r\n\r\nimport { LeftChevronSVG, RightChevronSVG } from 'components/svg';\r\n\r\ninterface PagerProps {\r\n\tpage: number;\r\n\ttotalPages: number;\r\n\r\n\tonPageChange: (page: number) => void;\r\n}\r\n\r\nfunction Pager({ page, totalPages, onPageChange }: PagerProps) {\r\n\tconst [inputValue, setInputValue] = useState<string | undefined>(undefined);\r\n\tconst [hasError, setHasError] = useState(false);\r\n\r\n\tfunction goToPreviousPage() {\r\n\t\tgoToPage(page - 1);\r\n\t}\r\n\r\n\tfunction goToNextPage() {\r\n\t\tgoToPage(page + 1);\r\n\t}\r\n\r\n\tfunction goToPage(pageNo: number) {\r\n\t\tif (isNaN(pageNo)) {\r\n\t\t\t// not a valid number\r\n\t\t\tdoInputError();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (pageNo < 1) {\r\n\t\t\t// can't go beyond the first page\r\n\t\t\tdoInputError();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (pageNo > totalPages) {\r\n\t\t\t// can't go beyond the last page\r\n\t\t\tdoInputError();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// once we've determined that we *do* want to do this page change, clear the user's input\r\n\t\t// because the input should be driven by props again\r\n\t\tsetInputValue(undefined);\r\n\r\n\t\t// inform the consumer that we've changed pages\r\n\t\tonPageChange(pageNo);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the input value for the pager input control. If the user has typed in a value into the input then\r\n\t * that value will be returned; otherwise, the page value passed in via props will be returned.\r\n\t */\r\n\tfunction getInputValue() {\r\n\t\tif (inputValue !== undefined) {\r\n\t\t\t// if the user typed an input, that's the page value for the control\r\n\t\t\treturn inputValue || '';\r\n\t\t}\r\n\r\n\t\t// otherwise, fall back to what's passed in through props\r\n\t\treturn page;\r\n\t}\r\n\r\n\tfunction onKeyDown(event: React.KeyboardEvent<HTMLInputElement>) {\r\n\t\tconst wantedPageNo = parseInt(event.currentTarget.value, 10);\r\n\r\n\t\tif (event.key === 'Enter') {\r\n\t\t\tgoToPage(wantedPageNo);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onBlur(event: React.FocusEvent<HTMLInputElement>) {\r\n\t\tif (Number(event.currentTarget.value) !== page) {\r\n\t\t\tconst wantedPageNo = parseInt(event.currentTarget.value, 10);\r\n\t\t\tgoToPage(wantedPageNo);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onKeyPress(event: React.KeyboardEvent<HTMLInputElement>) {\r\n\t\tconst keyCode = event.keyCode || event.which;\r\n\t\tconst keyValue = String.fromCharCode(keyCode);\r\n\t\tif (keyValue.match(/[+-.e]+/g)) {\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onInput(event: React.KeyboardEvent<HTMLInputElement>) {\r\n\t\tlet wantedPageNo = parseInt(event.currentTarget.value, 10);\r\n\r\n\t\tif (wantedPageNo > totalPages) {\r\n\t\t\twantedPageNo = totalPages;\r\n\t\t\tevent.currentTarget.value = '';\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\r\n\t\tif (wantedPageNo < 1) {\r\n\t\t\twantedPageNo = 1;\r\n\t\t\tevent.currentTarget.value = '';\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction doInputError() {\r\n\t\tsetHasError(true);\r\n\r\n\t\t// in 500ms, clear the error animation\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetHasError(false);\r\n\t\t}, 500);\r\n\t}\r\n\r\n\tfunction onChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n\t\tsetInputValue(event.currentTarget.value);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-pagination__controls\">\r\n\t\t\t<button className=\"hawk-pagination__item\" onClick={goToPreviousPage}>\r\n\t\t\t\t<LeftChevronSVG class=\"hawk-pagination__left\" />\r\n\t\t\t\t<span className=\"visually-hidden\">Previous page</span>\r\n\t\t\t</button>\r\n\t\t\t<input\r\n\t\t\t\ttype=\"number\"\r\n\t\t\t\tvalue={getInputValue()}\r\n\t\t\t\tonChange={onChange}\r\n\t\t\t\tonInput={onInput}\r\n\t\t\t\tonKeyDown={onKeyDown}\r\n\t\t\t\tonKeyPress={onKeyPress}\r\n\t\t\t\tonBlur={onBlur}\r\n\t\t\t\tmin=\"1\"\r\n\t\t\t\tmax={totalPages}\r\n\t\t\t\tclassName={hasError ? 'hawk-pagination__input error' : 'hawk-pagination__input'}\r\n\t\t\t/>\r\n\t\t\t<span className=\"hawk-pagination__total-text\">&nbsp; of {totalPages}</span>\r\n\t\t\t<button className=\"hawk-pagination__item\" onClick={goToNextPage}>\r\n\t\t\t\t<RightChevronSVG class=\"hawk-pagination__right\" />\r\n\t\t\t\t<span className=\"visually-hidden\">Next page</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Pager;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\n\r\nfunction ItemsPerPage() {\r\n\tconst {\r\n\t\tstore: { searchResults, pendingSearch },\r\n\t\tactor,\r\n\t} = useHawksearch();\r\n\r\n\tfunction onChange(event: React.ChangeEvent<HTMLSelectElement>) {\r\n\t\tactor.setSearch({\r\n\t\t\tMaxPerPage: Number(event.currentTarget.value),\r\n\t\t\tPageNo: 1, // if we change our max items per page, reset to page 1\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-items-per-page\">\r\n\t\t\t<select value={pendingSearch.MaxPerPage} onChange={onChange}>\r\n\t\t\t\t{searchResults ? (\r\n\t\t\t\t\tsearchResults.Pagination.Items.map(paginationItem => (\r\n\t\t\t\t\t\t<option key={paginationItem.PageSize} value={paginationItem.PageSize}>\r\n\t\t\t\t\t\t\t{paginationItem.Label}\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t))\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<option>12 Items Per Page</option>\r\n\t\t\t\t)}\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ItemsPerPage;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport Pager from './Pager';\r\nimport ItemsPerPage from './ItemsPerPage';\r\n\r\nfunction Pagination() {\r\n\tconst {\r\n\t\tstore: { searchResults, pendingSearch },\r\n\t\tactor,\r\n\t} = useHawksearch();\r\n\r\n\tfunction onPageChange(pageNo: number) {\r\n\t\t// when the pager's page changes, trigger a new search\r\n\t\tactor.setSearch({\r\n\t\t\tPageNo: pageNo,\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-pagination\">\r\n\t\t\t<Pager\r\n\t\t\t\tpage={searchResults ? pendingSearch.PageNo || 1 : 0}\r\n\t\t\t\ttotalPages={searchResults ? searchResults.Pagination.NofPages : 0}\r\n\t\t\t\tonPageChange={onPageChange}\r\n\t\t\t/>\r\n\r\n\t\t\t<ItemsPerPage />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Pagination;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nfunction Sorting() {\r\n\tconst {\r\n\t\tstore: { searchResults, pendingSearch },\r\n\t\tactor,\r\n\t} = useHawksearch();\r\n\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\tfunction onChange(event: React.ChangeEvent<HTMLSelectElement>) {\r\n\t\tactor.setSearch({\r\n\t\t\tSortBy: event.currentTarget.value,\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-sorting\">\r\n\t\t\t<span className=\"hawk-sorting__label\">{t('Sort By')}</span>\r\n\r\n\t\t\t<select value={pendingSearch.SortBy} onChange={onChange}>\r\n\t\t\t\t{searchResults ? (\r\n\t\t\t\t\tsearchResults.Sorting.Items.map(sortingItem => (\r\n\t\t\t\t\t\t<option key={sortingItem.Value} value={sortingItem.Value}>\r\n\t\t\t\t\t\t\t{sortingItem.Label}\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t))\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<option value=\"score\">Best Match</option>\r\n\t\t\t\t)}\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Sorting;\r\n","import React from 'react';\r\n\r\nimport { Sorting, Pagination } from './Tools';\r\n\r\nfunction ToolRow() {\r\n\treturn (\r\n\t\t<div className=\"hawk-tool-row\">\r\n\t\t\t<div className=\"hawk-tool-row__item\">\r\n\t\t\t\t<Sorting />\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"hawk-tool-row__item\">\r\n\t\t\t\t<Pagination />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ToolRow;\r\n","import * as React from 'react';\r\n\r\ninterface PlaceHolderSVGProps {\r\n\tclass: string;\r\n}\r\n\r\n/**\r\n * Plus SVG\r\n *\r\n * @returns\r\n */\r\n\r\nfunction PlaceHolderSVG(props: PlaceHolderSVGProps) {\r\n\treturn (\r\n\t\t<svg\r\n\t\t\tx=\"0px\"\r\n\t\t\ty=\"0px\"\r\n\t\t\tviewBox=\"0 0 489.4 489.4\"\r\n\t\t\tclassName={'icon ' + props.class}\r\n\t\t\tfocusable=\"false\"\r\n\t\t\taria-hidden=\"true\"\r\n\t\t>\r\n\t\t\t<g>\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M0,437.8c0,28.5,23.2,51.6,51.6,51.6h386.2c28.5,0,51.6-23.2,51.6-51.6V51.6c0-28.5-23.2-51.6-51.6-51.6H51.6\r\n\t\t\tC23.1,0,0,23.2,0,51.6C0,51.6,0,437.8,0,437.8z M437.8,464.9H51.6c-14.9,0-27.1-12.2-27.1-27.1v-64.5l92.8-92.8l79.3,79.3\r\n\t\t\tc4.8,4.8,12.5,4.8,17.3,0l143.2-143.2l107.8,107.8v113.4C464.9,452.7,452.7,464.9,437.8,464.9z M51.6,24.5h386.2\r\n\t\t\tc14.9,0,27.1,12.2,27.1,27.1v238.1l-99.2-99.1c-4.8-4.8-12.5-4.8-17.3,0L205.2,333.8l-79.3-79.3c-4.8-4.8-12.5-4.8-17.3,0\r\n\t\t\tl-84.1,84.1v-287C24.5,36.7,36.7,24.5,51.6,24.5z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M151.7,196.1c34.4,0,62.3-28,62.3-62.3s-28-62.3-62.3-62.3s-62.3,28-62.3,62.3S117.3,196.1,151.7,196.1z M151.7,96\r\n\t\t\tc20.9,0,37.8,17,37.8,37.8s-17,37.8-37.8,37.8s-37.8-17-37.8-37.8S130.8,96,151.7,96z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</g>\r\n\t\t\t</g>\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default PlaceHolderSVG;\r\n","import React from 'react';\r\nimport PlaceHolderSVG from 'components/svg/PlaceholderSVG';\r\n\r\nexport interface PlaceholderImageProps {\r\n\t/** Whether or not to display a spinner in the center of the placeholder. */\r\n\tshowSpinner: boolean;\r\n}\r\n\r\nfunction PlaceholderImage({ showSpinner }: PlaceholderImageProps) {\r\n\treturn (\r\n\t\t<div className=\"hawk-results__item-placeholder\">\r\n\t\t\t<PlaceHolderSVG class=\"hawk-placeholderSVG\" />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default PlaceholderImage;\r\n","import React from 'react';\r\n\r\nimport PlaceholderImage from './PlaceholderImage';\r\n\r\nfunction PlaceholderItem() {\r\n\treturn (\r\n\t\t<div className=\"hawk-results__item\">\r\n\t\t\t<div className=\"hawk-results__item-image\">\r\n\t\t\t\t<PlaceholderImage showSpinner={false} />\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"hawk-results__item-name\">\r\n\t\t\t\t<div className=\"hawk-results__item-name-placeholder\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default PlaceholderItem;\r\n","import React from 'react';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nexport interface SpinnerProps {\r\n\tisVisible: boolean;\r\n}\r\n\r\nfunction Spinner({ isVisible }: SpinnerProps) {\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\tif (!isVisible) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={'hawk-modal'}>\r\n\t\t\t<div className={'hawk-modal__content'}>{t('Loading')}...</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Spinner;\r\n","import React, { useState } from 'react';\r\n\r\nimport { Result } from 'models/Search';\r\nimport PlaceholderImage from './PlaceholderImage';\r\n\r\nexport interface ResultImageProps {\r\n\titem: Result;\r\n\twebsiteUrl?: string;\r\n\titemTitleFieldName?: string;\r\n\timageUrlFieldName?: string;\r\n\tonLoadCallBack?: () => void;\r\n}\r\n\r\nfunction ResultImage({ item, websiteUrl, itemTitleFieldName, imageUrlFieldName, onLoadCallBack }: ResultImageProps) {\r\n\tconst [imageLoaded, setImageLoaded] = useState(false);\r\n\r\n\tlet imageUrl = imageUrlFieldName ? item.getDocumentValue(imageUrlFieldName) : item.getDocumentValue('image');\r\n\tif (!imageUrl) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst itemName = itemTitleFieldName ? item.getDocumentValue(itemTitleFieldName) : item.getDocumentValue('itemname');\r\n\r\n\tconst absoluteUrlTester = new RegExp('^https?://|^//', 'i');\r\n\tif (!absoluteUrlTester.test(imageUrl) && websiteUrl) {\r\n\t\timageUrl = websiteUrl + imageUrl;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-results__item-image\">\r\n\t\t\t<div style={imageLoaded ? {} : { overflow: 'hidden', width: '0px', height: '0px' }}>\r\n\t\t\t\t<img\r\n\t\t\t\t\tonLoad={() => {\r\n\t\t\t\t\t\tif (onLoadCallBack) {\r\n\t\t\t\t\t\t\tonLoadCallBack();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsetImageLoaded(true);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tsrc={imageUrl}\r\n\t\t\t\t\talt={`Image for ${itemName}`}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t{!imageLoaded ? (\r\n\t\t\t\t// if the main image hasn't loaded yet, show a placeholder\r\n\t\t\t\t<PlaceholderImage showSpinner={true} />\r\n\t\t\t) : null}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ResultImage;\r\n","import React from 'react';\r\n\r\nimport { Result } from 'models/Search';\r\nimport ResultImage from './ResultImage';\r\n\r\nexport interface ResultItemProps {\r\n\titem: Result;\r\n}\r\n\r\nfunction ResultItem({ item }: ResultItemProps) {\r\n\tconst itemName = item.getDocumentValue('itemname');\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-results__item\">\r\n\t\t\t<ResultImage item={item} />\r\n\r\n\t\t\t<div className=\"hawk-results__item-name\">\r\n\t\t\t\t<span>{itemName}</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ResultItem;\r\n","import React from 'react';\r\nimport PlaceholderItem from './PlaceholderItem';\r\nimport Spinner from 'components/ui/Spinner';\r\nimport { default as DefaultResultItem, ResultItemProps } from './ResultItem';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\n\r\nexport interface ResultsListingProps {\r\n\tResultItem: React.ComponentType<ResultItemProps>;\r\n}\r\n\r\nfunction ResultListing({ ResultItem = DefaultResultItem }: ResultsListingProps) {\r\n\tconst {\r\n\t\tstore: { isLoading, searchResults },\r\n\t} = useHawksearch();\r\n\r\n\tconst results = searchResults ? searchResults.Results : [];\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-results__listing\">\r\n\t\t\t<Spinner isVisible={isLoading} />\r\n\r\n\t\t\t{results.length\r\n\t\t\t\t? // if we have results, display them\r\n\t\t\t\t  results.map(result => <ResultItem key={result.DocId} item={result} />)\r\n\t\t\t\t: // otherwise display placeholder items as we're loading\r\n\t\t\t\t  [...Array(12)].map((_, i) => <PlaceholderItem key={i} />)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ResultListing;\r\n","import * as React from 'react';\r\n\r\ninterface XCircleSVGProps {\r\n\tclass?: string;\r\n}\r\n\r\n/**\r\n * X Circle SVG\r\n *\r\n * @returns\r\n */\r\nfunction XCircleSVG(props: XCircleSVGProps) {\r\n\treturn (\r\n\t\t<svg\r\n\t\t\tviewBox=\"0 0 32 32\"\r\n\t\t\tclassName={'icon icon-help-header ' + props.class}\r\n\t\t\tfocusable=\"false\"\r\n\t\t\taria-hidden=\"true\"\r\n\t\t>\r\n\t\t\t<path\r\n\t\t\t\tfill=\"#d9534f\"\r\n\t\t\t\td=\"M15.998 0c8.837 0 16 7.163 16 16s-7.163 16-16 16c-8.837 0-16-7.163-16-16v0c0-8.837 7.163-16 16-16v0z\"\r\n\t\t\t/>\r\n\t\t\t<path\r\n\t\t\t\tfill=\"#fff\"\r\n\t\t\t\td=\"M13.6 11.646l7.171 7.171c0.541 0.541 0.541 1.417 0 1.958l0.002-0.002c-0.541 0.541-1.417 0.541-1.958 0l-7.171-7.171c-0.541-0.541-0.541-1.417 0-1.958l-0.002 0.002c0.541-0.541 1.417-0.541 1.958 0z\"\r\n\t\t\t/>\r\n\t\t\t<path\r\n\t\t\t\tfill=\"#fff\"\r\n\t\t\t\td=\"M20.774 13.6l-7.174 7.174c-0.54 0.54-1.415 0.54-1.955 0l-0.002-0.002c-0.54-0.54-0.54-1.415 0-1.955l7.174-7.174c0.54-0.54 1.415-0.54 1.955 0l0.002 0.002c0.54 0.54 0.54 1.415 0 1.955z\"\r\n\t\t\t/>\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default XCircleSVG;\r\n","import React from 'react';\r\nimport moment from 'moment';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport XCircleSVG from 'components/svg/XCircleSVG';\r\nimport { ClientSelectionValue, ClientSelection } from 'store/ClientSelections';\r\nimport { Facet, Range } from 'models/Facets';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nfunction Selections() {\r\n\tconst {\r\n\t\tstore: { facetSelections, pendingSearch },\r\n\t\tactor,\r\n\t} = useHawksearch();\r\n\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\t// Added filter to hide selection for Tabs\r\n\tconst keys = Object.keys(facetSelections).filter(key => key !== 'it');\r\n\tif (keys.length === 0) {\r\n\t\t// no selections, so render nothing\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction clearSelection(facet: string, value?: ClientSelectionValue) {\r\n\t\tif (value) {\r\n\t\t\tactor.clearFacetValue(facet, value.value);\r\n\t\t} else {\r\n\t\t\tactor.clearFacet(facet);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction clearAll() {\r\n\t\tactor.clearAllFacets();\r\n\t}\r\n\r\n\tfunction renderRange(value: ClientSelectionValue, facet: Facet) {\r\n\t\tconst displayValue = value.value;\r\n\r\n\t\tif (!displayValue || displayValue.indexOf(',') === -1) {\r\n\t\t\t// range facet selection values should include a comma, so if they don't then this likely isn't a valid\r\n\t\t\t// range value that we want to render\r\n\t\t\tconst selectedRange = facet.Ranges.find((range: Range) => range.Value === value.value);\r\n\t\t\treturn selectedRange ? selectedRange.Label : displayValue;\r\n\t\t}\r\n\r\n\t\tconst splittedValues = displayValue.split(',');\r\n\t\tif (facet.IsCurrency && splittedValues.length > 1) {\r\n\t\t\treturn `${facet.CurrencySymbol} ${splittedValues[0]} - ${facet.CurrencySymbol} ${splittedValues[1]}`;\r\n\t\t}\r\n\r\n\t\t// return a prettier display value for ranges\r\n\t\treturn displayValue.replace(',', ' - ');\r\n\t}\r\n\r\n\tfunction renderLabel(selection, item) {\r\n\t\tif (selection.facet.FacetType === 'openRange' && selection.facet.DataType === 'datetime') {\r\n\t\t\tlet [startDate, endDate] = (item.label || ',').split(',');\r\n\t\t\tstartDate = moment(startDate.replace(/\\//g, '-')).format('LLLL');\r\n\t\t\tendDate = moment(endDate.replace(/\\//g, '-')).format('LLLL');\r\n\t\t\treturn `${startDate} - ${endDate}`;\r\n\t\t} else if (selection.facet.FieldType === 'range') {\r\n\t\t\treturn renderRange(item, selection.facet);\r\n\t\t} else if (selection.facet.FacetType === 'search') {\r\n\t\t\treturn decodeURIComponent(item.label);\r\n\t\t}\r\n\t\treturn item.label;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__selections\">\r\n\t\t\t<h4>{t(\"You've Selected\")}</h4>\r\n\t\t\t<ul className=\"hawk-selections\">\r\n\t\t\t\t{keys.map(key => {\r\n\t\t\t\t\tconst selection = facetSelections[key];\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<li key={key} className=\"hawk-selections__category\">\r\n\t\t\t\t\t\t\t<div className=\"hawk-selections__category-wrapper\">\r\n\t\t\t\t\t\t\t\t<span className=\"hawk-selections__category-name\">{selection.label}:</span>\r\n\r\n\t\t\t\t\t\t\t\t<ul className=\"hawk-selections__item-list\">\r\n\t\t\t\t\t\t\t\t\t{selection.items.map(item => {\r\n\t\t\t\t\t\t\t\t\t\tconst negation = item.value.startsWith('-');\r\n\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<li key={item.value} className=\"hawk-selections__item\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => clearSelection(key, item)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"hawk-selections__item-remove\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<XCircleSVG />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"visually-hidden\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tUnselect facet {selection.label} {item.label}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnegation\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'hawk-selections__item-name hawk-selections__item-name--negated'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'hawk-selections__item-name'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{renderLabel(selection, item)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<button onClick={() => clearSelection(key)} className=\"hawk-selections__category-remove\">\r\n\t\t\t\t\t\t\t\t<XCircleSVG />{' '}\r\n\t\t\t\t\t\t\t\t<span className=\"visually-hidden\">Unselect all facets for {selection.label}</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\r\n\t\t\t\t<li className=\"hawk-selections__category\">\r\n\t\t\t\t\t<button onClick={clearAll} className=\"hawk-btn hawk-btn-primary-outline\">\r\n\t\t\t\t\t\t{t('Clear All')}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Selections;\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nfunction SearchResultsLabel() {\r\n\tconst {\r\n\t\tstore: { pendingSearch, searchResults },\r\n\t} = useHawksearch();\r\n\tconst [keyword, setKeyword] = useState('');\r\n\r\n\tconst { t, i18n } = useTranslation();\r\n\tuseEffect(() => {\r\n\t\tif (searchResults && searchResults.AdjustedKeyword) {\r\n\t\t\tsetKeyword(decodeURIComponent(searchResults.AdjustedKeyword));\r\n\t\t} else {\r\n\t\t\tsetKeyword(decodeURIComponent(pendingSearch.Keyword || ''));\r\n\t\t}\r\n\t}, [searchResults]);\r\n\r\n\tif (!pendingSearch.Keyword) {\r\n\t\t// no selections, so render nothing\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__results-label\">\r\n\t\t\t<h3>{pendingSearch.Keyword ? t('Search Results for') + ' ' + keyword : t('Search Results')}</h3>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SearchResultsLabel;\r\n","import React from 'react';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport ToolRow from 'components/ui/Results/ToolRow';\r\nimport ResultListing from 'components/ui/Results/ResultListing';\r\nimport Selections from 'components/ui/Facets/Selections';\r\nimport { default as DefaultResultItem, ResultItemProps } from 'components/ui/Results/ResultItem';\r\nimport SearchResultsLabel from 'components/ui/Facets/SearchResultsLabel';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nexport interface ResultsProps {\r\n\tResultItem?: React.ComponentType<ResultItemProps>;\r\n}\r\n\r\nfunction Results({ ResultItem = DefaultResultItem }: ResultsProps) {\r\n\tconst {\r\n\t\tstore: { isLoading, searchResults, requestError },\r\n\t} = useHawksearch();\r\n\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\tif (requestError) {\r\n\t\treturn <span>An error occurred while searching for your results. Please contact the site administrator.</span>;\r\n\t}\r\n\r\n\t// end of overrides\r\n\tif ((!searchResults || searchResults.Results.length === 0) && !isLoading) {\r\n\t\treturn <span>{t('No Results')}</span>;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-results\">\r\n\t\t\t<SearchResultsLabel />\r\n\t\t\t<Selections />\r\n\r\n\t\t\t<div className=\"hawk-results__top-tool-row\">\r\n\t\t\t\t<ToolRow />\r\n\t\t\t</div>\r\n\r\n\t\t\t<ResultListing ResultItem={ResultItem} />\r\n\r\n\t\t\t<div className=\"hawk-results__bottom-tool-row\">\r\n\t\t\t\t<ToolRow />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Results;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport SearchBox from 'components/ui/SearchBox/SearchBox';\r\nimport FacetRail from 'components/ui/Facets/FacetRail';\r\nimport { Results } from 'components/ui/Results';\r\nimport { useHawkConfig } from 'components/ConfigProvider';\r\n\r\nfunction App() {\r\n\tconst { config } = useHawkConfig();\r\n\r\n\tfunction getElement(elem: HTMLElement | string) {\r\n\t\tif (typeof elem === 'string') {\r\n\t\t\treturn document.getElementById(elem);\r\n\t\t}\r\n\r\n\t\treturn elem;\r\n\t}\r\n\r\n\tfunction renderSearchBox() {\r\n\t\treturn (\r\n\t\t\t<div className=\"hawk\">\r\n\t\t\t\t<div className=\"hawk__header\">\r\n\t\t\t\t\t<SearchBox />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tconst renderElem = config.searchBoxElement ? getElement(config.searchBoxElement) : null;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{renderElem ? ReactDOM.createPortal(renderSearchBox(), renderElem) : renderSearchBox()}\r\n\r\n\t\t\t<div className=\"hawk\">\r\n\t\t\t\t<div className=\"hawk__body\">\r\n\t\t\t\t\t<FacetRail />\r\n\r\n\t\t\t\t\t<Results />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\n\r\nimport ConfigProvider from 'components/ConfigProvider';\r\nimport StoreProvider from 'components/StoreProvider';\r\nimport { HawksearchConfig } from 'types/HawksearchConfig';\r\nimport { Request } from 'models/Search';\r\nimport TrackingEvent from './TrackingEvent';\r\n\r\nexport interface HawksearchProps {\r\n\t/** Global configuration. */\r\n\tconfig: HawksearchConfig;\r\n\t/** The initial search to perform when initializing the search components. */\r\n\tinitialSearch?: Partial<Request>;\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\nfunction Hawksearch(props: HawksearchProps) {\r\n\tif (props.config.trackEventUrl) {\r\n\t\t// Set URL to track event\r\n\t\tTrackingEvent.setTrackingURL(props.config.trackEventUrl);\r\n\t\tTrackingEvent.setClientGUID(props.config.clientGuid);\r\n\t}\r\n\treturn (\r\n\t\t<ConfigProvider config={props.config}>\r\n\t\t\t<StoreProvider initialSearch={props.initialSearch}>{props.children}</StoreProvider>\r\n\t\t</ConfigProvider>\r\n\t);\r\n}\r\n\r\nexport default Hawksearch;\r\n","//\r\n// this file is the entry point for the main search application when running the minified bundle\r\n//\r\n\r\nimport '@babel/polyfill';\r\nimport 'url-search-params-polyfill';\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport 'rheostat/initialize';\r\n\r\nimport QueryStringListener from 'components/QueryStringListener';\r\nimport App from 'app/App';\r\nimport Hawksearch from 'components/Hawksearch';\r\nimport { parseLocation } from 'util/QueryString';\r\nimport { HawksearchConfig } from 'types/HawksearchConfig';\r\n\r\ndeclare global {\r\n\tinterface Window {\r\n\t\tHawksearch?: HawksearchConfig;\r\n\t}\r\n}\r\n\r\nif (window.Hawksearch) {\r\n\tinitializeSearch(window.Hawksearch);\r\n}\r\n\r\nexport function initializeSearch(config: HawksearchConfig) {\r\n\tif (!config.searchElement) {\r\n\t\tthrow new Error('window.Hawksearch.searchElement has not been configured');\r\n\t}\r\n\r\n\tconst renderElem =\r\n\t\ttypeof config.searchElement === 'string' ? document.getElementById(config.searchElement) : config.searchElement;\r\n\r\n\t// pull the initial search from location\r\n\tconst searchRequest = parseLocation(location);\r\n\r\n\tReactDOM.render(\r\n\t\t<Hawksearch config={config} initialSearch={searchRequest}>\r\n\t\t\t<QueryStringListener />\r\n\t\t\t<App />\r\n\t\t</Hawksearch>,\r\n\t\trenderElem\r\n\t);\r\n}\r\n","import * as React from 'react';\r\n\r\ninterface DashCircleSVGProps {\r\n\tclass?: string;\r\n}\r\n\r\n/**\r\n * Dash circle SVG\r\n *\r\n * @returns\r\n */\r\nfunction DashCircleSVG(props: DashCircleSVGProps) {\r\n\treturn (\r\n\t\t<svg\r\n\t\t\tviewBox=\"0 0 32 32\"\r\n\t\t\tclassName={'icon icon-help-header ' + props.class}\r\n\t\t\tfocusable=\"false\"\r\n\t\t\taria-hidden=\"true\"\r\n\t\t>\r\n\t\t\t<path\r\n\t\t\t\tfill=\"#5c5c5c\"\r\n\t\t\t\td=\"M16 0c8.837 0 16 7.163 16 16s-7.163 16-16 16c-8.837 0-16-7.163-16-16v0c0-8.837 7.163-16 16-16v0z\"\r\n\t\t\t/>\r\n\t\t\t<path\r\n\t\t\t\tfill=\"#fff\"\r\n\t\t\t\td=\"M21.51 17.594h-11.733c-0.884 0-1.6-0.716-1.6-1.6s0.716-1.6 1.6-1.6h11.733c0.884 0 1.6 0.716 1.6 1.6s-0.716 1.6-1.6 1.6z\"\r\n\t\t\t/>\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default DashCircleSVG;\r\n","import * as React from 'react';\r\n\r\ninterface CheckmarkSVGProps {\r\n\tclass: string;\r\n}\r\n\r\n/**\r\n * Checkmark SVG\r\n *\r\n * @returns\r\n */\r\nfunction CheckmarkSVG(props: CheckmarkSVGProps) {\r\n\treturn (\r\n\t\t<svg viewBox=\"0 0 32 32\" className={'icon ' + props.class} focusable=\"false\" aria-hidden=\"true\">\r\n\t\t\t<path d=\"M27 4l-15 15-7-7-5 5 12 12 20-20z\" />\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default CheckmarkSVG;\r\n","import * as React from 'react';\r\n\r\ninterface PlusCircleSVGProps {\r\n\tclass: string;\r\n}\r\n\r\n/**\r\n * Plus SVG\r\n *\r\n * @returns\r\n */\r\nfunction PlusCircleSVG(props: PlusCircleSVGProps) {\r\n\treturn (\r\n\t\t<svg viewBox=\"0 0 20 20\" className={'icon ' + props.class} focusable=\"false\" aria-hidden=\"true\">\r\n\t\t\t<path d=\"M11 9v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM10 20c-5.523 0-10-4.477-10-10s4.477-10 10-10v0c5.523 0 10 4.477 10 10s-4.477 10-10 10v0z\" />\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default PlusCircleSVG;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport { FacetSelectionState } from 'store/Store';\r\nimport DashCircleSVG from 'components/svg/DashCircleSVG';\r\nimport CheckmarkSVG from 'components/svg/CheckmarkSVG';\r\nimport PlusCircleSVG from 'components/svg/PlusCircleSVG';\r\nimport { useHawkConfig } from 'components/ConfigProvider';\r\n\r\nfunction Checkbox() {\r\n\tconst { store } = useHawksearch();\r\n\tconst { config } = useHawkConfig();\r\n\r\n\tconst {\r\n\t\tfacet,\r\n\t\tstate: { facetValues },\r\n\t\tactor,\r\n\t\trenderer,\r\n\t} = useFacet();\r\n\r\n\tfunction renderOptions() {\r\n\t\tif (facet.FieldType === 'range') {\r\n\t\t\treturn facetValues.map(value => {\r\n\t\t\t\tconst correspondingRange = facet.Ranges.find(c => c.Value === value.Value);\r\n\t\t\t\tconst rangeValueAssetUrl = correspondingRange\r\n\t\t\t\t\t? config.dashboardUrl + correspondingRange.AssetFullUrl\r\n\t\t\t\t\t: '';\r\n\r\n\t\t\t\t// facets can be selected or negated, so explicitly check that the facet is not selected\r\n\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\r\n\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\t\t\t\tconst isNegated = selectionState === FacetSelectionState.Negated;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<li key={value.Value} className=\"hawk-facet-rail__facet-list-item\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={e => actor.selectFacet(value)}\r\n\t\t\t\t\t\t\tclassName=\"hawk-facet-rail__facet-btn\"\r\n\t\t\t\t\t\t\taria-pressed={isSelected}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{renderCheckMark(isSelected)}\r\n\t\t\t\t\t\t\t{rangeValueAssetUrl !== '' ? (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<span className=\"hawk-selectionInner\">\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"hawk-range-asset\" title={value.Label} />\r\n\r\n\t\t\t\t\t\t\t\t\t\t<img src={rangeValueAssetUrl} alt={value.Label} />\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\tstyle={isNegated ? { textDecoration: 'line-through' } : undefined}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"hawk-facet-rail__facet-name\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{value.Label} ({value.Count})\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\tstyle={isNegated ? { textDecoration: 'line-through' } : undefined}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"hawk-facet-rail__facet-name\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{value.Label} ({value.Count})\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t{renderFacetActions(value.Value || '', isNegated)}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn facetValues.map(value => {\r\n\t\t\t\t// facets can be selected or negated, so explicitly check that the facet is not selected\r\n\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\r\n\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\t\t\t\tconst isNegated = selectionState === FacetSelectionState.Negated;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<li key={value.Value} className=\"hawk-facet-rail__facet-list-item\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={e => actor.selectFacet(value)}\r\n\t\t\t\t\t\t\tclassName=\"hawk-facet-rail__facet-btn\"\r\n\t\t\t\t\t\t\taria-pressed={isSelected}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{renderCheckMark(isSelected)}\r\n\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tstyle={isNegated ? { textDecoration: 'line-through' } : undefined}\r\n\t\t\t\t\t\t\t\tclassName=\"hawk-facet-rail__facet-name\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{value.Label} ({value.Count})\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t{renderFacetActions(value.Value || '', isNegated)}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction renderCheckMark(isSelected: boolean) {\r\n\t\treturn (\r\n\t\t\t<span\r\n\t\t\t\tclassName={\r\n\t\t\t\t\tisSelected\r\n\t\t\t\t\t\t? 'hawk-facet-rail__facet-checkbox hawk-facet-rail__facet-checkbox--checked'\r\n\t\t\t\t\t\t: 'hawk-facet-rail__facet-checkbox'\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{isSelected ? <CheckmarkSVG class=\"hawk-facet-rail__facet-checkbox-icon\" /> : null}\r\n\t\t\t</span>\r\n\t\t);\r\n\t}\r\n\tfunction renderFacetActions(value: string, isNegated: boolean) {\r\n\t\treturn (\r\n\t\t\t<button onClick={e => actor.negateFacet(value)} className=\"hawk-facet-rail__facet-btn-exclude\">\r\n\t\t\t\t{isNegated ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<PlusCircleSVG class=\"hawk-facet-rail__facet-btn-include\" />\r\n\t\t\t\t\t\t<span className=\"visually-hidden\">Include facet</span>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<DashCircleSVG />\r\n\t\t\t\t\t\t<span className=\"visually-hidden\">Exclude facet</span>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</button>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-checkbox\">\r\n\t\t\t\t<ul className=\"hawk-facet-rail__facet-list\">{renderOptions()}</ul>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* render the default truncation control as we don't need to customize this */}\r\n\t\t\t{renderer.renderTruncation()}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Checkbox;\r\n","import React, { useState } from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nfunction Search() {\r\n\tconst { store, actor: hawkActor } = useHawksearch();\r\n\tconst { facet, actor } = useFacet();\r\n\r\n\tconst [input, setInput] = useState<string | undefined>(undefined);\r\n\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\tfunction onKeyDown(event: React.KeyboardEvent<HTMLInputElement>) {\r\n\t\tif (event.key === 'Enter') {\r\n\t\t\tsetInput(undefined); // clear the user's entered value as we want to be driven by the store again\r\n\r\n\t\t\tactor.selectFacet(event.currentTarget.value);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction clearFacet() {\r\n\t\tsetInput(undefined); // clear the user's entered value as we want to be driven by the store again\r\n\r\n\t\thawkActor.clearFacet(facet);\r\n\t}\r\n\r\n\tfunction getInputValue() {\r\n\t\tif (input !== undefined) {\r\n\t\t\t// if the user type an input, that's the value for the input\r\n\t\t\treturn input;\r\n\t\t}\r\n\r\n\t\t// otherwise, use the value from the store\r\n\t\treturn decodeURIComponent(store.pendingSearch.SearchWithin || '');\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t\t<div className=\"hawk-facet-rail__facet-values__search\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tvalue={getInputValue()}\r\n\t\t\t\t\t\tonChange={e => setInput(e.currentTarget.value)}\r\n\t\t\t\t\t\tonKeyDown={onKeyDown}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{store.pendingSearch.SearchWithin && (\r\n\t\t\t\t<div className=\"hawk-facet-rail__facet-values__search-clear\">\r\n\t\t\t\t\t<button className=\"link-button\" onClick={clearFacet}>\r\n\t\t\t\t\t\t{t('Clear')}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Search;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport { FacetSelectionState } from 'store/Store';\r\nimport { Value } from 'models/Facets';\r\n\r\nfunction Link() {\r\n\tconst { store } = useHawksearch();\r\n\tconst {\r\n\t\tfacet,\r\n\t\tstate: { facetValues },\r\n\t\tactor,\r\n\t\trenderer,\r\n\t} = useFacet();\r\n\r\n\tfunction setLinkFacet(value: Value, selectionState: number) {\r\n\t\tif (selectionState) {\r\n\t\t\t// Deselect the facet\r\n\t\t\tactor.selectFacet(value);\r\n\t\t} else {\r\n\t\t\t// Select the facet\r\n\t\t\tactor.setFacets([value]);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-link\">\r\n\t\t\t\t<ul className=\"hawk-facet-rail__facet-list\">\r\n\t\t\t\t\t{facetValues.map(value => {\r\n\t\t\t\t\t\t// facets can be selected or negated, so explicitly check that the facet is not selected\r\n\t\t\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\r\n\t\t\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<li key={value.Value} className=\"hawk-facet-rail__facet-list-item\">\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={e => setLinkFacet(value, selectionState)}\r\n\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\tisSelected\r\n\t\t\t\t\t\t\t\t\t\t\t? 'hawk-facet-rail__facet-btn selected'\r\n\t\t\t\t\t\t\t\t\t\t\t: 'hawk-facet-rail__facet-btn'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\taria-pressed={isSelected}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<span className=\"hawk-facet-rail__facet-name\">\r\n\t\t\t\t\t\t\t\t\t\t{value.Label} ({value.Count})\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* render the default truncation control as we don't need to customize this */}\r\n\t\t\t{renderer.renderTruncation()}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Link;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nfunction formatDate(unixFormat: number) {\r\n\tconst date = new Date(unixFormat);\r\n\tconst year = date.getFullYear().toString();\r\n\tconst month = (date.getMonth() + 101).toString().substring(1);\r\n\tconst day = (date.getDate() + 100).toString().substring(1);\r\n\treturn year + '-' + month + '-' + day;\r\n}\r\nexport interface SliderCalendarInputsProps {\r\n\tmin: number;\r\n\tmax: number;\r\n\tvalues: number[];\r\n\tonValueChange(minValue: number, maxValue: number): void;\r\n}\r\nfunction SliderCalendarInputs(sliderProps: SliderCalendarInputsProps) {\r\n\tconst [minValue, setMinValue] = useState(0);\r\n\tconst [maxValue, setMaxValue] = useState(0);\r\n\r\n\tfunction onMinUpdate(event: any) {\r\n\t\tconst value = new Date(event.target.value).getTime();\r\n\r\n\t\tconst newMinValue = Number(value);\r\n\t\tif (isNaN(newMinValue) || minValue === value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetMinValue(value);\r\n\t\tsliderProps.onValueChange(Number(newMinValue), Number(maxValue));\r\n\t}\r\n\r\n\tfunction onMaxUpdate(event: any) {\r\n\t\tconst value = new Date(event.target.value).getTime();\r\n\r\n\t\tconst newMaxValue = Number(value);\r\n\t\tif (isNaN(newMaxValue) || maxValue === value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetMaxValue(value);\r\n\t\tsliderProps.onValueChange(Number(minValue), Number(newMaxValue));\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetMinValue(sliderProps.values[0]);\r\n\t\tsetMaxValue(sliderProps.values[1]);\r\n\t}, [sliderProps]);\r\n\treturn (\r\n\t\t<div className=\"hawk-sliderNumeric\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"date\"\r\n\t\t\t\tvalue={formatDate(Number(minValue))}\r\n\t\t\t\tclassName=\"hawk-text-input hawk-date-value-start\"\r\n\t\t\t\tmin={formatDate(sliderProps.min)}\r\n\t\t\t\tmax={formatDate(sliderProps.max)}\r\n\t\t\t\tonChange={onMinUpdate}\r\n\t\t\t/>\r\n\r\n\t\t\t<input\r\n\t\t\t\ttype=\"date\"\r\n\t\t\t\tvalue={formatDate(Number(maxValue))}\r\n\t\t\t\tclassName=\"hawk-text-input hawk-date-value-end\"\r\n\t\t\t\tmin={formatDate(sliderProps.min)}\r\n\t\t\t\tmax={formatDate(sliderProps.max)}\r\n\t\t\t\tonChange={onMaxUpdate}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SliderCalendarInputs;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { PublicState } from 'rheostat';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport SliderCalendarInputs from '../SliderCalendarInputs';\r\nconst Rheostat = React.lazy(() => import(/* webpackChunkName: \"rheostat\" */ 'rheostat'));\r\n\r\nfunction formatDate(date: Date) {\r\n\tconst year = date.getFullYear().toString();\r\n\tconst month = (date.getMonth() + 101).toString().substring(1);\r\n\tconst day = (date.getDate() + 100).toString().substring(1);\r\n\treturn year + '-' + month + '-' + day;\r\n}\r\n\r\nfunction replaceHyphen(date: string) {\r\n\tif (!date) {\r\n\t\treturn date;\r\n\t}\r\n\treturn date.replace(/-/g, '/');\r\n}\r\n\r\nfunction getTime(date) {\r\n\treturn date && Number(new Date(date || '').getTime());\r\n}\r\n\r\nfunction SliderDate() {\r\n\tconst {\r\n\t\tstore: { facetSelections },\r\n\t} = useHawksearch();\r\n\r\n\tconst {\r\n\t\tstate: { facetValues, decimalPrecision },\r\n\t\tfacet,\r\n\t\tactor,\r\n\t} = useFacet();\r\n\t// the range of the slider is defined by the first facet value. or null if there is no first value\r\n\tconst range = facetValues.length > 0 ? facetValues[0] : null;\r\n\r\n\tconst [rangeMin, setMinRange] = useState(range && getTime(range.RangeMin));\r\n\tconst [rangeMax, setMaxRange] = useState(range && getTime(range.RangeMax));\r\n\tconst [rangeStart, setStartRange] = useState(range && getTime(range.RangeStart));\r\n\tconst [rangeEnd, setEndRange] = useState(range && getTime(range.RangeEnd));\r\n\r\n\t// if there's no range, initialize to zeros\r\n\tconst [minValue, setMinValue] = useState<number>();\r\n\tconst [maxValue, setMaxValue] = useState<number>();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst paramName = facet.ParamName || facet.Field;\r\n\r\n\t\t// clear min and max value if these were cleared\r\n\t\tif (!paramName || !(paramName in facetSelections)) {\r\n\t\t\tsetMinValue(undefined);\r\n\t\t\tsetMaxValue(undefined);\r\n\t\t}\r\n\t}, [facetSelections]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst newRange = facetValues.length > 0 ? facetValues[0] : null;\r\n\t\tsetMinRange(newRange && getTime(newRange.RangeMin));\r\n\t\tsetMaxRange(newRange && getTime(newRange.RangeMax));\r\n\t\tsetStartRange(newRange && getTime(newRange.RangeStart));\r\n\t\tsetEndRange(newRange && getTime(newRange.RangeEnd));\r\n\t}, [facetValues]);\r\n\r\n\tif (\r\n\t\trangeMin === null ||\r\n\t\tisNaN(rangeMin) ||\r\n\t\trangeMax === null ||\r\n\t\tisNaN(rangeMax) ||\r\n\t\trangeStart === null ||\r\n\t\tisNaN(rangeStart) ||\r\n\t\trangeEnd === null ||\r\n\t\tisNaN(rangeEnd)\r\n\t) {\r\n\t\t// this facet is somehow misconfigured so don't render\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction onSliderDrag(state: PublicState) {\r\n\t\tconst [newMin, newMax] = state.values;\r\n\t\tsetMinValue(newMin);\r\n\t\tsetMaxValue(newMax);\r\n\t}\r\n\r\n\tfunction onSliderValueChange(state: PublicState) {\r\n\t\tconst [newMin, newMax] = state.values;\r\n\r\n\t\tsetFacetValues(newMin, newMax);\r\n\t}\r\n\r\n\tfunction onValueChange(newMinValue: number, newMaxValue: number) {\r\n\t\tlet currentMinValue = minValue;\r\n\t\tlet currentMaxValue = maxValue;\r\n\t\t// if min value wasn't yet selected use range start\r\n\t\tif (minValue === undefined && rangeStart !== null) {\r\n\t\t\tcurrentMinValue = rangeStart; // setMinValue(rangeStart);\r\n\t\t}\r\n\r\n\t\t// if max value wasn't yet selected use range end\r\n\t\tif (maxValue === undefined && rangeEnd !== null) {\r\n\t\t\tcurrentMaxValue = rangeEnd;\r\n\t\t}\r\n\r\n\t\tif (currentMinValue === undefined || currentMaxValue === undefined) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (currentMinValue !== newMinValue && newMinValue <= currentMaxValue) {\r\n\t\t\tif (rangeMin !== null && newMinValue <= rangeMin) {\r\n\t\t\t\tcurrentMinValue = rangeMin;\r\n\t\t\t} else {\r\n\t\t\t\tcurrentMinValue = newMinValue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (currentMaxValue !== newMaxValue && newMaxValue >= currentMinValue) {\r\n\t\t\tif (rangeMax !== null && newMaxValue >= rangeMax) {\r\n\t\t\t\tcurrentMaxValue = rangeMax;\r\n\t\t\t} else {\r\n\t\t\t\tcurrentMaxValue = newMaxValue;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetFacetValues(currentMinValue, currentMaxValue);\r\n\t}\r\n\r\n\tfunction setFacetValues(minVal: number | undefined, maxVal: number | undefined) {\r\n\t\tif (minVal === undefined || maxVal === undefined || isNaN(minVal) || isNaN(maxVal)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetMinValue(minVal);\r\n\t\tsetMaxValue(maxVal);\r\n\r\n\t\tconst formattedMinVal = replaceHyphen(formatDate(new Date(minVal)));\r\n\t\tconst formattedMaxVal = replaceHyphen(formatDate(new Date(maxVal)));\r\n\r\n\t\t// this selection is sent to hawk separated by commas, so build the value here\r\n\t\tconst selection = `${formattedMinVal},${formattedMaxVal}`;\r\n\t\tactor.setFacets([selection]);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-link\">\r\n\t\t\t\t<React.Suspense fallback={<div>Loading...</div>}>\r\n\t\t\t\t\t<SliderCalendarInputs\r\n\t\t\t\t\t\tmin={rangeMin}\r\n\t\t\t\t\t\tmax={rangeMax}\r\n\t\t\t\t\t\tvalues={[\r\n\t\t\t\t\t\t\tminValue === undefined ? rangeStart : Math.max(minValue, rangeMin),\r\n\t\t\t\t\t\t\tmaxValue === undefined ? rangeEnd : Math.min(maxValue, rangeMax),\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tonValueChange={onValueChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Rheostat\r\n\t\t\t\t\t\tmin={rangeMin}\r\n\t\t\t\t\t\tmax={rangeMax}\r\n\t\t\t\t\t\tvalues={[\r\n\t\t\t\t\t\t\tMath.floor(minValue === undefined ? rangeStart : Math.max(minValue, rangeMin)),\r\n\t\t\t\t\t\t\tMath.ceil(maxValue === undefined ? rangeEnd : Math.min(maxValue, rangeMax)),\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tonValuesUpdated={onSliderDrag}\r\n\t\t\t\t\t\tonChange={onSliderValueChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</React.Suspense>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SliderDate;\r\n","import React, { useState, useEffect } from 'react';\r\nimport NumberFormat from 'react-number-format';\r\n\r\nexport interface SliderNumericInputsProps {\r\n\tmin: number;\r\n\tmax: number;\r\n\tvalues: number[];\r\n\tisCurrency: boolean;\r\n\tcurrencySymbol: string;\r\n\tdecimalPrecision: number;\r\n\tonValueChange(minValue: number, maxValue: number): void;\r\n}\r\nfunction SliderNumericInputs(sliderProps: SliderNumericInputsProps) {\r\n\tconst [minValue, setMinValue] = useState('' as string);\r\n\tconst [maxValue, setMaxValue] = useState('' as string);\r\n\r\n\tfunction onMinUpdate(values: any) {\r\n\t\tconst { formattedValue, value } = values;\r\n\r\n\t\tconst newMinValue = Number(value);\r\n\t\tif (isNaN(newMinValue) || minValue === value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetMinValue(value);\r\n\t}\r\n\r\n\tfunction onMaxUpdate(values: any) {\r\n\t\tconst { formattedValue, value } = values;\r\n\r\n\t\tconst newMaxValue = Number(value);\r\n\t\tif (isNaN(newMaxValue) || maxValue === value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetMaxValue(value);\r\n\t}\r\n\tfunction reloadFacets(event: React.FormEvent<HTMLInputElement>) {\r\n\t\tsliderProps.onValueChange(Number(minValue), Number(maxValue));\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetMinValue(sliderProps.values[0].toString());\r\n\t\tsetMaxValue(sliderProps.values[1].toString());\r\n\t}, [sliderProps]);\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-sliderNumeric\">\r\n\t\t\t<NumberFormat\r\n\t\t\t\tthousandSeparator={sliderProps.isCurrency}\r\n\t\t\t\tprefix={sliderProps.isCurrency ? sliderProps.currencySymbol : ''}\r\n\t\t\t\tvalue={minValue}\r\n\t\t\t\tclassName=\"hawk-numericInput numeric-from\"\r\n\t\t\t\tmin={sliderProps.min}\r\n\t\t\t\tmax={sliderProps.max}\r\n\t\t\t\tonValueChange={onMinUpdate}\r\n\t\t\t\tonBlur={reloadFacets}\r\n\t\t\t\tdecimalScale={sliderProps.decimalPrecision}\r\n\t\t\t/>\r\n\r\n\t\t\t<NumberFormat\r\n\t\t\t\tthousandSeparator={sliderProps.isCurrency}\r\n\t\t\t\tprefix={sliderProps.isCurrency ? sliderProps.currencySymbol : ''}\r\n\t\t\t\tvalue={maxValue}\r\n\t\t\t\tclassName=\"hawk-numericInput numeric-to\"\r\n\t\t\t\tmin={sliderProps.min}\r\n\t\t\t\tmax={sliderProps.max}\r\n\t\t\t\tonValueChange={onMaxUpdate}\r\n\t\t\t\tonBlur={reloadFacets}\r\n\t\t\t\tdecimalScale={sliderProps.decimalPrecision}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SliderNumericInputs;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { PublicState } from 'rheostat';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport SliderNumericInputs from 'components/ui/Facets/SliderNumericInputs';\r\nconst Rheostat = React.lazy(() => import(/* webpackChunkName: \"rheostat\" */ 'rheostat'));\r\n\r\nfunction SliderNumeric() {\r\n\tconst {\r\n\t\tstore: { facetSelections },\r\n\t} = useHawksearch();\r\n\r\n\tconst {\r\n\t\tstate: { facetValues, decimalPrecision },\r\n\t\tfacet,\r\n\t\tactor,\r\n\t} = useFacet();\r\n\t// the range of the slider is defined by the first facet value. or null if there is no first value\r\n\tconst range = facetValues.length > 0 ? facetValues[0] : null;\r\n\r\n\tconst [rangeMin, setMinRange] = useState(range && Number(parseFloat(range.RangeMin || '').toFixed(2)));\r\n\tconst [rangeMax, setMaxRange] = useState(range && Number(parseFloat(range.RangeMax || '').toFixed(2)));\r\n\tconst [rangeStart, setStartRange] = useState(range && Number(parseFloat(range.RangeStart || '').toFixed(2)));\r\n\tconst [rangeEnd, setEndRange] = useState(range && Number(parseFloat(range.RangeEnd || '').toFixed(2)));\r\n\r\n\t// if there's no range, initialize to zeros\r\n\tconst [minValue, setMinValue] = useState<number>();\r\n\tconst [maxValue, setMaxValue] = useState<number>();\r\n\r\n\tconst [isCurency, setIsCurrency] = useState(facet.IsCurrency);\r\n\tconst [currencySymbol, setCurrencySymbol] = useState(facet.CurrencySymbol);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetCurrencySymbol(facet.CurrencySymbol || '$');\r\n\t\tsetIsCurrency(facet.IsCurrency);\r\n\t}, [facet]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst paramName = facet.ParamName || facet.Field;\r\n\r\n\t\t// clear min and max value if these were cleared\r\n\t\tif (!paramName || !(paramName in facetSelections)) {\r\n\t\t\tsetMinValue(undefined);\r\n\t\t\tsetMaxValue(undefined);\r\n\t\t} else if (\r\n\t\t\tparamName in facetSelections &&\r\n\t\t\tfacetSelections[paramName].items &&\r\n\t\t\tfacetSelections[paramName].items.length > 0\r\n\t\t) {\r\n\t\t\tconst selectedValues = facetSelections[paramName].items[0].value.split(',');\r\n\t\t\tsetMinValue(Number(selectedValues[0]));\r\n\t\t\tsetMaxValue(Number(selectedValues[1]));\r\n\t\t}\r\n\t}, [facetSelections]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst newRange = facetValues.length > 0 ? facetValues[0] : null;\r\n\t\tsetMinRange(newRange && Number(parseFloat(newRange.RangeMin || '').toFixed(2)));\r\n\t\tsetMaxRange(newRange && Number(parseFloat(newRange.RangeMax || '').toFixed(2)));\r\n\t\tsetStartRange(newRange && Number(parseFloat(newRange.RangeStart || '').toFixed(2)));\r\n\t\tsetEndRange(newRange && Number(parseFloat(newRange.RangeEnd || '').toFixed(2)));\r\n\t}, [facetValues]);\r\n\r\n\tif (\r\n\t\trangeMin === null ||\r\n\t\tisNaN(rangeMin) ||\r\n\t\trangeMax === null ||\r\n\t\tisNaN(rangeMax) ||\r\n\t\trangeStart === null ||\r\n\t\tisNaN(rangeStart) ||\r\n\t\trangeEnd === null ||\r\n\t\tisNaN(rangeEnd)\r\n\t) {\r\n\t\t// this facet is somehow misconfigured so don't render\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction onSliderValueChange(state: PublicState) {\r\n\t\tconst [newMin, newMax] = state.values;\r\n\r\n\t\tsetFacetValues(newMin, newMax);\r\n\t}\r\n\r\n\tfunction onValueChange(newMinValue: number, newMaxValue: number) {\r\n\t\tlet currentMinValue = minValue;\r\n\t\tlet currentMaxValue = maxValue;\r\n\t\t// if min value wasn't yet selected use range start\r\n\t\tif (minValue === undefined && rangeStart !== null) {\r\n\t\t\tcurrentMinValue = rangeStart; // setMinValue(rangeStart);\r\n\t\t}\r\n\r\n\t\t// if max value wasn't yet selected use range end\r\n\t\tif (maxValue === undefined && rangeEnd !== null) {\r\n\t\t\tcurrentMaxValue = rangeEnd;\r\n\t\t}\r\n\r\n\t\tif (currentMinValue === undefined || currentMaxValue === undefined) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (currentMinValue !== newMinValue && newMinValue <= currentMaxValue) {\r\n\t\t\tif (rangeMin !== null && newMinValue <= rangeMin) {\r\n\t\t\t\tcurrentMinValue = rangeMin;\r\n\t\t\t} else {\r\n\t\t\t\tcurrentMinValue = newMinValue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (currentMaxValue !== newMaxValue && newMaxValue >= currentMinValue) {\r\n\t\t\tif (rangeMax !== null && newMaxValue >= rangeMax) {\r\n\t\t\t\tcurrentMaxValue = rangeMax;\r\n\t\t\t} else {\r\n\t\t\t\tcurrentMaxValue = newMaxValue;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetMinValue(currentMinValue);\r\n\t\tsetMaxValue(currentMaxValue);\r\n\t\tsetFacetValues(currentMinValue, currentMaxValue);\r\n\t}\r\n\r\n\tfunction setFacetValues(minVal: number | undefined, maxVal: number | undefined) {\r\n\t\tif (minVal === undefined || maxVal === undefined || isNaN(minVal) || isNaN(maxVal)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetMinValue(minVal);\r\n\t\tsetMaxValue(maxVal);\r\n\r\n\t\t// this selection is sent to hawk separated by commas, so build the value here\r\n\t\tconst selection = `${minVal},${maxVal}`;\r\n\r\n\t\tactor.setFacets([selection]);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-link\">\r\n\t\t\t\t<React.Suspense fallback={<div>Loading...</div>}>\r\n\t\t\t\t\t<SliderNumericInputs\r\n\t\t\t\t\t\tmin={rangeMin}\r\n\t\t\t\t\t\tmax={rangeMax}\r\n\t\t\t\t\t\tcurrencySymbol={currencySymbol}\r\n\t\t\t\t\t\tisCurrency={isCurency}\r\n\t\t\t\t\t\tvalues={[\r\n\t\t\t\t\t\t\tminValue === undefined ? rangeStart : Math.max(minValue, rangeMin),\r\n\t\t\t\t\t\t\tmaxValue === undefined ? rangeEnd : Math.min(maxValue, rangeMax),\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tonValueChange={onValueChange}\r\n\t\t\t\t\t\tdecimalPrecision={decimalPrecision}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Rheostat\r\n\t\t\t\t\t\tmin={rangeMin}\r\n\t\t\t\t\t\tmax={rangeMax}\r\n\t\t\t\t\t\tvalues={[\r\n\t\t\t\t\t\t\tMath.floor(minValue === undefined ? rangeStart : Math.max(minValue, rangeMin)),\r\n\t\t\t\t\t\t\tMath.ceil(maxValue === undefined ? rangeEnd : Math.min(maxValue, rangeMax)),\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tonChange={onSliderValueChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</React.Suspense>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SliderNumeric;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport SliderDate from './SliderDate';\r\nimport SliderNumeric from './SliderNumeric';\r\n\r\nfunction Slider() {\r\n\tconst { facet } = useFacet();\r\n\tif (facet.DataType && facet.DataType === 'datetime') {\r\n\t\treturn <SliderDate />;\r\n\t}\r\n\treturn <SliderNumeric />;\r\n}\r\n\r\nexport default Slider;\r\n","import React, { useState } from 'react';\r\n\r\nimport { Value } from 'models/Facets/Value';\r\nimport { Swatch } from 'models/Facets';\r\nimport { useHawkConfig } from 'components/ConfigProvider';\r\n\r\nexport interface SwatchItemProps {\r\n\tswatchValue: Value;\r\n\tfacetSwatch: Swatch;\r\n\tisNegated: boolean;\r\n\tisSelected: boolean;\r\n\tisColor: boolean;\r\n\tonSwatchSelected(facetValue: string, isNegated: boolean): void;\r\n}\r\n\r\nfunction SwatchItem(item: SwatchItemProps) {\r\n\tconst { config } = useHawkConfig();\r\n\r\n\tconst facetValue = item.swatchValue.Value || '';\r\n\r\n\t// facets can be selected or negated, so explicitly check that the facet is not selected\r\n\tconst swatchUrl =\r\n\t\tconfig.dashboardUrl + (!item.facetSwatch.AssetUrl ? item.facetSwatch.AssetName : item.facetSwatch.AssetUrl);\r\n\r\n\tconst colorSwatchStyle = {\r\n\t\tbackgroundColor: item.facetSwatch.Color,\r\n\t};\r\n\r\n\tconst listItemClassNames =\r\n\t\t'hawk-facet-rail__facet-list-item' +\r\n\t\t(item.isSelected ? ' hawkFacet-active' : '') +\r\n\t\t(item.isNegated ? ' hawkFacet-negative' : '');\r\n\r\n\treturn (\r\n\t\t<li key={item.facetSwatch.Value} className={listItemClassNames}>\r\n\t\t\t<button\r\n\t\t\t\tonClick={e => item.onSwatchSelected(facetValue, false)}\r\n\t\t\t\tclassName=\"hawk-facet-rail__facet-btn hawk-styleSwatch\"\r\n\t\t\t\taria-pressed={item.isSelected}\r\n\t\t\t>\r\n\t\t\t\t<span className=\"hawk-selectionInner\">\r\n\t\t\t\t\t{item.isColor ? (\r\n\t\t\t\t\t\t<span className=\"hawk-swatchColor\" style={colorSwatchStyle} title={item.facetSwatch.Value} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<img src={swatchUrl} alt={item.facetSwatch.Value} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</span>\r\n\t\t\t</button>\r\n\t\t\t<button className=\"hawk-negativeIcon\">\r\n\t\t\t\t<i className=\"hawkIcon-blocked\" onClick={e => item.onSwatchSelected(facetValue, true)} />\r\n\t\t\t</button>\r\n\t\t</li>\r\n\t);\r\n}\r\n\r\nexport default SwatchItem;\r\n","import React, { useState } from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport { FacetSelectionState } from 'store/Store';\r\nimport SwatchItem from './SwatchItem';\r\n\r\nfunction Swatch() {\r\n\tconst { store } = useHawksearch();\r\n\tconst {\r\n\t\tfacet,\r\n\t\tactor,\r\n\t\tstate: { facetValues },\r\n\t\trenderer,\r\n\t} = useFacet();\r\n\r\n\tfunction onSwatchSelected(facetValue: string, isNegated: boolean) {\r\n\t\tisNegated ? actor.negateFacet(facetValue) : actor.selectFacet(facetValue);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-swatch\">\r\n\t\t\t\t<ul className=\"hawk-facet-rail__facet-list\">\r\n\t\t\t\t\t{facet.SwatchData &&\r\n\t\t\t\t\t\tfacetValues.map(value => {\r\n\t\t\t\t\t\t\tconst facetValue = value.Value || '';\r\n\t\t\t\t\t\t\t// find swatch that is corresponding with value\r\n\t\t\t\t\t\t\tconst facetSwatch =\r\n\t\t\t\t\t\t\t\tfacet.SwatchData &&\r\n\t\t\t\t\t\t\t\tfacet.SwatchData.find(s => s.Value.toLowerCase() === facetValue.toLowerCase());\r\n\t\t\t\t\t\t\tif (!facetSwatch) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\t\t\t\t\t\t\tconst isNegated = selectionState === FacetSelectionState.Negated;\r\n\t\t\t\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\r\n\t\t\t\t\t\t\tconst isColor = !!facetSwatch.Color;\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<SwatchItem\r\n\t\t\t\t\t\t\t\t\tkey={facetValue}\r\n\t\t\t\t\t\t\t\t\tswatchValue={value}\r\n\t\t\t\t\t\t\t\t\tfacetSwatch={facetSwatch}\r\n\t\t\t\t\t\t\t\t\tisSelected={isSelected}\r\n\t\t\t\t\t\t\t\t\tisColor={isColor}\r\n\t\t\t\t\t\t\t\t\tisNegated={isNegated}\r\n\t\t\t\t\t\t\t\t\tonSwatchSelected={onSwatchSelected}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* render the default truncation control as we don't need to customize this */}\r\n\t\t\t{renderer.renderTruncation()}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Swatch;\r\n","import React, { useState } from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { FacetSelectionState } from 'store/Store';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport CheckmarkSVG from 'components/svg/CheckmarkSVG';\r\nimport { Value } from 'models/Facets';\r\nimport PlusCircleSVG from 'components/svg/PlusCircleSVG';\r\nimport DashCircleSVG from 'components/svg/DashCircleSVG';\r\n\r\nexport interface NestedItemProps {\r\n\thierarchyValue: Value;\r\n\tisNegated: boolean;\r\n\tisSelected: boolean;\r\n\tonValueSelected(facetValue: Value, isNegated: boolean): void;\r\n}\r\n\r\nfunction NestedItem(item: NestedItemProps) {\r\n\tconst { store } = useHawksearch();\r\n\tconst { facet } = useFacet();\r\n\r\n\tconst [isExpanded, setIsExpanded] = useState(false);\r\n\tconst [isTruncated, setIsTruncated] = useState(facet.shouldTruncate);\r\n\r\n\tconst hierarchyValue = item.hierarchyValue || '';\r\n\tlet hierarchyChildren = item.hierarchyValue.Children || [];\r\n\r\n\tlet remainingValues = 0;\r\n\r\n\tconst shouldTruncateChildren =\r\n\t\tfacet.DisplayType === 'truncating' && hierarchyChildren.length > facet.TruncateThreshold;\r\n\r\n\tif (shouldTruncateChildren && isTruncated) {\r\n\t\tconst valuesBeforeTrunc = hierarchyChildren.length;\r\n\r\n\t\thierarchyChildren = hierarchyChildren.slice(0, facet.TruncateThreshold);\r\n\r\n\t\tremainingValues = valuesBeforeTrunc - facet.TruncateThreshold;\r\n\t}\r\n\r\n\tfunction renderChildTruncation() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{shouldTruncateChildren && (\r\n\t\t\t\t\t<li className=\"hawk-facet-rail__facet-list-item hawk-show-more\">\r\n\t\t\t\t\t\t<button onClick={() => setIsTruncated(!isTruncated)} className=\"hawk-facet-rail__show-more-btn\">\r\n\t\t\t\t\t\t\t{isTruncated ? `(+) Show ${remainingValues} More` : '(-) Show Less'}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t)}\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<li className=\"hawk-facet-rail__facet-list-item hawkFacet-group\">\r\n\t\t\t<div className=\"hawkFacet-group__inline\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={() => item.onValueSelected(hierarchyValue, false)}\r\n\t\t\t\t\tclassName=\"hawk-facet-rail__facet-btn\"\r\n\t\t\t\t\taria-pressed={item.isSelected}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\titem.isSelected\r\n\t\t\t\t\t\t\t\t? 'hawk-facet-rail__facet-checkbox hawk-facet-rail__facet-checkbox--checked'\r\n\t\t\t\t\t\t\t\t: 'hawk-facet-rail__facet-checkbox'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{item.isSelected ? <CheckmarkSVG class=\"hawk-facet-rail__facet-checkbox-icon\" /> : null}\r\n\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={item.isNegated ? { textDecoration: 'line-through' } : undefined}\r\n\t\t\t\t\t\tclassName=\"hawk-facet-rail__facet-name\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{item.hierarchyValue.Label} ({item.hierarchyValue.Count})\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={e => item.onValueSelected(hierarchyValue, true)}\r\n\t\t\t\t\tclassName=\"hawk-facet-rail__facet-btn-exclude\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{item.isNegated ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<PlusCircleSVG class=\"hawk-facet-rail__facet-btn-include\" />\r\n\t\t\t\t\t\t\t<span className=\"visually-hidden\">Include facet</span>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<DashCircleSVG />\r\n\t\t\t\t\t\t\t<span className=\"visually-hidden\">Exclude facet</span>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</button>\r\n\t\t\t\t{hierarchyChildren.length > 0 ? (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName={isExpanded ? 'hawk-collapseState' : 'hawk-collapseState collapsed'}\r\n\t\t\t\t\t\taria-expanded=\"false\"\r\n\t\t\t\t\t\tonClick={() => setIsExpanded(!isExpanded)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t</button>\r\n\t\t\t\t) : null}\r\n\t\t\t</div>\r\n\t\t\t{isExpanded && hierarchyChildren ? (\r\n\t\t\t\t<div className=\"hawk-facet-rail__w-100\">\r\n\t\t\t\t\t<ul className=\"hawkFacet-group-inside\">\r\n\t\t\t\t\t\t{hierarchyChildren.map(value => {\r\n\t\t\t\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\t\t\t\t\t\t\tconst isNegated = selectionState === FacetSelectionState.Negated;\r\n\t\t\t\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<NestedItem\r\n\t\t\t\t\t\t\t\t\tkey={value.Path}\r\n\t\t\t\t\t\t\t\t\thierarchyValue={value}\r\n\t\t\t\t\t\t\t\t\tisSelected={isSelected}\r\n\t\t\t\t\t\t\t\t\tisNegated={isNegated}\r\n\t\t\t\t\t\t\t\t\tonValueSelected={item.onValueSelected}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t{renderChildTruncation()}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<></>\r\n\t\t\t)}\r\n\t\t</li>\r\n\t);\r\n}\r\n\r\nexport default NestedItem;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { FacetSelectionState } from 'store/Store';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport NestedItem from './NestedItem';\r\nimport { Value } from 'models/Facets/Value';\r\n\r\nfunction Nested() {\r\n\tconst { store } = useHawksearch();\r\n\tconst {\r\n\t\tfacet,\r\n\t\tstate: { facetValues },\r\n\t\tactor,\r\n\t\trenderer,\r\n\t} = useFacet();\r\n\r\n\tfunction onValueSelected(facetValue: Value, isNegated: boolean) {\r\n\t\tisNegated ? actor.negateFacet(facetValue) : actor.selectFacet(facetValue);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-checkbox\">\r\n\t\t\t\t<ul className=\"hawk-facet-rail__facet-list\">\r\n\t\t\t\t\t{facetValues.map(value => {\r\n\t\t\t\t\t\t// facets can be selected or negated, so explicitly check that the facet is not selected\r\n\t\t\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\r\n\t\t\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\t\t\t\t\t\tconst isNegated = selectionState === FacetSelectionState.Negated;\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<NestedItem\r\n\t\t\t\t\t\t\t\tkey={value.Value}\r\n\t\t\t\t\t\t\t\thierarchyValue={value}\r\n\t\t\t\t\t\t\t\tisSelected={isSelected}\r\n\t\t\t\t\t\t\t\tisNegated={isNegated}\r\n\t\t\t\t\t\t\t\tonValueSelected={onValueSelected}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* render the default truncation control as we don't need to customize this */}\r\n\t\t\t{renderer.renderTruncation()}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Nested;\r\n","import React, { useEffect, useState } from 'react';\r\nimport moment from 'moment';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\n\r\nfunction replaceHyphen(date: string) {\r\n\tif (!date) {\r\n\t\treturn date;\r\n\t}\r\n\treturn date.replace(/-/g, '/');\r\n}\r\n\r\nfunction OpenRangeDatetime() {\r\n\tconst { actor: hawkActor } = useHawksearch();\r\n\tconst {\r\n\t\tstore: { facetSelections },\r\n\t} = useHawksearch();\r\n\tconst {\r\n\t\tstate: { facetValues },\r\n\t\tfacet,\r\n\t\tactor,\r\n\t} = useFacet();\r\n\tconst daterange = facetValues.length > 0 ? facetValues[0] : null;\r\n\tconst rangeStartDate =\r\n\t\tdaterange && daterange.RangeStart ? moment(daterange.RangeStart).format('YYYY-MM-DDTHH:mm') : '';\r\n\tconst rangeEndDate = daterange && daterange.RangeEnd ? moment(daterange.RangeEnd).format('YYYY-MM-DDTHH:mm') : '';\r\n\r\n\t// if there's no range, initialize to empty strings\r\n\tconst [minDateValue, setdateStartValue] = useState(rangeStartDate || '');\r\n\tconst [maxDateValue, setdateEndValue] = useState(rangeEndDate || '');\r\n\t// the open range boundary values are defined by the first facet value. or null if there is no first value\r\n\r\n\tconst range = facetValues.length > 0 ? facetValues[0] : null;\r\n\r\n\tconst rangeStart = (range && range.RangeStart) || '';\r\n\tconst rangeEnd = (range && range.RangeEnd) || '';\r\n\r\n\tuseEffect(() => {\r\n\t\tconst paramName = facet.ParamName || facet.Field;\r\n\r\n\t\t// Set min and max value if these were cleared\r\n\t\tif (!paramName || !(paramName in facetSelections)) {\r\n\t\t\tsetdateStartValue(rangeStartDate);\r\n\t\t\tsetdateEndValue(rangeEndDate);\r\n\t\t} else if (\r\n\t\t\tparamName in facetSelections &&\r\n\t\t\tfacetSelections[paramName].items &&\r\n\t\t\tfacetSelections[paramName].items.length > 0\r\n\t\t) {\r\n\t\t\tconst selectedValues = facetSelections[paramName].items[0].value.split(',');\r\n\t\t\tsetdateStartValue(selectedValues[0].replace(/\\//g, '-'));\r\n\t\t\tsetdateEndValue(selectedValues[1].replace(/\\//g, '-'));\r\n\t\t}\r\n\t}, [facetSelections]);\r\n\r\n\tif (rangeStart === null || rangeEnd === null) {\r\n\t\t// this facet is somehow misconfigured so don't render\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction ondateRangeStartChange(event: React.FormEvent<HTMLInputElement>) {\r\n\t\tsetdateFacetValues(event.currentTarget.value, maxDateValue);\r\n\t}\r\n\r\n\tfunction ondateRangeEndChange(event: React.FormEvent<HTMLInputElement>) {\r\n\t\tsetdateFacetValues(minDateValue, event.currentTarget.value);\r\n\t}\r\n\r\n\tfunction setdateFacetValues(startVal: string, endVal: string) {\r\n\t\tsetdateStartValue(startVal);\r\n\t\tsetdateEndValue(endVal);\r\n\r\n\t\t// this selection is sent to hawk separated by commas, so build the value here\r\n\r\n\t\tif (startVal === '' && endVal === '') {\r\n\t\t\thawkActor.clearFacet(facet);\r\n\t\t} else {\r\n\t\t\tconst selection = `${replaceHyphen(startVal)},${replaceHyphen(endVal)}`;\r\n\t\t\tactor.setFacets([selection]);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-link\">\r\n\t\t\t\t<div className=\"hawk-open-range hawk-facet-type-date\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"datetime-local\"\r\n\t\t\t\t\t\tclassName=\"hawk-text-input hawk-date-value-start\"\r\n\t\t\t\t\t\tvalue={minDateValue}\r\n\t\t\t\t\t\tmin={rangeStartDate}\r\n\t\t\t\t\t\tmax={rangeEndDate}\r\n\t\t\t\t\t\tonChange={ondateRangeStartChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"datetime-local\"\r\n\t\t\t\t\t\tclassName=\"hawk-text-input hawk-date-value-end\"\r\n\t\t\t\t\t\tvalue={maxDateValue}\r\n\t\t\t\t\t\tmin={rangeStartDate}\r\n\t\t\t\t\t\tmax={rangeEndDate}\r\n\t\t\t\t\t\tonChange={ondateRangeEndChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default OpenRangeDatetime;\r\n","import React, { useState } from 'react';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\n\r\nfunction OpenRangeNumber() {\r\n\tconst { actor: hawkActor } = useHawksearch();\r\n\r\n\tconst {\r\n\t\tstate: { facetValues },\r\n\t\tfacet,\r\n\t\tactor,\r\n\t} = useFacet();\r\n\r\n\t// the open range boundary values are defined by the first facet value. or null if there is no first value\r\n\tconst range = facetValues.length > 0 ? facetValues[0] : null;\r\n\r\n\tconst rangeStart = (range && range.RangeStart) || '';\r\n\tconst rangeEnd = (range && range.RangeEnd) || '';\r\n\r\n\t// if there's no range, initialize to empty strings\r\n\tconst [minValue, setStartValue] = useState(rangeStart || '');\r\n\tconst [maxValue, setEndValue] = useState(rangeEnd || '');\r\n\r\n\tfunction onRangeStartChange(event: React.FormEvent<HTMLInputElement>) {\r\n\t\tsetFacetValues(event.currentTarget.value, maxValue);\r\n\t}\r\n\r\n\tfunction onRangeEndChange(event: React.FormEvent<HTMLInputElement>) {\r\n\t\tsetFacetValues(minValue, event.currentTarget.value);\r\n\t}\r\n\r\n\tfunction setFacetValues(startVal: string, endVal: string) {\r\n\t\tsetStartValue(startVal);\r\n\t\tsetEndValue(endVal);\r\n\r\n\t\t// this selection is sent to hawk separated by commas, so build the value here\r\n\r\n\t\tif (startVal === '' && endVal === '') {\r\n\t\t\thawkActor.clearFacet(facet);\r\n\t\t} else {\r\n\t\t\tconst selection = `${startVal},${endVal}`;\r\n\t\t\tactor.setFacets([selection]);\r\n\t\t}\r\n\t}\r\n\r\n\tif (rangeStart === null || rangeEnd === null) {\r\n\t\t// this facet is somehow misconfigured so don't render\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-link\">\r\n\t\t\t\t<div className=\"hawk-open-range\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tclassName=\"hawk-text-input value-start\"\r\n\t\t\t\t\t\tdata-type=\"currency\"\r\n\t\t\t\t\t\tvalue={minValue}\r\n\t\t\t\t\t\tonChange={onRangeStartChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tclassName=\"hawk-text-input value-end\"\r\n\t\t\t\t\t\tonChange={onRangeEndChange}\r\n\t\t\t\t\t\tvalue={maxValue}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default OpenRangeNumber;\r\n","import React, { useState } from 'react';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport OpenRangeDatetime from './OpenRangeDatetime';\r\nimport OpenRangeNumber from './OpenRangeNumber';\r\n\r\nfunction OpenRange() {\r\n\tconst { facet } = useFacet();\r\n\r\n\tif (facet.DataType && facet.DataType === 'datetime') {\r\n\t\treturn <OpenRangeDatetime />;\r\n\t}\r\n\r\n\treturn <OpenRangeNumber />;\r\n}\r\n\r\nexport default OpenRange;\r\n","import React, { useState } from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { FacetSelectionState } from 'store/Store';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport { Value } from 'models/Facets';\r\nexport interface NestedLinkItemProps {\r\n\thierarchyValue: Value;\r\n\tisNegated: boolean;\r\n\tisSelected: boolean;\r\n\tonValueSelected(facetValue: Value, isNegated: boolean): void;\r\n}\r\n\r\nfunction NestedLinkItem(item: NestedLinkItemProps) {\r\n\tconst { store } = useHawksearch();\r\n\tconst { facet } = useFacet();\r\n\r\n\tconst [isExpanded, setIsExpanded] = useState(false);\r\n\tconst [isTruncated, setIsTruncated] = useState(facet.shouldTruncate);\r\n\r\n\tconst hierarchyValue = item.hierarchyValue || '';\r\n\tlet hierarchyChildren = item.hierarchyValue.Children || [];\r\n\r\n\tlet remainingValues = 0;\r\n\r\n\tconst shouldTruncateChildren =\r\n\t\tfacet.DisplayType === 'truncating' && hierarchyChildren.length > facet.TruncateThreshold;\r\n\r\n\tif (shouldTruncateChildren && isTruncated) {\r\n\t\tconst valuesBeforeTrunc = hierarchyChildren.length;\r\n\r\n\t\thierarchyChildren = hierarchyChildren.slice(0, facet.TruncateThreshold);\r\n\r\n\t\tremainingValues = valuesBeforeTrunc - facet.TruncateThreshold;\r\n\t}\r\n\r\n\tfunction renderChildTruncation() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{shouldTruncateChildren && (\r\n\t\t\t\t\t<li className=\"hawk-facet-rail__facet-list-item hawk-show-more\">\r\n\t\t\t\t\t\t<button onClick={() => setIsTruncated(!isTruncated)} className=\"hawk-facet-rail__show-more-btn\">\r\n\t\t\t\t\t\t\t{isTruncated ? `(+) Show ${remainingValues} More` : '(-) Show Less'}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t)}\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<li className=\"hawk-facet-rail__facet-list-item hawkFacet-group\">\r\n\t\t\t<div className=\"hawkFacet-group__inline\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={() => item.onValueSelected(hierarchyValue, false)}\r\n\t\t\t\t\tclassName=\"hawk-facet-rail__facet-btn\"\r\n\t\t\t\t\taria-pressed={item.isSelected}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={item.isNegated ? { textDecoration: 'line-through' } : undefined}\r\n\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\titem.isSelected ? 'hawk-facet-rail__facet-name checked' : 'hawk-facet-rail__facet-name'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{item.hierarchyValue.Label} ({item.hierarchyValue.Count})\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t{hierarchyChildren.length > 0 ? (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\tisExpanded\r\n\t\t\t\t\t\t\t\t? 'hawk-collapseState hawk-linklist'\r\n\t\t\t\t\t\t\t\t: 'hawk-collapseState hawk-linklist collapsed'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\taria-expanded=\"false\"\r\n\t\t\t\t\t\tonClick={() => setIsExpanded(!isExpanded)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t</button>\r\n\t\t\t\t) : null}\r\n\t\t\t</div>\r\n\t\t\t{isExpanded && hierarchyChildren ? (\r\n\t\t\t\t<div className=\"hawk-facet-rail__w-100\">\r\n\t\t\t\t\t<ul className=\"hawkFacet-group-inside\">\r\n\t\t\t\t\t\t{hierarchyChildren.map(value => {\r\n\t\t\t\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\t\t\t\t\t\t\tconst isNegated = selectionState === FacetSelectionState.Negated;\r\n\t\t\t\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<NestedLinkItem\r\n\t\t\t\t\t\t\t\t\tkey={value.Path}\r\n\t\t\t\t\t\t\t\t\thierarchyValue={value}\r\n\t\t\t\t\t\t\t\t\tisSelected={isSelected}\r\n\t\t\t\t\t\t\t\t\tisNegated={isNegated}\r\n\t\t\t\t\t\t\t\t\tonValueSelected={item.onValueSelected}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t{renderChildTruncation()}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<></>\r\n\t\t\t)}\r\n\t\t</li>\r\n\t);\r\n}\r\n\r\nexport default NestedLinkItem;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { FacetSelectionState } from 'store/Store';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport NestedLinkItem from './NestedLinkItem';\r\nimport { Value } from 'models/Facets/Value';\r\n\r\nfunction NestedLink() {\r\n\tconst { store } = useHawksearch();\r\n\tconst {\r\n\t\tfacet,\r\n\t\tstate: { facetValues },\r\n\t\tactor,\r\n\t\trenderer,\r\n\t} = useFacet();\r\n\r\n\tfunction onValueSelected(facetValue: Value, isNegated: boolean) {\r\n\t\tisNegated ? actor.negateFacet(facetValue) : actor.selectFacet(facetValue);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-linklist\">\r\n\t\t\t\t<ul className=\"hawk-facet-rail__facet-list\">\r\n\t\t\t\t\t{facetValues.map(value => {\r\n\t\t\t\t\t\t// facets can be selected or negated, so explicitly check that the facet is not selected\r\n\t\t\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\r\n\t\t\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\t\t\t\t\t\tconst isNegated = selectionState === FacetSelectionState.Negated;\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<NestedLinkItem\r\n\t\t\t\t\t\t\t\tkey={value.Value}\r\n\t\t\t\t\t\t\t\thierarchyValue={value}\r\n\t\t\t\t\t\t\t\tisSelected={isSelected}\r\n\t\t\t\t\t\t\t\tisNegated={isNegated}\r\n\t\t\t\t\t\t\t\tonValueSelected={onValueSelected}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* render the default truncation control as we don't need to customize this */}\r\n\t\t\t{renderer.renderTruncation()}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default NestedLink;\r\n","export enum FacetType {\r\n\tCheckbox = 'checkbox',\r\n\tNestedCheckbox = 'nestedcheckbox',\r\n\tLink = 'link',\r\n\tNestedlink = 'nestedlinklist',\r\n\tSlider = 'slider',\r\n\tSwatch = 'swatch',\r\n\tRating = 'rating',\r\n\tSize = 'size',\r\n\tSearchWithin = 'search',\r\n\tRecentSearches = 'recentsearches',\r\n\tRelatedSearches = 'relatedsearches',\r\n\tOpenRange = 'openRange',\r\n}\r\n","import {\r\n\tCheckbox as DefaultCheckbox,\r\n\tNestedCheckbox as DefaultNestedCheckbox,\r\n\tSearch as DefaultSearch,\r\n\tLink as DefaultLink,\r\n\tSlider as DefaultSlider,\r\n\tSwatch as DefaultSwatch,\r\n\tOpenRange as DefaultOpenRange,\r\n\tNestedLink as DefaultNestedLink,\r\n} from 'components/ui/Facets/FacetTypes';\r\nimport { FacetComponent } from 'types/FacetComponent';\r\nimport { FacetType } from 'models/Facets/FacetType';\r\nimport { SuggestionStrategyMatch, SuggestionType } from 'models/Autocomplete/Suggestion';\r\nimport { ProductStrategy, CategoryStrategy, PopularStrategy, ContentStrategy } from 'models/Autocomplete';\r\n\r\n// the default set of facet components that we support\r\nconst defaultFacetComponents: FacetComponent[] = [\r\n\t{ facetType: FacetType.Checkbox, component: DefaultCheckbox },\r\n\t{ facetType: FacetType.NestedCheckbox, component: DefaultNestedCheckbox },\r\n\t{ facetType: FacetType.SearchWithin, component: DefaultSearch },\r\n\t{ facetType: FacetType.Link, component: DefaultLink },\r\n\t{ facetType: FacetType.Slider, component: DefaultSlider },\r\n\t{ facetType: FacetType.Swatch, component: DefaultSwatch },\r\n\t{ facetType: FacetType.OpenRange, component: DefaultOpenRange },\r\n\t{ facetType: FacetType.Nestedlink, component: DefaultNestedLink },\r\n];\r\n\r\nconst defaultAutocompleteStrategies: SuggestionStrategyMatch[] = [\r\n\t{ SuggestionType: SuggestionType.Product, SuggestionStrategy: new ProductStrategy() },\r\n\t{ SuggestionType: SuggestionType.Category, SuggestionStrategy: new CategoryStrategy() },\r\n\t{ SuggestionType: SuggestionType.Popular, SuggestionStrategy: new PopularStrategy() },\r\n\t{ SuggestionType: SuggestionType.Content, SuggestionStrategy: new ContentStrategy() },\r\n];\r\n\r\n/**\r\n * Builds a list of all supported facet components by also taking into consideration overridden components.\r\n */\r\nexport function getFacetComponents(overridedComponents: FacetComponent[]) {\r\n\tconst facetComponents: FacetComponent[] = [];\r\n\r\n\t// tslint:disable-next-line:forin\r\n\tfor (const key in FacetType) {\r\n\t\tconst fType = FacetType[key];\r\n\r\n\t\tconst fComponent =\r\n\t\t\t// check to see if the facet is overridden\r\n\t\t\toverridedComponents.find(component => component.facetType === fType) ||\r\n\t\t\t// otherwise, pull from defaults\r\n\t\t\tdefaultFacetComponents.find(component => component.facetType === fType);\r\n\r\n\t\tif (fComponent) {\r\n\t\t\tfacetComponents.push(fComponent);\r\n\t\t}\r\n\t}\r\n\r\n\treturn facetComponents;\r\n}\r\n\r\n/**\r\n * Builds a list of all supported autocomplete suggestion strategiesby also taking into consideration overridden strategies.\r\n */\r\nexport function getAutocompleteStrategies(overridedStrategies: SuggestionStrategyMatch[]): SuggestionStrategyMatch[] {\r\n\tconst suggestionStrategies: SuggestionStrategyMatch[] = [];\r\n\r\n\t// tslint:disable-next-line:forin\r\n\tfor (const key in SuggestionType) {\r\n\t\tconst sType = SuggestionType[key];\r\n\r\n\t\tconst autocompleteStrategy =\r\n\t\t\t// check to see if the facet is overridden\r\n\t\t\toverridedStrategies.find(strategyMatch => strategyMatch.SuggestionType === sType) ||\r\n\t\t\t// otherwise, pull from defaults\r\n\t\t\tdefaultAutocompleteStrategies.find(strategyMatch => strategyMatch.SuggestionType === sType);\r\n\r\n\t\tif (autocompleteStrategy) {\r\n\t\t\tsuggestionStrategies.push(autocompleteStrategy);\r\n\t\t}\r\n\t}\r\n\treturn suggestionStrategies;\r\n}\r\n","import { ControllerStateAndHelpers } from 'downshift';\r\n\r\nexport enum SuggestionType {\r\n\tProduct = 'product',\r\n\tCategory = 'category',\r\n\tContent = 'content',\r\n\tPopular = 'popular',\r\n}\r\nexport abstract class Suggestion {\r\n\tpublic SuggestionType: SuggestionType;\r\n\tpublic constructor(suggestionType: SuggestionType) {\r\n\t\tthis.SuggestionType = suggestionType;\r\n\t}\r\n}\r\n\r\nexport interface SuggestionStrategy {\r\n\thandleItemChange(item: Suggestion, downshift: ControllerStateAndHelpers<Suggestion>): void;\r\n\ttoString(item: Suggestion): string;\r\n}\r\n\r\nexport interface SuggestionStrategyMatch {\r\n\tSuggestionType: SuggestionType;\r\n\tSuggestionStrategy: SuggestionStrategy;\r\n}\r\n","import React from 'react';\r\nimport { ControllerStateAndHelpers } from 'downshift';\r\n\r\nimport { Response, Product, Popular, Category, Content } from 'models/Autocomplete';\r\nimport { Suggestion } from '../../../models/Autocomplete/Suggestion';\r\nimport { CustomSuggestionListProps } from 'models/Autocomplete/CustomSuggestionList';\r\n\r\nexport interface SearchSuggestionsListProps {\r\n\tisLoading: boolean;\r\n\tsearchResults: Response;\r\n\tdownshift: ControllerStateAndHelpers<Suggestion>;\r\n\tonViewMatches: (downshift: ControllerStateAndHelpers<Suggestion>) => void;\r\n\tSuggestionList?: React.ComponentType<CustomSuggestionListProps>;\r\n}\r\n\r\nfunction hasAllEmpty(popular: Popular[], categories: Category[], products: Product[], content: Content[]) {\r\n\tconst hasPopular = popular && popular.length === 0;\r\n\tconst hasCategories = categories && categories.length === 0;\r\n\tconst hasProducts = products && products.length === 0;\r\n\tconst hasContent = content && content.length === 0;\r\n\treturn hasPopular && hasCategories && hasProducts && hasContent;\r\n}\r\n\r\nfunction SearchSuggestionsList({\r\n\tisLoading,\r\n\tsearchResults,\r\n\tdownshift,\r\n\tonViewMatches,\r\n\tSuggestionList,\r\n}: SearchSuggestionsListProps) {\r\n\tconst { Popular: popular, Categories: categories, Products: products, Content: content } = searchResults;\r\n\r\n\tconst isRecordEmpty = hasAllEmpty(popular, categories, products, content);\r\n\r\n\tif (isRecordEmpty) {\r\n\t\treturn null;\r\n\t}\r\n\treturn SuggestionList ? (\r\n\t\t<SuggestionList\r\n\t\t\tisLoading={isLoading}\r\n\t\t\tdownshift={downshift}\r\n\t\t\tsearchResults={searchResults}\r\n\t\t\tonViewMatches={onViewMatches}\r\n\t\t/>\r\n\t) : null;\r\n}\r\n\r\nexport default SearchSuggestionsList;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { ControllerStateAndHelpers } from 'downshift';\r\nimport axios, { CancelToken } from 'axios';\r\n\r\nimport HawkClient from 'net/HawkClient';\r\nimport { Response, Product, Category } from 'models/Autocomplete';\r\nimport { useHawkConfig } from 'components/ConfigProvider';\r\nimport SearchSuggestionsList from './SearchSuggestionsList';\r\nimport { Suggestion } from 'models/Autocomplete/Suggestion';\r\nimport { CustomSuggestionListProps } from 'models/Autocomplete/CustomSuggestionList';\r\n\r\nexport interface SearchSuggestionsProps {\r\n\t/** The user entered search string in the autocomplete text input. */\r\n\tquery: string;\r\n\r\n\t/** Downshift's render prop parameter. */\r\n\tdownshift: ControllerStateAndHelpers<Suggestion>;\r\n\r\n\tonViewMatches: (downshift: ControllerStateAndHelpers<Suggestion>) => void;\r\n\tSuggestionList?: React.ComponentType<CustomSuggestionListProps>;\r\n}\r\n\r\nfunction SearchSuggestions({ query, downshift, onViewMatches, SuggestionList }: SearchSuggestionsProps) {\r\n\tconst { config } = useHawkConfig();\r\n\r\n\tconst client = new HawkClient(config);\r\n\r\n\tconst [results, setResults] = useState({} as Response);\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\t// debounce the input search string so that we only do an autocomplete query every so often\r\n\tuseEffect(() => {\r\n\t\t// default to 200ms if not specified\r\n\t\tconst debounceMs = config.autocompleteDebounce || 200;\r\n\r\n\t\tconst cts = axios.CancelToken.source();\r\n\t\tconst timeout = setTimeout(() => doAutocomplete(query, cts.token), debounceMs);\r\n\r\n\t\treturn () => {\r\n\t\t\tcts.cancel();\r\n\t\t\tclearTimeout(timeout);\r\n\t\t};\r\n\t}, [query, config.autocompleteDebounce]);\r\n\r\n\t/**\r\n\t * Performs an autocomplete request to the Hawk API and populates the result set of this component.\r\n\t * @param input The user entered search string that results will be autocompleted for.\r\n\t */\r\n\tasync function doAutocomplete(input: string, cancellationToken?: CancelToken) {\r\n\t\tsetIsLoading(true);\r\n\r\n\t\tlet response: Response | null = null;\r\n\r\n\t\ttry {\r\n\t\t\tresponse = await client\r\n\t\t\t\t.autocomplete(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tClientGuid: config.clientGuid,\r\n\t\t\t\t\t\tKeyword: decodeURIComponent(input),\r\n\t\t\t\t\t\tIndexName: config.indexName,\r\n\t\t\t\t\t\tDisplayFullResponse: true,\r\n\t\t\t\t\t\tIsInPreview: config.isInPreview,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcancellationToken\r\n\t\t\t\t)\r\n\t\t\t\t.then(o => {\r\n\t\t\t\t\t// ensure, returned object will return response\r\n\t\t\t\t\t// since by default, axios uses JSON.parse to parse an object,\r\n\t\t\t\t\t// it doesn't recognize it as Response type - this line is to prevent it\r\n\t\t\t\t\treturn Object.assign(new Response(o));\r\n\t\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tif (axios.isCancel(error)) {\r\n\t\t\t\t// if the request was cancelled, it's because this component was updated\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconsole.error('Autocomplete request error:', error);\r\n\t\t}\r\n\r\n\t\tsetIsLoading(false);\r\n\r\n\t\tif (response) {\r\n\t\t\tsetResults(response);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"autosuggest-menu\">\r\n\t\t\t<SearchSuggestionsList\r\n\t\t\t\tonViewMatches={onViewMatches}\r\n\t\t\t\tdownshift={downshift}\r\n\t\t\t\tisLoading={isLoading}\r\n\t\t\t\tsearchResults={results}\r\n\t\t\t\tSuggestionList={SuggestionList}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SearchSuggestions;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { DownshiftState, StateChangeOptions, ControllerStateAndHelpers } from 'downshift';\r\n\r\nimport SearchSuggestions from 'components/ui/SearchBox/SearchSuggestions';\r\nimport { Suggestion, SuggestionStrategyMatch } from 'models/Autocomplete/Suggestion';\r\nimport { getAutocompleteStrategies } from '../Facets/Overrides';\r\nimport { useHawkConfig } from 'components/ConfigProvider';\r\nimport { Product } from 'models/Autocomplete';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { CustomSuggestionListProps } from 'models/Autocomplete/CustomSuggestionList';\r\n\r\nimport Downshift from 'downshift';\r\n\r\nexport interface SearchBoxBaseProps {\r\n\tinitialValue?: string;\r\n\tonSubmit: (event: React.KeyboardEvent<HTMLInputElement>, downshift: ControllerStateAndHelpers<Suggestion>) => void;\r\n\tonViewMatches: (downshift: ControllerStateAndHelpers<Suggestion>) => void;\r\n\tSuggestionList?: React.ComponentType<CustomSuggestionListProps>;\r\n}\r\n\r\nfunction SearchBoxBase({ initialValue, onSubmit, onViewMatches, SuggestionList }: SearchBoxBaseProps) {\r\n\tconst { config } = useHawkConfig();\r\n\tconst strategies = getAutocompleteStrategies(config.autocompleteStrategies || []);\r\n\tconst { t, i18n } = useTranslation();\r\n\tconst {\r\n\t\tstore: { pendingSearch, searchResults },\r\n\t} = useHawksearch();\r\n\tconst [initialInput, setInitialInput] = useState('');\r\n\r\n\t// Will update the suggested selected keyword in the autocomplete input box\r\n\tuseEffect(() => {\r\n\t\tsetInitialInput(decodeURIComponent(pendingSearch.Keyword || ''));\r\n\t}, [pendingSearch.Keyword, initialValue, pendingSearch.IgnoreSpellcheck]);\r\n\r\n\t// Will update the Adjusted keyword in the autocomplete input box\r\n\tuseEffect(() => {\r\n\t\tif (searchResults && searchResults.AdjustedKeyword) {\r\n\t\t\tsetInitialInput(decodeURIComponent(searchResults.AdjustedKeyword));\r\n\t\t}\r\n\t}, [searchResults]);\r\n\r\n\t/** Called when the internal state of downshift changes - we're handling a couple custom behaviors here */\r\n\tfunction handleStateChange(\r\n\t\tstate: DownshiftState<Suggestion>,\r\n\t\tchanges: StateChangeOptions<Suggestion>\r\n\t): Partial<StateChangeOptions<Suggestion>> {\r\n\t\tif (\r\n\t\t\t// NOTE: these strings are hardcoded to support code splitting downshift.\r\n\t\t\t// using the constants from the package will prevent code splitting from operating correctly\r\n\t\t\tchanges.type === '__autocomplete_mouseup__' ||\r\n\t\t\tchanges.type === '__autocomplete_keydown_enter__' ||\r\n\t\t\tchanges.type === '__autocomplete_click_item__'\r\n\t\t) {\r\n\t\t\t// when:\r\n\t\t\t//\r\n\t\t\t//  1. the mouse the clicked outside of downshift\r\n\t\t\t//  2. enter is pressed on the keyboard\r\n\t\t\t//  3. an item is selected from the dropdown\r\n\t\t\t//\r\n\t\t\t// then we want to retain the input value that was originally typed in. by default downshift\r\n\t\t\t// will clear the input value, so we're overriding this behavior here.\r\n\t\t\treturn { ...changes, inputValue: state.inputValue };\r\n\t\t}\r\n\r\n\t\treturn changes;\r\n\t}\r\n\r\n\t/** Called when an item has been selected from the autocomplete results. */\r\n\tfunction handleItemChange(item: Suggestion, downshift: ControllerStateAndHelpers<Suggestion>) {\r\n\t\tif (!item) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst matchedStrategy = strategies.find(strategy => strategy.SuggestionType === item.SuggestionType);\r\n\t\tif (!matchedStrategy) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t(matchedStrategy as SuggestionStrategyMatch).SuggestionStrategy.handleItemChange(item, downshift);\r\n\t}\r\n\r\n\tfunction handleToString(item: Suggestion): string {\r\n\t\tif (!item) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\tconst matchedStrategy = strategies.find(strategy => strategy.SuggestionType === item.SuggestionType);\r\n\t\tif (!matchedStrategy) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\treturn (matchedStrategy as SuggestionStrategyMatch).SuggestionStrategy.toString(item);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<React.Suspense fallback={<div>{t('Loading')}...</div>}>\r\n\t\t\t<Downshift\r\n\t\t\t\tstateReducer={handleStateChange}\r\n\t\t\t\titemToString={(item: Suggestion) => handleToString(item)}\r\n\t\t\t\tonChange={handleItemChange}\r\n\t\t\t\tinitialInputValue={decodeURIComponent(initialValue || '')}\r\n\t\t\t>\r\n\t\t\t\t{(options: ControllerStateAndHelpers<Suggestion>) => {\r\n\t\t\t\t\tconst { isOpen, inputValue, getInputProps, openMenu, closeMenu } = options;\r\n\r\n\t\t\t\t\tconst showSuggestions = isOpen && inputValue && inputValue.length > 0;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"hawk__searchBox__searchInput\" aria-labelledby=\"autocomplete-search-box\">\r\n\t\t\t\t\t\t\t<div id=\"autocomplete-search-box\" className=\"hidden-label\">\r\n\t\t\t\t\t\t\t\tAutocomplete search box\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\t\t\t{...getInputProps({\r\n\t\t\t\t\t\t\t\t\tonKeyDown: event => {\r\n\t\t\t\t\t\t\t\t\t\tif (onSubmit) {\r\n\t\t\t\t\t\t\t\t\t\t\tonSubmit(event, options);\r\n\t\t\t\t\t\t\t\t\t\t\tcloseMenu();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\t\t\t// when the input is focused again, reopen the downshift menu\r\n\t\t\t\t\t\t\t\t\tonFocus: () => {\r\n\t\t\t\t\t\t\t\t\t\tif (inputValue && inputValue.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\topenMenu();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\t\t\tplaceholder: t('Enter a search term'),\r\n\t\t\t\t\t\t\t\t\t'aria-labelledby': 'autocomplete-search-box',\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{showSuggestions ? (\r\n\t\t\t\t\t\t\t\t<SearchSuggestions\r\n\t\t\t\t\t\t\t\t\tquery={inputValue || ''}\r\n\t\t\t\t\t\t\t\t\tdownshift={options}\r\n\t\t\t\t\t\t\t\t\tonViewMatches={onViewMatches}\r\n\t\t\t\t\t\t\t\t\tSuggestionList={SuggestionList}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t}}\r\n\t\t\t</Downshift>\r\n\t\t</React.Suspense>\r\n\t);\r\n}\r\n\r\nexport default SearchBoxBase;\r\n"],"sourceRoot":""}