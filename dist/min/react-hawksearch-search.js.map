{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/ConfigProvider.tsx","webpack:///./src/models/Facets/FacetType.ts","webpack:///./src/store/HawkState.ts","webpack:///./src/util/MergableState.ts","webpack:///./src/util/WidgetBinding.ts","webpack:///./src/components/StoreProvider.tsx","webpack:///./src/components/TrackingEvent.tsx","webpack:///./src/models/Autocomplete/Request.ts","webpack:///./src/models/Autocomplete/Category.ts","webpack:///./src/models/Autocomplete/Product.ts","webpack:///./src/models/Autocomplete/Content.ts","webpack:///./src/models/Autocomplete/Popular.ts","webpack:///./src/models/Autocomplete/Response.ts","webpack:///./src/components/AuthToken.tsx","webpack:///./src/models/Search/ContentType.ts","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/net/HawkClient.ts","webpack:///./src/models/Search/Pagination.ts","webpack:///./src/models/Search/ChildResult.ts","webpack:///./src/models/Search/Result.ts","webpack:///./src/models/Search/Sorting.ts","webpack:///./src/models/Search/Selections.ts","webpack:///./src/models/Facets/Value.ts","webpack:///./src/models/Facets/Swatch.ts","webpack:///./src/models/Facets/Range.ts","webpack:///./src/models/Facets/Facet.ts","webpack:///./src/models/Search/Rule.ts","webpack:///./src/models/Search/Trigger.ts","webpack:///./src/models/Search/Merchandising.ts","webpack:///./src/models/Search/PageContent.ts","webpack:///./src/models/Search/Response.ts","webpack:///./src/store/Store.ts","webpack:///./src/util/History.ts","webpack:///./src/util/QueryString.ts","webpack:///./src/components/QueryStringListener.tsx","webpack:///./src/components/ui/SearchBox/SearchBox.tsx","webpack:///./src/util/WindowResize.tsx","webpack:///./src/components/ui/Facets/PlaceholderFacetValue.tsx","webpack:///./src/components/ui/Facets/PlaceholderFacet.tsx","webpack:///./src/components/ui/Facets/FacetList.tsx","webpack:///./src/components/ui/Facets/FacetRail.tsx","webpack:///./src/components/svg/LeftChevronSVG.tsx","webpack:///./src/components/svg/RightChevronSVG.tsx","webpack:///./src/components/ui/Results/Tools/Pager.tsx","webpack:///./src/components/ui/Results/Tools/ItemsPerPage.tsx","webpack:///./src/components/ui/Results/Tools/Pagination.tsx","webpack:///./src/components/ui/Results/Tools/Sorting.tsx","webpack:///./src/components/ui/Results/ToolRow.tsx","webpack:///./src/components/svg/PlaceholderSVG.tsx","webpack:///./src/components/ui/Results/PlaceholderImage.tsx","webpack:///./src/components/ui/Results/PlaceholderItem.tsx","webpack:///./src/components/ui/Spinner.tsx","webpack:///./src/components/ui/Results/ResultImage.tsx","webpack:///./src/components/ui/Results/ResultItem.tsx","webpack:///./src/components/ui/Results/ResultListing.tsx","webpack:///./src/components/svg/XCircleSVG.tsx","webpack:///./src/components/ui/Facets/Selections.tsx","webpack:///./src/components/ui/Facets/SearchResultsLabel.tsx","webpack:///./src/components/ui/Results/MerchandisingBanner.tsx","webpack:///./src/components/ui/Results/Tabs.tsx","webpack:///./src/components/ui/Results/Results.tsx","webpack:///./src/app/App.tsx","webpack:///./src/components/Hawksearch.tsx","webpack:///./src/app/Search.tsx","webpack:///./src/components/svg/PlusSVG.tsx","webpack:///./src/components/svg/MinusSVG.tsx","webpack:///./src/components/svg/QuestionmarkSVG.tsx","webpack:///./src/components/ui/Facets/Facet.tsx","webpack:///./src/components/svg/DashCircleSVG.tsx","webpack:///./src/components/svg/CheckmarkSVG.tsx","webpack:///./src/components/svg/PlusCircleSVG.tsx","webpack:///./src/components/ui/Facets/FacetTypes/Checkbox.tsx","webpack:///./src/components/ui/Facets/FacetTypes/Search.tsx","webpack:///./src/components/ui/Facets/FacetTypes/Link.tsx","webpack:///./src/components/ui/Facets/SliderCalendarInputs.tsx","webpack:///./src/components/ui/Facets/FacetTypes/SliderDate.tsx","webpack:///./src/components/ui/Facets/SliderNumericInputs.tsx","webpack:///./src/components/ui/Facets/FacetTypes/SliderNumeric.tsx","webpack:///./src/components/ui/Facets/FacetTypes/Slider.tsx","webpack:///./src/components/ui/Facets/FacetTypes/SwatchItem.tsx","webpack:///./src/components/ui/Facets/FacetTypes/Swatch.tsx","webpack:///./src/components/ui/Facets/FacetTypes/NestedItem.tsx","webpack:///./src/components/ui/Facets/FacetTypes/Nested.tsx","webpack:///./src/components/ui/Facets/FacetTypes/OpenRangeDatetime.tsx","webpack:///./src/components/ui/Facets/FacetTypes/OpenRangeNumber.tsx","webpack:///./src/components/ui/Facets/FacetTypes/OpenRange.tsx","webpack:///./src/components/ui/Facets/FacetTypes/SizeItem.tsx","webpack:///./src/components/ui/Facets/FacetTypes/Size.tsx","webpack:///./src/components/ui/Facets/FacetTypes/NestedLinkItem.tsx","webpack:///./src/components/ui/Facets/FacetTypes/NestedLink.tsx","webpack:///./src/components/ui/Facets/Overrides.ts","webpack:///./src/helpers/utils.ts","webpack:///./src/models/Autocomplete/Suggestion.ts","webpack:///./src/components/ui/SearchBox/SearchSuggestionsList.tsx","webpack:///./src/components/ui/SearchBox/SearchSuggestions.tsx","webpack:///./src/components/ui/SearchBox/SearchBoxBase.tsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","ConfigContext","React","createContext","useHawkConfig","context","useContext","config","ConfigProvider","children","assetPath","path","startsWith","endsWith","__webpack_public_path__","Provider","FacetType","useHawkState","initialSearch","initialValue","typeConstructor","state","setState","client","HawkClient","SearchStore","pendingSearch","FacetSelections","isLoading","itemsToCompare","comparedResults","itemsToCompareIds","productDetails","language","URLSearchParams","location","search","useState","prevState","newState","store","setStore","cancellationToken","searchResults","searchParams","IsInPreview","isInPreview","ClientGuid","clientGuid","ClientData","getClientData","Keyword","decodeURIComponent","SearchWithin","indexName","assign","IndexName","indexNameRequired","axios","isCancel","requestError","Success","selectedFacets","keys","TrackingEvent","setLanguage","SortBy","PageNo","MaxPerPage","track","trackingId","TrackingId","typeId","SearchType","Refinement","keyword","Initial","Response","getComparedItems","pinItem","updatePinOrder","rebuildIndex","getProductDetails","setSearch","doHistory","setSearchSelections","selections","searchWithin","visitId","getCookie","visitorId","setCookie","createGuid","getVisitExpiry","getVisitorExpiry","clientData","VisitorId","VisitId","UserAgent","navigator","userAgent","PreviewBuckets","disablePreviewBuckets","VisitorTargets","map","v","Id","Custom","useEffect","cts","CancelToken","source","token","cancel","actor","toggleFacetValue","facet","facetValue","negate","facetName","Name","facetField","selectionField","valueValue","Value","valueLabel","Label","facetSelections","isFacetSelected","selState","selectionIndex","valuesToRemoved","items","forEach","item","indexOf","array1","array2","difference","filter","FacetSelectionState","Selected","Negated","NestedCheckbox","setFacetValues","facetValues","clearFacet","clearFacetValue","NotSelected","clearAllFacets","setItemsToCompare","resultItem","isCheck","itemsArray","DocId","setComparedResults","clearItemsToCompare","setProductDetailsResults","dataLayers","configurations","HawkContext","useHawksearch","StoreProvider","widgetId","dataLayer","_","require","entries","id","instance","isEqual","updateBindedStores","E_T","P_T","SuggestType","TrackEventNameMapping","Click","Cart","CopyRequestTracking","RequestTracking","Search","Sale","RecommendationImpression","RecommendationClick","Rate","PageLoad","Identify","BannerImpression","BannerClick","AutocompleteClick","Add2CartMultiple","Add2Cart","AvailableEvents","url","this","trackingURL","guid","clientGUID","getClientGUID","Date","setTime","getTime","toUTCString","params","CustomDictionary","substr","Math","floor","random","join","trackConfig","nameEQ","ca","cookie","split","charAt","substring","expiry","expires","pageType","documentElement","pl","EventType","pageLoad","EventData","btoa","JSON","stringify","PageTypeId","RequestPath","pathname","Qs","ViewportHeight","clientHeight","ViewportWidth","clientWidth","mr","queryId","QueryId","TypeId","uniqueId","click","Url","UniqueId","ScrollX","scrollX","ScrollY","scrollY","MouseX","clientX","MouseY","clientY","bannerId","campaignId","bannerClick","CampaignId","BannerId","bannerImpression","orderNo","itemList","total","subTotal","tax","currency","sale","OrderNo","ItemList","Total","Tax","SubTotal","Currency","price","quantity","addToCart","Quantity","Price","args","add2CartMultiple","ItemsList","rate","widgetGuid","itemIndex","requestId","recommendationClick","ItemIndex","RequestId","WidgetGuid","suggestType","autoCompleteClick","languageParams","getLanguageParams","fetch","method","headers","body","catch","eventName","isEnabled","toLowerCase","writePageLoad","writeSearchTracking","writeClick","writeBannerClick","writeBannerImpression","writeSale","writeAdd2Cart","writeAdd2CartMultiple","writeRate","writeRecommendationClick","writeAutoCompleteClick","Boolean","includes","find","getInstance","Category","init","SuggestionType","Suggestion","CategoryStrategy","downshift","Product","ProductStrategy","ProductName","Content","ContentStrategy","Popular","PopularStrategy","Categories","Products","AuthToken","accessToken","refreshToken","ContentType","webpackContext","req","webpackContextResolve","code","baseUrl","apiUrl","dashboardUrl","searchUrl","autocompleteUrl","compareItemsURL","refreshTokenURL","pinItemURL","updatePinOrderURL","rebuildIndexURL","productDetailsURL","axiosInstance","interceptors","use","conf","getTokens","Authorization","common","response","originalRequest","status","_retry","post","URL","href","Token","RefreshToken","then","res","setTokens","defaults","cancelToken","Result","Pagination","Items","PaginationItem","ChildResult","field","values","ChildResults","Document","Sorting","SortingItem","Selections","selFacet","SelectionFacet","SelectionFacetValue","Swatch","Range","Facet","SwatchData","Ranges","Values","DisplayType","TruncateThreshold","IsSearch","SearchThreshold","ParamName","Field","RuleType","RuleOperatorType","Rule","Parent","Rules","BannerTrigger","FeaturedItems","FeaturedItem","Merchandising","MerchandisingItem","PageContentItem","Trigger","PageContent","Results","Facets","f","initial","selectionIdx","negationIdx","selectedValue","clientSelections","facets","label","fieldName","selectionValues","FieldType","selectionValue","matchingVal","findMatchingValue","Path","matchingValue","Children","history","createBrowserHistory","parseSearchQueryString","queryObj","parsed","encodeURIComponent","multipleValues","x","replace","parseQueryStringToObject","sort","pg","mpp","lp","PageId","lpurl","is100Coverage","ignoreSpellcheck","pageId","Number","CustomUrl","Is100CoverageTurnedOn","IgnoreSpellcheck","checkIfUrlRefsLandingPage","getSearchQueryString","searchRequest","queryStringValues","escapedValues","unescapedValue","convertObjectToQueryString","String","doSearch","QueryStringListener","unlisten","listen","SearchBox","SuggestionList","className","SearchBoxBase","onViewMatches","inputValue","closeMenu","onSubmit","currentTarget","useWindowSize","width","height","windowSize","setWindowSize","func","ready","handleResize","innerWidth","innerHeight","addEventListener","removeEventListener","PlaceholderFacetValue","round","style","PlaceholderFacet","numValues","Array","FacetList","numPlaceholders","components","getFacetComponents","facetOverrides","IsVisible","registeredComponent","component","facetType","Component","FacetId","FacetRail","useTranslation","i18n","isCollapsed","setCollapsed","size","onClick","LeftChevronSVG","props","viewBox","class","focusable","aria-hidden","RightChevronSVG","Pager","page","totalPages","onPageChange","setInputValue","hasError","setHasError","goToPage","pageNo","isNaN","doInputError","onChange","onInput","wantedPageNo","parseInt","preventDefault","onKeyDown","onKeyPress","keyCode","which","fromCharCode","match","onBlur","min","max","ItemsPerPage","paginationItem","PageSize","NofPages","scrollTo","sortingItem","selected","ToolRow","PlaceHolderSVG","y","PlaceholderImage","showSpinner","PlaceholderItem","Spinner","isVisible","ResultImage","websiteUrl","itemTitleFieldName","imageUrlFieldName","imageUrl","imageTitle","onLoadCallBack","onClickImage","imageLoaded","setImageLoaded","getDocumentValue","RegExp","test","overflow","onLoad","alt","ResultItem","itemName","ResultListing","DefaultResultItem","results","XCircleSVG","fill","clearSelection","selection","negation","DataType","startDate","endDate","moment","format","displayValue","selectedRange","range","splittedValues","IsCurrency","CurrencySymbol","renderRange","renderLabel","SearchResultsLabel","setKeyword","AdjustedKeyword","MerchandisingBanner","BannerZone","matchedMerchandisingItems","Zone","getBannerHtml","matchedMerchandisingItem","__html","Output","concat","merchendisingItem","index","merchandisingItem","bannerIndex","trackEvent","trackEventPayload","Widget","dangerouslySetInnerHTML","Image","imageURL","ImageUrl","ForwardUrl","title","ImageTitle","AltTag","renderBanner","Tabs","hawkActor","tabFacet","getTabCssClassName","tabValues","tabConfig","alwaysOn","Nav","tabs","tabValue","NavItem","NavLink","App","renderSearchBox","elem","renderElem","searchBoxElement","getElementById","ReactDOM","createPortal","Hawksearch","createWidgetId","enableTrackEvent","trackEventUrl","setTrackingURL","setTrackConfig","setClientGUID","initializeSearch","searchElement","parseLocation","render","PlusSVG","MinusSVG","QuestionmarkSVG","FacetContext","useFacet","searchActor","wrapperRef","useRef","setFilter","shouldTruncate","isTruncated","setTruncated","useCookies","cookies","cookieValue","IsCollapsible","IsCollapsedDefault","getInitialCollapsibleState","shouldSearch","val","remainingFacets","valuesBeforeTrunc","selectFacet","negateFacet","setFacets","decimalPrecision","renderer","renderTruncation","current","contains","toggleCollapsible","Tooltip","ref","placeholder","DashCircleSVG","CheckmarkSVG","PlusCircleSVG","FacetRangeDisplayType","Checkbox","renderCheckMark","isSelected","renderFacetActions","isNegated","correspondingRange","rangeValueAssetUrl","AssetFullUrl","selectionState","aria-pressed","Text","textDecoration","Count","input","setInput","Link","setLinkFacet","formatDate","unixFormat","date","getFullYear","toString","getMonth","getDate","SliderCalendarInputs","sliderProps","minValue","setMinValue","maxValue","setMaxValue","newMinValue","onValueChange","newMaxValue","Rheostat","lazy","replaceHyphen","SliderDate","RangeMin","rangeMin","setMinRange","RangeMax","rangeMax","setMaxRange","RangeStart","rangeStart","setStartRange","RangeEnd","rangeEnd","setEndRange","paramName","newRange","minVal","maxVal","formattedMinVal","formattedMaxVal","Suspense","fallback","currentMinValue","currentMaxValue","ceil","onValuesUpdated","newMin","newMax","SliderNumericInputs","reloadFacets","thousandSeparator","isCurrency","prefix","currencySymbol","formattedValue","decimalScale","SliderNumeric","parseFloat","toFixed","isCurency","setIsCurrency","setCurrencySymbol","selectedValues","Slider","SwatchItem","swatchValue","swatchUrl","facetSwatch","AssetUrl","AssetName","colorSwatchStyle","backgroundColor","Color","listItemClassNames","onSwatchSelected","isColor","NestedItem","isExpanded","setIsExpanded","setIsTruncated","hierarchyValue","hierarchyChildren","remainingValues","shouldTruncateChildren","facetArray","matchValue","onValueSelected","aria-expanded","Nested","OpenRangeDatetime","daterange","rangeStartDate","rangeEndDate","minDateValue","setdateStartValue","maxDateValue","setdateEndValue","setdateFacetValues","startVal","endVal","OpenRangeNumber","setStartValue","setEndValue","data-type","OpenRange","SizeItem","memo","Size","NestedLinkItem","NestedLink","defaultFacetComponents","DefaultCheckbox","DefaultNestedCheckbox","DefaultSearch","DefaultLink","DefaultSlider","DefaultSwatch","DefaultOpenRange","DefaultSize","Nestedlink","DefaultNestedLink","defaultAutocompleteStrategies","SuggestionStrategy","overridedComponents","facetComponents","fType","fComponent","getAutocompleteStrategies","overridedStrategies","suggestionStrategies","sType","autocompleteStrategy","strategyMatch","suggestionType","SearchSuggestionsList","popular","categories","products","content","hasPopular","hasCategories","hasProducts","hasContent","hasAllEmpty","SearchSuggestions","query","setResults","setIsLoading","autocomplete","DisplayFullResponse","debounceMs","autocompleteDebounce","doAutocomplete","strategies","autocompleteStrategies","initialInput","setInitialInput","stateReducer","changes","itemToString","matchedStrategy","strategy","handleToString","handleItemChange","initialInputValue","options","isOpen","getInputProps","openMenu","showSuggestions","aria-labelledby","onFocus"],"mappings":"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","file":"react-hawksearch-search.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"react-hawksearch-\" + ({\"4\":\"vendors~rheostat\"}[chunkId]||chunkId) + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([556,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import React, { useContext } from 'react';\r\n\r\nimport { HawksearchConfig } from 'types/HawksearchConfig';\r\n\r\nconst ConfigContext = React.createContext({} as ConfigContextValue);\r\n\r\nexport interface ConfigContextValue {\r\n\t/** Global configuration. */\r\n\tconfig: HawksearchConfig;\r\n}\r\n\r\nexport interface ConfigProviderProps {\r\n\tconfig: HawksearchConfig;\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\n// declare webpack's constant to appease typescript\r\ndeclare var __webpack_public_path__: string;\r\n\r\nfunction ConfigProvider({ config, children }: ConfigProviderProps) {\r\n\tif (config.assetPath) {\r\n\t\tlet path = config.assetPath;\r\n\r\n\t\t// ensure the provided path both starts and ends with a slash\r\n\t\tif (!path.startsWith('/')) {\r\n\t\t\tpath = '/' + path;\r\n\t\t}\r\n\t\tif (!path.endsWith('/')) {\r\n\t\t\tpath = path + '/';\r\n\t\t}\r\n\r\n\t\t// allow consumers to tell webpack where to load code split/lazy loaded files from, as they may not be\r\n\t\t// hosting our JS from /assets/ (the default path)\r\n\t\t__webpack_public_path__ = path;\r\n\t}\r\n\r\n\treturn <ConfigContext.Provider value={{ config }}>{children}</ConfigContext.Provider>;\r\n}\r\n\r\nexport function useHawkConfig() {\r\n\tconst context = useContext(ConfigContext);\r\n\r\n\tif (!context.config) {\r\n\t\tthrow new Error(\r\n\t\t\t'No HawksearchConfig is available, did you forget to wrap your components in a ConfigProvider component?'\r\n\t\t);\r\n\t}\r\n\r\n\treturn context;\r\n}\r\n\r\nexport default ConfigProvider;\r\n","export enum FacetType {\r\n\tCheckbox = 'checkbox',\r\n\tNestedCheckbox = 'nestedcheckbox',\r\n\tLink = 'link',\r\n\tNestedlink = 'nestedlinklist',\r\n\tSlider = 'slider',\r\n\tSwatch = 'swatch',\r\n\tRating = 'rating',\r\n\tSize = 'size',\r\n\tSearchWithin = 'search',\r\n\tRecentSearches = 'recentsearches',\r\n\tRelatedSearches = 'related',\r\n\tOpenRange = 'openRange',\r\n}\r\n","import { useEffect } from 'react';\r\nimport axios, { CancelToken } from 'axios';\r\n\r\nimport { SearchStore, FacetSelectionState } from './Store';\r\nimport HawkClient from 'net/HawkClient';\r\nimport { Response, Request, FacetSelections, Result } from 'models/Search';\r\nimport { useMergableState } from 'util/MergableState';\r\nimport { useHawkConfig } from 'components/ConfigProvider';\r\nimport { Facet, Value } from 'models/Facets';\r\nimport { FacetType } from 'models/Facets/FacetType';\r\nimport { Response as CompareDataResponse, Request as CompareItemRequest } from 'models/CompareItems';\r\nimport { Request as ProductDetailsRequest, Response as ProductDetailsResponse } from 'models/ProductDetails';\r\nimport { Request as PinItemRequest } from 'models/PinItems';\r\nimport { Request as SortingOrderRequest } from 'models/PinItemsOrder';\r\nimport { Request as RebuildIndexRequest } from 'models/RebuildIndex';\r\nimport TrackingEvent, { SearchType } from 'components/TrackingEvent';\r\nimport { getCookie, setCookie, createGuid, getVisitExpiry, getVisitorExpiry } from 'helpers/utils';\r\nimport { ClientSelectionValue } from './ClientSelections';\r\n\r\ninterface ClientData {\r\n\tVisitorId: string;\r\n\tVisitId: string;\r\n\tUserAgent: string;\r\n\tPreviewBuckets?: number[];\r\n\tCustom?: {\r\n\t\tlanguage: string;\r\n\t};\r\n}\r\n\r\nexport interface SearchActor {\r\n\t/**\r\n\t * Performs a search with the currently configured pending search request. The search request can be\r\n\t * configured via the `setSearch` method. This method usually doesn't need to be called directly, as\r\n\t * the `StoreProvider` component will usually trigger searches directly in response to calls to\r\n\t * `setSearch`.\r\n\t * @returns A promise that resolves when the search request has been completed.\r\n\t */\r\n\tsearch(cancellationToken?: CancelToken): Promise<void>;\r\n\r\n\t/**\r\n\t * Configures the next search request that will be executed. This will also execute a search in response to\r\n\t * the next search request changing.\r\n\t * @param search The partial search request object. This will be merged with previous calls to `setSearch`.\r\n\t * @param doHistory Whether or not this search request will push a history entry into the browser. If\r\n\t * \t\t\t\t\tnot specified, the default is `true`.\r\n\t */\r\n\tsetSearch(search: Partial<Request>, doHistory?: boolean): void;\r\n\r\n\t/**\r\n\t * Toggles a facet value for the next search request that will be executed. If the given facet had previously\r\n\t * been selected, it will be unselected. If the negation state of a selected facet is changed, the selection\r\n\t * will have its negation state changed. Internally, this will call `setSearch` to configure the next search\r\n\t * with this selected facet.\r\n\t * @param facet The facet for which the value is being selected.\r\n\t * @param facetValue The facet value being selected.\r\n\t * @param negate  Whether or not this selection is considered a negation.\r\n\t */\r\n\ttoggleFacetValue(facet: Facet | string, facetValue: Value | string, negate?: boolean): void;\r\n\r\n\tsetFacetValues(facet: Facet | string, facetValues: Value[] | string[]): void;\r\n\r\n\t/**\r\n\t * Entirely clears all the values of the given facet from the current selection.\r\n\t * @param facet The facet to clear.\r\n\t */\r\n\tclearFacet(facet: Facet | string): void;\r\n\r\n\t/**\r\n\t * Clears a given facet value of the given facet from the current selection.\r\n\t * @param facet The facet to clear.\r\n\t * @param facetValue The facet value to clear.\r\n\t */\r\n\tclearFacetValue(facet: Facet | string, facetValue?: Value | string): void;\r\n\r\n\t/**\r\n\t * Clears all selected facets from the current selection.\r\n\t */\r\n\tclearAllFacets(): void;\r\n\r\n\t// Store items to make comparision via request\r\n\tsetItemsToCompare(resultItem: Result, isCheck: boolean): void;\r\n\r\n\t// To store items after getting the results from compare request\r\n\tsetComparedResults(comparedResults: Result[]): void;\r\n\r\n\t// To store items after getting the results from compare request\r\n\tsetProductDetailsResults(detailsResult: Result): void;\r\n\r\n\t// Clear stored compared items\r\n\tclearItemsToCompare(): void;\r\n\r\n\t// Get comparision of items from request\r\n\tgetComparedItems(request: CompareItemRequest, cancellationToken?: CancelToken): Promise<CompareDataResponse>;\r\n\r\n\t// Pin items\r\n\tpinItem(payload: PinItemRequest, cancellationToken?: CancelToken): Promise<string | null>;\r\n\r\n\t// update sorting order of pinned items\r\n\tupdatePinOrder(payload: SortingOrderRequest, cancellationToken?: CancelToken): Promise<string | null>;\r\n\r\n\t// rebuild Index\r\n\trebuildIndex(request: RebuildIndexRequest, cancellationToken?: CancelToken): Promise<string | null>;\r\n\r\n\t// Get product details\r\n\tgetProductDetails(request: ProductDetailsRequest, cancellationToken?: CancelToken): Promise<ProductDetailsResponse>;\r\n\r\n\tsetStore(store: SearchStore): void;\r\n}\r\n\r\nexport function useHawkState(initialSearch?: Partial<Request>): [SearchStore, SearchActor] {\r\n\tconst { config } = useHawkConfig();\r\n\r\n\tconst client = new HawkClient(config);\r\n\r\n\tconst [store, setStore] = useMergableState(\r\n\t\tnew SearchStore({\r\n\t\t\tpendingSearch: initialSearch || {\r\n\t\t\t\tFacetSelections: {},\r\n\t\t\t},\r\n\t\t\tisLoading: true,\r\n\t\t\titemsToCompare: [],\r\n\t\t\tcomparedResults: [],\r\n\t\t\titemsToCompareIds: [],\r\n\t\t\tproductDetails: {},\r\n\t\t\tlanguage: getInitialLanguage(),\r\n\t\t}),\r\n\t\tSearchStore\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\t// when the pending search changes, trigger a search\r\n\r\n\t\tconst cts = axios.CancelToken.source();\r\n\t\tsearch(cts.token);\r\n\r\n\t\treturn () => {\r\n\t\t\tcts.cancel();\r\n\t\t};\r\n\t}, [store.pendingSearch]);\r\n\r\n\t/**\r\n\t * Performs a search with the currently configured pending search request. The search request can be\r\n\t * configured via the `setSearch` method. This method usually doesn't need to be called directly, as\r\n\t * the `StoreProvider` component will usually trigger searches directly in response to calls to\r\n\t * `setSearch`.\r\n\t * @returns A promise that resolves when the search request has been completed.\r\n\t */\r\n\tasync function search(cancellationToken?: CancelToken): Promise<void> {\r\n\t\tsetStore({ isLoading: true });\r\n\r\n\t\tlet searchResults: Response | null = null;\r\n\t\tconst searchParams = {\r\n\t\t\t// the search request being executed is spread from the pendingSearch\r\n\t\t\t...store.pendingSearch,\r\n\t\t\t// pass parameter for extended response\r\n\t\t\tIsInPreview: config.isInPreview,\r\n\t\t\t// and override some of the request fields with config values\r\n\t\t\tClientGuid: config.clientGuid,\r\n\t\t\tClientData: getClientData(),\r\n\t\t\tKeyword: store.pendingSearch.Keyword\r\n\t\t\t\t? decodeURIComponent(store.pendingSearch.Keyword || '')\r\n\t\t\t\t: store.pendingSearch.Keyword,\r\n\t\t\tSearchWithin: store.pendingSearch.SearchWithin\r\n\t\t\t\t? decodeURIComponent(store.pendingSearch.SearchWithin || '')\r\n\t\t\t\t: store.pendingSearch.SearchWithin,\r\n\t\t};\r\n\r\n\t\t// The index name in the configuration takes priority over the one supplied from the URL\r\n\t\tif (config.indexName) {\r\n\t\t\tObject.assign(searchParams, { IndexName: config.indexName });\r\n\t\t}\r\n\r\n\t\t// If the index name is required and no value is provided from the config or the URL, the request is canceled\r\n\t\tif (config.indexNameRequired && !searchParams.IndexName) {\r\n\t\t\tsetStore({ isLoading: false });\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tsearchResults = await client.search(searchParams, cancellationToken);\r\n\t\t} catch (error) {\r\n\t\t\tif (axios.isCancel(error)) {\r\n\t\t\t\t// if the request was cancelled, it's because this component was updated\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconsole.error('Search request error:', error);\r\n\t\t\tsetStore({ requestError: true });\r\n\t\t}\r\n\r\n\t\tsetStore({ isLoading: false });\r\n\r\n\t\tif (searchResults) {\r\n\t\t\tif (!searchResults.Success) {\r\n\t\t\t\tconsole.error('Search result error:', searchResults);\r\n\t\t\t\tsetStore({ requestError: true });\r\n\t\t\t} else {\r\n\t\t\t\tconst selectedFacets = searchParams.FacetSelections ? Object.keys(searchParams.FacetSelections) : [];\r\n\r\n\t\t\t\tTrackingEvent.setLanguage(store.language);\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tsearchParams.SortBy ||\r\n\t\t\t\t\tsearchParams.PageNo ||\r\n\t\t\t\t\tsearchParams.MaxPerPage ||\r\n\t\t\t\t\tselectedFacets.length ||\r\n\t\t\t\t\tsearchParams.SearchWithin\r\n\t\t\t\t) {\r\n\t\t\t\t\tTrackingEvent.track('searchtracking', {\r\n\t\t\t\t\t\ttrackingId: searchResults.TrackingId,\r\n\t\t\t\t\t\ttypeId: SearchType.Refinement,\r\n\t\t\t\t\t\tkeyword: searchParams.Keyword,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tTrackingEvent.track('searchtracking', {\r\n\t\t\t\t\t\ttrackingId: searchResults.TrackingId,\r\n\t\t\t\t\t\ttypeId: SearchType.Initial,\r\n\t\t\t\t\t\tkeyword: searchParams.Keyword,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetStore({\r\n\t\t\t\t\tsearchResults: new Response(searchResults),\r\n\t\t\t\t\trequestError: false,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Performs a comparision between two or more than two products based on ID\r\n\t * user can use this method from view application.\r\n\t * @returns A promise that resolves when the compare request has been completed.\r\n\t */\r\n\tasync function getComparedItems(\r\n\t\trequest: CompareItemRequest,\r\n\t\tcancellationToken?: CancelToken\r\n\t): Promise<CompareDataResponse> {\r\n\t\treturn await client.getComparedItems(request, cancellationToken);\r\n\t}\r\n\r\n\tasync function pinItem(request: PinItemRequest, cancellationToken?: CancelToken): Promise<string | null> {\r\n\t\treturn await client.pinItem(request, cancellationToken);\r\n\t}\r\n\r\n\tasync function updatePinOrder(\r\n\t\trequest: SortingOrderRequest,\r\n\t\tcancellationToken?: CancelToken\r\n\t): Promise<string | null> {\r\n\t\treturn await client.updatePinOrder(request, cancellationToken);\r\n\t}\r\n\r\n\tasync function rebuildIndex(request: RebuildIndexRequest, cancellationToken?: CancelToken): Promise<string | null> {\r\n\t\treturn await client.rebuildIndex(request);\r\n\t}\r\n\r\n\t/**\r\n\t * Get product details by ID\r\n\t * @returns A promise that resolves when the product details request has been completed.\r\n\t */\r\n\tasync function getProductDetails(\r\n\t\trequest: ProductDetailsRequest,\r\n\t\tcancellationToken?: CancelToken\r\n\t): Promise<ProductDetailsResponse> {\r\n\t\treturn await client.getProductDetails(request, cancellationToken);\r\n\t}\r\n\r\n\t/**\r\n\t * Configures the next search request that will be executed. This will also execute a search in response to\r\n\t * the next search request changing.\r\n\t * @param search The partial search request object. This will be merged with previous calls to `setSearch`.\r\n\t * @param doHistory Whether or not this search request will push a history entry into the browser. If\r\n\t * \t\t\t\t\tnot specified, the default is `true`.\r\n\t */\r\n\tfunction setSearch(pendingSearch: Partial<Request>, doHistory?: boolean): void {\r\n\t\tif (doHistory === undefined) {\r\n\t\t\tdoHistory = true;\r\n\t\t}\r\n\r\n\t\tsetStore(prevState => {\r\n\t\t\tconst newState = {\r\n\t\t\t\tpendingSearch: { ...prevState.pendingSearch, ...pendingSearch },\r\n\t\t\t\tdoHistory,\r\n\t\t\t};\r\n\t\t\tif (newState.pendingSearch.Keyword === '') {\r\n\t\t\t\tnewState.pendingSearch.Keyword = undefined;\r\n\t\t\t}\r\n\r\n\t\t\treturn newState;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the facet selections and search within configuration for the next search request. This will also\r\n\t * clear the page number of the next request to display the first page of results.\r\n\t * @param selections The facet selections to set.\r\n\t * @param searchWithin The search within value to set.\r\n\t */\r\n\tfunction setSearchSelections(selections?: FacetSelections, searchWithin?: string) {\r\n\t\tsetSearch({\r\n\t\t\tFacetSelections: selections,\r\n\t\t\tSearchWithin: searchWithin,\r\n\r\n\t\t\t// when we change facet selections, also clear the current page so that we navigate\r\n\t\t\t// back to the first page of results\r\n\t\t\tPageNo: undefined,\r\n\t\t});\r\n\t}\r\n\r\n\t// NOTE: It will return the difference from 1st array\r\n\t// i.e ['a', 'b', 'c'] - ['c', 'd', 'f'] => ['a', 'b']\r\n\tfunction differenceOfArrays(array1: string[], array2: string[]) {\r\n\t\treturn array1.filter(i => {\r\n\t\t\treturn array2.indexOf(i) < 0;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Toggles a facet value for the next search request that will be executed. Internally, this will call\r\n\t * `setSearch` to configure the next search with this selected facet.\r\n\t * @param facet The facet for which the value is being selected.\r\n\t * @param facetValue The facet value being selected.\r\n\t * @param negate  Whether or not this selection is considered a negation.\r\n\t */\r\n\tfunction toggleFacetValue(facet: Facet | string, facetValue: Value | string, negate?: boolean): void {\r\n\t\tif (negate === undefined) {\r\n\t\t\tnegate = false;\r\n\t\t}\r\n\r\n\t\tconst facetName: string = typeof facet === 'string' ? facet : facet.Name;\r\n\t\tconst facetField = typeof facet === 'string' ? facet : facet.selectionField;\r\n\r\n\t\tconst valueValue = typeof facetValue === 'string' ? facetValue : facetValue.Value;\r\n\t\tconst valueLabel = typeof facetValue === 'string' ? facetValue : facetValue.Label;\r\n\r\n\t\tif (!valueValue) {\r\n\t\t\tconsole.error(`Facet ${facetName} (${facetField}) has no facet value for ${valueLabel}`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet facetSelections = store.pendingSearch.FacetSelections;\r\n\r\n\t\t// handle `searchWithin` facet, which isn't a facet selection but is instead a field on the\r\n\t\t// search request.\r\n\t\tif (facetField === 'searchWithin') {\r\n\t\t\t// set the search within to the facet value provided\r\n\t\t\tsetSearchSelections(facetSelections, /* searchWithin */ valueValue);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!facetSelections) {\r\n\t\t\tfacetSelections = {};\r\n\t\t}\r\n\r\n\t\tif (!facetSelections[facetField]) {\r\n\t\t\tfacetSelections[facetField] = [];\r\n\t\t}\r\n\r\n\t\tconst { state: selState, selectionIndex } = store.isFacetSelected(facet, facetValue);\r\n\t\tconst valuesToRemoved = [] as string[];\r\n\t\tconst items = (store.facetSelections[facetField] || {}).items || [];\r\n\t\titems.forEach((item: ClientSelectionValue) => {\r\n\t\t\tif (((item || {}).path || '').indexOf(valueValue) !== -1) {\r\n\t\t\t\tvaluesToRemoved.push(item.value);\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst difference = differenceOfArrays(facetSelections[facetField] || [], valuesToRemoved || []);\r\n\t\tif (selState === FacetSelectionState.Selected || selState === FacetSelectionState.Negated) {\r\n\t\t\t// we're selecting this facet, and it's already selected\r\n\r\n\t\t\t// first, remove it from our selections\r\n\t\t\tfacetSelections[facetField]!.splice(selectionIndex!, 1);\r\n\r\n\t\t\tif (\r\n\t\t\t\t(selState === FacetSelectionState.Selected && negate) ||\r\n\t\t\t\t(selState === FacetSelectionState.Negated && !negate)\r\n\t\t\t) {\r\n\t\t\t\t// if we're toggling from negation to non-negation or vice versa, then push the new selection\r\n\t\t\t\tfacetSelections[facetField]!.push(negate ? `-${valueValue}` : valueValue);\r\n\t\t\t} else {\r\n\t\t\t\tif ((facet as Facet).FacetType === FacetType.NestedCheckbox) {\r\n\t\t\t\t\tfacetSelections[facetField] = difference;\r\n\t\t\t\t}\r\n\t\t\t\t// if we're not toggling the negation, nothing to do because we already removed the selection above\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// not selected, so we want to select it\r\n\t\t\tfacetSelections[facetField]!.push(negate ? `-${valueValue}` : valueValue);\r\n\t\t}\r\n\r\n\t\tif (facetSelections[facetField]!.length === 0) {\r\n\t\t\t// clean up any facets that no longer have any selected facet values\r\n\t\t\tdelete facetSelections[facetField];\r\n\t\t}\r\n\r\n\t\tsetSearchSelections(facetSelections, store.pendingSearch.SearchWithin);\r\n\t}\r\n\r\n\tfunction setFacetValues(facet: Facet | string, facetValues: Value[] | string[]): void {\r\n\t\tconst facetName = typeof facet === 'string' ? facet : facet.Name;\r\n\t\tconst facetField = typeof facet === 'string' ? facet : facet.selectionField;\r\n\r\n\t\tlet facetSelections = store.pendingSearch.FacetSelections;\r\n\r\n\t\tif (!facetSelections) {\r\n\t\t\tfacetSelections = {};\r\n\t\t}\r\n\r\n\t\tfacetSelections[facetField] = [];\r\n\r\n\t\tfor (const facetValue of facetValues) {\r\n\t\t\tconst valueValue = typeof facetValue === 'string' ? facetValue : facetValue.Value;\r\n\t\t\tconst valueLabel = typeof facetValue === 'string' ? facetValue : facetValue.Label;\r\n\r\n\t\t\tif (!valueValue) {\r\n\t\t\t\tconsole.error(`Facet ${facetName} (${facetField}) has no facet value for ${valueLabel}`);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfacetSelections[facetField]!.push(valueValue);\r\n\t\t}\r\n\r\n\t\tsetSearchSelections(facetSelections, store.pendingSearch.SearchWithin);\r\n\t}\r\n\r\n\t/**\r\n\t * Entirely clears all the values of the given facet from the current selection.\r\n\t * @param facet The facet to clear.\r\n\t */\r\n\tfunction clearFacet(facet: Facet | string) {\r\n\t\tconst facetField = typeof facet === 'string' ? facet : facet.selectionField;\r\n\r\n\t\tconst facetSelections = store.pendingSearch.FacetSelections;\r\n\r\n\t\t// handle `searchWithin` facet, which isn't a facet selection but is instead a field on the\r\n\t\t// search request.\r\n\t\tif (facetField === 'searchWithin') {\r\n\t\t\t// set searchWithin to undefined to clear it\r\n\t\t\tsetSearchSelections(facetSelections, /* searchWithin */ undefined);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!facetSelections || !facetSelections[facetField]) {\r\n\t\t\t// if there are no facet selections or the facet isn't selected at all, there's nothing to clear\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdelete facetSelections[facetField];\r\n\r\n\t\tsetSearchSelections(facetSelections, store.pendingSearch.SearchWithin);\r\n\t}\r\n\r\n\t/**\r\n\t * Clears a given facet value of the given facet from the current selection.\r\n\t * @param facet The facet to clear.\r\n\t * @param facetValue The facet value to clear.\r\n\t */\r\n\tfunction clearFacetValue(facet: Facet | string, facetValue: Value | string) {\r\n\t\tconst facetName = typeof facet === 'string' ? facet : facet.Name;\r\n\t\tconst facetField = typeof facet === 'string' ? facet : facet.selectionField;\r\n\r\n\t\tconst valueValue = typeof facetValue === 'string' ? facetValue : facetValue.Value;\r\n\t\tconst valueLabel = typeof facetValue === 'string' ? facetValue : facetValue.Label;\r\n\r\n\t\tif (!valueValue) {\r\n\t\t\tconsole.error(`Facet ${facetName} (${facetField}) has no facet value for ${valueLabel}`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// handle `searchWithin` facet, which isn't a facet selection but is instead a field on the\r\n\t\t// search request.\r\n\t\tif (facetField === 'searchWithin') {\r\n\t\t\t// set searchWithin to undefined to clear it\r\n\t\t\tsetSearchSelections(store.pendingSearch.FacetSelections, /* searchWithin */ undefined);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst { state: selState, selectionIndex } = store.isFacetSelected(facet, facetValue);\r\n\r\n\t\tif (selState === FacetSelectionState.NotSelected) {\r\n\t\t\t// if there are no facet selections or the facet isn't selected at all, there's nothing to clear\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst facetSelections = store.pendingSearch.FacetSelections!;\r\n\r\n\t\t// remove it from the selections\r\n\t\tfacetSelections[facetField]!.splice(selectionIndex!, 1);\r\n\r\n\t\tif (facetSelections[facetField]!.length === 0) {\r\n\t\t\t// clean up any facets that no longer have any selected facet values\r\n\t\t\tdelete facetSelections[facetField];\r\n\t\t}\r\n\r\n\t\tsetSearchSelections(facetSelections, store.pendingSearch.SearchWithin);\r\n\t}\r\n\r\n\t/**\r\n\t * Clears all selected facets from the current selection.\r\n\t */\r\n\tfunction clearAllFacets(): void {\r\n\t\tsetSearchSelections(undefined, undefined);\r\n\t}\r\n\r\n\tfunction setItemsToCompare(resultItem: Result, isCheck: boolean): void {\r\n\t\tlet itemsArray = [...store.itemsToCompare];\r\n\t\tif (isCheck) {\r\n\t\t\t// append\r\n\t\t\titemsArray = [...itemsArray, ...[resultItem]];\r\n\t\t} else {\r\n\t\t\t// filter out\r\n\t\t\titemsArray = itemsArray.filter(item => item.DocId !== resultItem.DocId);\r\n\t\t}\r\n\t\t// setStore({ itemsToCompare: itemsArray });\r\n\t\tsetStore({\r\n\t\t\titemsToCompare: itemsArray,\r\n\t\t\titemsToCompareIds: itemsArray.map(item => item.DocId),\r\n\t\t});\r\n\t}\r\n\r\n\tfunction setComparedResults(data: Result[]): void {\r\n\t\tsetStore({\r\n\t\t\tcomparedResults: data,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction setProductDetailsResults(data: Result): void {\r\n\t\tsetStore({\r\n\t\t\tproductDetails: data,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction clearItemsToCompare() {\r\n\t\tsetStore({\r\n\t\t\titemsToCompare: [],\r\n\t\t\titemsToCompareIds: [],\r\n\t\t});\r\n\t}\r\n\r\n\tfunction getClientData() {\r\n\t\tlet visitId = getCookie('hawk_visit_id');\r\n\t\tlet visitorId = getCookie('hawk_visitor_id');\r\n\r\n\t\tif (!visitId) {\r\n\t\t\tsetCookie('hawk_visit_id', createGuid(), getVisitExpiry());\r\n\t\t\tvisitId = getCookie('hawk_visit_id');\r\n\t\t}\r\n\r\n\t\tif (!visitorId) {\r\n\t\t\tsetCookie('hawk_visitor_id', createGuid(), getVisitorExpiry());\r\n\t\t\tvisitorId = getCookie('hawk_visitor_id');\r\n\t\t}\r\n\r\n\t\tconst clientData: ClientData = {\r\n\t\t\tVisitorId: visitorId || '',\r\n\t\t\tVisitId: visitId || '',\r\n\t\t\tUserAgent: navigator.userAgent,\r\n\t\t\tPreviewBuckets:\r\n\t\t\t\tstore.searchResults && !config.disablePreviewBuckets\r\n\t\t\t\t\t? store.searchResults.VisitorTargets.map(v => v.Id)\r\n\t\t\t\t\t: [],\r\n\t\t};\r\n\r\n\t\tconst language = store.language;\r\n\r\n\t\tif (language) {\r\n\t\t\tclientData.Custom = {\r\n\t\t\t\tlanguage,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn clientData;\r\n\t}\r\n\r\n\tfunction getInitialLanguage() {\r\n\t\tconst urlParams = new URLSearchParams(location.search);\r\n\t\tconst language = urlParams.get('language') || config.language;\r\n\t\treturn language;\r\n\t}\r\n\r\n\tconst actor: SearchActor = {\r\n\t\tsearch,\r\n\t\tsetSearch,\r\n\t\ttoggleFacetValue,\r\n\t\tsetFacetValues,\r\n\t\tclearFacet,\r\n\t\tclearFacetValue,\r\n\t\tclearAllFacets,\r\n\t\tsetItemsToCompare,\r\n\t\tsetComparedResults,\r\n\t\tclearItemsToCompare,\r\n\t\tgetComparedItems,\r\n\t\tpinItem,\r\n\t\tupdatePinOrder,\r\n\t\trebuildIndex,\r\n\t\tgetProductDetails,\r\n\t\tsetProductDetailsResults,\r\n\t\tsetStore,\r\n\t};\r\n\r\n\treturn [store, actor];\r\n}\r\n","import { useState, Dispatch } from 'react';\r\n\r\ntype SetStateAction<T> = Partial<T> | ((prevState: T) => Partial<T>);\r\n\r\nexport function useMergableState<T>(\r\n\tinitialValue: T,\r\n\ttypeConstructor: new (init: Partial<T>) => T\r\n): [T, Dispatch<SetStateAction<T>>] {\r\n\tconst [state, setState] = useState(new typeConstructor(initialValue));\r\n\r\n\tfunction setStateAndMerge(value: SetStateAction<T>) {\r\n\t\tif (typeof value === 'function') {\r\n\t\t\t// if we're being passed a function, we're setting state in the form of setState(prevState => ...).\r\n\r\n\t\t\tsetState(prevState => {\r\n\t\t\t\t// so we derive the new state from the previous state\r\n\t\t\t\tconst newState = value(prevState);\r\n\r\n\t\t\t\t// and then set the new merged state\r\n\t\t\t\treturn new typeConstructor({ ...prevState, ...newState });\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// otherwise, the new state was simply passed in\r\n\t\tsetState(prevState => {\r\n\t\t\t// merge state together and set it\r\n\t\t\treturn new typeConstructor({ ...prevState, ...value });\r\n\t\t});\r\n\t}\r\n\r\n\treturn [state, setStateAndMerge];\r\n}\r\n","import { HawkContextValue } from './../components/StoreProvider';\r\n/**\r\n * Object containing all initialized stores\r\n */\r\nconst dataLayers = {};\r\n\r\n/**\r\n * All initialized configurations\r\n * Used for index name verification\r\n */\r\nconst configurations = {};\r\n\r\n/**\r\n * A method invoked at store updates that propagates the data between similar stores\r\n * Store matching is based on the unique identifier and the configuration index name\r\n */\r\nexport function updateBindedStores({ dataLayer, widgetId, store, actor, config }) {\r\n\tif (!dataLayers.hasOwnProperty(dataLayer)) {\r\n\t\tdataLayers[dataLayer] = {};\r\n\t}\r\n\r\n\tconst _ = require('lodash');\r\n\r\n\tdataLayers[dataLayer][widgetId] = { store, actor };\r\n\tconfigurations[widgetId] = config;\r\n\r\n\tfor (const [id, instance] of Object.entries(dataLayers[dataLayer])) {\r\n\t\tif (\r\n\t\t\tid !== widgetId &&\r\n\t\t\t(instance as HawkContextValue).actor &&\r\n\t\t\t!_.isEqual((instance as HawkContextValue).store.searchResults, store.searchResults) &&\r\n\t\t\tconfigurations[id].indexName === config.indexName\r\n\t\t) {\r\n\t\t\t(instance as HawkContextValue).actor.setStore(store);\r\n\t\t}\r\n\t}\r\n}\r\n","import React, { useContext, useEffect } from 'react';\r\n\r\nimport { SearchStore } from 'store/Store';\r\nimport { useHawkState, SearchActor } from '../store/HawkState';\r\nimport { Request } from 'models/Search';\r\nimport { useHawkConfig } from './ConfigProvider';\r\nimport { updateBindedStores } from 'util/WidgetBinding';\r\n\r\nconst HawkContext = React.createContext({} as HawkContextValue);\r\n\r\nexport interface HawkContextValue {\r\n\t/** The store of data used throughout the application. */\r\n\tstore: SearchStore;\r\n\t/**\r\n\t * An interface that allows actions to be performed on the store (such as executing searches,\r\n\t * changing pages, etc).\r\n\t */\r\n\tactor: SearchActor;\r\n}\r\n\r\nexport interface HawkStoreProviderProps {\r\n\t/** The initial search to perform when initializing the search components. */\r\n\tinitialSearch?: Partial<Request>;\r\n\tchildren: React.ReactNode;\r\n\twidgetId?: string;\r\n}\r\n\r\n/**\r\n * This component acts as the global store for the hawksearch application state. Only one instance of this component\r\n * should exist, and it should be the root level component.\r\n */\r\nfunction StoreProvider({ initialSearch, children, widgetId }: HawkStoreProviderProps) {\r\n\tconst [store, actor] = useHawkState(initialSearch);\r\n\tconst { config } = useHawkConfig();\r\n\tconst dataLayer = config.dataLayer;\r\n\r\n\tuseEffect(() => {\r\n\t\tif (dataLayer) {\r\n\t\t\tupdateBindedStores({ dataLayer, widgetId, store, actor, config });\r\n\t\t}\r\n\t}, [store.searchResults]);\r\n\r\n\treturn <HawkContext.Provider value={{ store, actor }}>{children}</HawkContext.Provider>;\r\n}\r\n\r\n/**\r\n * Retrieves the global hawk store for use within a component.\r\n */\r\nexport function useHawksearch() {\r\n\treturn useContext(HawkContext);\r\n}\r\n\r\nexport default StoreProvider;\r\n","enum E_T {\r\n\tpageLoad = 1,\r\n\tsearch = 2,\r\n\tclick = 3,\r\n\taddToCart = 4,\r\n\trate = 5,\r\n\tsale = 6,\r\n\tbannerClick = 7,\r\n\tbannerImpression = 8,\r\n\trecommendationClick = 10,\r\n\tautoCompleteClick = 11,\r\n\tadd2CartMultiple = 14,\r\n}\r\n\r\nenum P_T {\r\n\titem = 1,\r\n\tlanding = 2,\r\n\tcart = 3,\r\n\torder = 4,\r\n\tcustom = 5,\r\n}\r\n\r\nexport enum SuggestType {\r\n\tPopularSearches = 1,\r\n\tTopCategories = 2,\r\n\tTopProductMatches = 3,\r\n\tTopContentMatches = 4,\r\n}\r\n\r\nexport enum SearchType {\r\n\tInitial = 1,\r\n\tRefinement = 2,\r\n}\r\n\r\nconst TrackEventNameMapping = {\r\n\tClick: 'click',\r\n\tCart: '',\r\n\tCopyRequestTracking: '',\r\n\tRequestTracking: '',\r\n\tSearch: 'searchtracking',\r\n\tSale: 'sale',\r\n\tRecommendationImpression: '',\r\n\tRecommendationClick: 'recommendationclick',\r\n\tRate: 'rate',\r\n\tPageLoad: 'pageload',\r\n\tIdentify: '',\r\n\tBannerImpression: 'bannerimpression',\r\n\tBannerClick: 'bannerclick',\r\n\tAutocompleteClick: 'autocompleteclick',\r\n\tAdd2CartMultiple: 'add2cartmultiple',\r\n\tAdd2Cart: 'add2cart',\r\n};\r\n\r\nconst AvailableEvents = [\r\n\t'click',\r\n\t'pageload',\r\n\t'searchtracking',\r\n\t'autocompleteclick',\r\n\t'bannerclick',\r\n\t'bannerimpression',\r\n\t'sale',\r\n\t'add2cart',\r\n];\r\n\r\nclass TrackingEvent {\r\n\tprivate static instance: TrackingEvent;\r\n\tprivate trackingURL: string;\r\n\tprivate clientGUID: string;\r\n\tprivate trackConfig: string[];\r\n\tprivate language: string;\r\n\r\n\t/**\r\n\t * The Singleton's constructor should always be private to prevent direct\r\n\t * construction calls with the `new` operator.\r\n\t */\r\n\tprivate constructor() {}\r\n\r\n\t/**\r\n\t * The static method that controls the access to the singleton instance.\r\n\t *\r\n\t * This implementation let you subclass the Singleton class while keeping\r\n\t * just one instance of each subclass around.\r\n\t */\r\n\tpublic static getInstance(url?: string): TrackingEvent {\r\n\t\tif (!TrackingEvent.instance) {\r\n\t\t\tTrackingEvent.instance = new TrackingEvent();\r\n\t\t}\r\n\r\n\t\treturn TrackingEvent.instance;\r\n\t}\r\n\r\n\t/**\r\n\t * Finally, any singleton should define some business logic, which can be\r\n\t * executed on its instance.\r\n\t */\r\n\r\n\tpublic setTrackingURL(url: string) {\r\n\t\tthis.trackingURL = url;\r\n\t}\r\n\r\n\tpublic getTrackingURL() {\r\n\t\treturn this.trackingURL;\r\n\t}\r\n\r\n\tpublic setClientGUID(guid: string) {\r\n\t\tthis.clientGUID = guid;\r\n\t}\r\n\r\n\tpublic getClientGUID() {\r\n\t\treturn this.getClientGUID;\r\n\t}\r\n\r\n\tpublic getVisitorExpiry() {\r\n\t\tconst d = new Date();\r\n\t\t// 1 year\r\n\t\td.setTime(d.getTime() + 360 * 24 * 60 * 60 * 1000);\r\n\t\treturn d.toUTCString();\r\n\t}\r\n\r\n\tprivate getVisitExpiry() {\r\n\t\tconst d = new Date();\r\n\t\t// 4 hours\r\n\t\td.setTime(d.getTime() + 4 * 60 * 60 * 1000);\r\n\t\treturn d.toUTCString();\r\n\t}\r\n\r\n\tpublic setLanguage(language) {\r\n\t\tthis.language = language;\r\n\t}\r\n\r\n\tpublic getLanguageParams() {\r\n\t\tlet params = {};\r\n\r\n\t\tif (this.language) {\r\n\t\t\tparams = {\r\n\t\t\t\tCustomDictionary: {\r\n\t\t\t\t\tlanguage: this.language,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn params;\r\n\t}\r\n\r\n\tpublic createGuid() {\r\n\t\tconst s: any[] = [];\r\n\t\tconst hexDigits = '0123456789abcdef';\r\n\t\tfor (let i = 0; i < 36; i++) {\r\n\t\t\ts[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n\t\t}\r\n\t\ts[14] = '4'; // bits 12-15 of the time_hi_and_version field to 0010\r\n\t\t// tslint:disable-next-line: no-bitwise\r\n\t\ts[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\r\n\t\ts[8] = s[13] = s[18] = s[23] = '-';\r\n\r\n\t\tconst uuid = s.join('');\r\n\t\treturn uuid;\r\n\t}\r\n\r\n\tpublic setTrackConfig(value: any) {\r\n\t\tthis.trackConfig = value;\r\n\t}\r\n\r\n\tpublic getCookie(name) {\r\n\t\tconst nameEQ = name + '=';\r\n\t\tconst ca = document.cookie.split(';');\r\n\t\t// tslint:disable-next-line: prefer-for-of\r\n\t\tfor (let i = 0; i < ca.length; i++) {\r\n\t\t\tlet c = ca[i];\r\n\t\t\twhile (c.charAt(0) === ' ') {\r\n\t\t\t\tc = c.substring(1, c.length);\r\n\t\t\t}\r\n\t\t\tif (c.indexOf(nameEQ) === 0) {\r\n\t\t\t\treturn c.substring(nameEQ.length, c.length);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic setCookie(name, value, expiry?) {\r\n\t\tlet expires;\r\n\t\tif (expiry) {\r\n\t\t\texpires = '; expires=' + expiry;\r\n\t\t} else {\r\n\t\t\texpires = '';\r\n\t\t}\r\n\t\tdocument.cookie = name + '=' + value + expires + '; path=/';\r\n\t}\r\n\r\n\tprivate writePageLoad(pageType) {\r\n\t\tconst c = document.documentElement;\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.pageLoad,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tPageTypeId: P_T[pageType],\r\n\t\t\t\t\tRequestPath: window.location.pathname,\r\n\t\t\t\t\tQs: window.location.search,\r\n\t\t\t\t\tViewportHeight: c.clientHeight,\r\n\t\t\t\t\tViewportWidth: c.clientWidth,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeSearchTracking(trackingId, typeId, keyword) {\r\n\t\tconst guid = this.createGuid();\r\n\r\n\t\tif (typeId === SearchType.Initial) {\r\n\t\t\tthis.setCookie('hawk_query_id', guid);\r\n\t\t}\r\n\r\n\t\tconst queryId = this.getCookie('hawk_query_id') || guid;\r\n\r\n\t\tconst c = document.documentElement;\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.search,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tQueryId: queryId,\r\n\t\t\t\t\tTrackingId: trackingId,\r\n\t\t\t\t\tTypeId: typeId,\r\n\t\t\t\t\tViewportHeight: c.clientHeight,\r\n\t\t\t\t\tViewportWidth: c.clientWidth,\r\n\t\t\t\t\tkeyword,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeClick(event, uniqueId, trackingId, url) {\r\n\t\tconst c = document.documentElement;\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.click,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tUrl: url,\r\n\t\t\t\t\tQs: window.location.search,\r\n\t\t\t\t\tRequestPath: window.location.pathname,\r\n\t\t\t\t\tTrackingId: trackingId,\r\n\t\t\t\t\tUniqueId: uniqueId,\r\n\t\t\t\t\tViewportHeight: c.clientHeight,\r\n\t\t\t\t\tViewportWidth: c.clientWidth,\r\n\t\t\t\t\tScrollX: window.scrollX,\r\n\t\t\t\t\tScrollY: window.scrollY,\r\n\t\t\t\t\tMouseX: event.clientX,\r\n\t\t\t\t\tMouseY: event.clientY,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeBannerClick(bannerId, campaignId, trackingId) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.bannerClick,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tCampaignId: campaignId,\r\n\t\t\t\t\tBannerId: bannerId,\r\n\t\t\t\t\tTrackingId: trackingId,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeBannerImpression(bannerId, campaignId, trackingId) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.bannerImpression,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tCampaignId: campaignId,\r\n\t\t\t\t\tBannerId: bannerId,\r\n\t\t\t\t\tTrackingId: trackingId,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\tprivate writeSale(orderNo, itemList, total, subTotal, tax, currency) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.sale,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tOrderNo: orderNo,\r\n\t\t\t\t\tItemList: itemList,\r\n\t\t\t\t\tTotal: total,\r\n\t\t\t\t\tTax: tax,\r\n\t\t\t\t\tSubTotal: subTotal,\r\n\t\t\t\t\tCurrency: currency,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\tprivate writeAdd2Cart(uniqueId, price, quantity, currency) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.addToCart,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tUniqueId: uniqueId,\r\n\t\t\t\t\tQuantity: quantity,\r\n\t\t\t\t\tPrice: price,\r\n\t\t\t\t\tCurrency: currency,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeAdd2CartMultiple(args) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.add2CartMultiple,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tItemsList: args,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeRate(uniqueId, value) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.rate,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tUniqueId: uniqueId,\r\n\t\t\t\t\tValue: value,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeRecommendationClick(widgetGuid, uniqueId, itemIndex, requestId) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.recommendationClick,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tItemIndex: itemIndex,\r\n\t\t\t\t\tRequestId: requestId,\r\n\t\t\t\t\tUniqueId: uniqueId,\r\n\t\t\t\t\tWidgetGuid: widgetGuid,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate writeAutoCompleteClick(keyword, suggestType, name, url) {\r\n\t\tconst pl = {\r\n\t\t\tEventType: E_T.autoCompleteClick,\r\n\t\t\tEventData: btoa(\r\n\t\t\t\tJSON.stringify({\r\n\t\t\t\t\tKeyword: keyword,\r\n\t\t\t\t\tName: name,\r\n\t\t\t\t\tSuggestType: suggestType,\r\n\t\t\t\t\tUrl: url,\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t};\r\n\t\tthis.mr(pl);\r\n\t}\r\n\r\n\tprivate mr(data) {\r\n\t\tlet visitId = this.getCookie('hawk_visit_id');\r\n\t\tlet visitorId = this.getCookie('hawk_visitor_id');\r\n\t\tconst languageParams = this.getLanguageParams();\r\n\r\n\t\tif (!visitId) {\r\n\t\t\tthis.setCookie('hawk_visit_id', this.createGuid(), this.getVisitExpiry());\r\n\t\t\tvisitId = this.getCookie('hawk_visit_id');\r\n\t\t}\r\n\r\n\t\tif (!visitorId) {\r\n\t\t\tthis.setCookie('hawk_visitor_id', this.createGuid(), this.getVisitorExpiry());\r\n\t\t\tvisitorId = this.getCookie('hawk_visitor_id');\r\n\t\t}\r\n\r\n\t\tconst pl = Object.assign(\r\n\t\t\t{\r\n\t\t\t\tClientGuid: this.clientGUID,\r\n\t\t\t\tVisitId: visitId,\r\n\t\t\t\tVisitorId: visitorId,\r\n\t\t\t\t// TrackingProperties: hs.Context,\r\n\t\t\t\t// CustomDictionary: hs.Context.Custom,\r\n\t\t\t},\r\n\t\t\tlanguageParams,\r\n\t\t\tdata\r\n\t\t);\r\n\r\n\t\tfetch(this.trackingURL, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\tbody: JSON.stringify(pl),\r\n\t\t}).catch(error => {\r\n\t\t\tconsole.error('Error:', error);\r\n\t\t});\r\n\t}\r\n\r\n\tpublic track(eventName, args) {\r\n\t\tif (!this.trackingURL || !this.clientGUID || !this.isEnabled(eventName)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tswitch (eventName.toLowerCase()) {\r\n\t\t\tcase 'pageload':\r\n\t\t\t\t// HawkSearch.Context.add(\"uniqueid\", \"123456789\");\r\n\t\t\t\treturn this.writePageLoad(args.pageType);\r\n\t\t\tcase 'searchtracking':\r\n\t\t\t\t// HawkSearch.Tracking.track(\"searchtracking\", {trackingId:\"a9bd6e50-e434-45b9-9f66-489eca07ad0a\", typeId: HawkSearch.Tracking.SearchType.Initial});\r\n\t\t\t\t// HawkSearch.Tracking.track(\"searchtracking\", {trackingId:\"a9bd6e50-e434-45b9-9f66-489eca07ad0a\", typeId: HawkSearch.Tracking.SearchType.Refinement});\r\n\t\t\t\treturn this.writeSearchTracking(args.trackingId, args.typeId, args.keyword); // CHANGED\r\n\t\t\tcase 'click':\r\n\t\t\t\t// HawkSearch.Tracking.track('click',{event: e, uniqueId: \"33333\", trackingId: \"75a0801a-a93c-4bcb-81f1-f4b011f616e3\"});\r\n\t\t\t\treturn this.writeClick(args.event, args.uniqueId, args.trackingId, args.url); // CHANGED\r\n\t\t\tcase 'bannerclick':\r\n\t\t\t\t// HawkSearch.Tracking.track('bannerclick',{bannerId: 1, campaignId: 2, trackingId:\"2d652a1e-2e05-4414-9d76-51979109f724\"});\r\n\t\t\t\treturn this.writeBannerClick(args.bannerId, args.campaignId, args.trackingId); // CHANGED\r\n\t\t\tcase 'bannerimpression':\r\n\t\t\t\t// HawkSearch.Tracking.track('bannerimpression',{bannerId: \"2\", campaignId: \"2\", trackingId:\"2d652a1e-2e05-4414-9d76-51979109f724\"});\r\n\t\t\t\treturn this.writeBannerImpression(args.bannerId, args.campaignId, args.trackingId); // CHANGED\r\n\t\t\tcase 'sale':\r\n\t\t\t\t// HawkSearch.Tracking.track('sale', {orderNo: 'order_123',itemList: [{uniqueid: '123456789', itemPrice: 12.99, quantity: 2}], total: 25.98, subTotal: 22, tax: 3.98, currency: 'USD'});\r\n\t\t\t\treturn this.writeSale(args.orderNo, args.itemList, args.total, args.subTotal, args.tax, args.currency);\r\n\t\t\tcase 'add2cart':\r\n\t\t\t\t// HawkSearch.Tracking.track('add2cart',{uniqueId: '123456789', price: 19.99, quantity: 3, currency: 'USD'});\r\n\t\t\t\treturn this.writeAdd2Cart(args.uniqueId, args.price, args.quantity, args.currency);\r\n\t\t\tcase 'add2cartmultiple':\r\n\t\t\t\t// HawkSearch.Tracking.track('add2cartmultiple', [{uniqueId: '123456789',price: 15.97,quantity: 1,currency: 'USD'},{uniqueId: '987465321', price: 18.00, quantity: 1, currency: 'USD'}]);\r\n\t\t\t\treturn this.writeAdd2CartMultiple(args);\r\n\t\t\tcase 'rate':\r\n\t\t\t\t// HawkSearch.Tracking.track('rate', {uniqueId: '123456789',value: 3.00});\r\n\t\t\t\treturn this.writeRate(args.uniqueId, args.value);\r\n\t\t\tcase 'recommendationclick':\r\n\t\t\t\t// HawkSearch.Tracking.track('recommendationclick',{uniqueId: \"223222\", itemIndex: \"222\", widgetGuid:\"2d652a1e-2e05-4414-9d76-51979109f724\", requestId:\"2d652a1e-2e05-4414-9d76-51979109f724\"});\r\n\t\t\t\treturn this.writeRecommendationClick(args.widgetGuid, args.uniqueId, args.itemIndex, args.requestId);\r\n\t\t\tcase 'autocompleteclick':\r\n\t\t\t\t// HawkSearch.Tracking.track('autocompleteclick',{keyword: \"test\", suggestType: HawkSearch.Tracking.SuggestType.PopularSearches, name:\"tester\", url:\"/test\"});\r\n\t\t\t\treturn this.writeAutoCompleteClick(args.keyword, args.suggestType, args.name, args.url); // CHANGED\r\n\t\t}\r\n\t}\r\n\r\n\tpublic isEnabled(eventName) {\r\n\t\treturn Boolean(\r\n\t\t\tAvailableEvents.includes(eventName) &&\r\n\t\t\t\t(!this.trackConfig || this.trackConfig.find(e => TrackEventNameMapping[e] === eventName))\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// export TrackingEvent.getInstance();\r\nexport default TrackingEvent.getInstance();\r\n","import { ClientData } from 'models/Search';\r\n\r\nexport class Request {\r\n\t/**\r\n\t * API Client Guid. Usually comes from the \"Tracking Key\" in the \"Account Info\" section of the hawk dashboard.\r\n\t */\r\n\tpublic ClientGuid: string;\r\n\r\n\t/**\r\n\t * Search term entered by a user. If keyword is not included, all items configured to be returned will be\r\n\t * returned. When this parameter is populated, the results will be matched against this term by the search\r\n\t * engine.\r\n\t */\r\n\tpublic Keyword?: string;\r\n\r\n\t/**\r\n\t * This is used by the Hawksearch Preview to set to true will display elements in a preview mode.\r\n\t *\r\n\t * You can use this if you desire additional score information returned.\r\n\t */\r\n\tpublic IsInPreview?: boolean;\r\n\r\n\tpublic Type?: 'Category' | 'Product' | 'Content' | 'Popular';\r\n\r\n\t/** The maximum number of results to return for selected @see Type */\r\n\tpublic ProductCount?: number;\r\n\r\n\t/** Flag set to true will display also full Document object from Elastic for Products and Content suggestions. */\r\n\tpublic DisplayFullResponse?: boolean;\r\n\r\n\t/**\r\n\t * An array of field names that will be returned in the response. If provided, only the fields listed will\r\n\t * be returned. If no FieldOverride value is sent, the Workbench configuration will be used.\r\n\t *\r\n\t * If the Skip from Custom flag is turned on for a field, it will not be returned in the response, even if\r\n\t * set in the FieldOverride parameter.\r\n\t */\r\n\tpublic FieldOverride?: string[];\r\n\r\n\t/** Client data. */\r\n\tpublic ClientData?: ClientData;\r\n\r\n\tpublic IndexName?: string;\r\n\r\n\tpublic FacetSelections?: { [key: string]: string[] | undefined };\r\n}\r\n","import { Suggestion, SuggestionType, SuggestionStrategy } from './Suggestion';\r\nimport { ControllerStateAndHelpers } from 'downshift';\r\n\r\nexport class Category extends Suggestion {\r\n\t/** Display name of category (example: Men &raquo; Jackets). */\r\n\tpublic Value: string;\r\n\t/**\r\n\t * URL for displaying contents of the category, ex:\r\n\t * http://dev.hawksearch.net/sites/elasticdemo?department_nest=Jackets_4\r\n\t */\r\n\tpublic Url: string;\r\n\r\n\tpublic constructor(init: Category) {\r\n\t\tsuper(SuggestionType.Category);\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n\r\nexport class CategoryStrategy implements SuggestionStrategy {\r\n\tpublic handleItemChange(item: Category, downshift: ControllerStateAndHelpers<Category>): void {\r\n\t\tlocation.assign(item.Url);\r\n\t}\r\n\r\n\tpublic toString(item: Category): string {\r\n\t\treturn this ? item.Value : '';\r\n\t}\r\n}\r\n","import { Result } from 'models/Search';\r\nimport { Suggestion, SuggestionStrategy, SuggestionType } from './Suggestion';\r\nimport { ControllerStateAndHelpers } from 'downshift';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\n\r\nexport class Product extends Suggestion {\r\n\t/** Name of the item (if applicable). */\r\n\tpublic ProductName: string;\r\n\r\n\t/* Sku of the item (if applicable). */\r\n\tpublic Sku: string;\r\n\r\n\t/** URL of image of the item (if applicable). */\r\n\tpublic Thumb: string;\r\n\r\n\t/** URL of product page (if applicable). */\r\n\tpublic Url: string;\r\n\r\n\t/** HTML to display the item in autocomplete. */\r\n\tpublic Html: string;\r\n\r\n\t/**\r\n\t * This will only be populated if the request parameter @see Request.DisplayFullResponse is sent\r\n\t * as `true`.\r\n\t */\r\n\tpublic Results: Result;\r\n\r\n\tpublic constructor(init: Product) {\r\n\t\tsuper(SuggestionType.Product);\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n\r\nexport class ProductStrategy implements SuggestionStrategy {\r\n\tpublic handleItemChange(item: Product, downshift: ControllerStateAndHelpers<Product>): void {\r\n\t\tlocation.assign(item.Url);\r\n\t}\r\n\r\n\tpublic toString(item: Product): string {\r\n\t\treturn this ? item.ProductName : '';\r\n\t}\r\n}\r\n","import { Result } from 'models/Search';\r\nimport { SuggestionType, Suggestion, SuggestionStrategy } from './Suggestion';\r\nimport { ControllerStateAndHelpers } from 'downshift';\r\n\r\nexport class Content extends Suggestion {\r\n\t/** Display label for the content item in Autocomplete. */\r\n\tpublic Value: string;\r\n\r\n\t/** The URL for the link created. */\r\n\tpublic Url: string;\r\n\r\n\t/** The display label in HTML format, if applicable. */\r\n\tpublic Html: string;\r\n\r\n\tpublic Results: Result;\r\n\r\n\tpublic constructor(init: Content) {\r\n\t\tsuper(SuggestionType.Content);\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n\r\nexport class ContentStrategy implements SuggestionStrategy {\r\n\tpublic handleItemChange(item: Content, downshift: ControllerStateAndHelpers<Content>): void {\r\n\t\tlocation.assign(item.Url);\r\n\t}\r\n\r\n\tpublic toString(item: Content): string {\r\n\t\treturn this ? item.Value : '';\r\n\t}\r\n}\r\n","import { SuggestionType, Suggestion, SuggestionStrategy } from './Suggestion';\r\nimport { ControllerStateAndHelpers } from 'downshift';\r\n\r\nexport class Popular extends Suggestion {\r\n\t/** Display label for the popular search term. */\r\n\tpublic Value: string;\r\n\r\n\t/** The URL for the link created. */\r\n\tpublic Url: string;\r\n\r\n\tpublic constructor(init: Popular) {\r\n\t\tsuper(SuggestionType.Popular);\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n\r\nexport class PopularStrategy implements SuggestionStrategy {\r\n\tpublic handleItemChange(item: Popular, downshift: ControllerStateAndHelpers<Popular>): void {\r\n\t\tlocation.assign(item.Url);\r\n\t}\r\n\r\n\tpublic toString(item: Popular): string {\r\n\t\treturn this ? item.Value : '';\r\n\t}\r\n}\r\n","import { Category } from './Category';\r\nimport { Product } from './Product';\r\nimport { Content } from './Content';\r\nimport { Popular } from './Popular';\r\n\r\nexport class Response {\r\n\t/** Number of products that would be in search results if search was executed. */\r\n\tpublic Count: number;\r\n\t/** Number of content items that would be in search results if search was executed.  */\r\n\tpublic ContentCount: number;\r\n\r\n\t/**\r\n\t * Pairs of display values and URLs for matching category names.  The number of categories returned\r\n\t * is configured in the Hawksearch Workbench unless overridden by the request parameters.\r\n\t */\r\n\tpublic Categories: Category[];\r\n\r\n\tpublic Products: Product[];\r\n\r\n\t/**\r\n\t * A set of objects for each content item returned. The number returned is configured in the\r\n\t * Hawksearch Workbench > Keyword Search > Auto-complete > Update Top Content.\r\n\t */\r\n\tpublic Content: Content[];\r\n\r\n\t/**\r\n\t * A set of Value and Url for each popular search term. The definition of Popular can be defined in\r\n\t * the Hawksearch Workbench > Keyword Search > Auto-complete > Update Popular Searches.\r\n\t */\r\n\tpublic Popular: Popular[];\r\n\r\n\t/** Search website URL to be used to complete links. */\r\n\tpublic SearchWebsiteUrl: string;\r\n\r\n\t/** The name of the parameter used to pass the keyword entered by user. */\r\n\tpublic KeywordField: string;\r\n\r\n\t/**\r\n\t * Will be included in the response if there are results to display. The `CategoryHeading` contains\r\n\t * the text to display above the list of categories to display in Autocomplete.\r\n\t */\r\n\tpublic CategoryHeading?: string;\r\n\r\n\t/**\r\n\t * Will be included in the response if there are results to display. The `ContentHeading` contains\r\n\t * the text to display above the list of content items to display in Autocomplete.\r\n\t */\r\n\tpublic ContentHeading?: string;\r\n\r\n\t/**\r\n\t * Will be included in the response if there are results to display. The `ProductHeading` contains\r\n\t * the text to display above the list of products to display in Autocomplete.\r\n\t */\r\n\tpublic ProductHeading?: string;\r\n\r\n\t/**\r\n\t * Will be included in the response if there are results to display. The `PopularHeading` contains\r\n\t * the text to display above the list of popular search terms to display in Autocomplete.\r\n\t */\r\n\tpublic PopularHeading?: string;\r\n\r\n\t/**\r\n\t * Will be included in the response if there are results to display. The `ViewAllButtonLabel` contains\r\n\t * the text to display for the link to return all results from searching with the term entered.\r\n\t */\r\n\tpublic ViewAllButtonLabel?: string;\r\n\r\n\tpublic constructor(init: Response) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tthis.Categories = init.Categories.map(r => new Category(r));\r\n\t\tthis.Products = init.Products.map(r => new Product(r));\r\n\t\tthis.Popular = init.Popular.map(r => new Popular(r));\r\n\t\tthis.Content = init.Content.map(r => new Content(r));\r\n\t}\r\n}\r\n\r\nexport interface ResponseProps {\r\n\tCount: number;\r\n\tContentCount: number;\r\n\tCategories: Category[];\r\n\tProducts: Product[];\r\n\tContent: Content[];\r\n\tPopular: Popular[];\r\n\tSearchWebsiteUrl: string;\r\n\tKeywordField: string;\r\n\tCategoryHeading?: string;\r\n\tContentHeading?: string;\r\n\tProductHeading?: string;\r\n\tPopularHeading?: string;\r\n\tViewAllButtonLabel?: string;\r\n}\r\n","class AuthToken {\r\n\tprivate static instance: AuthToken;\r\n\tprivate refreshToken: string;\r\n\tprivate accessToken: string;\r\n\r\n\t/**\r\n\t * The Singleton's constructor should always be private to prevent direct\r\n\t * construction calls with the `new` operator.\r\n\t */\r\n\tprivate constructor() {}\r\n\r\n\t/**\r\n\t * The static method that controls the access to the singleton instance.\r\n\t *\r\n\t * This implementation let you subclass the Singleton class while keeping\r\n\t * just one instance of each subclass around.\r\n\t */\r\n\tpublic static getInstance(url?: string): AuthToken {\r\n\t\tif (!AuthToken.instance) {\r\n\t\t\tAuthToken.instance = new AuthToken();\r\n\t\t}\r\n\r\n\t\treturn AuthToken.instance;\r\n\t}\r\n\r\n\tpublic setTokens(accessToken: string, refreshToken: string) {\r\n\t\tthis.refreshToken = refreshToken;\r\n\t\tthis.accessToken = accessToken;\r\n\t}\r\n\r\n\tpublic getTokens() {\r\n\t\treturn {\r\n\t\t\trefreshToken: this.refreshToken,\r\n\t\t\taccessToken: this.accessToken,\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport default AuthToken.getInstance();\r\n","export enum ContentType {\r\n\tImage = 'image',\r\n\tWidget = 'widget',\r\n\tFeatured = 'featured',\r\n\tCustom = 'custom',\r\n\tLandingPage = 'landingPage',\r\n}\r\n","var map = {\n\t\"./af\": 93,\n\t\"./af.js\": 93,\n\t\"./ar\": 94,\n\t\"./ar-dz\": 95,\n\t\"./ar-dz.js\": 95,\n\t\"./ar-kw\": 96,\n\t\"./ar-kw.js\": 96,\n\t\"./ar-ly\": 97,\n\t\"./ar-ly.js\": 97,\n\t\"./ar-ma\": 98,\n\t\"./ar-ma.js\": 98,\n\t\"./ar-sa\": 99,\n\t\"./ar-sa.js\": 99,\n\t\"./ar-tn\": 100,\n\t\"./ar-tn.js\": 100,\n\t\"./ar.js\": 94,\n\t\"./az\": 101,\n\t\"./az.js\": 101,\n\t\"./be\": 102,\n\t\"./be.js\": 102,\n\t\"./bg\": 103,\n\t\"./bg.js\": 103,\n\t\"./bm\": 104,\n\t\"./bm.js\": 104,\n\t\"./bn\": 105,\n\t\"./bn-bd\": 106,\n\t\"./bn-bd.js\": 106,\n\t\"./bn.js\": 105,\n\t\"./bo\": 107,\n\t\"./bo.js\": 107,\n\t\"./br\": 108,\n\t\"./br.js\": 108,\n\t\"./bs\": 109,\n\t\"./bs.js\": 109,\n\t\"./ca\": 110,\n\t\"./ca.js\": 110,\n\t\"./cs\": 111,\n\t\"./cs.js\": 111,\n\t\"./cv\": 112,\n\t\"./cv.js\": 112,\n\t\"./cy\": 113,\n\t\"./cy.js\": 113,\n\t\"./da\": 114,\n\t\"./da.js\": 114,\n\t\"./de\": 115,\n\t\"./de-at\": 116,\n\t\"./de-at.js\": 116,\n\t\"./de-ch\": 117,\n\t\"./de-ch.js\": 117,\n\t\"./de.js\": 115,\n\t\"./dv\": 118,\n\t\"./dv.js\": 118,\n\t\"./el\": 119,\n\t\"./el.js\": 119,\n\t\"./en-au\": 120,\n\t\"./en-au.js\": 120,\n\t\"./en-ca\": 121,\n\t\"./en-ca.js\": 121,\n\t\"./en-gb\": 122,\n\t\"./en-gb.js\": 122,\n\t\"./en-ie\": 123,\n\t\"./en-ie.js\": 123,\n\t\"./en-il\": 124,\n\t\"./en-il.js\": 124,\n\t\"./en-in\": 125,\n\t\"./en-in.js\": 125,\n\t\"./en-nz\": 126,\n\t\"./en-nz.js\": 126,\n\t\"./en-sg\": 127,\n\t\"./en-sg.js\": 127,\n\t\"./eo\": 128,\n\t\"./eo.js\": 128,\n\t\"./es\": 129,\n\t\"./es-do\": 130,\n\t\"./es-do.js\": 130,\n\t\"./es-mx\": 131,\n\t\"./es-mx.js\": 131,\n\t\"./es-us\": 132,\n\t\"./es-us.js\": 132,\n\t\"./es.js\": 129,\n\t\"./et\": 133,\n\t\"./et.js\": 133,\n\t\"./eu\": 134,\n\t\"./eu.js\": 134,\n\t\"./fa\": 135,\n\t\"./fa.js\": 135,\n\t\"./fi\": 136,\n\t\"./fi.js\": 136,\n\t\"./fil\": 137,\n\t\"./fil.js\": 137,\n\t\"./fo\": 138,\n\t\"./fo.js\": 138,\n\t\"./fr\": 139,\n\t\"./fr-ca\": 140,\n\t\"./fr-ca.js\": 140,\n\t\"./fr-ch\": 141,\n\t\"./fr-ch.js\": 141,\n\t\"./fr.js\": 139,\n\t\"./fy\": 142,\n\t\"./fy.js\": 142,\n\t\"./ga\": 143,\n\t\"./ga.js\": 143,\n\t\"./gd\": 144,\n\t\"./gd.js\": 144,\n\t\"./gl\": 145,\n\t\"./gl.js\": 145,\n\t\"./gom-deva\": 146,\n\t\"./gom-deva.js\": 146,\n\t\"./gom-latn\": 147,\n\t\"./gom-latn.js\": 147,\n\t\"./gu\": 148,\n\t\"./gu.js\": 148,\n\t\"./he\": 149,\n\t\"./he.js\": 149,\n\t\"./hi\": 150,\n\t\"./hi.js\": 150,\n\t\"./hr\": 151,\n\t\"./hr.js\": 151,\n\t\"./hu\": 152,\n\t\"./hu.js\": 152,\n\t\"./hy-am\": 153,\n\t\"./hy-am.js\": 153,\n\t\"./id\": 154,\n\t\"./id.js\": 154,\n\t\"./is\": 155,\n\t\"./is.js\": 155,\n\t\"./it\": 156,\n\t\"./it-ch\": 157,\n\t\"./it-ch.js\": 157,\n\t\"./it.js\": 156,\n\t\"./ja\": 158,\n\t\"./ja.js\": 158,\n\t\"./jv\": 159,\n\t\"./jv.js\": 159,\n\t\"./ka\": 160,\n\t\"./ka.js\": 160,\n\t\"./kk\": 161,\n\t\"./kk.js\": 161,\n\t\"./km\": 162,\n\t\"./km.js\": 162,\n\t\"./kn\": 163,\n\t\"./kn.js\": 163,\n\t\"./ko\": 164,\n\t\"./ko.js\": 164,\n\t\"./ku\": 165,\n\t\"./ku.js\": 165,\n\t\"./ky\": 166,\n\t\"./ky.js\": 166,\n\t\"./lb\": 167,\n\t\"./lb.js\": 167,\n\t\"./lo\": 168,\n\t\"./lo.js\": 168,\n\t\"./lt\": 169,\n\t\"./lt.js\": 169,\n\t\"./lv\": 170,\n\t\"./lv.js\": 170,\n\t\"./me\": 171,\n\t\"./me.js\": 171,\n\t\"./mi\": 172,\n\t\"./mi.js\": 172,\n\t\"./mk\": 173,\n\t\"./mk.js\": 173,\n\t\"./ml\": 174,\n\t\"./ml.js\": 174,\n\t\"./mn\": 175,\n\t\"./mn.js\": 175,\n\t\"./mr\": 176,\n\t\"./mr.js\": 176,\n\t\"./ms\": 177,\n\t\"./ms-my\": 178,\n\t\"./ms-my.js\": 178,\n\t\"./ms.js\": 177,\n\t\"./mt\": 179,\n\t\"./mt.js\": 179,\n\t\"./my\": 180,\n\t\"./my.js\": 180,\n\t\"./nb\": 181,\n\t\"./nb.js\": 181,\n\t\"./ne\": 182,\n\t\"./ne.js\": 182,\n\t\"./nl\": 183,\n\t\"./nl-be\": 184,\n\t\"./nl-be.js\": 184,\n\t\"./nl.js\": 183,\n\t\"./nn\": 185,\n\t\"./nn.js\": 185,\n\t\"./oc-lnc\": 186,\n\t\"./oc-lnc.js\": 186,\n\t\"./pa-in\": 187,\n\t\"./pa-in.js\": 187,\n\t\"./pl\": 188,\n\t\"./pl.js\": 188,\n\t\"./pt\": 189,\n\t\"./pt-br\": 190,\n\t\"./pt-br.js\": 190,\n\t\"./pt.js\": 189,\n\t\"./ro\": 191,\n\t\"./ro.js\": 191,\n\t\"./ru\": 192,\n\t\"./ru.js\": 192,\n\t\"./sd\": 193,\n\t\"./sd.js\": 193,\n\t\"./se\": 194,\n\t\"./se.js\": 194,\n\t\"./si\": 195,\n\t\"./si.js\": 195,\n\t\"./sk\": 196,\n\t\"./sk.js\": 196,\n\t\"./sl\": 197,\n\t\"./sl.js\": 197,\n\t\"./sq\": 198,\n\t\"./sq.js\": 198,\n\t\"./sr\": 199,\n\t\"./sr-cyrl\": 200,\n\t\"./sr-cyrl.js\": 200,\n\t\"./sr.js\": 199,\n\t\"./ss\": 201,\n\t\"./ss.js\": 201,\n\t\"./sv\": 202,\n\t\"./sv.js\": 202,\n\t\"./sw\": 203,\n\t\"./sw.js\": 203,\n\t\"./ta\": 204,\n\t\"./ta.js\": 204,\n\t\"./te\": 205,\n\t\"./te.js\": 205,\n\t\"./tet\": 206,\n\t\"./tet.js\": 206,\n\t\"./tg\": 207,\n\t\"./tg.js\": 207,\n\t\"./th\": 208,\n\t\"./th.js\": 208,\n\t\"./tk\": 209,\n\t\"./tk.js\": 209,\n\t\"./tl-ph\": 210,\n\t\"./tl-ph.js\": 210,\n\t\"./tlh\": 211,\n\t\"./tlh.js\": 211,\n\t\"./tr\": 212,\n\t\"./tr.js\": 212,\n\t\"./tzl\": 213,\n\t\"./tzl.js\": 213,\n\t\"./tzm\": 214,\n\t\"./tzm-latn\": 215,\n\t\"./tzm-latn.js\": 215,\n\t\"./tzm.js\": 214,\n\t\"./ug-cn\": 216,\n\t\"./ug-cn.js\": 216,\n\t\"./uk\": 217,\n\t\"./uk.js\": 217,\n\t\"./ur\": 218,\n\t\"./ur.js\": 218,\n\t\"./uz\": 219,\n\t\"./uz-latn\": 220,\n\t\"./uz-latn.js\": 220,\n\t\"./uz.js\": 219,\n\t\"./vi\": 221,\n\t\"./vi.js\": 221,\n\t\"./x-pseudo\": 222,\n\t\"./x-pseudo.js\": 222,\n\t\"./yo\": 223,\n\t\"./yo.js\": 223,\n\t\"./zh-cn\": 224,\n\t\"./zh-cn.js\": 224,\n\t\"./zh-hk\": 225,\n\t\"./zh-hk.js\": 225,\n\t\"./zh-mo\": 226,\n\t\"./zh-mo.js\": 226,\n\t\"./zh-tw\": 227,\n\t\"./zh-tw.js\": 227\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 433;","import axios, { CancelToken, AxiosInstance } from 'axios';\r\nimport { Request as SearchRequest, Response as SearchResponse, Result } from 'models/Search';\r\nimport { Request as CompareItemRequest, Response as CompareDataResponse } from 'models/CompareItems';\r\nimport { Request as AutocompleteRequest, Response as AutocompleteResponse } from 'models/Autocomplete';\r\nimport { Request as PinItemRequest } from 'models/PinItems';\r\nimport { Request as ProductDetailsRequest, Response as ProductDetailsResponse } from 'models/ProductDetails';\r\nimport { Request as SortingOrderRequest } from 'models/PinItemsOrder';\r\nimport { Request as RebuildIndexRequest } from 'models/RebuildIndex';\r\nimport { HawksearchConfig } from 'types/HawksearchConfig';\r\nimport AuthToken from 'components/AuthToken';\r\n\r\nclass HawkClient {\r\n\tprivate baseUrl: string;\r\n\tprivate searchUrl: string;\r\n\tprivate dashboardUrl: string;\r\n\tprivate autocompleteUrl: string;\r\n\tprivate compareItemsURL: string;\r\n\tprivate refreshTokenURL: string;\r\n\tprivate pinItemURL: string;\r\n\tprivate updatePinOrderURL: string;\r\n\tprivate rebuildIndexURL: string;\r\n\tprivate productDetailsURL: string;\r\n\tprivate axiosInstance: AxiosInstance = axios.create();\r\n\r\n\tconstructor(config: HawksearchConfig) {\r\n\t\tthis.baseUrl = config.apiUrl || 'https://searchapi-dev.hawksearch.net';\r\n\t\tthis.dashboardUrl = config.dashboardUrl || 'http://test.hawksearch.net/';\r\n\t\tthis.searchUrl = config.searchUrl || '/api/v2/search';\r\n\t\tthis.autocompleteUrl = config.autocompleteUrl || '/api/autocomplete';\r\n\t\tthis.compareItemsURL = config.compareItemsURL || '/api/compare';\r\n\t\tthis.refreshTokenURL = config.refreshTokenURL || '/api/internal-preview/refresh-token/';\r\n\t\tthis.pinItemURL = config.pinItemURL || '/api/pinning/set-pinning/';\r\n\t\tthis.updatePinOrderURL = config.updatePinOrderURL || '/api/pinning/update-pin-order/';\r\n\t\tthis.rebuildIndexURL = config.rebuildIndexURL || '/api/internal-preview/rebuild-percolator';\r\n\t\tthis.productDetailsURL = config.productDetailsURL || '/api/internal-preview/item-detail';\r\n\r\n\t\tthis.axiosInstance.interceptors.request.use(\r\n\t\t\tconf => {\r\n\t\t\t\tconst accessToken = AuthToken.getTokens().accessToken;\r\n\t\t\t\tif ((conf.url || '').indexOf('refresh-token') !== -1 || !accessToken) {\r\n\t\t\t\t\tdelete conf.headers.common.Authorization;\r\n\t\t\t\t\tdelete conf.headers.common.ClientGuid;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconf.headers.Authorization = `Bearer ${accessToken}`;\r\n\t\t\t\t\tconf.headers.ClientGuid = config.clientGuid;\r\n\t\t\t\t}\r\n\t\t\t\treturn conf;\r\n\t\t\t},\r\n\t\t\terror => {\r\n\t\t\t\tPromise.reject(error);\r\n\t\t\t}\r\n\t\t);\r\n\t\tthis.axiosInstance.interceptors.response.use(\r\n\t\t\tresponse => response,\r\n\t\t\terror => {\r\n\t\t\t\tconst originalRequest = error.config;\r\n\r\n\t\t\t\tif (error.response && error.response.status === 401 && !originalRequest._retry) {\r\n\t\t\t\t\toriginalRequest._retry = true;\r\n\t\t\t\t\tconst token = AuthToken.getTokens();\r\n\t\t\t\t\treturn this.axiosInstance\r\n\t\t\t\t\t\t.post(new URL(this.refreshTokenURL, this.baseUrl).href, {\r\n\t\t\t\t\t\t\tClientGuid: config.clientGuid,\r\n\t\t\t\t\t\t\tToken: token.accessToken,\r\n\t\t\t\t\t\t\tRefreshToken: token.refreshToken,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\t\t\tAuthToken.setTokens(res.data.Token, res.data.RefreshToken);\r\n\t\t\t\t\t\t\t\tthis.axiosInstance.defaults.headers.common.Authorization = 'Bearer ' + res.data.Token;\r\n\t\t\t\t\t\t\t\treturn this.axiosInstance(originalRequest);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn Promise.reject(error);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tpublic async pinItem(request: PinItemRequest, cancellationToken?: CancelToken): Promise<string | null> {\r\n\t\tconst result = await this.axiosInstance.post<string | null>(\r\n\t\t\tnew URL(this.pinItemURL, this.baseUrl).href,\r\n\t\t\trequest,\r\n\t\t\t{\r\n\t\t\t\tcancelToken: cancellationToken,\r\n\t\t\t}\r\n\t\t);\r\n\t\treturn result.data;\r\n\t}\r\n\r\n\tpublic async updatePinOrder(request: SortingOrderRequest, cancellationToken?: CancelToken): Promise<string | null> {\r\n\t\tconst result = await this.axiosInstance.post<string | null>(\r\n\t\t\tnew URL(this.updatePinOrderURL, this.baseUrl).href,\r\n\t\t\trequest,\r\n\t\t\t{\r\n\t\t\t\tcancelToken: cancellationToken,\r\n\t\t\t}\r\n\t\t);\r\n\t\treturn result.data;\r\n\t}\r\n\r\n\tpublic async search(request: SearchRequest, cancellationToken?: CancelToken): Promise<SearchResponse> {\r\n\t\tconst result = await this.axiosInstance.post<SearchResponse>(\r\n\t\t\tnew URL(this.searchUrl, this.baseUrl).href,\r\n\t\t\trequest,\r\n\t\t\t{\r\n\t\t\t\tcancelToken: cancellationToken,\r\n\t\t\t}\r\n\t\t);\r\n\t\treturn result.data;\r\n\t}\r\n\r\n\tpublic async rebuildIndex(request: RebuildIndexRequest, cancellationToken?: CancelToken): Promise<string | null> {\r\n\t\tconst result = await this.axiosInstance.post<string | null>(\r\n\t\t\tnew URL(this.rebuildIndexURL, this.baseUrl).href,\r\n\t\t\trequest,\r\n\t\t\t{\r\n\t\t\t\tcancelToken: cancellationToken,\r\n\t\t\t}\r\n\t\t);\r\n\t\treturn result.data;\r\n\t}\r\n\r\n\tpublic async autocomplete(\r\n\t\trequest: AutocompleteRequest,\r\n\t\tcancellationToken?: CancelToken\r\n\t): Promise<AutocompleteResponse> {\r\n\t\tconst result = await axios.post<AutocompleteResponse>(\r\n\t\t\tnew URL(this.autocompleteUrl, this.baseUrl).href,\r\n\t\t\trequest,\r\n\t\t\t{\r\n\t\t\t\tcancelToken: cancellationToken,\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\treturn result.data;\r\n\t}\r\n\r\n\tpublic async getComparedItems(\r\n\t\trequest: CompareItemRequest,\r\n\t\tcancellationToken?: CancelToken\r\n\t): Promise<CompareDataResponse> {\r\n\t\tconst result = await axios.post<CompareDataResponse>(\r\n\t\t\tnew URL(this.compareItemsURL, this.baseUrl).href,\r\n\t\t\trequest,\r\n\t\t\t{\r\n\t\t\t\tcancelToken: cancellationToken,\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\treturn result.data;\r\n\t}\r\n\r\n\tpublic async getProductDetails(\r\n\t\trequest: ProductDetailsRequest,\r\n\t\tcancellationToken?: CancelToken\r\n\t): Promise<ProductDetailsResponse> {\r\n\t\tconst result = await axios.post<Result>(new URL(this.productDetailsURL, this.baseUrl).href, request, {\r\n\t\t\tcancelToken: cancellationToken,\r\n\t\t});\r\n\t\treturn new Result(result.data);\r\n\t}\r\n}\r\n\r\nexport default HawkClient;\r\n","export class Pagination {\r\n\t/** Number of total items in the result set. */\r\n\tpublic NofResults: number;\r\n\r\n\t/** The page number returned. */\r\n\tpublic CurrentPage: number;\r\n\r\n\t/** The number of items returned for the page. */\r\n\tpublic MaxPerPage: number;\r\n\r\n\t/** The total number of pages for the result set - with the current @see MaxPerPage. */\r\n\tpublic NofPages: number;\r\n\r\n\t/** Set of pagination options */\r\n\tpublic Items: PaginationItem[];\r\n\r\n\tpublic constructor(init: Pagination) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tthis.Items = init.Items.map(i => new PaginationItem(i));\r\n\t}\r\n}\r\n\r\nexport class PaginationItem {\r\n\t/** Display label for user's pagination option (i.e. 24 per page). */\r\n\tpublic Label: string;\r\n\t/** The maximum number of items that will be returned per page when this option is selected. */\r\n\tpublic PageSize: number;\r\n\r\n\t/** Indicates if this is the option selected. Only one pagination item will have this set to `true`. */\r\n\tpublic Selected: boolean;\r\n\r\n\t/** Indicates if this is the default option. Only one pagination item will have this set to `true`. */\r\n\tpublic Default: boolean;\r\n\r\n\tpublic constructor(init: PaginationItem) {\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n","/** An object that contains the data related to the client making search or autosuggest requests. */\r\nexport class ChildResult {\r\n\t/** Number of total items in the result set. */\r\n\tpublic NofResults: number;\r\n\r\n\t/** The page number returned. */\r\n\tpublic CurrentPage: number;\r\n\r\n\t/** The number of items returned for the page. */\r\n\tpublic MaxPerPage: number;\r\n\r\n\t/** The total number of pages for the result set - with the current @see MaxPerPage. */\r\n\tpublic NofPages: number;\r\n\r\n\t/** Set of pagination options */\r\n\tpublic Items: Array<{ [field: string]: string[] }>;\r\n\r\n\tpublic Sort: string;\r\n\r\n\tpublic constructor(init: ChildResult) {\r\n\t\tObject.assign(this, init);\r\n\t}\r\n\r\n\tpublic getHittedChildAttributeValue(field: string): string | undefined {\r\n\t\tif (!this.Items || this.Items.length === 0) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tconst values = this.Items[0];\r\n\t\tif (values && values[field] && values[field].length > 0) {\r\n\t\t\treturn values[field][0];\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\t}\r\n}\r\n","import { Explain } from './Explain';\r\nimport { ChildResult } from './ChildResult';\r\n\r\nexport class Result {\r\n\t/** Unique identifier for this search result item. */\r\n\tpublic DocId: string;\r\n\r\n\t/** Calculated relevancy score. */\r\n\tpublic Score: number;\r\n\r\n\t/**\r\n\t * Contains the fields for the search result item, as an object of string keys to an array\r\n\t * of string values. The keys correspond to the name of the field within the hawk dashboard,\r\n\t * and the value of the map is an array of strings for each of the values for that field.\r\n\t */\r\n\tpublic Document?: { [field: string]: string[] };\r\n\r\n\tpublic Explain?: Explain;\r\n\r\n\tpublic IsPin: boolean;\r\n\r\n\tpublic ChildResults?: ChildResult;\r\n\r\n\tpublic BestFragment: string;\r\n\t/**\r\n\t * Returns a single document value, by the given field name. If the field does not exist in\r\n\t * the document, or has no values, then `undefined` is returned instead.\r\n\t * @param field The field within the result document to retrieve the value of.\r\n\t */\r\n\tpublic getDocumentValue(field: string): string | undefined {\r\n\t\tif (this.Document) {\r\n\t\t\tconst values = this.Document[field];\r\n\r\n\t\t\tif (values && values.length > 0) {\r\n\t\t\t\treturn values[0];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tpublic constructor(init: Result) {\r\n\t\tObject.assign(this, init);\r\n\t\tif (init.ChildResults) {\r\n\t\t\tthis.ChildResults = new ChildResult(init.ChildResults);\r\n\t\t}\r\n\t}\r\n}\r\n","export class Sorting {\r\n\t/** The sorting items. */\r\n\tpublic Items: SortingItem[];\r\n\r\n\tpublic constructor(init: Sorting) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tthis.Items = init.Items.map(i => new SortingItem(i));\r\n\t}\r\n}\r\n\r\nexport class SortingItem {\r\n\t/** Name of the sorting option. This is the label to display to users. */\r\n\tpublic Label: string;\r\n\t/**\r\n\t * The value to be used to specify the sort order once user selects it. This value is passed in the @see Request.SortBy\r\n\t * field in the @see Request object.\r\n\t */\r\n\tpublic Value: string;\r\n\r\n\t/** Indicates if this sorting option was configured to be the default. */\r\n\tpublic IsDefault: boolean;\r\n\t/** Indicates if this sorting option is currently being used for the current result set. */\r\n\tpublic Selected: boolean;\r\n\r\n\tpublic constructor(init: SortingItem) {\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n","export class Selections {\r\n\t[field: string]: SelectionFacet;\r\n\r\n\tpublic constructor(init: Selections) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tObject.keys(init).forEach(key => {\r\n\t\t\tconst selFacet = init[key];\r\n\r\n\t\t\tthis[key] = new SelectionFacet(selFacet);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport class SelectionFacet {\r\n\t/** Display name for facet. */\r\n\tpublic Label: string;\r\n\r\n\t/** Will contain an entry for each selection made within the facet. */\r\n\tpublic Items: SelectionFacetValue[];\r\n\r\n\tpublic constructor(init: SelectionFacet) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tthis.Items = init.Items.map(i => new SelectionFacetValue(i));\r\n\t}\r\n}\r\n\r\nexport class SelectionFacetValue {\r\n\t/** Display label for facet value. */\r\n\tpublic Label: string;\r\n\r\n\t/** Value for facet value. */\r\n\tpublic Value: string;\r\n\r\n\tpublic constructor(init: SelectionFacetValue) {\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n","export class Value {\r\n\t/** Label of the value to display. */\r\n\tpublic Label?: string;\r\n\t/** Value to use when setting the facet value selection. */\r\n\tpublic Value?: string;\r\n\r\n\t/** Number of results in current set that have this facet value. */\r\n\tpublic Count: number;\r\n\t/** Indicates if this facet value has been selected. */\r\n\tpublic Selected: boolean;\r\n\r\n\t/**\r\n\t * Used for displaying the slider facet. @see RangeStart indicates what the starting point of the range\r\n\t * to display, either on basis of what the user selected by sliding the slider, or if they have no\r\n\t * selection it reflects the lowest price product.\r\n\t */\r\n\tpublic RangeStart?: string;\r\n\t/**\r\n\t * Used for displaying the slider facet. @see RangeEnd indicates what the end point of the range to\r\n\t * display is, either on basis of what the user selected by sliding the slider, or if they have no\r\n\t * selection, it reflects the highest price product.\r\n\t */\r\n\tpublic RangeEnd?: string;\r\n\r\n\t/**\r\n\t * Used for displaying the slider facet. @see RangeMin indicates lowest value for the range in the list\r\n\t * of products displayed.\r\n\t */\r\n\tpublic RangeMin?: string;\r\n\t/**\r\n\t * Used for displaying the slider facet. @see RangeMax indicates highest value for the range in the list\r\n\t * of products displayed.\r\n\t */\r\n\tpublic RangeMax?: string;\r\n\r\n\t/** Used for nested facets. */\r\n\tpublic Path?: string;\r\n\r\n\t/** Set of pagination options */\r\n\tpublic Children: Value[];\r\n\r\n\tpublic Level: number;\r\n\r\n\tpublic constructor(init: Value) {\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n","export class Swatch {\r\n\t/** Match this value to the @see Value object in the @see Values array of @see Facet. */\r\n\tpublic Value: string;\r\n\r\n\t/** Name of the asset. */\r\n\tpublic AssetName: string;\r\n\t/** URL of the asset. */\r\n\tpublic AssetUrl: string;\r\n\r\n\t/** Indicates if value is the default. */\r\n\tpublic IsDefault: boolean;\r\n\r\n\t/** Color of the asset. */\r\n\tpublic Color: string;\r\n\r\n\tpublic constructor(init: Swatch) {\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n","export class Range {\r\n\t/** Label of the value to display. */\r\n\tpublic Label: string;\r\n\t/** Value to use when setting the facet value selection. */\r\n\tpublic Value: string;\r\n\r\n\t/** Indicates if the values are numeric. */\r\n\tpublic IsNumeric: boolean;\r\n\r\n\t/** Lower value of the range. */\r\n\tpublic LBound: string;\r\n\t/** Upper value of the range. */\r\n\tpublic UBound: string;\r\n\t/** Asset Url */\r\n\tpublic AssetFullUrl: string;\r\n\r\n\tpublic constructor(init: Range) {\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n","import { Value } from './Value';\r\nimport { Swatch } from './Swatch';\r\nimport { Range } from './Range';\r\nimport { FacetType } from 'models/Facets/FacetType';\r\n\r\nexport class Facet {\r\n\t/** Unique identifier of the facet. */\r\n\tpublic FacetId: number;\r\n\r\n\t/** Display name of the facet. */\r\n\tpublic Name: string;\r\n\r\n\t/** The name of the field that is linked to this facet. */\r\n\tpublic Field: string;\r\n\r\n\tpublic FieldType: 'string' | 'range' | 'numeric' | 'search' | 'tab';\r\n\tpublic FacetType: FacetType;\r\n\r\n\tpublic DisplayType: 'default' | 'scrolling' | 'truncating';\r\n\r\n\t/** Indicates the maximum number of facet values that are returned. */\r\n\tpublic MaxCount: number;\r\n\r\n\t/** Indicates the minimum number of results each facet value needs to have in order to be returned. */\r\n\tpublic MinHitCount: number;\r\n\r\n\t/**\r\n\t * If this is set, it is to be used as the facet name if passed in the `FacetSelections`. If not set,\r\n\t * the value of the Field object would be used. (This is only applicable when a slider and range\r\n\t * facets are both configured for the same field.)\r\n\t */\r\n\tpublic ParamName?: string;\r\n\r\n\t/**\r\n\t * Indicates the sorting logic that is used for this facets values. The possible values for this\r\n\t * are the parameters for sorting set options that are configured in \"Workbench > Data Configuration\r\n\t * > Sorting/Pagination\".\r\n\t */\r\n\tpublic SortBy: string;\r\n\r\n\t/** Indicates if the user should be able to apply more than one filter value from this facet. */\r\n\tpublic ExpandSelection: boolean;\r\n\r\n\t/** Indicates if facet values are numeric. */\r\n\tpublic IsNumeric: boolean;\r\n\t/** Indicates if facet values are currency (and should be displayed appropriately). */\r\n\tpublic IsCurrency: boolean;\r\n\t/** Indicates currency symbol in case of currency type facets */\r\n\tpublic CurrencySymbol: string;\r\n\t/** Indicates if the facet can be collapsed and expanded by the user. */\r\n\tpublic IsCollapsible: boolean;\r\n\t/** If @see IsCollapsible is `true`, this indicates if the facet should initially be collapsed or expanded. */\r\n\tpublic IsCollapsedDefault: boolean;\r\n\t/** Indicates if the facet is set to be visible. */\r\n\tpublic IsVisible: boolean;\r\n\t/**\r\n\t * Indicates if search is enabled for this facet. If it is enabled, a search box should be available for\r\n\t * users to filter the facet values by typing in the search box.\r\n\t */\r\n\tpublic IsSearch: boolean;\r\n\r\n\t/**\r\n\t * If facet display type is Scrolling, this value is the height in pixels for the window inside scroll box.\r\n\t * Only to be used if @see DisplayType is `\"scrolling\"`.\r\n\t */\r\n\tpublic ScrollHeight: number;\r\n\t/**\r\n\t * If the number of facet values exceeds this number and @see DisplayType is `\"scrolling\"`, then the facet\r\n\t * should be displayed as scrolling list; if not, display as `\"default\"`.\r\n\t */\r\n\tpublic ScrollThreshold: number;\r\n\t/**\r\n\t * If the number of facet values exceeds this number and @see DisplayType is `\"truncate\"`, then the facet\r\n\t * should be displayed as truncated list; if not, display as `\"default\"`.\r\n\t */\r\n\tpublic TruncateThreshold: number;\r\n\t/**\r\n\t * To be used if @see IsSearch is `true`. The number of facet values must be this number or higher for the\r\n\t * facet search box to display.\r\n\t */\r\n\tpublic SearchThreshold: number;\r\n\r\n\t/** Text to display when user hovers over a help icon. */\r\n\tpublic Tooltip?: string;\r\n\r\n\t/**\r\n\t * If `false`, indicates that sometimes this facet will not be returned. The conditions that trigger its\r\n\t * display are maintained in the Workbench.\r\n\t */\r\n\tpublic AlwaysVisible: boolean;\r\n\r\n\t/**\r\n\t * The display order of the facet in the facet list.\r\n\t */\r\n\tpublic SortOrder: number;\r\n\r\n\t/** This is maximum number of values that could be returned for the facet. */\r\n\tpublic NofVisible: number;\r\n\r\n\t/** Will be included if @see FacetType is `\"swatch\"`. */\r\n\tpublic SwatchData: Swatch[];\r\n\r\n\t/** Indicates type of facet range display. */\r\n\tpublic FacetRangeDisplayType: number;\r\n\r\n\t/** Indicates if setting in Workbench is set to On or Off. */\r\n\tpublic PreloadChildren: boolean;\r\n\r\n\t/**\r\n\t * To be used if @see FacetType is `\"slider\"`. If @see ShowSliderInputs is `true`, input boxes should be\r\n\t * available for user to enter values.\r\n\t */\r\n\tpublic ShowSliderInputs: boolean;\r\n\r\n\t/** Always present, but will only be populated if the facet is numeric and not a slider. */\r\n\tpublic Ranges: Range[];\r\n\t/** The values for this facet. */\r\n\tpublic Values: Value[];\r\n\t// Data type for datetime facet type\r\n\tpublic DataType?: string;\r\n\r\n\t/** Whether or not the facet should be rendered as truncated. */\r\n\tpublic get shouldTruncate() {\r\n\t\t// the facet does truncated listing of values if configured for truncating and we have too many facets\r\n\t\treturn this.DisplayType === 'truncating' && this.Values.length > this.TruncateThreshold;\r\n\t}\r\n\t/** Whether or not the facet should have a quick lookup search input. */\r\n\tpublic get shouldSearch() {\r\n\t\t// the facet should have a search box if configured to do so, and the number of facet values is greater\r\n\t\t// than the threshold\r\n\t\treturn this.IsSearch && this.Values.length > this.SearchThreshold;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the name of the key when using this facet for a selection. This will take into consideration\r\n\t * @see ParamName and @see Field in determining which value should be returned.\r\n\t */\r\n\tpublic get selectionField() {\r\n\t\treturn this.ParamName ? this.ParamName : this.Field;\r\n\t}\r\n\r\n\tpublic constructor(init: Facet) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tthis.SwatchData = init.SwatchData.map(s => new Swatch(s));\r\n\t\tthis.Ranges = init.Ranges.map(r => new Range(r));\r\n\t\tthis.Values = init.Values.map(v => new Value(v));\r\n\t}\r\n}\r\n","export class Rule {\r\n\tpublic RuleType: RuleType;\r\n\tpublic Field: string;\r\n\tpublic Condition: string;\r\n\tpublic Value: string;\r\n\tpublic Operator: RuleOperatorType;\r\n\r\n\tpublic Rules: Rule[];\r\n\tpublic Parent: Rule;\r\n\tpublic constructor(init: Rule) {\r\n\t\tObject.assign(this, init);\r\n\t\tif (init.Parent) {\r\n\t\t\tthis.Parent = new Rule(init.Parent);\r\n\t\t}\r\n\t\tthis.Rules = init.Rules ? init.Rules.map(i => new Rule(i)) : [];\r\n\t}\r\n}\r\n\r\nexport enum RuleType {\r\n\tGroup = 0,\r\n\tEval = 1,\r\n}\r\n\r\nexport enum RuleOperatorType {\r\n\tAll = 0,\r\n\tAny = 1,\r\n\tNone = 2,\r\n}\r\n","import { Rule } from './Rule';\r\n\r\nexport class BannerTrigger {\r\n\tpublic BannerGroupId: number;\r\n\tpublic Name: string;\r\n\tpublic SortOrder: number;\r\n\tpublic Rule: Rule;\r\n\r\n\tpublic constructor(init: BannerTrigger) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tthis.Rule = new Rule(this.Rule);\r\n\t}\r\n}\r\n","import { ContentType } from './ContentType';\r\nimport { Result } from './Result';\r\nimport { BannerTrigger } from './Trigger';\r\n\r\nexport class FeaturedItems {\r\n\tpublic Items: FeaturedItem[];\r\n\r\n\tpublic constructor(init: FeaturedItems) {\r\n\t\tObject.assign(this, init);\r\n\t\tif (init && init.Items) {\r\n\t\t\tthis.Items = init.Items ? init.Items.map(i => new FeaturedItem(i)) : [];\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class Merchandising {\r\n\tpublic Items: MerchandisingItem[];\r\n\r\n\tpublic constructor(init: Merchandising) {\r\n\t\tObject.assign(this, init);\r\n\t\tif (init && init.Items) {\r\n\t\t\tthis.Items = init.Items ? init.Items.map(i => new MerchandisingItem(i)) : [];\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class PageContentItem {\r\n\tpublic Zone: string;\r\n\tpublic ContentType: ContentType;\r\n\tpublic ImageUrl: string;\r\n\tpublic AltTag: string;\r\n\tpublic ForwardUrl: string;\r\n\tpublic Output: any;\r\n\tpublic WidgetArgs: string;\r\n\tpublic Title: string;\r\n\tpublic Name: string;\r\n\tpublic DateFrom: string;\r\n\tpublic DateTo: string;\r\n\tpublic IsMobile: boolean;\r\n\tpublic MobileContentType: string;\r\n\tpublic MobileImageUrl: string;\r\n\tpublic MobileOutput: string;\r\n\tpublic MobileWidgetArgs: string;\r\n\tpublic IsTrackingEnabled: boolean;\r\n\tpublic MobileIsTrackingEnabled?: boolean;\r\n\tpublic FeaturedItems: Result[];\r\n\tpublic Items: Result[];\r\n\tpublic Target: string;\r\n\tpublic MobileTarget: string;\r\n\tpublic MobileAltTag: string;\r\n\tpublic MobileForwardUrl: string;\r\n\tpublic MobileWidth: string;\r\n\tpublic MobileHeight: string;\r\n\tpublic Trigger: BannerTrigger;\r\n\tpublic BannerId: number;\r\n\tpublic CampaignId: number;\r\n\tpublic ImageTitle: string;\r\n\r\n\tpublic constructor(init: PageContentItem) {\r\n\t\tObject.assign(this, init);\r\n\t\tif (init.FeaturedItems) {\r\n\t\t\tthis.FeaturedItems = init.FeaturedItems.map(i => new Result(i));\r\n\t\t}\r\n\t\tif (init.Trigger) {\r\n\t\t\tthis.Trigger = new BannerTrigger(init.Trigger);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class FeaturedItem extends PageContentItem {\r\n\tpublic Items: Result[];\r\n\r\n\tpublic constructor(init: FeaturedItem) {\r\n\t\tsuper(init);\r\n\t\tObject.assign(this, init);\r\n\t\tthis.Items = init.Items.map(i => new Result(i));\r\n\t}\r\n}\r\n\r\nexport class MerchandisingItem extends PageContentItem {\r\n\tpublic constructor(init: MerchandisingItem) {\r\n\t\tsuper(init);\r\n\t\tObject.assign(this, init);\r\n\t}\r\n}\r\n","import { PageContentItem } from './Merchandising';\r\n\r\nexport class PageContent {\r\n\tpublic ZoneName: string;\r\n\tpublic Items: PageContentItem[];\r\n\tpublic constructor(init: PageContent) {\r\n\t\tObject.assign(this, init);\r\n\t\tthis.Items = init.Items.map(i => new PageContentItem(i));\r\n\t}\r\n}\r\n","import { Pagination } from './Pagination';\r\nimport { Result } from './Result';\r\nimport { Sorting } from './Sorting';\r\nimport { Selections } from './Selections';\r\nimport { Facet } from 'models/Facets';\r\nimport { Merchandising, FeaturedItems } from './Merchandising';\r\nimport { StringLiteral } from '@babel/types';\r\nimport { PageContent } from './PageContent';\r\n\r\nexport class Response {\r\n\t/** Indicates if request was successful. */\r\n\tpublic Success: boolean;\r\n\r\n\t/** Summary of pagination details and a set of pagination options. */\r\n\tpublic Pagination: Pagination;\r\n\r\n\t/**\r\n\t * The Keyword value that was sent to Hawksearch in the request. If no Keyword was set in the\r\n\t * request, the value will be empty.\r\n\t */\r\n\tpublic Keyword: string;\r\n\r\n\t/**\r\n\t * If this is populated, it indicates that the Keyword value returned 0 results, but the results\r\n\t * in this response are from this AdjustedKeyword.  A message should be displayed to the user\r\n\t * informing them that their search was corrected to this string.\r\n\t *\r\n\t * This is the result of Auto Correct, which is configured in the Workbench > Keyword Search >\r\n\t * Did You Mean.\r\n\t */\r\n\tpublic AdjustedKeyword?: string;\r\n\r\n\t/** An entry in the array for each item returned in search results. */\r\n\tpublic Results: Result[];\r\n\r\n\tpublic Facets: Facet[];\r\n\r\n\t/**\r\n\t * Will contain an entry for each facet that has one or more selections. Will be empty if no facet\r\n\t * selections have been made.\r\n\t */\r\n\tpublic Selections: Selections;\r\n\r\n\tpublic Sorting: Sorting;\r\n\r\n\t/**\r\n\t * If any strings are returned in the array, they should be displayed to the user as suggested\r\n\t * search terms.\r\n\t *\r\n\t * This is the result of Did You Mean, which is configured in the Workbench > Keyword Search >\r\n\t * Did You Mean.\r\n\t */\r\n\tpublic DidYouMean: string[];\r\n\r\n\t/**\r\n\t * Merchandising can be placed by using Campaigns in the Hawksearch Workbench. The Campaign will\r\n\t * determine if the content should appear and in what zone.\r\n\t */\r\n\tpublic Merchandising: Merchandising; // TODO: merchandising object\r\n\tpublic FeaturedItems: FeaturedItems; // TODO: featured items object\r\n\r\n\tpublic SearchDuration: number;\r\n\r\n\tpublic DocExplain?: string;\r\n\r\n\t/**\r\n\t * Properties that gets populated when user requests landing page related results\r\n\t *\r\n\t */\r\n\r\n\tpublic Breadcrumb: string;\r\n\r\n\tpublic CustomHtml: string;\r\n\r\n\tpublic HeaderTitle: string;\r\n\r\n\tpublic MetaDescription: string;\r\n\r\n\tpublic MetaKeywords: string;\r\n\tpublic MetaRobots: string;\r\n\tpublic Name: string;\r\n\tpublic Next: string;\r\n\tpublic Prev: string;\r\n\tpublic PageHeading: string;\r\n\tpublic PageContent: PageContent[];\r\n\tpublic RelCanonical: string;\r\n\tpublic PageLayoutId: number;\r\n\tpublic TrackingId: string;\r\n\tpublic VisitorTargets: Array<{ Id: number; Name: string }>;\r\n\tpublic Redirect: { Location?: string; Target?: string };\r\n\r\n\t// end of landing page related fields\r\n\tpublic constructor(init: Response) {\r\n\t\tObject.assign(this, init);\r\n\r\n\t\tthis.Pagination = new Pagination(init.Pagination);\r\n\t\tthis.Merchandising = new Merchandising(init.Merchandising);\r\n\t\tthis.FeaturedItems = new FeaturedItems(init.FeaturedItems);\r\n\t\tthis.Results = init.Results.map(r => new Result(r));\r\n\t\tthis.Facets = init.Facets.map(f => new Facet(f));\r\n\t\tthis.PageContent = init.PageContent ? init.PageContent.map(p => new PageContent(p)) : [];\r\n\t\tthis.Selections = new Selections(init.Selections);\r\n\t\tthis.Sorting = new Sorting(init.Sorting);\r\n\t}\r\n}\r\n","import { Response, Request, Result } from 'models/Search';\r\nimport { Value, Facet } from 'models/Facets';\r\nimport { ClientSelections, ClientSelectionValue } from 'store/ClientSelections';\r\n\r\nexport enum FacetSelectionState {\r\n\t/** The facet value is not selected. */\r\n\tNotSelected,\r\n\t/** The facet value is selected. */\r\n\tSelected,\r\n\t/** The facet value is selected, but negated. */\r\n\tNegated,\r\n}\r\n\r\nexport interface SelectionInfo {\r\n\t/** The facet value selection state. */\r\n\tstate: FacetSelectionState;\r\n\r\n\t/**\r\n\t * If the facet value is `FacetSelectionState.Selected` or `FacetSelectionState.Negated`, this is the value of\r\n\t * the facet value. For negated facet values this will be prefixed with the negation character `'-'`.\r\n\t */\r\n\tselectedValue?: string;\r\n\t/**\r\n\t * If the facet value is `FacetSelectionState.Selected` or `FacetSelectionState.Negated`, this is the index\r\n\t * into the `pendingSearch.FacetSelections[facetName]` array for this facet value.\r\n\t */\r\n\tselectionIndex?: number;\r\n}\r\n\r\nexport class SearchStore {\r\n\t/** This represents the next search request that will be executed. */\r\n\tpublic pendingSearch: Partial<Request>;\r\n\t/**\r\n\t * Whether or not the next search request will perform history actions (pushing the search into browser\r\n\t * history).\r\n\t */\r\n\tpublic doHistory: boolean;\r\n\r\n\t/** Whether or not a search request is waiting for completion. */\r\n\tpublic isLoading: boolean;\r\n\r\n\tpublic itemsToCompare: Result[];\r\n\tpublic itemsToCompareIds: string[];\r\n\tpublic comparedResults: Result[];\r\n\tpublic productDetails: Partial<Result>;\r\n\r\n\t/** The results of the last search request, if one has been performed. Otherwise, `undefined`. */\r\n\tpublic searchResults?: Response;\r\n\r\n\tpublic requestError: boolean;\r\n\r\n\tpublic language?: string | null | undefined;\r\n\r\n\tpublic constructor(initial?: Partial<SearchStore>) {\r\n\t\tObject.assign(this, initial);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns whether or not this is the initial load of the search results.\r\n\t */\r\n\tpublic get isInitialLoad() {\r\n\t\treturn this.isLoading && !this.searchResults;\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether or not the given facet and facet value is selected, and returns info regarding the selection.\r\n\t * @param facet The facet for which the facet value will be checked for selection.\r\n\t * @param facetValue The facet value that will be checked for selection.\r\n\t */\r\n\tpublic isFacetSelected(facet: Facet | string, facetValue: Value | string): SelectionInfo {\r\n\t\tconst facetName = typeof facet === 'string' ? facet : facet.Name;\r\n\t\tconst facetField = typeof facet === 'string' ? facet : facet.selectionField;\r\n\r\n\t\tconst valueValue = typeof facetValue === 'string' ? facetValue : facetValue.Value;\r\n\t\tconst valueLabel = typeof facetValue === 'string' ? facetValue : facetValue.Label;\r\n\r\n\t\tif (!valueValue) {\r\n\t\t\tconsole.error(`Facet ${facetName} (${facetField}) has no facet value for ${valueLabel}`);\r\n\t\t\treturn { state: FacetSelectionState.NotSelected };\r\n\t\t}\r\n\r\n\t\tconst facetSelections = this.pendingSearch.FacetSelections;\r\n\r\n\t\tif (!facetSelections || !facetSelections[facetField]) {\r\n\t\t\treturn { state: FacetSelectionState.NotSelected };\r\n\t\t}\r\n\r\n\t\tconst selectionIdx = facetSelections[facetField]!.indexOf(valueValue);\r\n\t\tconst negationIdx = facetSelections[facetField]!.indexOf(`-${valueValue}`);\r\n\r\n\t\tif (selectionIdx !== -1) {\r\n\t\t\t// if the exact facet value exists, then we're normally selected\r\n\t\t\treturn {\r\n\t\t\t\tstate: FacetSelectionState.Selected,\r\n\t\t\t\tselectedValue: valueValue,\r\n\t\t\t\tselectionIndex: selectionIdx,\r\n\t\t\t};\r\n\t\t} else if (negationIdx !== -1) {\r\n\t\t\t// if the facet value is selected but prefixed with a -, then we're negated\r\n\t\t\treturn {\r\n\t\t\t\tstate: FacetSelectionState.Negated,\r\n\t\t\t\tselectedValue: `-${valueValue}`,\r\n\t\t\t\tselectionIndex: negationIdx,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn { state: FacetSelectionState.NotSelected };\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an object containing the selections that have been made in both the next search request and also\r\n\t * in the previous search request. This should be used when iterating selections instead of pulling the values\r\n\t * out from the search result or pending search - as this will merge the values together and provide an accurate\r\n\t * view of all facet selections.\r\n\t */\r\n\tpublic get facetSelections(): ClientSelections {\r\n\t\tconst {\r\n\t\t\tpendingSearch: { FacetSelections: clientSelections, SearchWithin },\r\n\t\t\tsearchResults,\r\n\t\t} = this;\r\n\t\tconst selections: ClientSelections = {};\r\n\r\n\t\tif (!clientSelections && !SearchWithin) {\r\n\t\t\treturn selections;\r\n\t\t}\r\n\r\n\t\t// if we've made selections on the client, transform these into more detailed selections.\r\n\t\t// the client-side selections are just facet fields and values without any labels - so we\r\n\t\t// need to combine this information with the list of facets received from the server in the\r\n\t\t// previous search in order to return a rich list of selections\r\n\r\n\t\tconst facets = searchResults ? searchResults.Facets : null;\r\n\r\n\t\tif (!facets) {\r\n\t\t\t// but we can only do this if we've received facet information from the server. without this\r\n\t\t\t// info we can't determine what labels should be used\r\n\t\t\treturn selections;\r\n\t\t}\r\n\r\n\t\t// manually handle the `searchWithin` selection, as this doesn't usually behave like a normal facet selection\r\n\t\t// but instead a field on the search request\r\n\t\tif (SearchWithin) {\r\n\t\t\tconst facet = facets.find(f => f.selectionField === 'searchWithin');\r\n\r\n\t\t\tif (facet) {\r\n\t\t\t\tselections.searchWithin = {\r\n\t\t\t\t\tfacet,\r\n\t\t\t\t\tlabel: facet.Name,\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: SearchWithin,\r\n\t\t\t\t\t\t\tvalue: SearchWithin,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!clientSelections) {\r\n\t\t\treturn selections;\r\n\t\t}\r\n\r\n\t\tObject.keys(clientSelections).forEach(fieldName => {\r\n\t\t\tconst selectionValues = clientSelections[fieldName];\r\n\r\n\t\t\tif (!selectionValues) {\r\n\t\t\t\t// if this selection has no values, it's not really selected\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst facet = facets.find(f => f.selectionField === fieldName);\r\n\r\n\t\t\tif (!facet) {\r\n\t\t\t\t// if there's no matching facet from the server, we can't show this since we'll have no labels\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst items: ClientSelectionValue[] = [];\r\n\r\n\t\t\tif (facet.FieldType === 'range') {\r\n\t\t\t\t// if the facet this selection is for is a range, there won't be a matching value and thus there won't be a label.\r\n\t\t\t\t// so because of this we'll just use the selection value as the label\r\n\r\n\t\t\t\tselectionValues.forEach(selectionValue => {\r\n\t\t\t\t\titems.push({\r\n\t\t\t\t\t\tlabel: selectionValue,\r\n\t\t\t\t\t\tvalue: selectionValue,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else if (facet.FieldType === 'tab') {\r\n\t\t\t\t// do not return the selection value for tab facet\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\t// for other types of facets, try to find a matching value\r\n\r\n\t\t\t\tselectionValues.forEach(selectionValue => {\r\n\t\t\t\t\tconst matchingVal = this.findMatchingValue(selectionValue, facet.Values);\r\n\r\n\t\t\t\t\tif (!matchingVal || !matchingVal.Label) {\r\n\t\t\t\t\t\t// if there's no matching value from the server, we cannot display because there would\r\n\t\t\t\t\t\t// be no label - same if there's no label at all\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\titems.push({\r\n\t\t\t\t\t\tlabel: matchingVal.Label,\r\n\t\t\t\t\t\tvalue: selectionValue,\r\n\t\t\t\t\t\tpath: matchingVal.Path,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tselections[fieldName] = {\r\n\t\t\t\tfacet,\r\n\t\t\t\tlabel: facet.Name,\r\n\t\t\t\titems,\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\treturn selections;\r\n\t}\r\n\r\n\tprivate findMatchingValue(selectionValue: string, facetValues: Value[]): Value | null {\r\n\t\tlet matchingValue: Value | null = null;\r\n\t\tif (!facetValues || facetValues.length === 0) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tfor (const facetValue of facetValues) {\r\n\t\t\tconst isMatchingVal = facetValue.Value === selectionValue || `-${facetValue.Value}` === selectionValue;\r\n\t\t\t// loop through children\r\n\t\t\tif (!isMatchingVal) {\r\n\t\t\t\tmatchingValue = this.findMatchingValue(selectionValue, facetValue.Children);\r\n\t\t\t} else {\r\n\t\t\t\tmatchingValue = facetValue;\r\n\t\t\t}\r\n\r\n\t\t\tif (matchingValue) {\r\n\t\t\t\treturn matchingValue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn matchingValue;\r\n\t}\r\n}\r\n","import { createBrowserHistory } from 'history';\r\n\r\nexport const history = createBrowserHistory();\r\n","import { Request } from 'models/Search/Request';\r\n\r\n/** Represents parts of the browser query string that are fixed and are always single strings. */\r\ninterface ParsedQueryStringFixed {\r\n\tkeyword?: string;\r\n\tsort?: string;\r\n\tpg?: string;\r\n\tlp?: string;\r\n\tPageId?: string;\r\n\tlpurl?: string;\r\n\tmpp?: string;\r\n\tsearchWithin?: string;\r\n\tis100Coverage?: string;\r\n\tindexName?: string;\r\n\tignoreSpellcheck?: string;\r\n}\r\n\r\n/**\r\n * Represents the parts of the browser query string that are dynamic (the selected facets). Facets\r\n * can have multiple values, so the value of these is always an array of strings.\r\n */\r\ninterface ParsedQueryStringDynamic {\r\n\t[key: string]: string[];\r\n}\r\n\r\ntype ParsedQueryString = ParsedQueryStringFixed & ParsedQueryStringDynamic;\r\n\r\n/**\r\n * Parses the input query string and returns an object that can be used to build a search request.\r\n * The object returned will usually have the keys: `keyword`, `sort`, `pg`,`lp`,`lpurl`, `mpp`, and then more keys\r\n * for every selected facet.\r\n * @param search The input query string.\r\n */\r\nfunction parseQueryStringToObject(search: string) {\r\n\tconst params = new URLSearchParams(search);\r\n\r\n\tconst parsed: ParsedQueryString = {};\r\n\r\n\tparams.forEach((value, key) => {\r\n\t\tif (\r\n\t\t\tkey === 'keyword' ||\r\n\t\t\tkey === 'sort' ||\r\n\t\t\tkey === 'pg' ||\r\n\t\t\tkey === 'lp' ||\r\n\t\t\tkey === 'PageId' ||\r\n\t\t\tkey === 'lpurl' ||\r\n\t\t\tkey === 'mpp' ||\r\n\t\t\tkey === 'searchWithin' ||\r\n\t\t\tkey === 'is100Coverage' ||\r\n\t\t\tkey === 'indexName' ||\r\n\t\t\tkey === 'ignoreSpellcheck'\r\n\t\t) {\r\n\t\t\t// `keyword` is special and should never be turned into an array\r\n\t\t\tparsed[key] = encodeURIComponent(value);\r\n\t\t} else {\r\n\t\t\t// everything else should be turned into an array\r\n\r\n\t\t\tif (!value) {\r\n\t\t\t\t// no useful value for this query param, so skip it\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// NOTE: Don't pass these values as facet selection\r\n\t\t\tif (['prv', 'hawkaid', 'token', 'refreshToken'].indexOf(key) !== -1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// multiple selections are split by commas, so split into an array\r\n\t\t\tconst multipleValues = value.split(',');\r\n\r\n\t\t\t// and now handle any comma escaping - any single value that contained a comma is escaped to '::'\r\n\t\t\tfor (let x = 0; x < multipleValues.length; ++x) {\r\n\t\t\t\tmultipleValues[x] = multipleValues[x].replace('::', ',');\r\n\t\t\t}\r\n\r\n\t\t\tparsed[key] = multipleValues;\r\n\t\t}\r\n\t});\r\n\r\n\treturn parsed;\r\n}\r\n\r\n/**\r\n * Parses the abosulte url into a `HawkClient` client search request object.\r\n * @param location The input location\r\n */\r\nexport function parseLocation(location: Location, searchUrl: string = '/search'): Partial<Request> {\r\n\tconst searchRequest = parseSearchQueryString(location.search);\r\n\r\n\t// customUrl have priority over keywords\r\n\tif (checkIfUrlRefsLandingPage(location.pathname, searchUrl)) {\r\n\t\tsearchRequest.Keyword = undefined;\r\n\t\tsearchRequest.CustomUrl = location.pathname.replace(searchUrl, '');\r\n\t}\r\n\treturn searchRequest;\r\n}\r\n/**\r\n * Parses the input query string into a `HawkClient` client search request object.\r\n * @param search The input query string.\r\n */\r\nexport function parseSearchQueryString(search: string): Partial<Request> {\r\n\tconst queryObj = parseQueryStringToObject(search);\r\n\r\n\t// extract out components, including facet selections\r\n\tconst {\r\n\t\tkeyword,\r\n\t\tsort,\r\n\t\tpg,\r\n\t\tmpp,\r\n\t\tlp,\r\n\t\tPageId,\r\n\t\tlpurl,\r\n\t\tsearchWithin,\r\n\t\tis100Coverage,\r\n\t\tindexName,\r\n\t\tignoreSpellcheck,\r\n\t\t...facetSelections\r\n\t} = queryObj;\r\n\r\n\t// ignore landing pages if keyword is passed\r\n\tconst pageId = lp || PageId;\r\n\treturn {\r\n\t\tKeyword: lpurl || pageId ? '' : keyword,\r\n\r\n\t\tSortBy: sort,\r\n\t\tPageNo: pg ? Number(pg) : undefined,\r\n\t\tMaxPerPage: mpp ? Number(mpp) : undefined,\r\n\t\tPageId: pageId ? Number(pageId) : undefined,\r\n\t\tCustomUrl: lpurl,\r\n\t\tSearchWithin: searchWithin,\r\n\t\tIs100CoverageTurnedOn: is100Coverage ? Boolean(is100Coverage) : undefined,\r\n\t\tFacetSelections: facetSelections,\r\n\t\tIndexName: indexName,\r\n\t\tIgnoreSpellcheck: ignoreSpellcheck ? ignoreSpellcheck === 'true' : undefined,\r\n\t};\r\n}\r\n\r\nexport function checkIfUrlRefsLandingPage(path: string, searchUrl: string): boolean {\r\n\tif (!path) {\r\n\t\t// if there's no path, this request can't be for a landing page\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (!path.endsWith('/')) {\r\n\t\tpath = path + '/';\r\n\t}\r\n\r\n\tif (!searchUrl.endsWith('/')) {\r\n\t\tsearchUrl = searchUrl + '/';\r\n\t}\r\n\r\n\treturn path !== searchUrl;\r\n}\r\n\r\n/**\r\n * Converts a search query object (such as one returned from `parseSearchQueryString`) and converts\r\n * it into a browser query string\r\n * @param queryObj The query object to convert to a query string.\r\n */\r\nfunction convertObjectToQueryString(queryObj: ParsedQueryString) {\r\n\tconst queryStringValues: string[] = [];\r\n\r\n\tfor (const key in queryObj) {\r\n\t\tif (queryObj.hasOwnProperty(key)) {\r\n\t\t\tif (\r\n\t\t\t\tkey === 'keyword' ||\r\n\t\t\t\tkey === 'sort' ||\r\n\t\t\t\tkey === 'pg' ||\r\n\t\t\t\tkey === 'mpp' ||\r\n\t\t\t\tkey === 'searchWithin' ||\r\n\t\t\t\tkey === 'is100Coverage' ||\r\n\t\t\t\tkey === 'indexName' ||\r\n\t\t\t\tkey === 'ignoreSpellcheck'\r\n\t\t\t) {\r\n\t\t\t\tconst value = queryObj[key];\r\n\r\n\t\t\t\tif (value === undefined || value === null) {\r\n\t\t\t\t\t// if any of the special keys just aren't defined or are null, don't include them in\r\n\t\t\t\t\t// the query string\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeof value !== 'string') {\r\n\t\t\t\t\tthrow new Error(`${key} must be a string`);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// certain strings are special and are never arrays\r\n\t\t\t\tqueryStringValues.push(key + '=' + value);\r\n\t\t\t} else {\r\n\t\t\t\tconst values = queryObj[key];\r\n\r\n\t\t\t\t// handle comma escaping - if any of the values contains a comma, they need to be escaped first\r\n\t\t\t\tconst escapedValues: string[] = [];\r\n\r\n\t\t\t\tfor (const unescapedValue of values) {\r\n\t\t\t\t\tescapedValues.push(unescapedValue.replace(',', '::'));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tqueryStringValues.push(key + '=' + escapedValues.join(','));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn '?' + queryStringValues.join('&');\r\n}\r\n\r\n/**\r\n * Converts a partial search request object into a browser query string.\r\n * @param searchRequest The search request object to convert.\r\n */\r\nexport function getSearchQueryString(searchRequest: Partial<Request>) {\r\n\tconst searchQuery = {\r\n\t\tkeyword: searchRequest.Keyword,\r\n\r\n\t\tsort: searchRequest.SortBy,\r\n\t\tpg: searchRequest.PageNo ? String(searchRequest.PageNo) : undefined,\r\n\t\tmpp: searchRequest.MaxPerPage ? String(searchRequest.MaxPerPage) : undefined,\r\n\t\tis100Coverage: searchRequest.Is100CoverageTurnedOn ? String(searchRequest.Is100CoverageTurnedOn) : undefined,\r\n\t\tsearchWithin: searchRequest.SearchWithin,\r\n\t\tindexName: searchRequest.IndexName,\r\n\t\tignoreSpellcheck:\r\n\t\t\t!searchRequest.IgnoreSpellcheck || !searchRequest.IgnoreSpellcheck\r\n\t\t\t\t? undefined\r\n\t\t\t\t: String(searchRequest.IgnoreSpellcheck),\r\n\t\t...searchRequest.FacetSelections,\r\n\t} as ParsedQueryString;\r\n\r\n\treturn convertObjectToQueryString(searchQuery);\r\n}\r\n","import { useEffect } from 'react';\r\n\r\nimport { useHawksearch } from './StoreProvider';\r\nimport { history } from 'util/History';\r\nimport { parseSearchQueryString, getSearchQueryString } from 'util/QueryString';\r\nimport AuthToken from './AuthToken';\r\n\r\nlet doSearch = true;\r\n\r\nfunction QueryStringListener() {\r\n\tconst { store, actor } = useHawksearch();\r\n\r\n\tuseEffect(() => {\r\n\t\t// listen to history so that when we navigate backward/forward, trigger a new search based off\r\n\t\t// the new query string\r\n\t\tconst unlisten = history.listen(location => {\r\n\t\t\tif (!doSearch) {\r\n\t\t\t\t// if the previous history change specified that we shouldn't do a search, clear the flag and bail\r\n\t\t\t\tdoSearch = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst searchRequest = parseSearchQueryString(location.search);\r\n\r\n\t\t\tactor.setSearch(\r\n\t\t\t\tsearchRequest,\r\n\t\t\t\t// explicitly flag this next search as not needing to push additional history, since this search\r\n\t\t\t\t// _is_ the result of history.\r\n\t\t\t\t/*doHistory*/ false\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tunlisten();\r\n\t\t};\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\t// listen to changes in the pending search so that history records can be pushed to the browser's\r\n\t\t// query string\r\n\r\n\t\tif (store.doHistory) {\r\n\t\t\t// if we're pushing history, we don't want to to trigger a search as a result of this history\r\n\t\t\t// change\r\n\t\t\tdoSearch = false;\r\n\r\n\t\t\thistory.push({\r\n\t\t\t\tsearch: getSearchQueryString(store.pendingSearch),\r\n\t\t\t});\r\n\t\t}\r\n\t}, [store.pendingSearch]);\r\n\r\n\t// Extract access token and refresh token from query string on load\r\n\tuseEffect(() => {\r\n\t\tconst params = new URLSearchParams(location.search);\r\n\t\tAuthToken.setTokens(params.get('token') || '', (params.get('refreshToken') || '').replace(' ', '+') || '');\r\n\t}, []);\r\n\r\n\treturn null;\r\n}\r\n\r\nexport default QueryStringListener;\r\n","import React from 'react';\r\nimport { ControllerStateAndHelpers } from 'downshift';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport SearchBoxBase from 'components/ui/SearchBox/SearchBoxBase';\r\nimport { Product } from 'models/Autocomplete';\r\nimport { CustomSuggestionListProps } from 'models/Autocomplete/CustomSuggestionList';\r\n\r\n/**\r\n * This component is the search input box (with autosuggest) that should be utilized on search pages. For a simple\r\n * search input box that is meant to be used on non-search pages (or globally), see `GlobalSearchBox`.\r\n */\r\n\r\ninterface SearchBoxProps {\r\n\tSuggestionList?: React.ComponentType<CustomSuggestionListProps>;\r\n}\r\n\r\nfunction SearchBox({ SuggestionList }: SearchBoxProps) {\r\n\tconst { store, actor } = useHawksearch();\r\n\r\n\tfunction handleSubmit(event: React.KeyboardEvent<HTMLInputElement>, downshift: ControllerStateAndHelpers<Product>) {\r\n\t\tif (event.key === 'Enter') {\r\n\t\t\tactor.setSearch({\r\n\t\t\t\tPageId: undefined,\r\n\t\t\t\tCustomUrl: undefined,\r\n\t\t\t\tKeyword: encodeURIComponent(event.currentTarget.value),\r\n\t\t\t\tFacetSelections: store.pendingSearch.FacetSelections,\r\n\t\t\t\tIgnoreSpellcheck: false,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t// On Select view all matches from suggestion list\r\n\tfunction handleViewAllMatches(downshift: ControllerStateAndHelpers<Product>) {\r\n\t\tconst { inputValue, closeMenu } = downshift;\r\n\t\tactor.setSearch({\r\n\t\t\tPageId: undefined,\r\n\t\t\tCustomUrl: undefined,\r\n\t\t\tKeyword: inputValue || '',\r\n\t\t});\r\n\t\tcloseMenu();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk__searchBox\">\r\n\t\t\t<SearchBoxBase\r\n\t\t\t\tonViewMatches={handleViewAllMatches}\r\n\t\t\t\tinitialValue={store && store.pendingSearch ? store.pendingSearch.Keyword : ''}\r\n\t\t\t\tonSubmit={handleSubmit}\r\n\t\t\t\tSuggestionList={SuggestionList}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SearchBox;\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nfunction throttle(func, timeout) {\r\n\tlet ready: boolean = true;\r\n\treturn (...args) => {\r\n\t\tif (!ready) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tready = false;\r\n\t\tfunc(...args);\r\n\t\tsetTimeout(() => {\r\n\t\t\tready = true;\r\n\t\t}, timeout);\r\n\t};\r\n}\r\n\r\n// Hook\r\nexport function useWindowSize() {\r\n\tconst [windowSize, setWindowSize] = useState({\r\n\t\twidth: 0,\r\n\t\theight: 0,\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tconst handleResize = throttle(() => {\r\n\t\t\tsetWindowSize({\r\n\t\t\t\twidth: window.innerWidth,\r\n\t\t\t\theight: window.innerHeight,\r\n\t\t\t});\r\n\t\t}, 600);\r\n\r\n\t\t// Add Resize event listener\r\n\t\twindow.addEventListener('resize', handleResize);\r\n\r\n\t\t// Call handleResize event so state gets updated initially\r\n\t\thandleResize();\r\n\r\n\t\t// Remove event listener on cleanup\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('resize', handleResize);\r\n\t\t};\r\n\t}, []); // Empty array ensures that effect is only run on mount\r\n\r\n\treturn windowSize;\r\n}\r\n","import React, { useState } from 'react';\r\n\r\nfunction PlaceholderFacetValue() {\r\n\tconst [width] = useState(Math.round(Math.random() * (200 - 100) + 100));\r\n\r\n\treturn (\r\n\t\t<li className=\"hawk-facet-rail__facet-list-item\">\r\n\t\t\t<span className=\"hawk-facet-rail__facet-checkbox hawk-facet-rail__facet-checkbox-placeholder\" />\r\n\r\n\t\t\t<button className=\"hawk-facet-rail__facet-btn\">\r\n\t\t\t\t<span className=\"hawk-facet-rail__facet-name\">\r\n\t\t\t\t\t<div className=\"hawk-facet-rail__facet-name-placeholder\" style={{ width: `${width}px` }} />\r\n\t\t\t\t</span>\r\n\t\t\t</button>\r\n\t\t</li>\r\n\t);\r\n}\r\n\r\nexport default PlaceholderFacetValue;\r\n","import React, { useState } from 'react';\r\n\r\nimport PlaceholderFacetValue from './PlaceholderFacetValue';\r\n\r\nfunction PlaceholderFacet() {\r\n\tconst [width] = useState(Math.round(Math.random() * (250 - 125) + 125));\r\n\tconst [numValues] = useState(Math.round(Math.random() * (8 - 1) + 1));\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-heading\">\r\n\t\t\t\t<div className=\"hawk-facet-rail__facet-heading-placeholder\" style={{ width: `${width}px` }} />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"hawk-facet-rail__facet-body\">\r\n\t\t\t\t<div className=\"hawk-facet-rail__facet-values hawk-facet-rail__facet-values-placeholder\">\r\n\t\t\t\t\t<div className=\"hawk-facet-rail__facet-values-checkbox\">\r\n\t\t\t\t\t\t<ul className=\"hawk-facet-rail__facet-list\">\r\n\t\t\t\t\t\t\t{[...Array(numValues)].map((_, i) => (\r\n\t\t\t\t\t\t\t\t<PlaceholderFacetValue key={i} />\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default PlaceholderFacet;\r\n","import React, { useState } from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useHawkConfig } from 'components/ConfigProvider';\r\nimport Facet from './Facet';\r\nimport PlaceholderFacet from './PlaceholderFacet';\r\nimport { getFacetComponents } from 'components/ui/Facets/Overrides';\r\n\r\nfunction FacetList() {\r\n\tconst {\r\n\t\tstore: { searchResults },\r\n\t} = useHawksearch();\r\n\r\n\tconst { config } = useHawkConfig();\r\n\r\n\t// the number of random placeholders to render while we wait for results\r\n\tconst [numPlaceholders] = useState(Math.round(Math.random() * (5 - 3) + 3));\r\n\r\n\tconst components = getFacetComponents(config.facetOverrides || []);\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-list\">\r\n\t\t\t{searchResults\r\n\t\t\t\t? // if there are search results, render the facets\r\n\t\t\t\t  searchResults.Facets.map(facet => {\r\n\t\t\t\t\t\tif (!facet.IsVisible) {\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (facet.FieldType === 'tab' || facet.FacetType === 'related') {\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst registeredComponent = components.find(\r\n\t\t\t\t\t\t\tcomponent => component.facetType === facet.FacetType\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst Component = !registeredComponent ? null : registeredComponent.component;\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Facet key={facet.FacetId} facet={facet}>\r\n\t\t\t\t\t\t\t\t{Component ? (\r\n\t\t\t\t\t\t\t\t\t<Component />\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t{facet.FieldType} {facet.FacetType} is not implemented!\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Facet>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t  })\r\n\t\t\t\t: // otherwise render a couple placeholders\r\n\t\t\t\t  [...Array(numPlaceholders)].map((_, i) => <PlaceholderFacet key={i} />)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FacetList;\r\n","import React, { useState } from 'react';\r\nimport { useWindowSize } from 'util/WindowResize';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\nimport FacetList from './FacetList';\r\n\r\nfunction FacetRail() {\r\n\tconst { t, i18n } = useTranslation();\r\n\tconst [isCollapsed, setCollapsed] = useState(false);\r\n\tconst size = useWindowSize();\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail\">\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"hawk-facet-rail__heading\"\r\n\t\t\t\t{...(size.width <= 767 && { onClick: () => setCollapsed(!isCollapsed) })}\r\n\t\t\t>\r\n\t\t\t\t{t('Filter By')}\r\n\t\t\t</div>\r\n\r\n\t\t\t{!isCollapsed && <FacetList />}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FacetRail;\r\n","import * as React from 'react';\r\n\r\ninterface LeftChevronSVGProps {\r\n\tclass: string;\r\n}\r\n\r\n/**\r\n * Left chevron SVG\r\n *\r\n * @returns\r\n */\r\nfunction LeftChevronSVG(props: LeftChevronSVGProps) {\r\n\treturn (\r\n\t\t<svg viewBox=\"0 0 19 32\" className={'icon ' + props.class} focusable=\"false\" aria-hidden=\"true\">\r\n\t\t\t<path d=\"M18.462 27.891c0.457 0.427 0.742 1.034 0.742 1.707s-0.285 1.279-0.741 1.705l-0.001 0.001c-0.467 0.437-1.097 0.705-1.789 0.705s-1.322-0.268-1.79-0.706l0.002 0.001-14.146-13.598c-0.457-0.427-0.742-1.034-0.742-1.707s0.285-1.28 0.741-1.705l0.001-0.001 14.142-13.589c0.468-0.436 1.097-0.704 1.79-0.704s1.322 0.268 1.791 0.706l-0.002-0.001c0.457 0.427 0.742 1.034 0.742 1.707s-0.285 1.28-0.741 1.705l-0.001 0.001-11.597 11.883z\" />\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default LeftChevronSVG;\r\n","import * as React from 'react';\r\n\r\ninterface RightChevronSVGProps {\r\n\tclass: string;\r\n}\r\n\r\n/**\r\n * Right chevron SVG\r\n *\r\n * @returns\r\n */\r\nfunction RightChevronSVG(props: RightChevronSVGProps) {\r\n\treturn (\r\n\t\t<svg viewBox=\"0 0 19 32\" className={'icon ' + props.class} focusable=\"false\" aria-hidden=\"true\">\r\n\t\t\t<path d=\"M0.738 4.109c-0.457-0.427-0.742-1.034-0.742-1.707s0.285-1.28 0.741-1.705l0.001-0.001c0.467-0.437 1.097-0.705 1.789-0.705s1.322 0.268 1.79 0.706l-0.002-0.001 14.146 13.598c0.457 0.427 0.742 1.034 0.742 1.707s-0.285 1.279-0.741 1.705l-0.001 0.001-14.142 13.589c-0.468 0.436-1.097 0.704-1.79 0.704s-1.322-0.268-1.791-0.706l0.002 0.001c-0.457-0.427-0.742-1.034-0.742-1.707s0.285-1.279 0.741-1.705l0.001-0.001 11.597-11.883z\" />\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default RightChevronSVG;\r\n","import React, { useState } from 'react';\r\n\r\nimport { LeftChevronSVG, RightChevronSVG } from 'components/svg';\r\n\r\ninterface PagerProps {\r\n\tpage: number;\r\n\ttotalPages: number;\r\n\r\n\tonPageChange: (page: number) => void;\r\n}\r\n\r\nfunction Pager({ page, totalPages, onPageChange }: PagerProps) {\r\n\tconst [inputValue, setInputValue] = useState<string | undefined>(undefined);\r\n\tconst [hasError, setHasError] = useState(false);\r\n\r\n\tfunction goToPreviousPage() {\r\n\t\tgoToPage(page - 1);\r\n\t}\r\n\r\n\tfunction goToNextPage() {\r\n\t\tgoToPage(page + 1);\r\n\t}\r\n\r\n\tfunction goToPage(pageNo: number) {\r\n\t\tif (isNaN(pageNo)) {\r\n\t\t\t// not a valid number\r\n\t\t\tdoInputError();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (pageNo < 1) {\r\n\t\t\t// can't go beyond the first page\r\n\t\t\tdoInputError();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (pageNo > totalPages) {\r\n\t\t\t// can't go beyond the last page\r\n\t\t\tdoInputError();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// once we've determined that we *do* want to do this page change, clear the user's input\r\n\t\t// because the input should be driven by props again\r\n\t\tsetInputValue(undefined);\r\n\r\n\t\t// inform the consumer that we've changed pages\r\n\t\tonPageChange(pageNo);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the input value for the pager input control. If the user has typed in a value into the input then\r\n\t * that value will be returned; otherwise, the page value passed in via props will be returned.\r\n\t */\r\n\tfunction getInputValue() {\r\n\t\tif (inputValue !== undefined) {\r\n\t\t\t// if the user typed an input, that's the page value for the control\r\n\t\t\treturn inputValue || '';\r\n\t\t}\r\n\r\n\t\t// otherwise, fall back to what's passed in through props\r\n\t\treturn page;\r\n\t}\r\n\r\n\tfunction onKeyDown(event: React.KeyboardEvent<HTMLInputElement>) {\r\n\t\tconst wantedPageNo = parseInt(event.currentTarget.value, 10);\r\n\r\n\t\tif (event.key === 'Enter') {\r\n\t\t\tgoToPage(wantedPageNo);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onBlur(event: React.FocusEvent<HTMLInputElement>) {\r\n\t\tif (Number(event.currentTarget.value) !== page) {\r\n\t\t\tconst wantedPageNo = parseInt(event.currentTarget.value, 10);\r\n\t\t\tgoToPage(wantedPageNo);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onKeyPress(event: React.KeyboardEvent<HTMLInputElement>) {\r\n\t\tconst keyCode = event.keyCode || event.which;\r\n\t\tconst keyValue = String.fromCharCode(keyCode);\r\n\t\tif (keyValue.match(/[+-.e]+/g)) {\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onInput(event: React.KeyboardEvent<HTMLInputElement>) {\r\n\t\tlet wantedPageNo = parseInt(event.currentTarget.value, 10);\r\n\r\n\t\tif (wantedPageNo > totalPages) {\r\n\t\t\twantedPageNo = totalPages;\r\n\t\t\tevent.currentTarget.value = '';\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\r\n\t\tif (wantedPageNo < 1) {\r\n\t\t\twantedPageNo = 1;\r\n\t\t\tevent.currentTarget.value = '';\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction doInputError() {\r\n\t\tsetHasError(true);\r\n\r\n\t\t// in 500ms, clear the error animation\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetHasError(false);\r\n\t\t}, 500);\r\n\t}\r\n\r\n\tfunction onChange(event: React.ChangeEvent<HTMLInputElement>) {\r\n\t\tsetInputValue(event.currentTarget.value);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-pagination__controls\">\r\n\t\t\t<button className=\"hawk-pagination__item\" onClick={goToPreviousPage}>\r\n\t\t\t\t<LeftChevronSVG class=\"hawk-pagination__left\" />\r\n\t\t\t\t<span className=\"visually-hidden\">Previous page</span>\r\n\t\t\t</button>\r\n\t\t\t<input\r\n\t\t\t\ttype=\"number\"\r\n\t\t\t\tvalue={getInputValue()}\r\n\t\t\t\tonChange={onChange}\r\n\t\t\t\tonInput={onInput}\r\n\t\t\t\tonKeyDown={onKeyDown}\r\n\t\t\t\tonKeyPress={onKeyPress}\r\n\t\t\t\tonBlur={onBlur}\r\n\t\t\t\tmin=\"1\"\r\n\t\t\t\tmax={totalPages}\r\n\t\t\t\tclassName={hasError ? 'hawk-pagination__input error' : 'hawk-pagination__input'}\r\n\t\t\t/>\r\n\t\t\t<span className=\"hawk-pagination__total-text\">&nbsp; of {totalPages}</span>\r\n\t\t\t<button className=\"hawk-pagination__item\" onClick={goToNextPage}>\r\n\t\t\t\t<RightChevronSVG class=\"hawk-pagination__right\" />\r\n\t\t\t\t<span className=\"visually-hidden\">Next page</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Pager;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\n\r\nfunction ItemsPerPage() {\r\n\tconst {\r\n\t\tstore: { searchResults, pendingSearch },\r\n\t\tactor,\r\n\t} = useHawksearch();\r\n\r\n\tfunction onChange(event: React.ChangeEvent<HTMLSelectElement>) {\r\n\t\tactor.setSearch({\r\n\t\t\tMaxPerPage: Number(event.currentTarget.value),\r\n\t\t\tPageNo: 1, // if we change our max items per page, reset to page 1\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-items-per-page\">\r\n\t\t\t<select value={pendingSearch.MaxPerPage} onChange={onChange}>\r\n\t\t\t\t{searchResults ? (\r\n\t\t\t\t\tsearchResults.Pagination.Items.map(paginationItem => (\r\n\t\t\t\t\t\t<option key={paginationItem.PageSize} value={paginationItem.PageSize}>\r\n\t\t\t\t\t\t\t{paginationItem.Label}\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t))\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<option>12 Items Per Page</option>\r\n\t\t\t\t)}\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ItemsPerPage;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport Pager from './Pager';\r\nimport ItemsPerPage from './ItemsPerPage';\r\n\r\nfunction Pagination() {\r\n\tconst {\r\n\t\tstore: { searchResults, pendingSearch },\r\n\t\tactor,\r\n\t} = useHawksearch();\r\n\r\n\tfunction onPageChange(pageNo: number) {\r\n\t\t// when the pager's page changes, trigger a new search\r\n\t\tactor.setSearch({\r\n\t\t\tPageNo: pageNo,\r\n\t\t});\r\n\t\twindow.scrollTo(0, 0);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-pagination\">\r\n\t\t\t<Pager\r\n\t\t\t\tpage={searchResults ? pendingSearch.PageNo || 1 : 0}\r\n\t\t\t\ttotalPages={searchResults ? searchResults.Pagination.NofPages : 0}\r\n\t\t\t\tonPageChange={onPageChange}\r\n\t\t\t/>\r\n\r\n\t\t\t<ItemsPerPage />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Pagination;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nfunction Sorting() {\r\n\tconst {\r\n\t\tstore: { searchResults, pendingSearch },\r\n\t\tactor,\r\n\t} = useHawksearch();\r\n\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\tfunction onChange(event: React.ChangeEvent<HTMLSelectElement>) {\r\n\t\tactor.setSearch({\r\n\t\t\tSortBy: event.currentTarget.value,\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-sorting\">\r\n\t\t\t<span className=\"hawk-sorting__label\">{t('Sort By')}</span>\r\n\r\n\t\t\t<select value={pendingSearch.SortBy} onChange={onChange}>\r\n\t\t\t\t{searchResults ? (\r\n\t\t\t\t\tsearchResults.Sorting.Items.map(sortingItem => (\r\n\t\t\t\t\t\t<option key={sortingItem.Value} value={sortingItem.Value} selected={sortingItem.Selected}>\r\n\t\t\t\t\t\t\t{sortingItem.Label}\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t))\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<option value=\"score\">Best Match</option>\r\n\t\t\t\t)}\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Sorting;\r\n","import React from 'react';\r\n\r\nimport { Sorting, Pagination } from './Tools';\r\n\r\nfunction ToolRow() {\r\n\treturn (\r\n\t\t<div className=\"hawk-tool-row\">\r\n\t\t\t<div className=\"hawk-tool-row__item\">\r\n\t\t\t\t<Sorting />\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"hawk-tool-row__item\">\r\n\t\t\t\t<Pagination />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ToolRow;\r\n","import * as React from 'react';\r\n\r\ninterface PlaceHolderSVGProps {\r\n\tclass: string;\r\n}\r\n\r\n/**\r\n * Plus SVG\r\n *\r\n * @returns\r\n */\r\n\r\nfunction PlaceHolderSVG(props: PlaceHolderSVGProps) {\r\n\treturn (\r\n\t\t<svg\r\n\t\t\tx=\"0px\"\r\n\t\t\ty=\"0px\"\r\n\t\t\tviewBox=\"0 0 489.4 489.4\"\r\n\t\t\tclassName={'icon ' + props.class}\r\n\t\t\tfocusable=\"false\"\r\n\t\t\taria-hidden=\"true\"\r\n\t\t>\r\n\t\t\t<g>\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M0,437.8c0,28.5,23.2,51.6,51.6,51.6h386.2c28.5,0,51.6-23.2,51.6-51.6V51.6c0-28.5-23.2-51.6-51.6-51.6H51.6\r\n\t\t\tC23.1,0,0,23.2,0,51.6C0,51.6,0,437.8,0,437.8z M437.8,464.9H51.6c-14.9,0-27.1-12.2-27.1-27.1v-64.5l92.8-92.8l79.3,79.3\r\n\t\t\tc4.8,4.8,12.5,4.8,17.3,0l143.2-143.2l107.8,107.8v113.4C464.9,452.7,452.7,464.9,437.8,464.9z M51.6,24.5h386.2\r\n\t\t\tc14.9,0,27.1,12.2,27.1,27.1v238.1l-99.2-99.1c-4.8-4.8-12.5-4.8-17.3,0L205.2,333.8l-79.3-79.3c-4.8-4.8-12.5-4.8-17.3,0\r\n\t\t\tl-84.1,84.1v-287C24.5,36.7,36.7,24.5,51.6,24.5z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<path\r\n\t\t\t\t\t\td=\"M151.7,196.1c34.4,0,62.3-28,62.3-62.3s-28-62.3-62.3-62.3s-62.3,28-62.3,62.3S117.3,196.1,151.7,196.1z M151.7,96\r\n\t\t\tc20.9,0,37.8,17,37.8,37.8s-17,37.8-37.8,37.8s-37.8-17-37.8-37.8S130.8,96,151.7,96z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</g>\r\n\t\t\t</g>\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default PlaceHolderSVG;\r\n","import React from 'react';\r\nimport PlaceHolderSVG from 'components/svg/PlaceholderSVG';\r\n\r\nexport interface PlaceholderImageProps {\r\n\t/** Whether or not to display a spinner in the center of the placeholder. */\r\n\tshowSpinner: boolean;\r\n}\r\n\r\nfunction PlaceholderImage({ showSpinner }: PlaceholderImageProps) {\r\n\treturn (\r\n\t\t<div className=\"hawk-results__item-placeholder\">\r\n\t\t\t<PlaceHolderSVG class=\"hawk-placeholderSVG\" />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default PlaceholderImage;\r\n","import React from 'react';\r\n\r\nimport PlaceholderImage from './PlaceholderImage';\r\n\r\nfunction PlaceholderItem() {\r\n\treturn (\r\n\t\t<div className=\"hawk-results__item\">\r\n\t\t\t<div className=\"hawk-results__item-image\">\r\n\t\t\t\t<PlaceholderImage showSpinner={false} />\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"hawk-results__item-name\">\r\n\t\t\t\t<div className=\"hawk-results__item-name-placeholder\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default PlaceholderItem;\r\n","import React from 'react';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nexport interface SpinnerProps {\r\n\tisVisible: boolean;\r\n}\r\n\r\nfunction Spinner({ isVisible }: SpinnerProps) {\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\tif (!isVisible) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={'hawk-modal'}>\r\n\t\t\t<div className={'hawk-modal__content'}>{t('Loading')}...</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Spinner;\r\n","import React, { useState } from 'react';\r\n\r\nimport { Result } from 'models/Search';\r\nimport PlaceholderImage from './PlaceholderImage';\r\n\r\nexport interface ResultImageProps {\r\n\titem: Result;\r\n\twebsiteUrl?: string;\r\n\timageTitle?: string;\r\n\timageUrl?: string;\r\n\titemTitleFieldName?: string;\r\n\timageUrlFieldName?: string;\r\n\tonLoadCallBack?: () => void;\r\n\tonClickImage?: (e) => void;\r\n}\r\n\r\nfunction ResultImage({\r\n\titem,\r\n\twebsiteUrl,\r\n\titemTitleFieldName,\r\n\timageUrlFieldName,\r\n\timageUrl,\r\n\timageTitle,\r\n\tonLoadCallBack,\r\n\tonClickImage,\r\n}: ResultImageProps) {\r\n\tconst [imageLoaded, setImageLoaded] = useState(false);\r\n\r\n\tif (!imageUrl) {\r\n\t\timageUrl = imageUrlFieldName ? item.getDocumentValue(imageUrlFieldName) : item.getDocumentValue('image');\r\n\t}\r\n\tif (!imageUrl) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif (!imageTitle) {\r\n\t\timageTitle = itemTitleFieldName ? item.getDocumentValue(itemTitleFieldName) : item.getDocumentValue('itemname');\r\n\t}\r\n\r\n\tconst absoluteUrlTester = new RegExp('^https?://|^//', 'i');\r\n\tif (!absoluteUrlTester.test(imageUrl) && websiteUrl) {\r\n\t\timageUrl = websiteUrl + imageUrl;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-results__item-image\" {...(onClickImage && { onClick: e => onClickImage(e) })}>\r\n\t\t\t<div style={imageLoaded ? {} : { overflow: 'hidden', width: '0px', height: '0px' }}>\r\n\t\t\t\t<img\r\n\t\t\t\t\tonLoad={() => {\r\n\t\t\t\t\t\tif (onLoadCallBack) {\r\n\t\t\t\t\t\t\tonLoadCallBack();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsetImageLoaded(true);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tsrc={imageUrl}\r\n\t\t\t\t\talt={`Image for ${imageTitle}`}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t{!imageLoaded ? (\r\n\t\t\t\t// if the main image hasn't loaded yet, show a placeholder\r\n\t\t\t\t<PlaceholderImage showSpinner={true} />\r\n\t\t\t) : null}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ResultImage;\r\n","import React from 'react';\r\n\r\nimport { Result } from 'models/Search';\r\nimport ResultImage from './ResultImage';\r\n\r\nexport interface ResultItemProps {\r\n\titem: Result;\r\n}\r\n\r\nfunction ResultItem({ item }: ResultItemProps) {\r\n\tconst itemName = item.getDocumentValue('itemname');\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-results__item\">\r\n\t\t\t<ResultImage item={item} />\r\n\r\n\t\t\t<div className=\"hawk-results__item-name\">\r\n\t\t\t\t<span>{itemName}</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ResultItem;\r\n","import React from 'react';\r\nimport PlaceholderItem from './PlaceholderItem';\r\nimport Spinner from 'components/ui/Spinner';\r\nimport { default as DefaultResultItem, ResultItemProps } from './ResultItem';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\n\r\nexport interface ResultsListingProps {\r\n\tResultItem: React.ComponentType<ResultItemProps>;\r\n}\r\n\r\nfunction ResultListing({ ResultItem = DefaultResultItem }: ResultsListingProps) {\r\n\tconst {\r\n\t\tstore: { isLoading, searchResults },\r\n\t} = useHawksearch();\r\n\r\n\tconst results = searchResults ? searchResults.Results : [];\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-results__listing\">\r\n\t\t\t<Spinner isVisible={isLoading} />\r\n\r\n\t\t\t{results.length\r\n\t\t\t\t? // if we have results, display them\r\n\t\t\t\t  results.map(result => <ResultItem key={result.DocId} item={result} />)\r\n\t\t\t\t: // otherwise display placeholder items as we're loading\r\n\t\t\t\t  [...Array(12)].map((_, i) => <PlaceholderItem key={i} />)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ResultListing;\r\n","import * as React from 'react';\r\n\r\ninterface XCircleSVGProps {\r\n\tclass?: string;\r\n}\r\n\r\n/**\r\n * X Circle SVG\r\n *\r\n * @returns\r\n */\r\nfunction XCircleSVG(props: XCircleSVGProps) {\r\n\treturn (\r\n\t\t<svg\r\n\t\t\tviewBox=\"0 0 32 32\"\r\n\t\t\tclassName={'icon icon-help-header ' + props.class}\r\n\t\t\tfocusable=\"false\"\r\n\t\t\taria-hidden=\"true\"\r\n\t\t>\r\n\t\t\t<path\r\n\t\t\t\tfill=\"#d9534f\"\r\n\t\t\t\td=\"M15.998 0c8.837 0 16 7.163 16 16s-7.163 16-16 16c-8.837 0-16-7.163-16-16v0c0-8.837 7.163-16 16-16v0z\"\r\n\t\t\t/>\r\n\t\t\t<path\r\n\t\t\t\tfill=\"#fff\"\r\n\t\t\t\td=\"M13.6 11.646l7.171 7.171c0.541 0.541 0.541 1.417 0 1.958l0.002-0.002c-0.541 0.541-1.417 0.541-1.958 0l-7.171-7.171c-0.541-0.541-0.541-1.417 0-1.958l-0.002 0.002c0.541-0.541 1.417-0.541 1.958 0z\"\r\n\t\t\t/>\r\n\t\t\t<path\r\n\t\t\t\tfill=\"#fff\"\r\n\t\t\t\td=\"M20.774 13.6l-7.174 7.174c-0.54 0.54-1.415 0.54-1.955 0l-0.002-0.002c-0.54-0.54-0.54-1.415 0-1.955l7.174-7.174c0.54-0.54 1.415-0.54 1.955 0l0.002 0.002c0.54 0.54 0.54 1.415 0 1.955z\"\r\n\t\t\t/>\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default XCircleSVG;\r\n","import React from 'react';\r\nimport moment from 'moment';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport XCircleSVG from 'components/svg/XCircleSVG';\r\nimport { ClientSelectionValue, ClientSelection } from 'store/ClientSelections';\r\nimport { Facet, Range } from 'models/Facets';\r\n\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nfunction Selections() {\r\n\tconst {\r\n\t\tstore: { facetSelections, pendingSearch },\r\n\t\tactor,\r\n\t} = useHawksearch();\r\n\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\t// Added filter to hide selection for Tabs\r\n\tconst keys = Object.keys(facetSelections).filter(key => key !== 'it');\r\n\tif (keys.length === 0) {\r\n\t\t// no selections, so render nothing\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction clearSelection(facet: string, value?: ClientSelectionValue) {\r\n\t\tif (value) {\r\n\t\t\tactor.clearFacetValue(facet, value.value);\r\n\t\t} else {\r\n\t\t\tactor.clearFacet(facet);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction clearAll() {\r\n\t\tactor.clearAllFacets();\r\n\t}\r\n\r\n\tfunction renderRange(value: ClientSelectionValue, facet: Facet) {\r\n\t\tconst displayValue = value.value;\r\n\r\n\t\tif (!displayValue || displayValue.indexOf(',') === -1) {\r\n\t\t\t// range facet selection values should include a comma, so if they don't then this likely isn't a valid\r\n\t\t\t// range value that we want to render\r\n\t\t\tconst selectedRange = facet.Ranges.find((range: Range) => range.Value === value.value);\r\n\t\t\treturn selectedRange ? selectedRange.Label : displayValue;\r\n\t\t}\r\n\r\n\t\tconst splittedValues = displayValue.split(',');\r\n\t\tif (facet.IsCurrency && splittedValues.length > 1) {\r\n\t\t\treturn `${facet.CurrencySymbol} ${splittedValues[0]} - ${facet.CurrencySymbol} ${splittedValues[1]}`;\r\n\t\t}\r\n\r\n\t\t// return a prettier display value for ranges\r\n\t\treturn displayValue.replace(',', ' - ');\r\n\t}\r\n\r\n\tfunction renderLabel(selection, item) {\r\n\t\tif (selection.facet.FacetType === 'openRange' && selection.facet.DataType === 'datetime') {\r\n\t\t\tlet [startDate, endDate] = (item.label || ',').split(',');\r\n\t\t\tstartDate = moment(startDate.replace(/\\//g, '-')).format('LLLL');\r\n\t\t\tendDate = moment(endDate.replace(/\\//g, '-')).format('LLLL');\r\n\t\t\treturn `${startDate} - ${endDate}`;\r\n\t\t} else if (selection.facet.FieldType === 'range') {\r\n\t\t\treturn renderRange(item, selection.facet);\r\n\t\t} else if (selection.facet.FacetType === 'search') {\r\n\t\t\treturn decodeURIComponent(item.label);\r\n\t\t}\r\n\t\treturn item.label;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__selections\">\r\n\t\t\t<h4>{t(\"You've Selected\")}</h4>\r\n\t\t\t<ul className=\"hawk-selections\">\r\n\t\t\t\t{keys.map(key => {\r\n\t\t\t\t\tconst selection = facetSelections[key];\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<li key={key} className=\"hawk-selections__category\">\r\n\t\t\t\t\t\t\t<div className=\"hawk-selections__category-wrapper\">\r\n\t\t\t\t\t\t\t\t<span className=\"hawk-selections__category-name\">{selection.label}:</span>\r\n\r\n\t\t\t\t\t\t\t\t<ul className=\"hawk-selections__item-list\">\r\n\t\t\t\t\t\t\t\t\t{selection.items.map(item => {\r\n\t\t\t\t\t\t\t\t\t\tconst negation = item.value.startsWith('-');\r\n\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<li key={item.value} className=\"hawk-selections__item\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => clearSelection(key, item)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"hawk-selections__item-remove\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<XCircleSVG />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"visually-hidden\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tUnselect facet {selection.label} {item.label}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnegation\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'hawk-selections__item-name hawk-selections__item-name--negated'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'hawk-selections__item-name'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{renderLabel(selection, item)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<button onClick={() => clearSelection(key)} className=\"hawk-selections__category-remove\">\r\n\t\t\t\t\t\t\t\t<XCircleSVG />{' '}\r\n\t\t\t\t\t\t\t\t<span className=\"visually-hidden\">Unselect all facets for {selection.label}</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\r\n\t\t\t\t<li className=\"hawk-selections__category\">\r\n\t\t\t\t\t<button onClick={clearAll} className=\"hawk-btn hawk-btn-primary-outline\">\r\n\t\t\t\t\t\t{t('Clear All')}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Selections;\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nfunction SearchResultsLabel() {\r\n\tconst {\r\n\t\tstore: { pendingSearch, searchResults },\r\n\t} = useHawksearch();\r\n\tconst [keyword, setKeyword] = useState('');\r\n\r\n\tconst { t, i18n } = useTranslation();\r\n\tuseEffect(() => {\r\n\t\tif (searchResults && searchResults.AdjustedKeyword) {\r\n\t\t\tsetKeyword(decodeURIComponent(searchResults.AdjustedKeyword));\r\n\t\t} else {\r\n\t\t\tsetKeyword(decodeURIComponent(pendingSearch.Keyword || ''));\r\n\t\t}\r\n\t}, [searchResults]);\r\n\r\n\tif (!pendingSearch.Keyword) {\r\n\t\t// no selections, so render nothing\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__results-label\">\r\n\t\t\t<h3>{pendingSearch.Keyword ? t('Search Results for') + ' ' + keyword : t('Search Results')}</h3>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SearchResultsLabel;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { ContentType } from 'models/Search/ContentType';\r\nimport { PageContentItem } from '../../../models/Search/Merchandising';\r\nimport { default as TrackingEvent } from 'components/TrackingEvent';\r\n\r\nexport interface MerchandisingBannerProps {\r\n\tBannerZone: string;\r\n}\r\n\r\ninterface TrackEventPayloadProps {\r\n\tbannerId: number;\r\n\tcampaignId: number;\r\n\ttrackingId?: string;\r\n}\r\n\r\nfunction MerchandisingBanner({ BannerZone }: MerchandisingBannerProps) {\r\n\tconst {\r\n\t\tstore: { isLoading, searchResults },\r\n\t} = useHawksearch();\r\n\r\n\tlet matchedMerchandisingItems: PageContentItem[] = searchResults\r\n\t\t? searchResults.Merchandising.Items.filter(i => i.Zone === BannerZone)\r\n\t\t: [];\r\n\r\n\tmatchedMerchandisingItems = matchedMerchandisingItems.concat(\r\n\t\tsearchResults ? searchResults.FeaturedItems.Items.filter(i => i.Zone === BannerZone) : []\r\n\t);\r\n\tfunction getBannerHtml(matchedMerchandisingItem: PageContentItem) {\r\n\t\treturn { __html: matchedMerchandisingItem.Output };\r\n\t}\r\n\r\n\tfunction renderBanner(merchandisingItem: PageContentItem, bannerIndex: number) {\r\n\t\tfunction trackEvent(type: string, trackEventPayload: TrackEventPayloadProps) {\r\n\t\t\tif (searchResults && searchResults.TrackingId) {\r\n\t\t\t\tTrackingEvent.track(type, {\r\n\t\t\t\t\t...trackEventPayload,\r\n\t\t\t\t\ttrackingId: searchResults.TrackingId,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tswitch (merchandisingItem.ContentType) {\r\n\t\t\tcase ContentType.Custom:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={bannerIndex}>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\ttrackEvent('bannerclick', {\r\n\t\t\t\t\t\t\t\t\tbannerId: merchandisingItem.BannerId,\r\n\t\t\t\t\t\t\t\t\tcampaignId: merchandisingItem.CampaignId,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tclassName=\"text-left\"\r\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={getBannerHtml(merchandisingItem)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\t\tcase ContentType.Widget:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={bannerIndex}>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\ttrackEvent('bannerclick', {\r\n\t\t\t\t\t\t\t\t\tbannerId: merchandisingItem.BannerId,\r\n\t\t\t\t\t\t\t\t\tcampaignId: merchandisingItem.CampaignId,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tclassName=\"text-left\"\r\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={getBannerHtml(merchandisingItem)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\t\tcase ContentType.Image:\r\n\t\t\t\tconst absoluteUrlTester = new RegExp('^https?://|^//', 'i');\r\n\t\t\t\tconst imageURL = merchandisingItem.ImageUrl;\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"text-left\" key={bannerIndex}>\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\ttrackEvent('bannerclick', {\r\n\t\t\t\t\t\t\t\t\tbannerId: merchandisingItem.BannerId,\r\n\t\t\t\t\t\t\t\t\tcampaignId: merchandisingItem.CampaignId,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\thref={merchandisingItem.ForwardUrl}\r\n\t\t\t\t\t\t\ttitle={merchandisingItem.ImageTitle}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tonLoad={() => {\r\n\t\t\t\t\t\t\t\t\ttrackEvent('bannerimpression', {\r\n\t\t\t\t\t\t\t\t\t\tbannerId: merchandisingItem.BannerId,\r\n\t\t\t\t\t\t\t\t\t\tcampaignId: merchandisingItem.CampaignId,\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsrc={imageURL}\r\n\t\t\t\t\t\t\t\ttitle={merchandisingItem.ImageTitle}\r\n\t\t\t\t\t\t\t\talt={merchandisingItem.AltTag}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tif (matchedMerchandisingItems.length > 0) {\r\n\t\treturn (\r\n\t\t\t<div className=\"hawk-preview__banner-container\">\r\n\t\t\t\t{matchedMerchandisingItems.map((merchendisingItem, index) => {\r\n\t\t\t\t\treturn renderBanner(merchendisingItem, index);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t);\r\n\t} else {\r\n\t\treturn null;\r\n\t}\r\n}\r\nexport default MerchandisingBanner;\r\n","import React, { useEffect } from 'react';\r\nimport { Nav, NavItem, NavLink } from 'reactstrap';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useHawkConfig } from '../../ConfigProvider';\r\n\r\nfunction Tabs() {\r\n\tconst {\r\n\t\tactor: hawkActor,\r\n\t\tstore: { searchResults },\r\n\t} = useHawksearch();\r\n\tconst { config } = useHawkConfig();\r\n\r\n\tconst tabFacet = searchResults && searchResults.Facets.find(facet => facet.FieldType === 'tab');\r\n\r\n\tuseEffect(() => {\r\n\t\tif (\r\n\t\t\ttabFacet &&\r\n\t\t\ttabFacet.Values.filter(t => t.Selected).length === 0 &&\r\n\t\t\tconfig.tabConfig &&\r\n\t\t\tconfig.tabConfig.alwaysOn\r\n\t\t) {\r\n\t\t\thawkActor.setFacetValues(tabFacet, [tabFacet.Values[0]]);\r\n\t\t}\r\n\t}, [tabFacet]);\r\n\r\n\tfunction getTabCssClassName(tabValues, index: number): string {\r\n\t\tconst bootstrapClasses = 'ml-2 mr-2 mt-2 mb-2';\r\n\r\n\t\tif (tabValues[index].Selected) {\r\n\t\t\treturn `${bootstrapClasses} active`;\r\n\t\t}\r\n\t\treturn `${bootstrapClasses}`;\r\n\t}\r\n\r\n\tif (tabFacet && tabFacet.Values.length > 0) {\r\n\t\treturn (\r\n\t\t\t<div className=\"hawk-preview__results_tabs\">\r\n\t\t\t\t<Nav tabs>\r\n\t\t\t\t\t{tabFacet.Values.map((tabValue, index, tabValues) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<NavItem className={getTabCssClassName(tabValues, index)} key={`results_type_tab_${index}`}>\r\n\t\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\thawkActor.setFacetValues(tabFacet, [tabValue]);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{tabValue.Label}\r\n\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Nav>\r\n\t\t\t</div>\r\n\t\t);\r\n\t} else {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport default Tabs;\r\n","import React from 'react';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport ToolRow from 'components/ui/Results/ToolRow';\r\nimport ResultListing from 'components/ui/Results/ResultListing';\r\nimport Selections from 'components/ui/Facets/Selections';\r\nimport { default as DefaultResultItem, ResultItemProps } from 'components/ui/Results/ResultItem';\r\nimport SearchResultsLabel from 'components/ui/Facets/SearchResultsLabel';\r\nimport { useTranslation } from 'react-i18next';\r\nimport MerchandisingBanner from './MerchandisingBanner';\r\nimport Tabs from './Tabs';\r\n\r\nexport interface ResultsProps {\r\n\tResultItem?: React.ComponentType<ResultItemProps>;\r\n}\r\n\r\nfunction Results({ ResultItem = DefaultResultItem }: ResultsProps) {\r\n\tconst {\r\n\t\tstore: { isLoading, searchResults, requestError },\r\n\t} = useHawksearch();\r\n\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\tif (requestError) {\r\n\t\treturn <span>An error occurred while searching for your results. Please contact the site administrator.</span>;\r\n\t}\r\n\r\n\t// end of overrides\r\n\tif ((!searchResults || searchResults.Results.length === 0) && !isLoading) {\r\n\t\treturn <span>{t('No Results')}</span>;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-results\">\r\n\t\t\t<SearchResultsLabel />\r\n\r\n\t\t\t<div className=\"hawk-preview__bannerTop\">\r\n\t\t\t\t<MerchandisingBanner BannerZone=\"Top\" />\r\n\t\t\t</div>\r\n\r\n\t\t\t<Selections />\r\n\r\n\t\t\t<Tabs />\r\n\r\n\t\t\t<div className=\"hawk-results__top-tool-row\">\r\n\t\t\t\t<ToolRow />\r\n\t\t\t</div>\r\n\r\n\t\t\t<ResultListing ResultItem={ResultItem} />\r\n\r\n\t\t\t<div className=\"hawk-preview__bannerBottom\">\r\n\t\t\t\t<MerchandisingBanner BannerZone=\"Bottom\" />\r\n\t\t\t\t<MerchandisingBanner BannerZone=\"Bottom2\" />\r\n\t\t\t\t<MerchandisingBanner BannerZone=\"BannerBottom2\" />\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"hawk-results__bottom-tool-row\">\r\n\t\t\t\t<ToolRow />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Results;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport SearchBox from 'components/ui/SearchBox/SearchBox';\r\nimport FacetRail from 'components/ui/Facets/FacetRail';\r\nimport { Results } from 'components/ui/Results';\r\nimport { useHawkConfig } from 'components/ConfigProvider';\r\n\r\nfunction App() {\r\n\tconst { config } = useHawkConfig();\r\n\r\n\tfunction getElement(elem: HTMLElement | string) {\r\n\t\tif (typeof elem === 'string') {\r\n\t\t\treturn document.getElementById(elem);\r\n\t\t}\r\n\r\n\t\treturn elem;\r\n\t}\r\n\r\n\tfunction renderSearchBox() {\r\n\t\treturn (\r\n\t\t\t<div className=\"hawk\">\r\n\t\t\t\t<div className=\"hawk__header\">\r\n\t\t\t\t\t<SearchBox />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tconst renderElem = config.searchBoxElement ? getElement(config.searchBoxElement) : null;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{renderElem ? ReactDOM.createPortal(renderSearchBox(), renderElem) : renderSearchBox()}\r\n\r\n\t\t\t<div className=\"hawk\">\r\n\t\t\t\t<div className=\"hawk__body\">\r\n\t\t\t\t\t<FacetRail />\r\n\r\n\t\t\t\t\t<Results />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React, { useState } from 'react';\r\n\r\nimport ConfigProvider from 'components/ConfigProvider';\r\nimport StoreProvider from 'components/StoreProvider';\r\nimport { HawksearchConfig } from 'types/HawksearchConfig';\r\nimport { Request } from 'models/Search';\r\nimport TrackingEvent from './TrackingEvent';\r\nimport { createWidgetId } from 'helpers/utils';\r\n\r\nexport interface HawksearchProps {\r\n\t/** Global configuration. */\r\n\tconfig: HawksearchConfig;\r\n\t/** The initial search to perform when initializing the search components. */\r\n\tinitialSearch?: Partial<Request>;\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\nfunction Hawksearch(props: HawksearchProps) {\r\n\tconst id = createWidgetId();\r\n\tconst [widgetId, setWidgetId] = useState(id);\r\n\r\n\tif (props.config.enableTrackEvent && props.config.trackEventUrl) {\r\n\t\t// Set URL to track event\r\n\t\tTrackingEvent.setTrackingURL(props.config.trackEventUrl);\r\n\t\tTrackingEvent.setTrackConfig(props.config.trackConfig);\r\n\t\tTrackingEvent.setClientGUID(props.config.clientGuid);\r\n\t\tTrackingEvent.setLanguage(props.config.language);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ConfigProvider config={props.config}>\r\n\t\t\t<StoreProvider initialSearch={props.initialSearch} widgetId={widgetId}>\r\n\t\t\t\t{props.children}\r\n\t\t\t</StoreProvider>\r\n\t\t</ConfigProvider>\r\n\t);\r\n}\r\n\r\nexport default Hawksearch;\r\n","//\r\n// this file is the entry point for the main search application when running the minified bundle\r\n//\r\n\r\nimport '@babel/polyfill';\r\nimport 'url-search-params-polyfill';\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport 'rheostat/initialize';\r\n\r\nimport QueryStringListener from 'components/QueryStringListener';\r\nimport App from 'app/App';\r\nimport Hawksearch from 'components/Hawksearch';\r\nimport { parseLocation } from 'util/QueryString';\r\nimport { HawksearchConfig } from 'types/HawksearchConfig';\r\n\r\ndeclare global {\r\n\tinterface Window {\r\n\t\tHawksearch?: HawksearchConfig;\r\n\t}\r\n}\r\n\r\nif (window.Hawksearch) {\r\n\tinitializeSearch(window.Hawksearch);\r\n}\r\n\r\nexport function initializeSearch(config: HawksearchConfig) {\r\n\tif (!config.searchElement) {\r\n\t\tthrow new Error('window.Hawksearch.searchElement has not been configured');\r\n\t}\r\n\r\n\tconst renderElem =\r\n\t\ttypeof config.searchElement === 'string' ? document.getElementById(config.searchElement) : config.searchElement;\r\n\r\n\t// pull the initial search from location\r\n\tconst searchRequest = parseLocation(location);\r\n\r\n\tReactDOM.render(\r\n\t\t<Hawksearch config={config} initialSearch={searchRequest}>\r\n\t\t\t<QueryStringListener />\r\n\t\t\t<App />\r\n\t\t</Hawksearch>,\r\n\t\trenderElem\r\n\t);\r\n}\r\n","import * as React from 'react';\r\n\r\ninterface PlusSVGProps {\r\n\tclass?: string;\r\n}\r\n\r\n/**\r\n * Plus SVG\r\n *\r\n * @returns\r\n */\r\nfunction PlusSVG(props: PlusSVGProps) {\r\n\treturn (\r\n\t\t<svg viewBox=\"0 0 32 32\" className={'icon ' + props.class} focusable=\"false\" aria-hidden=\"true\">\r\n\t\t\t<path d=\"M31 12h-11v-11c0-0.552-0.448-1-1-1h-6c-0.552 0-1 0.448-1 1v11h-11c-0.552 0-1 0.448-1 1v6c0 0.552 0.448 1 1 1h11v11c0 0.552 0.448 1 1 1h6c0.552 0 1-0.448 1-1v-11h11c0.552 0 1-0.448 1-1v-6c0-0.552-0.448-1-1-1z\" />\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default PlusSVG;\r\n","import * as React from 'react';\r\n\r\ninterface MinusSVGProps {\r\n\tclass?: string;\r\n}\r\n\r\n/**\r\n * Minus SVG\r\n *\r\n * @returns\r\n */\r\nfunction MinusSVG(props: MinusSVGProps) {\r\n\treturn (\r\n\t\t<svg viewBox=\"0 0 32 32\" className={'icon ' + props.class} focusable=\"false\" aria-hidden=\"true\">\r\n\t\t\t<path d=\"M0 13v6c0 0.552 0.448 1 1 1h30c0.552 0 1-0.448 1-1v-6c0-0.552-0.448-1-1-1h-30c-0.552 0-1 0.448-1 1z\" />\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default MinusSVG;\r\n","import * as React from 'react';\r\n\r\ninterface QuestionmarkSVGProps {\r\n\tclass: string;\r\n}\r\n\r\n/**\r\n * Questionmark SVG\r\n *\r\n * @returns\r\n */\r\nfunction QuestionmarkSVG(props: QuestionmarkSVGProps) {\r\n\treturn (\r\n\t\t<svg viewBox=\"0 0 32 32\" className={'icon ' + props.class} focusable=\"false\" aria-hidden=\"true\">\r\n\t\t\t<path d=\"M 10.976562 14.785156 C 10.976562 15.324219 10.539062 15.761719 10 15.761719 C 9.460938 15.761719 9.023438 15.324219 9.023438 14.785156 C 9.023438 14.246094 9.460938 13.808594 10 13.808594 C 10.539062 13.808594 10.976562 14.246094 10.976562 14.785156 Z M 10.976562 14.785156 \" />\r\n\t\t\t<path d=\"M 10 0 C 4.472656 0 0 4.472656 0 10 C 0 15.527344 4.472656 20 10 20 C 15.527344 20 20 15.527344 20 10 C 20 4.472656 15.527344 0 10 0 Z M 10 18.4375 C 5.335938 18.4375 1.5625 14.664062 1.5625 10 C 1.5625 5.335938 5.335938 1.5625 10 1.5625 C 14.664062 1.5625 18.4375 5.335938 18.4375 10 C 18.4375 14.664062 14.664062 18.4375 10 18.4375 Z M 10 18.4375 \" />\r\n\t\t\t<path d=\"M 10 5.019531 C 8.277344 5.019531 6.875 6.421875 6.875 8.144531 C 6.875 8.574219 7.226562 8.925781 7.65625 8.925781 C 8.085938 8.925781 8.4375 8.574219 8.4375 8.144531 C 8.4375 7.28125 9.136719 6.582031 10 6.582031 C 10.863281 6.582031 11.5625 7.28125 11.5625 8.144531 C 11.5625 9.007812 10.863281 9.707031 10 9.707031 C 9.570312 9.707031 9.21875 10.058594 9.21875 10.488281 L 9.21875 12.441406 C 9.21875 12.871094 9.570312 13.222656 10 13.222656 C 10.429688 13.222656 10.78125 12.871094 10.78125 12.441406 L 10.78125 11.171875 C 12.128906 10.824219 13.125 9.597656 13.125 8.144531 C 13.125 6.421875 11.722656 5.019531 10 5.019531 Z M 10 5.019531 \" />\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default QuestionmarkSVG;\r\n","import React, { useContext, useState, useRef, MouseEvent } from 'react';\r\nimport { useCookies } from 'react-cookie';\r\nimport { Facet as FacetModel, Value } from 'models/Facets';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport PlusSVG from 'components/svg/PlusSVG';\r\nimport MinusSVG from 'components/svg/MinusSVG';\r\nimport QuestionmarkSVG from 'components/svg/QuestionmarkSVG';\r\n\r\nconst FacetContext = React.createContext({} as FacetContextValue);\r\n\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nexport interface FacetProps {\r\n\tfacet: FacetModel;\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\ninterface FacetContextValue {\r\n\t/** The facet model returned from the server for this facet. */\r\n\tfacet: FacetModel;\r\n\r\n\t/** Returns the state of the parent facet container. */\r\n\tstate: FacetState;\r\n\r\n\t/** An actor interface to perform actions for this facet. */\r\n\tactor: FacetActor;\r\n\r\n\trenderer: FacetRenderer;\r\n}\r\n\r\nexport interface FacetState {\r\n\t/**\r\n\t * An array of facet values for this facet. If this facet has a quick lookup search bar, this list\r\n\t * will be filtered by this quick lookup.\r\n\t */\r\n\tfacetValues: Value[];\r\n\r\n\t/**\r\n\t * If the facet is configured for filtering, this is the user's entered filter value. Updated on\r\n\t * immediately when the user types.\r\n\t */\r\n\tfilter: string;\r\n\r\n\t/** Whether or not this facet has its values truncated. */\r\n\tisTruncated: boolean;\r\n\t/** Whether or not this facet is collapsed. */\r\n\tisCollapsed: boolean;\r\n\t/** If filter is enabled, contains the number of facets that are truncated. */\r\n\tremainingFacets: number;\r\n\r\n\t// It shows the decimal count in slider\r\n\tdecimalPrecision: number;\r\n}\r\n\r\nexport interface FacetActor {\r\n\t/** Select the given facet value. */\r\n\tselectFacet(facetValue: Value | string): void;\r\n\t/** Selects and negates the given facet value. */\r\n\tnegateFacet(facetValue: Value | string): void;\r\n\r\n\t/** Sets the selected facet values by replacing existing selections for this facet.  */\r\n\tsetFacets(facetValues: Value[] | string[]): void;\r\n\r\n\t/** Sets the filter for this facet container. */\r\n\tsetFilter(filter: string): void;\r\n\r\n\t/** Sets whether or not this facet is currently being truncated. */\r\n\tsetTruncated(truncated: boolean): void;\r\n\t/** Sets whether or not this facet is currently collapsed. */\r\n\tsetCollapsed(collapsed: boolean): void;\r\n}\r\n\r\nexport interface FacetRenderer {\r\n\t/**\r\n\t * Conditionally renders the default truncation UI (the \"Show More\"/\"Show Less\" buttons). Nothing will render\r\n\t * if the facet is configured to not be truncated.\r\n\t */\r\n\trenderTruncation();\r\n}\r\n\r\nfunction getInitialCollapsibleState(facet: FacetModel, cookies: { [key: string]: string }) {\r\n\tconst cookieValue = cookies[facet.Field];\r\n\tif (cookieValue !== undefined) {\r\n\t\treturn cookieValue === 'true'; // Convert string to boolean\r\n\t}\r\n\treturn facet.IsCollapsible && facet.IsCollapsedDefault;\r\n}\r\n\r\nfunction Facet({ facet, children }: FacetProps) {\r\n\tconst { actor: searchActor } = useHawksearch();\r\n\tconst wrapperRef = useRef<HTMLInputElement>(null);\r\n\tconst [filter, setFilter] = useState('');\r\n\tconst [isTruncated, setTruncated] = useState(facet.shouldTruncate);\r\n\tconst [cookies, setCookie] = useCookies([facet.Field]);\r\n\tconst [isCollapsed, setCollapsed] = useState(getInitialCollapsibleState(facet, cookies));\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\tfunction selectFacet(facetValue: Value | string): void {\r\n\t\tsetFilter('');\r\n\t\tsearchActor.toggleFacetValue(facet, facetValue);\r\n\t}\r\n\r\n\tfunction setFacets(values: Value[] | string[]): void {\r\n\t\tsetFilter('');\r\n\t\tsearchActor.setFacetValues(facet, values);\r\n\t}\r\n\r\n\tfunction negateFacet(facetValue: Value | string): void {\r\n\t\tsetFilter('');\r\n\t\tsearchActor.toggleFacetValue(facet, facetValue, /* negate */ true);\r\n\t}\r\n\r\n\tfunction renderTruncation() {\r\n\t\t// only show the toggle button if the facet is configured for truncation and we're not filtering\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{facet.shouldTruncate && !filter && (\r\n\t\t\t\t\t<button onClick={() => actor.setTruncated(!isTruncated)} className=\"hawk-facet-rail__show-more-btn\">\r\n\t\t\t\t\t\t{isTruncated ? `(+) Show ${remainingFacets} More` : '(-) Show Less'}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\t// TODO: sort facet values\r\n\tlet facetValues = facet.Values;\r\n\r\n\t// first, perform any filtering if enabled and a filter has been typed in\r\n\tif (facet.shouldSearch && filter) {\r\n\t\tfacetValues = facet.Values.filter(val => {\r\n\t\t\tif (!val.Label) {\r\n\t\t\t\t// if a facet value doesn't have a label, we can't really filter down to it\r\n\t\t\t\t// so exclude it\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\treturn val.Label.toLowerCase().indexOf(filter.toLowerCase()) !== -1;\r\n\t\t});\r\n\t}\r\n\r\n\t// next, handle truncation\r\n\tlet remainingFacets = 0;\r\n\r\n\tif (facet.shouldTruncate && isTruncated) {\r\n\t\tconst valuesBeforeTrunc = facetValues.length;\r\n\r\n\t\tfacetValues = facetValues.slice(0, facet.TruncateThreshold);\r\n\r\n\t\tremainingFacets = valuesBeforeTrunc - facet.TruncateThreshold;\r\n\t}\r\n\r\n\tconst actor: FacetActor = {\r\n\t\tselectFacet,\r\n\t\tnegateFacet,\r\n\r\n\t\tsetFacets,\r\n\r\n\t\tsetFilter,\r\n\r\n\t\tsetTruncated,\r\n\t\tsetCollapsed,\r\n\t};\r\n\r\n\tconst state: FacetState = {\r\n\t\tfacetValues,\r\n\r\n\t\tfilter,\r\n\r\n\t\tisTruncated,\r\n\t\tisCollapsed,\r\n\t\tremainingFacets,\r\n\t\tdecimalPrecision: 2,\r\n\t};\r\n\r\n\tconst renderer: FacetRenderer = {\r\n\t\trenderTruncation,\r\n\t};\r\n\r\n\tfunction toggleCollapsible(event: MouseEvent) {\r\n\t\tif (wrapperRef.current && wrapperRef.current.contains(event.target as Node)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetCookie(facet.Field, !isCollapsed);\r\n\t\tsetCollapsed(!isCollapsed);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<FacetContext.Provider value={{ facet, state, actor, renderer }}>\r\n\t\t\t<div className=\"hawk-facet-rail__facet\">\r\n\t\t\t\t<div className=\"hawk-facet-rail__facet-heading\" onClick={event => toggleCollapsible(event)}>\r\n\t\t\t\t\t<h4>{facet.Name}</h4>\r\n\t\t\t\t\t{facet.Tooltip && (\r\n\t\t\t\t\t\t<div className=\"custom-tooltip\" ref={wrapperRef}>\r\n\t\t\t\t\t\t\t<QuestionmarkSVG class=\"hawk-questionmark\" />\r\n\t\t\t\t\t\t\t<div className=\"right\">\r\n\t\t\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: facet.Tooltip }} />\r\n\t\t\t\t\t\t\t\t<i />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{isCollapsed ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<PlusSVG /> <span className=\"visually-hidden\">Expand facet category</span>{' '}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<MinusSVG /> <span className=\"visually-hidden\">Collapse facet category</span>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{!isCollapsed && (\r\n\t\t\t\t\t<div className=\"hawk-facet-rail__facet-body\">\r\n\t\t\t\t\t\t{facet.shouldSearch && (\r\n\t\t\t\t\t\t\t<div className=\"hawk-facet-rail__facet__quick-lookup\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tvalue={filter}\r\n\t\t\t\t\t\t\t\t\tonChange={e => setFilter(e.currentTarget.value)}\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tplaceholder={t('Quick Lookup')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{/* render listing component */}\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</FacetContext.Provider>\r\n\t);\r\n}\r\n\r\nexport function useFacet() {\r\n\treturn useContext(FacetContext);\r\n}\r\n\r\nexport default Facet;\r\n","import * as React from 'react';\r\n\r\ninterface DashCircleSVGProps {\r\n\tclass?: string;\r\n}\r\n\r\n/**\r\n * Dash circle SVG\r\n *\r\n * @returns\r\n */\r\nfunction DashCircleSVG(props: DashCircleSVGProps) {\r\n\treturn (\r\n\t\t<svg\r\n\t\t\tviewBox=\"0 0 32 32\"\r\n\t\t\tclassName={'icon icon-help-header ' + props.class}\r\n\t\t\tfocusable=\"false\"\r\n\t\t\taria-hidden=\"true\"\r\n\t\t>\r\n\t\t\t<path\r\n\t\t\t\tfill=\"#5c5c5c\"\r\n\t\t\t\td=\"M16 0c8.837 0 16 7.163 16 16s-7.163 16-16 16c-8.837 0-16-7.163-16-16v0c0-8.837 7.163-16 16-16v0z\"\r\n\t\t\t/>\r\n\t\t\t<path\r\n\t\t\t\tfill=\"#fff\"\r\n\t\t\t\td=\"M21.51 17.594h-11.733c-0.884 0-1.6-0.716-1.6-1.6s0.716-1.6 1.6-1.6h11.733c0.884 0 1.6 0.716 1.6 1.6s-0.716 1.6-1.6 1.6z\"\r\n\t\t\t/>\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default DashCircleSVG;\r\n","import * as React from 'react';\r\n\r\ninterface CheckmarkSVGProps {\r\n\tclass: string;\r\n}\r\n\r\n/**\r\n * Checkmark SVG\r\n *\r\n * @returns\r\n */\r\nfunction CheckmarkSVG(props: CheckmarkSVGProps) {\r\n\treturn (\r\n\t\t<svg viewBox=\"0 0 32 32\" className={'icon ' + props.class} focusable=\"false\" aria-hidden=\"true\">\r\n\t\t\t<path d=\"M27 4l-15 15-7-7-5 5 12 12 20-20z\" />\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default CheckmarkSVG;\r\n","import * as React from 'react';\r\n\r\ninterface PlusCircleSVGProps {\r\n\tclass: string;\r\n}\r\n\r\n/**\r\n * Plus SVG\r\n *\r\n * @returns\r\n */\r\nfunction PlusCircleSVG(props: PlusCircleSVGProps) {\r\n\treturn (\r\n\t\t<svg viewBox=\"0 0 20 20\" className={'icon ' + props.class} focusable=\"false\" aria-hidden=\"true\">\r\n\t\t\t<path d=\"M11 9v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM10 20c-5.523 0-10-4.477-10-10s4.477-10 10-10v0c5.523 0 10 4.477 10 10s-4.477 10-10 10v0z\" />\r\n\t\t</svg>\r\n\t);\r\n}\r\n\r\nexport default PlusCircleSVG;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport { FacetSelectionState } from 'store/Store';\r\nimport DashCircleSVG from 'components/svg/DashCircleSVG';\r\nimport CheckmarkSVG from 'components/svg/CheckmarkSVG';\r\nimport PlusCircleSVG from 'components/svg/PlusCircleSVG';\r\nimport { useHawkConfig } from 'components/ConfigProvider';\r\n\r\nenum FacetRangeDisplayType {\r\n\tText = 1,\r\n\tImage = 2,\r\n\tBoth = 3,\r\n}\r\n\r\nfunction Checkbox() {\r\n\tconst { store } = useHawksearch();\r\n\tconst { config } = useHawkConfig();\r\n\r\n\tconst {\r\n\t\tfacet,\r\n\t\tstate: { facetValues },\r\n\t\tactor,\r\n\t\trenderer,\r\n\t} = useFacet();\r\n\r\n\tfunction renderOptions() {\r\n\t\tif (facet.FieldType === 'range') {\r\n\t\t\treturn facetValues.map(value => {\r\n\t\t\t\tconst correspondingRange = facet.Ranges.find(c => c.Value === value.Value);\r\n\t\t\t\tconst rangeValueAssetUrl = correspondingRange\r\n\t\t\t\t\t? config.dashboardUrl + correspondingRange.AssetFullUrl\r\n\t\t\t\t\t: '';\r\n\r\n\t\t\t\t// facets can be selected or negated, so explicitly check that the facet is not selected\r\n\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\r\n\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\t\t\t\tconst isNegated = selectionState === FacetSelectionState.Negated;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<li key={value.Value} className=\"hawk-facet-rail__facet-list-item\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={e => actor.selectFacet(value)}\r\n\t\t\t\t\t\t\tclassName=\"hawk-facet-rail__facet-btn\"\r\n\t\t\t\t\t\t\taria-pressed={isSelected}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{renderCheckMark(isSelected)}\r\n\t\t\t\t\t\t\t{rangeValueAssetUrl !== '' ? (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<span className=\"hawk-selectionInner\">\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"hawk-range-asset\" title={value.Label} />\r\n\t\t\t\t\t\t\t\t\t\t{FacetRangeDisplayType.Text !== facet.FacetRangeDisplayType && (\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={rangeValueAssetUrl} alt={value.Label} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\tstyle={isNegated ? { textDecoration: 'line-through' } : undefined}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"hawk-facet-rail__facet-name\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{value.Label} ({value.Count})\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\tstyle={isNegated ? { textDecoration: 'line-through' } : undefined}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"hawk-facet-rail__facet-name\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{value.Label} ({value.Count})\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t{renderFacetActions(value.Value || '', isNegated)}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn facetValues.map(value => {\r\n\t\t\t\t// facets can be selected or negated, so explicitly check that the facet is not selected\r\n\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\r\n\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\t\t\t\tconst isNegated = selectionState === FacetSelectionState.Negated;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<li key={value.Value} className=\"hawk-facet-rail__facet-list-item\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={e => actor.selectFacet(value)}\r\n\t\t\t\t\t\t\tclassName=\"hawk-facet-rail__facet-btn\"\r\n\t\t\t\t\t\t\taria-pressed={isSelected}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{renderCheckMark(isSelected)}\r\n\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tstyle={isNegated ? { textDecoration: 'line-through' } : undefined}\r\n\t\t\t\t\t\t\t\tclassName=\"hawk-facet-rail__facet-name\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{value.Label} ({value.Count})\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t{renderFacetActions(value.Value || '', isNegated)}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction renderCheckMark(isSelected: boolean) {\r\n\t\treturn (\r\n\t\t\t<span\r\n\t\t\t\tclassName={\r\n\t\t\t\t\tisSelected\r\n\t\t\t\t\t\t? 'hawk-facet-rail__facet-checkbox hawk-facet-rail__facet-checkbox--checked'\r\n\t\t\t\t\t\t: 'hawk-facet-rail__facet-checkbox'\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{isSelected ? <CheckmarkSVG class=\"hawk-facet-rail__facet-checkbox-icon\" /> : null}\r\n\t\t\t</span>\r\n\t\t);\r\n\t}\r\n\tfunction renderFacetActions(value: string, isNegated: boolean) {\r\n\t\treturn (\r\n\t\t\t<button onClick={e => actor.negateFacet(value)} className=\"hawk-facet-rail__facet-btn-exclude\">\r\n\t\t\t\t{isNegated ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<PlusCircleSVG class=\"hawk-facet-rail__facet-btn-include\" />\r\n\t\t\t\t\t\t<span className=\"visually-hidden\">Include facet</span>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<DashCircleSVG />\r\n\t\t\t\t\t\t<span className=\"visually-hidden\">Exclude facet</span>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</button>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-checkbox\">\r\n\t\t\t\t<ul className=\"hawk-facet-rail__facet-list\">{renderOptions()}</ul>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* render the default truncation control as we don't need to customize this */}\r\n\t\t\t{renderer.renderTruncation()}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Checkbox;\r\n","import React, { useState } from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nfunction Search() {\r\n\tconst { store, actor: hawkActor } = useHawksearch();\r\n\tconst { facet, actor } = useFacet();\r\n\r\n\tconst [input, setInput] = useState<string | undefined>(undefined);\r\n\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\tfunction onKeyDown(event: React.KeyboardEvent<HTMLInputElement>) {\r\n\t\tif (event.key === 'Enter') {\r\n\t\t\tsetInput(undefined); // clear the user's entered value as we want to be driven by the store again\r\n\r\n\t\t\tactor.selectFacet(event.currentTarget.value);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction clearFacet() {\r\n\t\tsetInput(undefined); // clear the user's entered value as we want to be driven by the store again\r\n\r\n\t\thawkActor.clearFacet(facet);\r\n\t}\r\n\r\n\tfunction getInputValue() {\r\n\t\tif (input !== undefined) {\r\n\t\t\t// if the user type an input, that's the value for the input\r\n\t\t\treturn input;\r\n\t\t}\r\n\r\n\t\t// otherwise, use the value from the store\r\n\t\treturn decodeURIComponent(store.pendingSearch.SearchWithin || '');\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t\t<div className=\"hawk-facet-rail__facet-values__search\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tvalue={getInputValue()}\r\n\t\t\t\t\t\tonChange={e => setInput(e.currentTarget.value)}\r\n\t\t\t\t\t\tonKeyDown={onKeyDown}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{store.pendingSearch.SearchWithin && (\r\n\t\t\t\t<div className=\"hawk-facet-rail__facet-values__search-clear\">\r\n\t\t\t\t\t<button className=\"link-button\" onClick={clearFacet}>\r\n\t\t\t\t\t\t{t('Clear')}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Search;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport { FacetSelectionState } from 'store/Store';\r\nimport { Value } from 'models/Facets';\r\n\r\nfunction Link() {\r\n\tconst { store } = useHawksearch();\r\n\tconst {\r\n\t\tfacet,\r\n\t\tstate: { facetValues },\r\n\t\tactor,\r\n\t\trenderer,\r\n\t} = useFacet();\r\n\r\n\tfunction setLinkFacet(value: Value, selectionState: number) {\r\n\t\tif (selectionState) {\r\n\t\t\t// Deselect the facet\r\n\t\t\tactor.selectFacet(value);\r\n\t\t} else {\r\n\t\t\t// Select the facet\r\n\t\t\tactor.setFacets([value]);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-link\">\r\n\t\t\t\t<ul className=\"hawk-facet-rail__facet-list\">\r\n\t\t\t\t\t{facetValues.map(value => {\r\n\t\t\t\t\t\t// facets can be selected or negated, so explicitly check that the facet is not selected\r\n\t\t\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\r\n\t\t\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<li key={value.Value} className=\"hawk-facet-rail__facet-list-item\">\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={e => setLinkFacet(value, selectionState)}\r\n\t\t\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\t\t\tisSelected\r\n\t\t\t\t\t\t\t\t\t\t\t? 'hawk-facet-rail__facet-btn selected'\r\n\t\t\t\t\t\t\t\t\t\t\t: 'hawk-facet-rail__facet-btn'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\taria-pressed={isSelected}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<span className=\"hawk-facet-rail__facet-name\">\r\n\t\t\t\t\t\t\t\t\t\t{value.Label} ({value.Count})\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* render the default truncation control as we don't need to customize this */}\r\n\t\t\t{renderer.renderTruncation()}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Link;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nfunction formatDate(unixFormat: number) {\r\n\tconst date = new Date(unixFormat);\r\n\tconst year = date.getFullYear().toString();\r\n\tconst month = (date.getMonth() + 101).toString().substring(1);\r\n\tconst day = (date.getDate() + 100).toString().substring(1);\r\n\treturn year + '-' + month + '-' + day;\r\n}\r\nexport interface SliderCalendarInputsProps {\r\n\tmin: number;\r\n\tmax: number;\r\n\tvalues: number[];\r\n\tonValueChange(minValue: number, maxValue: number): void;\r\n}\r\nfunction SliderCalendarInputs(sliderProps: SliderCalendarInputsProps) {\r\n\tconst [minValue, setMinValue] = useState(0);\r\n\tconst [maxValue, setMaxValue] = useState(0);\r\n\r\n\tfunction onMinUpdate(event: any) {\r\n\t\tconst value = new Date(event.target.value).getTime();\r\n\r\n\t\tconst newMinValue = Number(value);\r\n\t\tif (isNaN(newMinValue) || minValue === value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetMinValue(value);\r\n\t\tsliderProps.onValueChange(Number(newMinValue), Number(maxValue));\r\n\t}\r\n\r\n\tfunction onMaxUpdate(event: any) {\r\n\t\tconst value = new Date(event.target.value).getTime();\r\n\r\n\t\tconst newMaxValue = Number(value);\r\n\t\tif (isNaN(newMaxValue) || maxValue === value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetMaxValue(value);\r\n\t\tsliderProps.onValueChange(Number(minValue), Number(newMaxValue));\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetMinValue(sliderProps.values[0]);\r\n\t\tsetMaxValue(sliderProps.values[1]);\r\n\t}, [sliderProps]);\r\n\treturn (\r\n\t\t<div className=\"hawk-sliderNumeric\">\r\n\t\t\t<input\r\n\t\t\t\ttype=\"date\"\r\n\t\t\t\tvalue={formatDate(Number(minValue))}\r\n\t\t\t\tclassName=\"hawk-text-input hawk-date-value-start\"\r\n\t\t\t\tmin={formatDate(sliderProps.min)}\r\n\t\t\t\tmax={formatDate(sliderProps.max)}\r\n\t\t\t\tonChange={onMinUpdate}\r\n\t\t\t/>\r\n\r\n\t\t\t<input\r\n\t\t\t\ttype=\"date\"\r\n\t\t\t\tvalue={formatDate(Number(maxValue))}\r\n\t\t\t\tclassName=\"hawk-text-input hawk-date-value-end\"\r\n\t\t\t\tmin={formatDate(sliderProps.min)}\r\n\t\t\t\tmax={formatDate(sliderProps.max)}\r\n\t\t\t\tonChange={onMaxUpdate}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SliderCalendarInputs;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { PublicState } from 'rheostat';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport SliderCalendarInputs from '../SliderCalendarInputs';\r\nconst Rheostat = React.lazy(() => import(/* webpackChunkName: \"rheostat\" */ 'rheostat'));\r\n\r\nfunction formatDate(date: Date) {\r\n\tconst year = date.getFullYear().toString();\r\n\tconst month = (date.getMonth() + 101).toString().substring(1);\r\n\tconst day = (date.getDate() + 100).toString().substring(1);\r\n\treturn year + '-' + month + '-' + day;\r\n}\r\n\r\nfunction replaceHyphen(date: string) {\r\n\tif (!date) {\r\n\t\treturn date;\r\n\t}\r\n\treturn date.replace(/-/g, '/');\r\n}\r\n\r\nfunction getTime(date) {\r\n\treturn date && Number(new Date(date || '').getTime());\r\n}\r\n\r\nfunction SliderDate() {\r\n\tconst {\r\n\t\tstore: { facetSelections },\r\n\t} = useHawksearch();\r\n\r\n\tconst {\r\n\t\tstate: { facetValues, decimalPrecision },\r\n\t\tfacet,\r\n\t\tactor,\r\n\t} = useFacet();\r\n\t// the range of the slider is defined by the first facet value. or null if there is no first value\r\n\tconst range = facetValues.length > 0 ? facetValues[0] : null;\r\n\r\n\tconst [rangeMin, setMinRange] = useState(range && getTime(range.RangeMin));\r\n\tconst [rangeMax, setMaxRange] = useState(range && getTime(range.RangeMax));\r\n\tconst [rangeStart, setStartRange] = useState(range && getTime(range.RangeStart));\r\n\tconst [rangeEnd, setEndRange] = useState(range && getTime(range.RangeEnd));\r\n\r\n\t// if there's no range, initialize to zeros\r\n\tconst [minValue, setMinValue] = useState<number>();\r\n\tconst [maxValue, setMaxValue] = useState<number>();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst paramName = facet.ParamName || facet.Field;\r\n\r\n\t\t// clear min and max value if these were cleared\r\n\t\tif (!paramName || !(paramName in facetSelections)) {\r\n\t\t\tsetMinValue(undefined);\r\n\t\t\tsetMaxValue(undefined);\r\n\t\t}\r\n\t}, [facetSelections]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst newRange = facetValues.length > 0 ? facetValues[0] : null;\r\n\t\tsetMinRange(newRange && getTime(newRange.RangeMin));\r\n\t\tsetMaxRange(newRange && getTime(newRange.RangeMax));\r\n\t\tsetStartRange(newRange && getTime(newRange.RangeStart));\r\n\t\tsetEndRange(newRange && getTime(newRange.RangeEnd));\r\n\t}, [facetValues]);\r\n\r\n\tif (\r\n\t\trangeMin === null ||\r\n\t\tisNaN(rangeMin) ||\r\n\t\trangeMax === null ||\r\n\t\tisNaN(rangeMax) ||\r\n\t\trangeStart === null ||\r\n\t\tisNaN(rangeStart) ||\r\n\t\trangeEnd === null ||\r\n\t\tisNaN(rangeEnd)\r\n\t) {\r\n\t\t// this facet is somehow misconfigured so don't render\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction onSliderDrag(state: PublicState) {\r\n\t\tconst [newMin, newMax] = state.values;\r\n\t\tsetMinValue(newMin);\r\n\t\tsetMaxValue(newMax);\r\n\t}\r\n\r\n\tfunction onSliderValueChange(state: PublicState) {\r\n\t\tconst [newMin, newMax] = state.values;\r\n\r\n\t\tsetFacetValues(newMin, newMax);\r\n\t}\r\n\r\n\tfunction onValueChange(newMinValue: number, newMaxValue: number) {\r\n\t\tlet currentMinValue = minValue;\r\n\t\tlet currentMaxValue = maxValue;\r\n\t\t// if min value wasn't yet selected use range start\r\n\t\tif (minValue === undefined && rangeStart !== null) {\r\n\t\t\tcurrentMinValue = rangeStart; // setMinValue(rangeStart);\r\n\t\t}\r\n\r\n\t\t// if max value wasn't yet selected use range end\r\n\t\tif (maxValue === undefined && rangeEnd !== null) {\r\n\t\t\tcurrentMaxValue = rangeEnd;\r\n\t\t}\r\n\r\n\t\tif (currentMinValue === undefined || currentMaxValue === undefined) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (currentMinValue !== newMinValue && newMinValue <= currentMaxValue) {\r\n\t\t\tif (rangeMin !== null && newMinValue <= rangeMin) {\r\n\t\t\t\tcurrentMinValue = rangeMin;\r\n\t\t\t} else {\r\n\t\t\t\tcurrentMinValue = newMinValue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (currentMaxValue !== newMaxValue && newMaxValue >= currentMinValue) {\r\n\t\t\tif (rangeMax !== null && newMaxValue >= rangeMax) {\r\n\t\t\t\tcurrentMaxValue = rangeMax;\r\n\t\t\t} else {\r\n\t\t\t\tcurrentMaxValue = newMaxValue;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetFacetValues(currentMinValue, currentMaxValue);\r\n\t}\r\n\r\n\tfunction setFacetValues(minVal: number | undefined, maxVal: number | undefined) {\r\n\t\tif (minVal === undefined || maxVal === undefined || isNaN(minVal) || isNaN(maxVal)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetMinValue(minVal);\r\n\t\tsetMaxValue(maxVal);\r\n\r\n\t\tconst formattedMinVal = replaceHyphen(formatDate(new Date(minVal)));\r\n\t\tconst formattedMaxVal = replaceHyphen(formatDate(new Date(maxVal)));\r\n\r\n\t\t// this selection is sent to hawk separated by commas, so build the value here\r\n\t\tconst selection = `${formattedMinVal},${formattedMaxVal}`;\r\n\t\tactor.setFacets([selection]);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-link\">\r\n\t\t\t\t<React.Suspense fallback={<div>Loading...</div>}>\r\n\t\t\t\t\t<SliderCalendarInputs\r\n\t\t\t\t\t\tmin={rangeMin}\r\n\t\t\t\t\t\tmax={rangeMax}\r\n\t\t\t\t\t\tvalues={[\r\n\t\t\t\t\t\t\tminValue === undefined ? rangeStart : Math.max(minValue, rangeMin),\r\n\t\t\t\t\t\t\tmaxValue === undefined ? rangeEnd : Math.min(maxValue, rangeMax),\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tonValueChange={onValueChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Rheostat\r\n\t\t\t\t\t\tmin={rangeMin}\r\n\t\t\t\t\t\tmax={rangeMax}\r\n\t\t\t\t\t\tvalues={[\r\n\t\t\t\t\t\t\tMath.floor(minValue === undefined ? rangeStart : Math.max(minValue, rangeMin)),\r\n\t\t\t\t\t\t\tMath.ceil(maxValue === undefined ? rangeEnd : Math.min(maxValue, rangeMax)),\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tonValuesUpdated={onSliderDrag}\r\n\t\t\t\t\t\tonChange={onSliderValueChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</React.Suspense>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SliderDate;\r\n","import React, { useState, useEffect } from 'react';\r\nimport NumberFormat from 'react-number-format';\r\n\r\nexport interface SliderNumericInputsProps {\r\n\tmin: number;\r\n\tmax: number;\r\n\tvalues: number[];\r\n\tisCurrency: boolean;\r\n\tcurrencySymbol: string;\r\n\tdecimalPrecision: number;\r\n\tonValueChange(minValue: number, maxValue: number): void;\r\n}\r\nfunction SliderNumericInputs(sliderProps: SliderNumericInputsProps) {\r\n\tconst [minValue, setMinValue] = useState('' as string);\r\n\tconst [maxValue, setMaxValue] = useState('' as string);\r\n\r\n\tfunction onMinUpdate(values: any) {\r\n\t\tconst { formattedValue, value } = values;\r\n\r\n\t\tconst newMinValue = Number(value);\r\n\t\tif (isNaN(newMinValue) || minValue === value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetMinValue(value);\r\n\t}\r\n\r\n\tfunction onMaxUpdate(values: any) {\r\n\t\tconst { formattedValue, value } = values;\r\n\r\n\t\tconst newMaxValue = Number(value);\r\n\t\tif (isNaN(newMaxValue) || maxValue === value) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetMaxValue(value);\r\n\t}\r\n\tfunction reloadFacets(event: React.FormEvent<HTMLInputElement>) {\r\n\t\tsliderProps.onValueChange(Number(minValue), Number(maxValue));\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetMinValue(sliderProps.values[0].toString());\r\n\t\tsetMaxValue(sliderProps.values[1].toString());\r\n\t}, [sliderProps]);\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-sliderNumeric\">\r\n\t\t\t<NumberFormat\r\n\t\t\t\tthousandSeparator={sliderProps.isCurrency}\r\n\t\t\t\tprefix={sliderProps.isCurrency ? sliderProps.currencySymbol : ''}\r\n\t\t\t\tvalue={minValue}\r\n\t\t\t\tclassName=\"hawk-numericInput numeric-from\"\r\n\t\t\t\tmin={sliderProps.min}\r\n\t\t\t\tmax={sliderProps.max}\r\n\t\t\t\tonValueChange={onMinUpdate}\r\n\t\t\t\tonBlur={reloadFacets}\r\n\t\t\t\tdecimalScale={sliderProps.decimalPrecision}\r\n\t\t\t/>\r\n\r\n\t\t\t<NumberFormat\r\n\t\t\t\tthousandSeparator={sliderProps.isCurrency}\r\n\t\t\t\tprefix={sliderProps.isCurrency ? sliderProps.currencySymbol : ''}\r\n\t\t\t\tvalue={maxValue}\r\n\t\t\t\tclassName=\"hawk-numericInput numeric-to\"\r\n\t\t\t\tmin={sliderProps.min}\r\n\t\t\t\tmax={sliderProps.max}\r\n\t\t\t\tonValueChange={onMaxUpdate}\r\n\t\t\t\tonBlur={reloadFacets}\r\n\t\t\t\tdecimalScale={sliderProps.decimalPrecision}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SliderNumericInputs;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { PublicState } from 'rheostat';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport SliderNumericInputs from 'components/ui/Facets/SliderNumericInputs';\r\nconst Rheostat = React.lazy(() => import(/* webpackChunkName: \"rheostat\" */ 'rheostat'));\r\n\r\nfunction SliderNumeric() {\r\n\tconst {\r\n\t\tstore: { facetSelections },\r\n\t} = useHawksearch();\r\n\r\n\tconst {\r\n\t\tstate: { facetValues, decimalPrecision },\r\n\t\tfacet,\r\n\t\tactor,\r\n\t} = useFacet();\r\n\t// the range of the slider is defined by the first facet value. or null if there is no first value\r\n\tconst range = facetValues.length > 0 ? facetValues[0] : null;\r\n\r\n\tconst [rangeMin, setMinRange] = useState(range && Number(parseFloat(range.RangeMin || '').toFixed(2)));\r\n\tconst [rangeMax, setMaxRange] = useState(range && Number(parseFloat(range.RangeMax || '').toFixed(2)));\r\n\tconst [rangeStart, setStartRange] = useState(range && Number(parseFloat(range.RangeStart || '').toFixed(2)));\r\n\tconst [rangeEnd, setEndRange] = useState(range && Number(parseFloat(range.RangeEnd || '').toFixed(2)));\r\n\r\n\t// if there's no range, initialize to zeros\r\n\tconst [minValue, setMinValue] = useState<number>();\r\n\tconst [maxValue, setMaxValue] = useState<number>();\r\n\r\n\tconst [isCurency, setIsCurrency] = useState(facet.IsCurrency);\r\n\tconst [currencySymbol, setCurrencySymbol] = useState(facet.CurrencySymbol);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetCurrencySymbol(facet.CurrencySymbol || '$');\r\n\t\tsetIsCurrency(facet.IsCurrency);\r\n\t}, [facet]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst paramName = facet.ParamName || facet.Field;\r\n\r\n\t\t// clear min and max value if these were cleared\r\n\t\tif (!paramName || !(paramName in facetSelections)) {\r\n\t\t\tsetMinValue(undefined);\r\n\t\t\tsetMaxValue(undefined);\r\n\t\t} else if (\r\n\t\t\tparamName in facetSelections &&\r\n\t\t\tfacetSelections[paramName].items &&\r\n\t\t\tfacetSelections[paramName].items.length > 0\r\n\t\t) {\r\n\t\t\tconst selectedValues = facetSelections[paramName].items[0].value.split(',');\r\n\t\t\tsetMinValue(Number(selectedValues[0]));\r\n\t\t\tsetMaxValue(Number(selectedValues[1]));\r\n\t\t}\r\n\t}, [facetSelections]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst newRange = facetValues.length > 0 ? facetValues[0] : null;\r\n\t\tsetMinRange(newRange && Number(parseFloat(newRange.RangeMin || '').toFixed(2)));\r\n\t\tsetMaxRange(newRange && Number(parseFloat(newRange.RangeMax || '').toFixed(2)));\r\n\t\tsetStartRange(newRange && Number(parseFloat(newRange.RangeStart || '').toFixed(2)));\r\n\t\tsetEndRange(newRange && Number(parseFloat(newRange.RangeEnd || '').toFixed(2)));\r\n\t}, [facetValues]);\r\n\r\n\tif (\r\n\t\trangeMin === null ||\r\n\t\tisNaN(rangeMin) ||\r\n\t\trangeMax === null ||\r\n\t\tisNaN(rangeMax) ||\r\n\t\trangeStart === null ||\r\n\t\tisNaN(rangeStart) ||\r\n\t\trangeEnd === null ||\r\n\t\tisNaN(rangeEnd)\r\n\t) {\r\n\t\t// this facet is somehow misconfigured so don't render\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction onSliderValueChange(state: PublicState) {\r\n\t\tconst [newMin, newMax] = state.values;\r\n\r\n\t\tsetFacetValues(newMin, newMax);\r\n\t}\r\n\r\n\tfunction onValueChange(newMinValue: number, newMaxValue: number) {\r\n\t\tlet currentMinValue = minValue;\r\n\t\tlet currentMaxValue = maxValue;\r\n\t\t// if min value wasn't yet selected use range start\r\n\t\tif (minValue === undefined && rangeStart !== null) {\r\n\t\t\tcurrentMinValue = rangeStart; // setMinValue(rangeStart);\r\n\t\t}\r\n\r\n\t\t// if max value wasn't yet selected use range end\r\n\t\tif (maxValue === undefined && rangeEnd !== null) {\r\n\t\t\tcurrentMaxValue = rangeEnd;\r\n\t\t}\r\n\r\n\t\tif (currentMinValue === undefined || currentMaxValue === undefined) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (currentMinValue !== newMinValue && newMinValue <= currentMaxValue) {\r\n\t\t\tif (rangeMin !== null && newMinValue <= rangeMin) {\r\n\t\t\t\tcurrentMinValue = rangeMin;\r\n\t\t\t} else {\r\n\t\t\t\tcurrentMinValue = newMinValue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (currentMaxValue !== newMaxValue && newMaxValue >= currentMinValue) {\r\n\t\t\tif (rangeMax !== null && newMaxValue >= rangeMax) {\r\n\t\t\t\tcurrentMaxValue = rangeMax;\r\n\t\t\t} else {\r\n\t\t\t\tcurrentMaxValue = newMaxValue;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetMinValue(currentMinValue);\r\n\t\tsetMaxValue(currentMaxValue);\r\n\t\tsetFacetValues(currentMinValue, currentMaxValue);\r\n\t}\r\n\r\n\tfunction setFacetValues(minVal: number | undefined, maxVal: number | undefined) {\r\n\t\tif (minVal === undefined || maxVal === undefined || isNaN(minVal) || isNaN(maxVal)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetMinValue(minVal);\r\n\t\tsetMaxValue(maxVal);\r\n\r\n\t\t// this selection is sent to hawk separated by commas, so build the value here\r\n\t\tconst selection = `${minVal},${maxVal}`;\r\n\r\n\t\tactor.setFacets([selection]);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-link\">\r\n\t\t\t\t<React.Suspense fallback={<div>Loading...</div>}>\r\n\t\t\t\t\t<SliderNumericInputs\r\n\t\t\t\t\t\tmin={rangeMin}\r\n\t\t\t\t\t\tmax={rangeMax}\r\n\t\t\t\t\t\tcurrencySymbol={currencySymbol}\r\n\t\t\t\t\t\tisCurrency={isCurency}\r\n\t\t\t\t\t\tvalues={[\r\n\t\t\t\t\t\t\tminValue === undefined ? rangeStart : Math.max(minValue, rangeMin),\r\n\t\t\t\t\t\t\tmaxValue === undefined ? rangeEnd : Math.min(maxValue, rangeMax),\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tonValueChange={onValueChange}\r\n\t\t\t\t\t\tdecimalPrecision={decimalPrecision}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Rheostat\r\n\t\t\t\t\t\tmin={rangeMin}\r\n\t\t\t\t\t\tmax={rangeMax}\r\n\t\t\t\t\t\tvalues={[\r\n\t\t\t\t\t\t\tMath.floor(minValue === undefined ? rangeStart : Math.max(minValue, rangeMin)),\r\n\t\t\t\t\t\t\tMath.ceil(maxValue === undefined ? rangeEnd : Math.min(maxValue, rangeMax)),\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\tonChange={onSliderValueChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</React.Suspense>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SliderNumeric;\r\n","import React from 'react';\r\n\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport SliderDate from './SliderDate';\r\nimport SliderNumeric from './SliderNumeric';\r\n\r\nfunction Slider() {\r\n\tconst { facet } = useFacet();\r\n\tif (facet.DataType && facet.DataType === 'datetime') {\r\n\t\treturn <SliderDate />;\r\n\t}\r\n\treturn <SliderNumeric />;\r\n}\r\n\r\nexport default Slider;\r\n","import React, { useState } from 'react';\r\n\r\nimport { Value } from 'models/Facets/Value';\r\nimport { Swatch } from 'models/Facets';\r\nimport { useHawkConfig } from 'components/ConfigProvider';\r\n\r\nexport interface SwatchItemProps {\r\n\tswatchValue: Value;\r\n\tfacetSwatch: Swatch;\r\n\tisNegated: boolean;\r\n\tisSelected: boolean;\r\n\tisColor: boolean;\r\n\tonSwatchSelected(facetValue: string, isNegated: boolean): void;\r\n}\r\n\r\nfunction SwatchItem(item: SwatchItemProps) {\r\n\tconst { config } = useHawkConfig();\r\n\r\n\tconst facetValue = item.swatchValue.Value || '';\r\n\r\n\t// facets can be selected or negated, so explicitly check that the facet is not selected\r\n\tconst swatchUrl =\r\n\t\tconfig.dashboardUrl + (!item.facetSwatch.AssetUrl ? item.facetSwatch.AssetName : item.facetSwatch.AssetUrl);\r\n\r\n\tconst colorSwatchStyle = {\r\n\t\tbackgroundColor: item.facetSwatch.Color,\r\n\t};\r\n\r\n\tconst listItemClassNames =\r\n\t\t'hawk-facet-rail__facet-list-item' +\r\n\t\t(item.isSelected ? ' hawkFacet-active' : '') +\r\n\t\t(item.isNegated ? ' hawkFacet-negative' : '');\r\n\r\n\treturn (\r\n\t\t<li key={item.facetSwatch.Value} className={listItemClassNames}>\r\n\t\t\t<button\r\n\t\t\t\tonClick={e => item.onSwatchSelected(facetValue, false)}\r\n\t\t\t\tclassName=\"hawk-facet-rail__facet-btn hawk-styleSwatch\"\r\n\t\t\t\taria-pressed={item.isSelected}\r\n\t\t\t>\r\n\t\t\t\t<span className=\"hawk-selectionInner\">\r\n\t\t\t\t\t{item.isColor ? (\r\n\t\t\t\t\t\t<span className=\"hawk-swatchColor\" style={colorSwatchStyle} title={item.facetSwatch.Value} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<img src={swatchUrl} alt={item.facetSwatch.Value} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</span>\r\n\t\t\t</button>\r\n\t\t\t<button className=\"hawk-negativeIcon\">\r\n\t\t\t\t<i className=\"hawkIcon-blocked\" onClick={e => item.onSwatchSelected(facetValue, true)} />\r\n\t\t\t</button>\r\n\t\t</li>\r\n\t);\r\n}\r\n\r\nexport default SwatchItem;\r\n","import React, { useState } from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport { FacetSelectionState } from 'store/Store';\r\nimport SwatchItem from './SwatchItem';\r\n\r\nfunction Swatch() {\r\n\tconst { store } = useHawksearch();\r\n\tconst {\r\n\t\tfacet,\r\n\t\tactor,\r\n\t\tstate: { facetValues },\r\n\t\trenderer,\r\n\t} = useFacet();\r\n\r\n\tfunction onSwatchSelected(facetValue: string, isNegated: boolean) {\r\n\t\tisNegated ? actor.negateFacet(facetValue) : actor.selectFacet(facetValue);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-swatch\">\r\n\t\t\t\t<ul className=\"hawk-facet-rail__facet-list\">\r\n\t\t\t\t\t{facet.SwatchData &&\r\n\t\t\t\t\t\tfacetValues.map(value => {\r\n\t\t\t\t\t\t\tconst facetValue = value.Value || '';\r\n\t\t\t\t\t\t\t// find swatch that is corresponding with value\r\n\t\t\t\t\t\t\tconst facetSwatch =\r\n\t\t\t\t\t\t\t\tfacet.SwatchData &&\r\n\t\t\t\t\t\t\t\tfacet.SwatchData.find(s => s.Value.toLowerCase() === facetValue.toLowerCase());\r\n\t\t\t\t\t\t\tif (!facetSwatch) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\t\t\t\t\t\t\tconst isNegated = selectionState === FacetSelectionState.Negated;\r\n\t\t\t\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\r\n\t\t\t\t\t\t\tconst isColor = !!facetSwatch.Color;\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<SwatchItem\r\n\t\t\t\t\t\t\t\t\tkey={facetValue}\r\n\t\t\t\t\t\t\t\t\tswatchValue={value}\r\n\t\t\t\t\t\t\t\t\tfacetSwatch={facetSwatch}\r\n\t\t\t\t\t\t\t\t\tisSelected={isSelected}\r\n\t\t\t\t\t\t\t\t\tisColor={isColor}\r\n\t\t\t\t\t\t\t\t\tisNegated={isNegated}\r\n\t\t\t\t\t\t\t\t\tonSwatchSelected={onSwatchSelected}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* render the default truncation control as we don't need to customize this */}\r\n\t\t\t{renderer.renderTruncation()}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Swatch;\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { FacetSelectionState } from 'store/Store';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport CheckmarkSVG from 'components/svg/CheckmarkSVG';\r\nimport { Value } from 'models/Facets';\r\nimport PlusCircleSVG from 'components/svg/PlusCircleSVG';\r\nimport DashCircleSVG from 'components/svg/DashCircleSVG';\r\nimport { ClientSelectionValue } from 'store/ClientSelections';\r\n\r\nexport interface NestedItemProps {\r\n\thierarchyValue: Value;\r\n\tisNegated: boolean;\r\n\tisSelected: boolean;\r\n\tonValueSelected(facetValue: Value, isNegated: boolean): void;\r\n}\r\n\r\nfunction checkChildSelections(facetArray, matchValue) {\r\n\tconst matchedValue = facetArray.find((i: ClientSelectionValue) => {\r\n\t\treturn (i.path || '').split('/').indexOf(matchValue) !== -1;\r\n\t});\r\n\treturn !matchedValue ? false : true;\r\n}\r\n\r\nfunction NestedItem(item: NestedItemProps) {\r\n\tconst { store } = useHawksearch();\r\n\tconst { facet } = useFacet();\r\n\tconst [isExpanded, setIsExpanded] = useState(false);\r\n\tconst [isTruncated, setIsTruncated] = useState(facet.shouldTruncate);\r\n\r\n\tconst hierarchyValue = item.hierarchyValue || '';\r\n\tlet hierarchyChildren = item.hierarchyValue.Children || [];\r\n\r\n\tlet remainingValues = 0;\r\n\r\n\tconst shouldTruncateChildren =\r\n\t\tfacet.DisplayType === 'truncating' && hierarchyChildren.length > facet.TruncateThreshold;\r\n\r\n\tif (shouldTruncateChildren && isTruncated) {\r\n\t\tconst valuesBeforeTrunc = hierarchyChildren.length;\r\n\r\n\t\thierarchyChildren = hierarchyChildren.slice(0, facet.TruncateThreshold);\r\n\r\n\t\tremainingValues = valuesBeforeTrunc - facet.TruncateThreshold;\r\n\t}\r\n\r\n\tfunction renderChildTruncation() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{shouldTruncateChildren && (\r\n\t\t\t\t\t<li className=\"hawk-facet-rail__facet-list-item hawk-show-more\">\r\n\t\t\t\t\t\t<button onClick={() => setIsTruncated(!isTruncated)} className=\"hawk-facet-rail__show-more-btn\">\r\n\t\t\t\t\t\t\t{isTruncated ? `(+) Show ${remainingValues} More` : '(-) Show Less'}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t)}\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tconst isPartialSelection = checkChildSelections(\r\n\t\t\t(store.facetSelections[facet.Field] || {}).items || [],\r\n\t\t\titem.hierarchyValue.Value\r\n\t\t);\r\n\t\tif (isPartialSelection) {\r\n\t\t\tsetIsExpanded(true);\r\n\t\t}\r\n\t}, [item]);\r\n\r\n\tfunction setSelection() {\r\n\t\titem.onValueSelected(hierarchyValue, false);\r\n\t\tif (!isExpanded) {\r\n\t\t\tsetIsExpanded(true);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<li className=\"hawk-facet-rail__facet-list-item hawkFacet-group\">\r\n\t\t\t<div className=\"hawkFacet-group__inline\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={() => setSelection()}\r\n\t\t\t\t\tclassName=\"hawk-facet-rail__facet-btn\"\r\n\t\t\t\t\taria-pressed={item.isSelected}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\titem.isSelected\r\n\t\t\t\t\t\t\t\t? 'hawk-facet-rail__facet-checkbox hawk-facet-rail__facet-checkbox--checked'\r\n\t\t\t\t\t\t\t\t: 'hawk-facet-rail__facet-checkbox'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{item.isSelected ? <CheckmarkSVG class=\"hawk-facet-rail__facet-checkbox-icon\" /> : null}\r\n\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={item.isNegated ? { textDecoration: 'line-through' } : undefined}\r\n\t\t\t\t\t\tclassName=\"hawk-facet-rail__facet-name\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{item.hierarchyValue.Label} ({item.hierarchyValue.Count})\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={e => item.onValueSelected(hierarchyValue, true)}\r\n\t\t\t\t\tclassName=\"hawk-facet-rail__facet-btn-exclude\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{item.isNegated ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<PlusCircleSVG class=\"hawk-facet-rail__facet-btn-include\" />\r\n\t\t\t\t\t\t\t<span className=\"visually-hidden\">Include facet</span>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<DashCircleSVG />\r\n\t\t\t\t\t\t\t<span className=\"visually-hidden\">Exclude facet</span>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</button>\r\n\t\t\t\t{hierarchyChildren.length > 0 ? (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName={isExpanded ? 'hawk-collapseState' : 'hawk-collapseState collapsed'}\r\n\t\t\t\t\t\taria-expanded=\"false\"\r\n\t\t\t\t\t\tonClick={() => setIsExpanded(!isExpanded)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t</button>\r\n\t\t\t\t) : null}\r\n\t\t\t</div>\r\n\t\t\t{isExpanded && hierarchyChildren ? (\r\n\t\t\t\t<div className=\"hawk-facet-rail__w-100\">\r\n\t\t\t\t\t<ul className=\"hawkFacet-group-inside\">\r\n\t\t\t\t\t\t{hierarchyChildren.map(value => {\r\n\t\t\t\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\t\t\t\t\t\t\tconst isNegated = selectionState === FacetSelectionState.Negated;\r\n\t\t\t\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<NestedItem\r\n\t\t\t\t\t\t\t\t\tkey={value.Path}\r\n\t\t\t\t\t\t\t\t\thierarchyValue={value}\r\n\t\t\t\t\t\t\t\t\tisSelected={isSelected}\r\n\t\t\t\t\t\t\t\t\tisNegated={isNegated}\r\n\t\t\t\t\t\t\t\t\tonValueSelected={item.onValueSelected}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t{renderChildTruncation()}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<></>\r\n\t\t\t)}\r\n\t\t</li>\r\n\t);\r\n}\r\n\r\nexport default NestedItem;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { FacetSelectionState } from 'store/Store';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport NestedItem from './NestedItem';\r\nimport { Value } from 'models/Facets/Value';\r\n\r\nfunction Nested() {\r\n\tconst { store } = useHawksearch();\r\n\tconst {\r\n\t\tfacet,\r\n\t\tstate: { facetValues },\r\n\t\tactor,\r\n\t\trenderer,\r\n\t} = useFacet();\r\n\r\n\tfunction onValueSelected(facetValue: Value, isNegated: boolean) {\r\n\t\tisNegated ? actor.negateFacet(facetValue) : actor.selectFacet(facetValue);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-checkbox\">\r\n\t\t\t\t<ul className=\"hawk-facet-rail__facet-list\">\r\n\t\t\t\t\t{facetValues.map(value => {\r\n\t\t\t\t\t\t// facets can be selected or negated, so explicitly check that the facet is not selected\r\n\t\t\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\r\n\t\t\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\t\t\t\t\t\tconst isNegated = selectionState === FacetSelectionState.Negated;\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<NestedItem\r\n\t\t\t\t\t\t\t\tkey={value.Value}\r\n\t\t\t\t\t\t\t\thierarchyValue={value}\r\n\t\t\t\t\t\t\t\tisSelected={isSelected}\r\n\t\t\t\t\t\t\t\tisNegated={isNegated}\r\n\t\t\t\t\t\t\t\tonValueSelected={onValueSelected}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* render the default truncation control as we don't need to customize this */}\r\n\t\t\t{renderer.renderTruncation()}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Nested;\r\n","import React, { useEffect, useState } from 'react';\r\nimport moment from 'moment';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\n\r\nfunction replaceHyphen(date: string) {\r\n\tif (!date) {\r\n\t\treturn date;\r\n\t}\r\n\treturn date.replace(/-/g, '/');\r\n}\r\n\r\nfunction OpenRangeDatetime() {\r\n\tconst { actor: hawkActor } = useHawksearch();\r\n\tconst {\r\n\t\tstore: { facetSelections },\r\n\t} = useHawksearch();\r\n\tconst {\r\n\t\tstate: { facetValues },\r\n\t\tfacet,\r\n\t\tactor,\r\n\t} = useFacet();\r\n\tconst daterange = facetValues.length > 0 ? facetValues[0] : null;\r\n\tconst rangeStartDate =\r\n\t\tdaterange && daterange.RangeStart ? moment(daterange.RangeStart).format('YYYY-MM-DDTHH:mm') : '';\r\n\tconst rangeEndDate = daterange && daterange.RangeEnd ? moment(daterange.RangeEnd).format('YYYY-MM-DDTHH:mm') : '';\r\n\r\n\t// if there's no range, initialize to empty strings\r\n\tconst [minDateValue, setdateStartValue] = useState(rangeStartDate || '');\r\n\tconst [maxDateValue, setdateEndValue] = useState(rangeEndDate || '');\r\n\t// the open range boundary values are defined by the first facet value. or null if there is no first value\r\n\r\n\tconst range = facetValues.length > 0 ? facetValues[0] : null;\r\n\r\n\tconst rangeStart = (range && range.RangeStart) || '';\r\n\tconst rangeEnd = (range && range.RangeEnd) || '';\r\n\r\n\tuseEffect(() => {\r\n\t\tconst paramName = facet.ParamName || facet.Field;\r\n\r\n\t\t// Set min and max value if these were cleared\r\n\t\tif (!paramName || !(paramName in facetSelections)) {\r\n\t\t\tsetdateStartValue(rangeStartDate);\r\n\t\t\tsetdateEndValue(rangeEndDate);\r\n\t\t} else if (\r\n\t\t\tparamName in facetSelections &&\r\n\t\t\tfacetSelections[paramName].items &&\r\n\t\t\tfacetSelections[paramName].items.length > 0\r\n\t\t) {\r\n\t\t\tconst selectedValues = facetSelections[paramName].items[0].value.split(',');\r\n\t\t\tsetdateStartValue(selectedValues[0].replace(/\\//g, '-'));\r\n\t\t\tsetdateEndValue(selectedValues[1].replace(/\\//g, '-'));\r\n\t\t}\r\n\t}, [facetSelections]);\r\n\r\n\tif (rangeStart === null || rangeEnd === null) {\r\n\t\t// this facet is somehow misconfigured so don't render\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction ondateRangeStartChange(event: React.FormEvent<HTMLInputElement>) {\r\n\t\tsetdateFacetValues(event.currentTarget.value, maxDateValue);\r\n\t}\r\n\r\n\tfunction ondateRangeEndChange(event: React.FormEvent<HTMLInputElement>) {\r\n\t\tsetdateFacetValues(minDateValue, event.currentTarget.value);\r\n\t}\r\n\r\n\tfunction setdateFacetValues(startVal: string, endVal: string) {\r\n\t\tsetdateStartValue(startVal);\r\n\t\tsetdateEndValue(endVal);\r\n\r\n\t\t// this selection is sent to hawk separated by commas, so build the value here\r\n\r\n\t\tif (startVal === '' && endVal === '') {\r\n\t\t\thawkActor.clearFacet(facet);\r\n\t\t} else {\r\n\t\t\tconst selection = `${replaceHyphen(startVal)},${replaceHyphen(endVal)}`;\r\n\t\t\tactor.setFacets([selection]);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-link\">\r\n\t\t\t\t<div className=\"hawk-open-range hawk-facet-type-date\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"datetime-local\"\r\n\t\t\t\t\t\tclassName=\"hawk-text-input hawk-date-value-start\"\r\n\t\t\t\t\t\tvalue={minDateValue}\r\n\t\t\t\t\t\tmin={rangeStartDate}\r\n\t\t\t\t\t\tmax={rangeEndDate}\r\n\t\t\t\t\t\tonChange={ondateRangeStartChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"datetime-local\"\r\n\t\t\t\t\t\tclassName=\"hawk-text-input hawk-date-value-end\"\r\n\t\t\t\t\t\tvalue={maxDateValue}\r\n\t\t\t\t\t\tmin={rangeStartDate}\r\n\t\t\t\t\t\tmax={rangeEndDate}\r\n\t\t\t\t\t\tonChange={ondateRangeEndChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default OpenRangeDatetime;\r\n","import React, { useState } from 'react';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\n\r\nfunction OpenRangeNumber() {\r\n\tconst { actor: hawkActor } = useHawksearch();\r\n\r\n\tconst {\r\n\t\tstate: { facetValues },\r\n\t\tfacet,\r\n\t\tactor,\r\n\t} = useFacet();\r\n\r\n\t// the open range boundary values are defined by the first facet value. or null if there is no first value\r\n\tconst range = facetValues.length > 0 ? facetValues[0] : null;\r\n\r\n\tconst rangeStart = (range && range.RangeStart) || '';\r\n\tconst rangeEnd = (range && range.RangeEnd) || '';\r\n\r\n\t// if there's no range, initialize to empty strings\r\n\tconst [minValue, setStartValue] = useState(rangeStart || '');\r\n\tconst [maxValue, setEndValue] = useState(rangeEnd || '');\r\n\r\n\tfunction onRangeStartChange(event: React.FormEvent<HTMLInputElement>) {\r\n\t\tsetFacetValues(event.currentTarget.value, maxValue);\r\n\t}\r\n\r\n\tfunction onRangeEndChange(event: React.FormEvent<HTMLInputElement>) {\r\n\t\tsetFacetValues(minValue, event.currentTarget.value);\r\n\t}\r\n\r\n\tfunction setFacetValues(startVal: string, endVal: string) {\r\n\t\tsetStartValue(startVal);\r\n\t\tsetEndValue(endVal);\r\n\r\n\t\t// this selection is sent to hawk separated by commas, so build the value here\r\n\r\n\t\tif (startVal === '' && endVal === '') {\r\n\t\t\thawkActor.clearFacet(facet);\r\n\t\t} else {\r\n\t\t\tconst selection = `${startVal},${endVal}`;\r\n\t\t\tactor.setFacets([selection]);\r\n\t\t}\r\n\t}\r\n\r\n\tif (rangeStart === null || rangeEnd === null) {\r\n\t\t// this facet is somehow misconfigured so don't render\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-link\">\r\n\t\t\t\t<div className=\"hawk-open-range\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tclassName=\"hawk-text-input value-start\"\r\n\t\t\t\t\t\tdata-type=\"currency\"\r\n\t\t\t\t\t\tvalue={minValue}\r\n\t\t\t\t\t\tonChange={onRangeStartChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tclassName=\"hawk-text-input value-end\"\r\n\t\t\t\t\t\tonChange={onRangeEndChange}\r\n\t\t\t\t\t\tvalue={maxValue}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default OpenRangeNumber;\r\n","import React, { useState } from 'react';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport OpenRangeDatetime from './OpenRangeDatetime';\r\nimport OpenRangeNumber from './OpenRangeNumber';\r\n\r\nfunction OpenRange() {\r\n\tconst { facet } = useFacet();\r\n\r\n\tif (facet.DataType && facet.DataType === 'datetime') {\r\n\t\treturn <OpenRangeDatetime />;\r\n\t}\r\n\r\n\treturn <OpenRangeNumber />;\r\n}\r\n\r\nexport default OpenRange;\r\n","import React from 'react';\r\n\r\ninterface SizeItemProps {\r\n\tsize: {\r\n\t\tValue: string;\r\n\t\tLabel: string;\r\n\t\tSelected: boolean;\r\n\t};\r\n\tisNegated: boolean;\r\n\tonSwatchSelected: (a: string, b: boolean) => void;\r\n}\r\n\r\nconst SizeItem = React.memo(({ size, onSwatchSelected, isNegated }: SizeItemProps) => {\r\n\treturn (\r\n\t\t<li\r\n\t\t\tkey={size.Value}\r\n\t\t\tclassName={size.Selected ? 'selected' : ''}\r\n\t\t\tonClick={() => onSwatchSelected(size.Value, isNegated)}\r\n\t\t>\r\n\t\t\t<div>{size.Label}</div>\r\n\t\t</li>\r\n\t);\r\n});\r\n\r\nexport default SizeItem;\r\n","import React, { useState } from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport { FacetSelectionState } from 'store/Store';\r\nimport SizeItem from './SizeItem';\r\n\r\nfunction Size() {\r\n\tconst { store } = useHawksearch();\r\n\tconst {\r\n\t\tfacet,\r\n\t\tactor,\r\n\t\tstate: { facetValues },\r\n\t} = useFacet();\r\n\r\n\tfunction onSwatchSelected(facetValue: string, isNegated: boolean) {\r\n\t\tisNegated ? actor.negateFacet(facetValue) : actor.selectFacet(facetValue);\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-size\">\r\n\t\t\t\t<ul className=\"hawk-facet-rail__facet-list col-sm-8\">\r\n\t\t\t\t\t{facet.Values &&\r\n\t\t\t\t\t\tfacetValues.map(value => {\r\n\t\t\t\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\t\t\t\t\t\t\tconst isNegated = selectionState === FacetSelectionState.Negated;\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<SizeItem\r\n\t\t\t\t\t\t\t\t\tkey={value.Value}\r\n\t\t\t\t\t\t\t\t\tsize={{ ...value, Value: value.Value || '', Label: value.Label || '' }}\r\n\t\t\t\t\t\t\t\t\tonSwatchSelected={onSwatchSelected}\r\n\t\t\t\t\t\t\t\t\tisNegated={isNegated}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Size;\r\n","import React, { useState } from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { FacetSelectionState } from 'store/Store';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport { Value } from 'models/Facets';\r\nexport interface NestedLinkItemProps {\r\n\thierarchyValue: Value;\r\n\tisNegated: boolean;\r\n\tisSelected: boolean;\r\n\tonValueSelected(facetValue: Value, isNegated: boolean): void;\r\n}\r\n\r\nfunction NestedLinkItem(item: NestedLinkItemProps) {\r\n\tconst { store } = useHawksearch();\r\n\tconst { facet } = useFacet();\r\n\r\n\tconst [isExpanded, setIsExpanded] = useState(false);\r\n\tconst [isTruncated, setIsTruncated] = useState(facet.shouldTruncate);\r\n\r\n\tconst hierarchyValue = item.hierarchyValue || '';\r\n\tlet hierarchyChildren = item.hierarchyValue.Children || [];\r\n\r\n\tlet remainingValues = 0;\r\n\r\n\tconst shouldTruncateChildren =\r\n\t\tfacet.DisplayType === 'truncating' && hierarchyChildren.length > facet.TruncateThreshold;\r\n\r\n\tif (shouldTruncateChildren && isTruncated) {\r\n\t\tconst valuesBeforeTrunc = hierarchyChildren.length;\r\n\r\n\t\thierarchyChildren = hierarchyChildren.slice(0, facet.TruncateThreshold);\r\n\r\n\t\tremainingValues = valuesBeforeTrunc - facet.TruncateThreshold;\r\n\t}\r\n\r\n\tfunction renderChildTruncation() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{shouldTruncateChildren && (\r\n\t\t\t\t\t<li className=\"hawk-facet-rail__facet-list-item hawk-show-more\">\r\n\t\t\t\t\t\t<button onClick={() => setIsTruncated(!isTruncated)} className=\"hawk-facet-rail__show-more-btn\">\r\n\t\t\t\t\t\t\t{isTruncated ? `(+) Show ${remainingValues} More` : '(-) Show Less'}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t)}\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<li className=\"hawk-facet-rail__facet-list-item hawkFacet-group\">\r\n\t\t\t<div className=\"hawkFacet-group__inline\">\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={() => item.onValueSelected(hierarchyValue, false)}\r\n\t\t\t\t\tclassName=\"hawk-facet-rail__facet-btn\"\r\n\t\t\t\t\taria-pressed={item.isSelected}\r\n\t\t\t\t>\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={item.isNegated ? { textDecoration: 'line-through' } : undefined}\r\n\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\titem.isSelected ? 'hawk-facet-rail__facet-name checked' : 'hawk-facet-rail__facet-name'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{item.hierarchyValue.Label} ({item.hierarchyValue.Count})\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t{hierarchyChildren.length > 0 ? (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\tisExpanded\r\n\t\t\t\t\t\t\t\t? 'hawk-collapseState hawk-linklist'\r\n\t\t\t\t\t\t\t\t: 'hawk-collapseState hawk-linklist collapsed'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\taria-expanded=\"false\"\r\n\t\t\t\t\t\tonClick={() => setIsExpanded(!isExpanded)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t</button>\r\n\t\t\t\t) : null}\r\n\t\t\t</div>\r\n\t\t\t{isExpanded && hierarchyChildren ? (\r\n\t\t\t\t<div className=\"hawk-facet-rail__w-100\">\r\n\t\t\t\t\t<ul className=\"hawkFacet-group-inside\">\r\n\t\t\t\t\t\t{hierarchyChildren.map(value => {\r\n\t\t\t\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\t\t\t\t\t\t\tconst isNegated = selectionState === FacetSelectionState.Negated;\r\n\t\t\t\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<NestedLinkItem\r\n\t\t\t\t\t\t\t\t\tkey={value.Path}\r\n\t\t\t\t\t\t\t\t\thierarchyValue={value}\r\n\t\t\t\t\t\t\t\t\tisSelected={isSelected}\r\n\t\t\t\t\t\t\t\t\tisNegated={isNegated}\r\n\t\t\t\t\t\t\t\t\tonValueSelected={item.onValueSelected}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t{renderChildTruncation()}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<></>\r\n\t\t\t)}\r\n\t\t</li>\r\n\t);\r\n}\r\n\r\nexport default NestedLinkItem;\r\n","import React from 'react';\r\n\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { FacetSelectionState } from 'store/Store';\r\nimport { useFacet } from 'components/ui/Facets/Facet';\r\nimport NestedLinkItem from './NestedLinkItem';\r\nimport { Value } from 'models/Facets/Value';\r\n\r\nfunction NestedLink() {\r\n\tconst { store } = useHawksearch();\r\n\tconst {\r\n\t\tfacet,\r\n\t\tstate: { facetValues },\r\n\t\tactor,\r\n\t\trenderer,\r\n\t} = useFacet();\r\n\r\n\tfunction onValueSelected(facetValue: Value, isNegated: boolean) {\r\n\t\tisNegated ? actor.negateFacet(facetValue) : actor.selectFacet(facetValue);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"hawk-facet-rail__facet-values\">\r\n\t\t\t<div className=\"hawk-facet-rail__facet-values-linklist\">\r\n\t\t\t\t<ul className=\"hawk-facet-rail__facet-list\">\r\n\t\t\t\t\t{facetValues.map(value => {\r\n\t\t\t\t\t\t// facets can be selected or negated, so explicitly check that the facet is not selected\r\n\t\t\t\t\t\tconst selectionState = store.isFacetSelected(facet, value).state;\r\n\r\n\t\t\t\t\t\tconst isSelected = selectionState !== FacetSelectionState.NotSelected;\r\n\t\t\t\t\t\tconst isNegated = selectionState === FacetSelectionState.Negated;\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<NestedLinkItem\r\n\t\t\t\t\t\t\t\tkey={value.Value}\r\n\t\t\t\t\t\t\t\thierarchyValue={value}\r\n\t\t\t\t\t\t\t\tisSelected={isSelected}\r\n\t\t\t\t\t\t\t\tisNegated={isNegated}\r\n\t\t\t\t\t\t\t\tonValueSelected={onValueSelected}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* render the default truncation control as we don't need to customize this */}\r\n\t\t\t{renderer.renderTruncation()}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default NestedLink;\r\n","import {\r\n\tCheckbox as DefaultCheckbox,\r\n\tNestedCheckbox as DefaultNestedCheckbox,\r\n\tSearch as DefaultSearch,\r\n\tLink as DefaultLink,\r\n\tSlider as DefaultSlider,\r\n\tSwatch as DefaultSwatch,\r\n\tOpenRange as DefaultOpenRange,\r\n\tSize as DefaultSize,\r\n\tNestedLink as DefaultNestedLink,\r\n} from 'components/ui/Facets/FacetTypes';\r\nimport { FacetComponent } from 'types/FacetComponent';\r\nimport { FacetType } from 'models/Facets/FacetType';\r\nimport { SuggestionStrategyMatch, SuggestionType } from 'models/Autocomplete/Suggestion';\r\nimport { ProductStrategy, CategoryStrategy, PopularStrategy, ContentStrategy } from 'models/Autocomplete';\r\n\r\n// the default set of facet components that we support\r\nconst defaultFacetComponents: FacetComponent[] = [\r\n\t{ facetType: FacetType.Checkbox, component: DefaultCheckbox },\r\n\t{ facetType: FacetType.NestedCheckbox, component: DefaultNestedCheckbox },\r\n\t{ facetType: FacetType.SearchWithin, component: DefaultSearch },\r\n\t{ facetType: FacetType.Link, component: DefaultLink },\r\n\t{ facetType: FacetType.Slider, component: DefaultSlider },\r\n\t{ facetType: FacetType.Swatch, component: DefaultSwatch },\r\n\t{ facetType: FacetType.OpenRange, component: DefaultOpenRange },\r\n\t{ facetType: FacetType.Size, component: DefaultSize },\r\n\t{ facetType: FacetType.Nestedlink, component: DefaultNestedLink },\r\n];\r\n\r\nconst defaultAutocompleteStrategies: SuggestionStrategyMatch[] = [\r\n\t{ SuggestionType: SuggestionType.Product, SuggestionStrategy: new ProductStrategy() },\r\n\t{ SuggestionType: SuggestionType.Category, SuggestionStrategy: new CategoryStrategy() },\r\n\t{ SuggestionType: SuggestionType.Popular, SuggestionStrategy: new PopularStrategy() },\r\n\t{ SuggestionType: SuggestionType.Content, SuggestionStrategy: new ContentStrategy() },\r\n];\r\n\r\n/**\r\n * Builds a list of all supported facet components by also taking into consideration overridden components.\r\n */\r\nexport function getFacetComponents(overridedComponents: FacetComponent[]) {\r\n\tconst facetComponents: FacetComponent[] = [];\r\n\r\n\t// tslint:disable-next-line:forin\r\n\tfor (const key in FacetType) {\r\n\t\tconst fType = FacetType[key];\r\n\r\n\t\tconst fComponent =\r\n\t\t\t// check to see if the facet is overridden\r\n\t\t\toverridedComponents.find(component => component.facetType === fType) ||\r\n\t\t\t// otherwise, pull from defaults\r\n\t\t\tdefaultFacetComponents.find(component => component.facetType === fType);\r\n\r\n\t\tif (fComponent) {\r\n\t\t\tfacetComponents.push(fComponent);\r\n\t\t}\r\n\t}\r\n\r\n\treturn facetComponents;\r\n}\r\n\r\n/**\r\n * Builds a list of all supported autocomplete suggestion strategiesby also taking into consideration overridden strategies.\r\n */\r\nexport function getAutocompleteStrategies(overridedStrategies: SuggestionStrategyMatch[]): SuggestionStrategyMatch[] {\r\n\tconst suggestionStrategies: SuggestionStrategyMatch[] = [];\r\n\r\n\t// tslint:disable-next-line:forin\r\n\tfor (const key in SuggestionType) {\r\n\t\tconst sType = SuggestionType[key];\r\n\r\n\t\tconst autocompleteStrategy =\r\n\t\t\t// check to see if the facet is overridden\r\n\t\t\toverridedStrategies.find(strategyMatch => strategyMatch.SuggestionType === sType) ||\r\n\t\t\t// otherwise, pull from defaults\r\n\t\t\tdefaultAutocompleteStrategies.find(strategyMatch => strategyMatch.SuggestionType === sType);\r\n\r\n\t\tif (autocompleteStrategy) {\r\n\t\t\tsuggestionStrategies.push(autocompleteStrategy);\r\n\t\t}\r\n\t}\r\n\treturn suggestionStrategies;\r\n}\r\n","export const getVisitorExpiry = () => {\r\n\tconst d = new Date();\r\n\t// 1 year\r\n\td.setTime(d.getTime() + 360 * 24 * 60 * 60 * 1000);\r\n\treturn d.toUTCString();\r\n};\r\n\r\nexport const getVisitExpiry = () => {\r\n\tconst d = new Date();\r\n\t// 4 hours\r\n\td.setTime(d.getTime() + 4 * 60 * 60 * 1000);\r\n\treturn d.toUTCString();\r\n};\r\n\r\nexport const createGuid = () => {\r\n\tconst s: any[] = [];\r\n\tconst hexDigits = '0123456789abcdef';\r\n\tfor (let i = 0; i < 36; i++) {\r\n\t\ts[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n\t}\r\n\ts[14] = '4'; // bits 12-15 of the time_hi_and_version field to 0010\r\n\t// tslint:disable-next-line: no-bitwise\r\n\ts[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\r\n\ts[8] = s[13] = s[18] = s[23] = '-';\r\n\r\n\tconst uuid = s.join('');\r\n\treturn uuid;\r\n};\r\n\r\nexport const createWidgetId = () => {\r\n\tconst s: any[] = [];\r\n\tconst hexDigits = '0123456789abcdef';\r\n\r\n\tfor (let i = 0; i < 16; i++) {\r\n\t\ts[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n\t}\r\n\r\n\tconst uuid = s.join('');\r\n\treturn uuid;\r\n};\r\n\r\nexport const getCookie = name => {\r\n\tconst nameEQ = name + '=';\r\n\tconst ca = document.cookie.split(';');\r\n\t// tslint:disable-next-line: prefer-for-of\r\n\tfor (let i = 0; i < ca.length; i++) {\r\n\t\tlet c = ca[i];\r\n\t\twhile (c.charAt(0) === ' ') {\r\n\t\t\tc = c.substring(1, c.length);\r\n\t\t}\r\n\t\tif (c.indexOf(nameEQ) === 0) {\r\n\t\t\treturn c.substring(nameEQ.length, c.length);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nexport const setCookie = (name, value, expiry) => {\r\n\tlet expires;\r\n\tif (expiry) {\r\n\t\texpires = '; expires=' + expiry;\r\n\t} else {\r\n\t\texpires = '';\r\n\t}\r\n\tdocument.cookie = name + '=' + value + expires + '; path=/';\r\n};\r\n","import { ControllerStateAndHelpers } from 'downshift';\r\n\r\nexport enum SuggestionType {\r\n\tProduct = 'product',\r\n\tCategory = 'category',\r\n\tContent = 'content',\r\n\tPopular = 'popular',\r\n}\r\nexport abstract class Suggestion {\r\n\tpublic SuggestionType: SuggestionType;\r\n\tpublic constructor(suggestionType: SuggestionType) {\r\n\t\tthis.SuggestionType = suggestionType;\r\n\t}\r\n}\r\n\r\nexport interface SuggestionStrategy {\r\n\thandleItemChange(item: Suggestion, downshift: ControllerStateAndHelpers<Suggestion>): void;\r\n\ttoString(item: Suggestion): string;\r\n}\r\n\r\nexport interface SuggestionStrategyMatch {\r\n\tSuggestionType: SuggestionType;\r\n\tSuggestionStrategy: SuggestionStrategy;\r\n}\r\n","import React from 'react';\r\nimport { ControllerStateAndHelpers } from 'downshift';\r\n\r\nimport { Response, Product, Popular, Category, Content } from 'models/Autocomplete';\r\nimport { Suggestion } from '../../../models/Autocomplete/Suggestion';\r\nimport { CustomSuggestionListProps } from 'models/Autocomplete/CustomSuggestionList';\r\n\r\nexport interface SearchSuggestionsListProps {\r\n\tisLoading: boolean;\r\n\tsearchResults: Response;\r\n\tdownshift: ControllerStateAndHelpers<Suggestion>;\r\n\tonViewMatches: (downshift: ControllerStateAndHelpers<Suggestion>) => void;\r\n\tSuggestionList?: React.ComponentType<CustomSuggestionListProps>;\r\n}\r\n\r\nfunction hasAllEmpty(popular: Popular[], categories: Category[], products: Product[], content: Content[]) {\r\n\tconst hasPopular = popular && popular.length === 0;\r\n\tconst hasCategories = categories && categories.length === 0;\r\n\tconst hasProducts = products && products.length === 0;\r\n\tconst hasContent = content && content.length === 0;\r\n\treturn hasPopular && hasCategories && hasProducts && hasContent;\r\n}\r\n\r\nfunction SearchSuggestionsList({\r\n\tisLoading,\r\n\tsearchResults,\r\n\tdownshift,\r\n\tonViewMatches,\r\n\tSuggestionList,\r\n}: SearchSuggestionsListProps) {\r\n\tconst { Popular: popular, Categories: categories, Products: products, Content: content } = searchResults;\r\n\r\n\tconst isRecordEmpty = hasAllEmpty(popular, categories, products, content);\r\n\r\n\tif (isRecordEmpty) {\r\n\t\treturn null;\r\n\t}\r\n\treturn SuggestionList ? (\r\n\t\t<SuggestionList\r\n\t\t\tisLoading={isLoading}\r\n\t\t\tdownshift={downshift}\r\n\t\t\tsearchResults={searchResults}\r\n\t\t\tonViewMatches={onViewMatches}\r\n\t\t/>\r\n\t) : null;\r\n}\r\n\r\nexport default SearchSuggestionsList;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { ControllerStateAndHelpers } from 'downshift';\r\nimport axios, { CancelToken } from 'axios';\r\n\r\nimport HawkClient from 'net/HawkClient';\r\nimport { Response, Product, Category } from 'models/Autocomplete';\r\nimport { useHawkConfig } from 'components/ConfigProvider';\r\nimport SearchSuggestionsList from './SearchSuggestionsList';\r\nimport { Suggestion } from 'models/Autocomplete/Suggestion';\r\nimport { CustomSuggestionListProps } from 'models/Autocomplete/CustomSuggestionList';\r\nimport { getCookie, setCookie, createGuid, getVisitExpiry, getVisitorExpiry } from 'helpers/utils';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\n\r\ninterface ClientData {\r\n\tVisitorId: string;\r\n\tVisitId: string;\r\n\tUserAgent: string;\r\n\tCustom?: {\r\n\t\tlanguage: string;\r\n\t};\r\n}\r\n\r\nexport interface SearchSuggestionsProps {\r\n\t/** The user entered search string in the autocomplete text input. */\r\n\tquery: string;\r\n\r\n\t/** Downshift's render prop parameter. */\r\n\tdownshift: ControllerStateAndHelpers<Suggestion>;\r\n\r\n\tonViewMatches: (downshift: ControllerStateAndHelpers<Suggestion>) => void;\r\n\tSuggestionList?: React.ComponentType<CustomSuggestionListProps>;\r\n}\r\n\r\nfunction SearchSuggestions({ query, downshift, onViewMatches, SuggestionList }: SearchSuggestionsProps) {\r\n\tconst { config } = useHawkConfig();\r\n\tconst { store } = useHawksearch();\r\n\r\n\tconst client = new HawkClient(config);\r\n\r\n\tconst [results, setResults] = useState({} as Response);\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\t// debounce the input search string so that we only do an autocomplete query every so often\r\n\tuseEffect(() => {\r\n\t\t// default to 200ms if not specified\r\n\t\tconst debounceMs = config.autocompleteDebounce || 200;\r\n\r\n\t\tconst cts = axios.CancelToken.source();\r\n\t\tconst timeout = setTimeout(() => doAutocomplete(query, cts.token), debounceMs);\r\n\r\n\t\treturn () => {\r\n\t\t\tcts.cancel();\r\n\t\t\tclearTimeout(timeout);\r\n\t\t};\r\n\t}, [query, config.autocompleteDebounce]);\r\n\r\n\t/**\r\n\t * Performs an autocomplete request to the Hawk API and populates the result set of this component.\r\n\t * @param input The user entered search string that results will be autocompleted for.\r\n\t */\r\n\tasync function doAutocomplete(input: string, cancellationToken?: CancelToken) {\r\n\t\tsetIsLoading(true);\r\n\r\n\t\tlet response: Response | null = null;\r\n\r\n\t\ttry {\r\n\t\t\tresponse = await client\r\n\t\t\t\t.autocomplete(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tClientGuid: config.clientGuid,\r\n\t\t\t\t\t\tKeyword: decodeURIComponent(input),\r\n\t\t\t\t\t\tIndexName: config.indexName,\r\n\t\t\t\t\t\tDisplayFullResponse: true,\r\n\t\t\t\t\t\tFacetSelections: store.pendingSearch.FacetSelections,\r\n\t\t\t\t\t\tClientData: getClientData(),\r\n\t\t\t\t\t\tIsInPreview: config.isInPreview,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcancellationToken\r\n\t\t\t\t)\r\n\t\t\t\t.then(o => {\r\n\t\t\t\t\t// ensure, returned object will return response\r\n\t\t\t\t\t// since by default, axios uses JSON.parse to parse an object,\r\n\t\t\t\t\t// it doesn't recognize it as Response type - this line is to prevent it\r\n\t\t\t\t\treturn Object.assign(new Response(o));\r\n\t\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tif (axios.isCancel(error)) {\r\n\t\t\t\t// if the request was cancelled, it's because this component was updated\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconsole.error('Autocomplete request error:', error);\r\n\t\t}\r\n\r\n\t\tsetIsLoading(false);\r\n\r\n\t\tif (response) {\r\n\t\t\tsetResults(response);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getClientData() {\r\n\t\tlet visitId = getCookie('hawk_visit_id');\r\n\t\tlet visitorId = getCookie('hawk_visitor_id');\r\n\r\n\t\tif (!visitId) {\r\n\t\t\tsetCookie('hawk_visit_id', createGuid(), getVisitExpiry());\r\n\t\t\tvisitId = getCookie('hawk_visit_id');\r\n\t\t}\r\n\r\n\t\tif (!visitorId) {\r\n\t\t\tsetCookie('hawk_visitor_id', createGuid(), getVisitorExpiry());\r\n\t\t\tvisitorId = getCookie('hawk_visitor_id');\r\n\t\t}\r\n\r\n\t\tconst clientData: ClientData = {\r\n\t\t\tVisitorId: visitorId || '',\r\n\t\t\tVisitId: visitId || '',\r\n\t\t\tUserAgent: navigator.userAgent,\r\n\t\t};\r\n\r\n\t\tif (store.language) {\r\n\t\t\tclientData.Custom = {\r\n\t\t\t\tlanguage: store.language,\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn clientData;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"autosuggest-menu\">\r\n\t\t\t<SearchSuggestionsList\r\n\t\t\t\tonViewMatches={onViewMatches}\r\n\t\t\t\tdownshift={downshift}\r\n\t\t\t\tisLoading={isLoading}\r\n\t\t\t\tsearchResults={results}\r\n\t\t\t\tSuggestionList={SuggestionList}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SearchSuggestions;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { DownshiftState, StateChangeOptions, ControllerStateAndHelpers } from 'downshift';\r\n\r\nimport SearchSuggestions from 'components/ui/SearchBox/SearchSuggestions';\r\nimport { Suggestion, SuggestionStrategyMatch } from 'models/Autocomplete/Suggestion';\r\nimport { getAutocompleteStrategies } from '../Facets/Overrides';\r\nimport { useHawkConfig } from 'components/ConfigProvider';\r\nimport { Product } from 'models/Autocomplete';\r\nimport { useHawksearch } from 'components/StoreProvider';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { CustomSuggestionListProps } from 'models/Autocomplete/CustomSuggestionList';\r\n\r\nimport Downshift from 'downshift';\r\n\r\nexport interface SearchBoxBaseProps {\r\n\tinitialValue?: string;\r\n\tonSubmit: (event: React.KeyboardEvent<HTMLInputElement>, downshift: ControllerStateAndHelpers<Suggestion>) => void;\r\n\tonViewMatches: (downshift: ControllerStateAndHelpers<Suggestion>) => void;\r\n\tSuggestionList?: React.ComponentType<CustomSuggestionListProps>;\r\n}\r\n\r\nfunction SearchBoxBase({ initialValue, onSubmit, onViewMatches, SuggestionList }: SearchBoxBaseProps) {\r\n\tconst { config } = useHawkConfig();\r\n\tconst strategies = getAutocompleteStrategies(config.autocompleteStrategies || []);\r\n\tconst { t, i18n } = useTranslation();\r\n\tconst {\r\n\t\tstore: { pendingSearch, searchResults },\r\n\t} = useHawksearch();\r\n\tconst [initialInput, setInitialInput] = useState('');\r\n\r\n\t// Will update the suggested selected keyword in the autocomplete input box\r\n\tuseEffect(() => {\r\n\t\tsetInitialInput(decodeURIComponent(pendingSearch.Keyword || ''));\r\n\t}, [pendingSearch.Keyword, initialValue, pendingSearch.IgnoreSpellcheck]);\r\n\r\n\t// Will update the Adjusted keyword in the autocomplete input box\r\n\tuseEffect(() => {\r\n\t\tif (searchResults && searchResults.AdjustedKeyword) {\r\n\t\t\tsetInitialInput(decodeURIComponent(searchResults.AdjustedKeyword));\r\n\t\t}\r\n\t}, [searchResults]);\r\n\r\n\t/** Called when the internal state of downshift changes - we're handling a couple custom behaviors here */\r\n\tfunction handleStateChange(\r\n\t\tstate: DownshiftState<Suggestion>,\r\n\t\tchanges: StateChangeOptions<Suggestion>\r\n\t): Partial<StateChangeOptions<Suggestion>> {\r\n\t\tif (\r\n\t\t\t// NOTE: these strings are hardcoded to support code splitting downshift.\r\n\t\t\t// using the constants from the package will prevent code splitting from operating correctly\r\n\t\t\tchanges.type === '__autocomplete_mouseup__' ||\r\n\t\t\tchanges.type === '__autocomplete_keydown_enter__' ||\r\n\t\t\tchanges.type === '__autocomplete_click_item__'\r\n\t\t) {\r\n\t\t\t// when:\r\n\t\t\t//\r\n\t\t\t//  1. the mouse the clicked outside of downshift\r\n\t\t\t//  2. enter is pressed on the keyboard\r\n\t\t\t//  3. an item is selected from the dropdown\r\n\t\t\t//\r\n\t\t\t// then we want to retain the input value that was originally typed in. by default downshift\r\n\t\t\t// will clear the input value, so we're overriding this behavior here.\r\n\t\t\treturn { ...changes, inputValue: state.inputValue };\r\n\t\t}\r\n\r\n\t\treturn changes;\r\n\t}\r\n\r\n\t/** Called when an item has been selected from the autocomplete results. */\r\n\tfunction handleItemChange(item: Suggestion, downshift: ControllerStateAndHelpers<Suggestion>) {\r\n\t\tif (!item) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst matchedStrategy = strategies.find(strategy => strategy.SuggestionType === item.SuggestionType);\r\n\t\tif (!matchedStrategy) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t(matchedStrategy as SuggestionStrategyMatch).SuggestionStrategy.handleItemChange(item, downshift);\r\n\t}\r\n\r\n\tfunction handleToString(item: Suggestion): string {\r\n\t\tif (!item) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\tconst matchedStrategy = strategies.find(strategy => strategy.SuggestionType === item.SuggestionType);\r\n\t\tif (!matchedStrategy) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\treturn (matchedStrategy as SuggestionStrategyMatch).SuggestionStrategy.toString(item);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<React.Suspense fallback={<div>{t('Loading')}...</div>}>\r\n\t\t\t<Downshift\r\n\t\t\t\tstateReducer={handleStateChange}\r\n\t\t\t\titemToString={(item: Suggestion) => handleToString(item)}\r\n\t\t\t\tonChange={handleItemChange}\r\n\t\t\t\tinitialInputValue={decodeURIComponent(initialValue || '')}\r\n\t\t\t\tinputValue={initialInput}\r\n\t\t\t>\r\n\t\t\t\t{(options: ControllerStateAndHelpers<Suggestion>) => {\r\n\t\t\t\t\tconst { isOpen, inputValue, getInputProps, openMenu, closeMenu } = options;\r\n\r\n\t\t\t\t\tconst showSuggestions = isOpen && inputValue && inputValue.length > 0;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"hawk__searchBox__searchInput\" aria-labelledby=\"autocomplete-search-box\">\r\n\t\t\t\t\t\t\t<div id=\"autocomplete-search-box\" className=\"hidden-label\">\r\n\t\t\t\t\t\t\t\tAutocomplete search box\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\t\t\t{...getInputProps({\r\n\t\t\t\t\t\t\t\t\tonKeyDown: event => {\r\n\t\t\t\t\t\t\t\t\t\tif (onSubmit) {\r\n\t\t\t\t\t\t\t\t\t\t\tonSubmit(event, options);\r\n\t\t\t\t\t\t\t\t\t\t\tcloseMenu();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\t\t\t// when the input is focused again, reopen the downshift menu\r\n\t\t\t\t\t\t\t\t\tonFocus: () => {\r\n\t\t\t\t\t\t\t\t\t\tif (inputValue && inputValue.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\topenMenu();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tonChange: event => {\r\n\t\t\t\t\t\t\t\t\t\tsetInitialInput(event.target.value);\r\n\t\t\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\t\t\tplaceholder: t('Enter a search term'),\r\n\t\t\t\t\t\t\t\t\t'aria-labelledby': 'autocomplete-search-box',\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t{showSuggestions ? (\r\n\t\t\t\t\t\t\t\t<SearchSuggestions\r\n\t\t\t\t\t\t\t\t\tquery={inputValue || ''}\r\n\t\t\t\t\t\t\t\t\tdownshift={options}\r\n\t\t\t\t\t\t\t\t\tonViewMatches={onViewMatches}\r\n\t\t\t\t\t\t\t\t\tSuggestionList={SuggestionList}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t}}\r\n\t\t\t</Downshift>\r\n\t\t</React.Suspense>\r\n\t);\r\n}\r\n\r\nexport default SearchBoxBase;\r\n"],"sourceRoot":""}